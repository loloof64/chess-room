var hy=Object.defineProperty;var fy=(t,e,n)=>e in t?hy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var kn=(t,e,n)=>(fy(t,typeof e!="symbol"?e+"":e,n),n);function HM(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Jh(t,e){const n=new Set(t.split(","));return e?r=>n.has(r.toLowerCase()):r=>n.has(r)}const ht={},oi=[],Ln=()=>{},dy=()=>!1,zl=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Zh=t=>t.startsWith("onUpdate:"),bt=Object.assign,ef=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},py=Object.prototype.hasOwnProperty,Qe=(t,e)=>py.call(t,e),ve=Array.isArray,ai=t=>ra(t)==="[object Map]",Li=t=>ra(t)==="[object Set]",Fd=t=>ra(t)==="[object Date]",Oe=t=>typeof t=="function",yt=t=>typeof t=="string",es=t=>typeof t=="symbol",it=t=>t!==null&&typeof t=="object",ig=t=>(it(t)||Oe(t))&&Oe(t.then)&&Oe(t.catch),og=Object.prototype.toString,ra=t=>og.call(t),my=t=>ra(t).slice(8,-1),ag=t=>ra(t)==="[object Object]",tf=t=>yt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,co=Jh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Wl=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},gy=/-(\w)/g,lr=Wl(t=>t.replace(gy,(e,n)=>n?n.toUpperCase():"")),_y=/\B([A-Z])/g,Ni=Wl(t=>t.replace(_y,"-$1").toLowerCase()),Hl=Wl(t=>t.charAt(0).toUpperCase()+t.slice(1)),Gc=Wl(t=>t?"on".concat(Hl(t)):""),ts=(t,e)=>!Object.is(t,e),Xa=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},ul=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},To=t=>{const e=parseFloat(t);return isNaN(e)?t:e},vy=t=>{const e=yt(t)?Number(t):NaN;return isNaN(e)?t:e};let $d;const lg=()=>$d||($d=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Gl(t){if(ve(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=yt(r)?Cy(r):Gl(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(yt(t)||it(t))return t}const yy=/;(?![^(]*\))/g,wy=/:([^]+)/,Ey=/\/\*[^]*?\*\//g;function Cy(t){const e={};return t.replace(Ey,"").split(yy).forEach(n=>{if(n){const r=n.split(wy);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function ut(t){let e="";if(yt(t))e=t;else if(ve(t))for(let n=0;n<t.length;n++){const r=ut(t[n]);r&&(e+=r+" ")}else if(it(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function by(t){if(!t)return null;let{class:e,style:n}=t;return e&&!yt(e)&&(t.class=ut(e)),n&&(t.style=Gl(n)),t}const Ty="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ky=Jh(Ty);function cg(t){return!!t||t===""}function Sy(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=sa(t[r],e[r]);return n}function sa(t,e){if(t===e)return!0;let n=Fd(t),r=Fd(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=es(t),r=es(e),n||r)return t===e;if(n=ve(t),r=ve(e),n||r)return n&&r?Sy(t,e):!1;if(n=it(t),r=it(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!sa(t[o],e[o]))return!1}}return String(t)===String(e)}function nf(t,e){return t.findIndex(n=>sa(n,e))}const pe=t=>yt(t)?t:t==null?"":ve(t)||it(t)&&(t.toString===og||!Oe(t.toString))?JSON.stringify(t,ug,2):String(t),ug=(t,e)=>e&&e.__v_isRef?ug(t,e.value):ai(e)?{["Map(".concat(e.size,")")]:[...e.entries()].reduce((n,[r,s],i)=>(n[qc(r,i)+" =>"]=s,n),{})}:Li(e)?{["Set(".concat(e.size,")")]:[...e.values()].map(n=>qc(n))}:es(e)?qc(e):it(e)&&!ve(e)&&!ag(e)?String(e):e,qc=(t,e="")=>{var n;return es(t)?"Symbol(".concat((n=t.description)!=null?n:e,")"):t};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let wn;class hg{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=wn,!e&&wn&&(this.index=(wn.scopes||(wn.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=wn;try{return wn=this,e()}finally{wn=n}}}on(){wn=this}off(){wn=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function rf(t){return new hg(t)}function Iy(t,e=wn){e&&e.active&&e.effects.push(t)}function sf(){return wn}function fg(t){wn&&wn.cleanups.push(t)}let Rs;class of{constructor(e,n,r,s){this.fn=e,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,Iy(this,s)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Us();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(Ay(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),js()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=Qr,n=Rs;try{return Qr=!0,Rs=this,this._runnings++,Bd(this),this.fn()}finally{Ud(this),this._runnings--,Rs=n,Qr=e}}stop(){var e;this.active&&(Bd(this),Ud(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function Ay(t){return t.value}function Bd(t){t._trackId++,t._depsLength=0}function Ud(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)dg(t.deps[e],t);t.deps.length=t._depsLength}}function dg(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let Qr=!0,ju=0;const pg=[];function Us(){pg.push(Qr),Qr=!1}function js(){const t=pg.pop();Qr=t===void 0?!0:t}function af(){ju++}function lf(){for(ju--;!ju&&zu.length;)zu.shift()()}function mg(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const r=t.deps[t._depsLength];r!==e?(r&&dg(r,t),t.deps[t._depsLength++]=e):t._depsLength++}}const zu=[];function gg(t,e,n){af();for(const r of t.keys()){let s;r._dirtyLevel<e&&(s!=null?s:s=t.get(r)===r._trackId)&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=e),r._shouldSchedule&&(s!=null?s:s=t.get(r)===r._trackId)&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&zu.push(r.scheduler)))}lf()}const _g=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},hl=new WeakMap,Ps=Symbol(""),Wu=Symbol("");function pn(t,e,n){if(Qr&&Rs){let r=hl.get(t);r||hl.set(t,r=new Map);let s=r.get(n);s||r.set(n,s=_g(()=>r.delete(n))),mg(Rs,s)}}function vr(t,e,n,r,s,i){const o=hl.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&ve(t)){const l=Number(r);o.forEach((c,u)=>{(u==="length"||!es(u)&&u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":ve(t)?tf(n)&&a.push(o.get("length")):(a.push(o.get(Ps)),ai(t)&&a.push(o.get(Wu)));break;case"delete":ve(t)||(a.push(o.get(Ps)),ai(t)&&a.push(o.get(Wu)));break;case"set":ai(t)&&a.push(o.get(Ps));break}af();for(const l of a)l&&gg(l,4);lf()}function Ry(t,e){var n;return(n=hl.get(t))==null?void 0:n.get(e)}const Py=Jh("__proto__,__v_isRef,__isVue"),vg=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(es)),jd=Ly();function Ly(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Ge(this);for(let i=0,o=this.length;i<o;i++)pn(r,"get",i+"");const s=r[e](...n);return s===-1||s===!1?r[e](...n.map(Ge)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Us(),af();const r=Ge(this)[e].apply(this,n);return lf(),js(),r}}),t}function Ny(t){const e=Ge(this);return pn(e,"has",t),e.hasOwnProperty(t)}class yg{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Hy:bg:i?Cg:Eg).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ve(e);if(!s){if(o&&Qe(jd,n))return Reflect.get(jd,n,r);if(n==="hasOwnProperty")return Ny}const a=Reflect.get(e,n,r);return(es(n)?vg.has(n):Py(n))||(s||pn(e,"get",n),i)?a:_t(a)?o&&tf(n)?a:a.value:it(a)?s?hf(a):ia(a):a}}class wg extends yg{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const l=mi(i);if(!fl(r)&&!mi(r)&&(i=Ge(i),r=Ge(r)),!ve(e)&&_t(i)&&!_t(r))return l?!1:(i.value=r,!0)}const o=ve(e)&&tf(n)?Number(n)<e.length:Qe(e,n),a=Reflect.set(e,n,r,s);return e===Ge(s)&&(o?ts(r,i)&&vr(e,"set",n,r):vr(e,"add",n,r)),a}deleteProperty(e,n){const r=Qe(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&vr(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!es(n)||!vg.has(n))&&pn(e,"has",n),r}ownKeys(e){return pn(e,"iterate",ve(e)?"length":Ps),Reflect.ownKeys(e)}}class My extends yg{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const xy=new wg,Oy=new My,Dy=new wg(!0),cf=t=>t,ql=t=>Reflect.getPrototypeOf(t);function Ra(t,e,n=!1,r=!1){t=t.__v_raw;const s=Ge(t),i=Ge(e);n||(ts(e,i)&&pn(s,"get",e),pn(s,"get",i));const{has:o}=ql(s),a=r?cf:n?df:ko;if(o.call(s,e))return a(t.get(e));if(o.call(s,i))return a(t.get(i));t!==s&&t.get(e)}function Pa(t,e=!1){const n=this.__v_raw,r=Ge(n),s=Ge(t);return e||(ts(t,s)&&pn(r,"has",t),pn(r,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function La(t,e=!1){return t=t.__v_raw,!e&&pn(Ge(t),"iterate",Ps),Reflect.get(t,"size",t)}function zd(t){t=Ge(t);const e=Ge(this);return ql(e).has.call(e,t)||(e.add(t),vr(e,"add",t,t)),this}function Wd(t,e){e=Ge(e);const n=Ge(this),{has:r,get:s}=ql(n);let i=r.call(n,t);i||(t=Ge(t),i=r.call(n,t));const o=s.call(n,t);return n.set(t,e),i?ts(e,o)&&vr(n,"set",t,e):vr(n,"add",t,e),this}function Hd(t){const e=Ge(this),{has:n,get:r}=ql(e);let s=n.call(e,t);s||(t=Ge(t),s=n.call(e,t)),r&&r.call(e,t);const i=e.delete(t);return s&&vr(e,"delete",t,void 0),i}function Gd(){const t=Ge(this),e=t.size!==0,n=t.clear();return e&&vr(t,"clear",void 0,void 0),n}function Na(t,e){return function(r,s){const i=this,o=i.__v_raw,a=Ge(o),l=e?cf:t?df:ko;return!t&&pn(a,"iterate",Ps),o.forEach((c,u)=>r.call(s,l(c),l(u),i))}}function Ma(t,e,n){return function(...r){const s=this.__v_raw,i=Ge(s),o=ai(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=s[t](...r),u=n?cf:e?df:ko;return!e&&pn(i,"iterate",l?Wu:Ps),{next(){const{value:f,done:h}=c.next();return h?{value:f,done:h}:{value:a?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function Ar(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Vy(){const t={get(i){return Ra(this,i)},get size(){return La(this)},has:Pa,add:zd,set:Wd,delete:Hd,clear:Gd,forEach:Na(!1,!1)},e={get(i){return Ra(this,i,!1,!0)},get size(){return La(this)},has:Pa,add:zd,set:Wd,delete:Hd,clear:Gd,forEach:Na(!1,!0)},n={get(i){return Ra(this,i,!0)},get size(){return La(this,!0)},has(i){return Pa.call(this,i,!0)},add:Ar("add"),set:Ar("set"),delete:Ar("delete"),clear:Ar("clear"),forEach:Na(!0,!1)},r={get(i){return Ra(this,i,!0,!0)},get size(){return La(this,!0)},has(i){return Pa.call(this,i,!0)},add:Ar("add"),set:Ar("set"),delete:Ar("delete"),clear:Ar("clear"),forEach:Na(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=Ma(i,!1,!1),n[i]=Ma(i,!0,!1),e[i]=Ma(i,!1,!0),r[i]=Ma(i,!0,!0)}),[t,n,e,r]}const[Fy,$y,By,Uy]=Vy();function uf(t,e){const n=e?t?Uy:By:t?$y:Fy;return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Qe(n,s)&&s in r?n:r,s,i)}const jy={get:uf(!1,!1)},zy={get:uf(!1,!0)},Wy={get:uf(!0,!1)},Eg=new WeakMap,Cg=new WeakMap,bg=new WeakMap,Hy=new WeakMap;function Gy(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function qy(t){return t.__v_skip||!Object.isExtensible(t)?0:Gy(my(t))}function ia(t){return mi(t)?t:ff(t,!1,xy,jy,Eg)}function Tg(t){return ff(t,!1,Dy,zy,Cg)}function hf(t){return ff(t,!0,Oy,Wy,bg)}function ff(t,e,n,r,s){if(!it(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=s.get(t);if(i)return i;const o=qy(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return s.set(t,a),a}function yr(t){return mi(t)?yr(t.__v_raw):!!(t&&t.__v_isReactive)}function mi(t){return!!(t&&t.__v_isReadonly)}function fl(t){return!!(t&&t.__v_isShallow)}function kg(t){return yr(t)||mi(t)}function Ge(t){const e=t&&t.__v_raw;return e?Ge(e):t}function Kl(t){return Object.isExtensible(t)&&ul(t,"__v_skip",!0),t}const ko=t=>it(t)?ia(t):t,df=t=>it(t)?hf(t):t;class Sg{constructor(e,n,r,s){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new of(()=>e(this._value),()=>Ja(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const e=Ge(this);return(!e._cacheable||e.effect.dirty)&&ts(e._value,e._value=e.effect.run())&&Ja(e,4),Ig(e),e.effect._dirtyLevel>=2&&Ja(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function Ky(t,e,n=!1){let r,s;const i=Oe(t);return i?(r=t,s=Ln):(r=t.get,s=t.set),new Sg(r,s,i||!s,n)}function Ig(t){var e;Qr&&Rs&&(t=Ge(t),mg(Rs,(e=t.dep)!=null?e:t.dep=_g(()=>t.dep=void 0,t instanceof Sg?t:void 0)))}function Ja(t,e=4,n){t=Ge(t);const r=t.dep;r&&gg(r,e)}function _t(t){return!!(t&&t.__v_isRef===!0)}function X(t){return Ag(t,!1)}function oa(t){return Ag(t,!0)}function Ag(t,e){return _t(t)?t:new Qy(t,e)}class Qy{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Ge(e),this._value=n?e:ko(e)}get value(){return Ig(this),this._value}set value(e){const n=this.__v_isShallow||fl(e)||mi(e);e=n?e:Ge(e),ts(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:ko(e),Ja(this,4))}}function $(t){return _t(t)?t.value:t}const Yy={get:(t,e,n)=>$(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return _t(s)&&!_t(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function Rg(t){return yr(t)?t:new Proxy(t,Yy)}function Xy(t){const e=ve(t)?new Array(t.length):{};for(const n in t)e[n]=Pg(t,n);return e}class Jy{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Ry(Ge(this._object),this._key)}}class Zy{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function e5(t,e,n){return _t(t)?t:Oe(t)?new Zy(t):it(t)&&arguments.length>1?Pg(t,e,n):X(t)}function Pg(t,e,n){const r=t[e];return _t(r)?r:new Jy(t,e,n)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Yr(t,e,n,r){try{return r?t(...r):t()}catch(s){Ql(s,e,n)}}function Nn(t,e,n,r){if(Oe(t)){const i=Yr(t,e,n,r);return i&&ig(i)&&i.catch(o=>{Ql(o,e,n)}),i}const s=[];for(let i=0;i<t.length;i++)s.push(Nn(t[i],e,n,r));return s}function Ql(t,e,n,r=!0){const s=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a="https://vuejs.org/error-reference/#runtime-".concat(n);for(;i;){const c=i.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,o,a)===!1)return}i=i.parent}const l=e.appContext.config.errorHandler;if(l){Yr(l,null,10,[t,o,a]);return}}t5(t,n,s,r)}function t5(t,e,n,r=!0){console.error(t)}let So=!1,Hu=!1;const Yt=[];let Zn=0;const li=[];let $r=null,Es=0;const Lg=Promise.resolve();let pf=null;function Mi(t){const e=pf||Lg;return t?e.then(this?t.bind(this):t):e}function n5(t){let e=Zn+1,n=Yt.length;for(;e<n;){const r=e+n>>>1,s=Yt[r],i=Io(s);i<t||i===t&&s.pre?e=r+1:n=r}return e}function mf(t){(!Yt.length||!Yt.includes(t,So&&t.allowRecurse?Zn+1:Zn))&&(t.id==null?Yt.push(t):Yt.splice(n5(t.id),0,t),Ng())}function Ng(){!So&&!Hu&&(Hu=!0,pf=Lg.then(xg))}function r5(t){const e=Yt.indexOf(t);e>Zn&&Yt.splice(e,1)}function s5(t){ve(t)?li.push(...t):(!$r||!$r.includes(t,t.allowRecurse?Es+1:Es))&&li.push(t),Ng()}function qd(t,e,n=So?Zn+1:0){for(;n<Yt.length;n++){const r=Yt[n];if(r&&r.pre){if(t&&r.id!==t.uid)continue;Yt.splice(n,1),n--,r()}}}function Mg(t){if(li.length){const e=[...new Set(li)].sort((n,r)=>Io(n)-Io(r));if(li.length=0,$r){$r.push(...e);return}for($r=e,Es=0;Es<$r.length;Es++)$r[Es]();$r=null,Es=0}}const Io=t=>t.id==null?1/0:t.id,i5=(t,e)=>{const n=Io(t)-Io(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function xg(t){Hu=!1,So=!0,Yt.sort(i5);try{for(Zn=0;Zn<Yt.length;Zn++){const e=Yt[Zn];e&&e.active!==!1&&Yr(e,null,14)}}finally{Zn=0,Yt.length=0,Mg(),So=!1,pf=null,(Yt.length||li.length)&&xg()}}function o5(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||ht;let s=n;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in r){const u="".concat(o==="modelValue"?"model":o,"Modifiers"),{number:f,trim:h}=r[u]||ht;h&&(s=n.map(m=>yt(m)?m.trim():m)),f&&(s=n.map(To))}let a,l=r[a=Gc(e)]||r[a=Gc(lr(e))];!l&&i&&(l=r[a=Gc(Ni(e))]),l&&Nn(l,t,6,s);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Nn(c,t,6,s)}}function Og(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!Oe(t)){const l=c=>{const u=Og(c,e,!0);u&&(a=!0,bt(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(it(t)&&r.set(t,null),null):(ve(i)?i.forEach(l=>o[l]=null):bt(o,i),it(t)&&r.set(t,o),o)}function Yl(t,e){return!t||!zl(e)?!1:(e=e.slice(2).replace(/Once$/,""),Qe(t,e[0].toLowerCase()+e.slice(1))||Qe(t,Ni(e))||Qe(t,e))}let Xt=null,Xl=null;function dl(t){const e=Xt;return Xt=t,Xl=t&&t.type.__scopeId||null,e}function Jl(t){Xl=t}function Zl(){Xl=null}function Dg(t,e=Xt,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&i0(-1);const i=dl(e);let o;try{o=t(...s)}finally{dl(i),r._d&&i0(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Kc(t){const{type:e,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:f,data:h,setupState:m,ctx:g,inheritAttrs:w}=t;let y,_;const E=dl(t);try{if(n.shapeFlag&4){const C=s||r,N=C;y=Jn(u.call(N,C,f,i,m,h,g)),_=l}else{const C=e;y=Jn(C.length>1?C(i,{attrs:l,slots:a,emit:c}):C(i,null)),_=e.props?l:a5(l)}}catch(C){fo.length=0,Ql(C,t,1),y=Re(jn)}let b=y;if(_&&w!==!1){const C=Object.keys(_),{shapeFlag:N}=b;C.length&&N&7&&(o&&C.some(Zh)&&(_=l5(_,o)),b=ns(b,_))}return n.dirs&&(b=ns(b),b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&(b.transition=n.transition),y=b,dl(E),y}const a5=t=>{let e;for(const n in t)(n==="class"||n==="style"||zl(n))&&((e||(e={}))[n]=t[n]);return e},l5=(t,e)=>{const n={};for(const r in t)(!Zh(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function c5(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Kd(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const h=u[f];if(o[h]!==r[h]&&!Yl(c,h))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Kd(r,o,c):!0:!!o;return!1}function Kd(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!Yl(n,i))return!0}return!1}function u5({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const gf="components";function pl(t,e){return Fg(gf,t,!0,e)||t}const Vg=Symbol.for("v-ndc");function h5(t){return yt(t)?Fg(gf,t,!1)||t:t||Vg}function Fg(t,e,n=!0,r=!1){const s=Xt||Dt;if(s){const i=s.type;if(t===gf){const a=n3(i,!1);if(a&&(a===e||a===lr(e)||a===Hl(lr(e))))return i}const o=Qd(s[t]||i[t],e)||Qd(s.appContext[t],e);return!o&&r?i:o}}function Qd(t,e){return t&&(t[e]||t[lr(e)]||t[Hl(lr(e))])}const f5=t=>t.__isSuspense;function d5(t,e){e&&e.pendingBranch?ve(t)?e.effects.push(...t):e.effects.push(t):s5(t)}const p5=Symbol.for("v-scx"),m5=()=>xn(p5);function g5(t,e){return _f(t,null,{flush:"post"})}const xa={};function Mn(t,e,n){return _f(t,e,n)}function _f(t,e,{immediate:n,deep:r,flush:s,once:i,onTrack:o,onTrigger:a}=ht){if(e&&i){const k=e;e=(...z)=>{k(...z),N()}}const l=Dt,c=k=>r===!0?k:Ts(k,r===!1?1:void 0);let u,f=!1,h=!1;if(_t(t)?(u=()=>t.value,f=fl(t)):yr(t)?(u=()=>c(t),f=!0):ve(t)?(h=!0,f=t.some(k=>yr(k)||fl(k)),u=()=>t.map(k=>{if(_t(k))return k.value;if(yr(k))return c(k);if(Oe(k))return Yr(k,l,2)})):Oe(t)?e?u=()=>Yr(t,l,2):u=()=>(m&&m(),Nn(t,l,3,[g])):u=Ln,e&&r){const k=u;u=()=>Ts(k())}let m,g=k=>{m=b.onStop=()=>{Yr(k,l,4),m=b.onStop=void 0}},w;if(sc)if(g=Ln,e?n&&Nn(e,l,3,[u(),h?[]:void 0,g]):u(),s==="sync"){const k=m5();w=k.__watcherHandles||(k.__watcherHandles=[])}else return Ln;let y=h?new Array(t.length).fill(xa):xa;const _=()=>{if(!(!b.active||!b.dirty))if(e){const k=b.run();(r||f||(h?k.some((z,L)=>ts(z,y[L])):ts(k,y)))&&(m&&m(),Nn(e,l,3,[k,y===xa?void 0:h&&y[0]===xa?[]:y,g]),y=k)}else b.run()};_.allowRecurse=!!e;let E;s==="sync"?E=_:s==="post"?E=()=>cn(_,l&&l.suspense):(_.pre=!0,l&&(_.id=l.uid),E=()=>mf(_));const b=new of(u,Ln,E),C=sf(),N=()=>{b.stop(),C&&ef(C.effects,b)};return e?n?_():y=b.run():s==="post"?cn(b.run.bind(b),l&&l.suspense):b.run(),w&&w.push(N),N}function _5(t,e,n){const r=this.proxy,s=yt(t)?t.includes(".")?$g(r,t):()=>r[t]:t.bind(r,r);let i;Oe(e)?i=e:(i=e.handler,n=e);const o=la(this),a=_f(s,i.bind(r),n);return o(),a}function $g(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function Ts(t,e,n=0,r){if(!it(t)||t.__v_skip)return t;if(e&&e>0){if(n>=e)return t;n++}if(r=r||new Set,r.has(t))return t;if(r.add(t),_t(t))Ts(t.value,e,n,r);else if(ve(t))for(let s=0;s<t.length;s++)Ts(t[s],e,n,r);else if(Li(t)||ai(t))t.forEach(s=>{Ts(s,e,n,r)});else if(ag(t))for(const s in t)Ts(t[s],e,n,r);return t}function Kn(t,e){if(Xt===null)return t;const n=ic(Xt)||Xt.proxy,r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,l=ht]=e[s];i&&(Oe(i)&&(i={mounted:i,updated:i}),i.deep&&Ts(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function ps(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(Us(),Nn(l,n,8,[t.el,a,t,e]),js())}}const Br=Symbol("_leaveCb"),Oa=Symbol("_enterCb");function Bg(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return fn(()=>{t.isMounted=!0}),Po(()=>{t.isUnmounting=!0}),t}const Sn=[Function,Array],Ug={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Sn,onEnter:Sn,onAfterEnter:Sn,onEnterCancelled:Sn,onBeforeLeave:Sn,onLeave:Sn,onAfterLeave:Sn,onLeaveCancelled:Sn,onBeforeAppear:Sn,onAppear:Sn,onAfterAppear:Sn,onAppearCancelled:Sn},v5={name:"BaseTransition",props:Ug,setup(t,{slots:e}){const n=Cr(),r=Bg();return()=>{const s=e.default&&vf(e.default(),!0);if(!s||!s.length)return;let i=s[0];if(s.length>1){for(const h of s)if(h.type!==jn){i=h;break}}const o=Ge(t),{mode:a}=o;if(r.isLeaving)return Qc(i);const l=Yd(i);if(!l)return Qc(i);const c=Ao(l,o,r,n);Ro(l,c);const u=n.subTree,f=u&&Yd(u);if(f&&f.type!==jn&&!Cs(l,f)){const h=Ao(f,o,r,n);if(Ro(f,h),a==="out-in")return r.isLeaving=!0,h.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},Qc(i);a==="in-out"&&l.type!==jn&&(h.delayLeave=(m,g,w)=>{const y=jg(r,f);y[String(f.key)]=f,m[Br]=()=>{g(),m[Br]=void 0,delete c.delayedLeave},c.delayedLeave=w})}return i}}},y5=v5;function jg(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Ao(t,e,n,r){const{appear:s,mode:i,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:f,onLeave:h,onAfterLeave:m,onLeaveCancelled:g,onBeforeAppear:w,onAppear:y,onAfterAppear:_,onAppearCancelled:E}=e,b=String(t.key),C=jg(n,t),N=(L,P)=>{L&&Nn(L,r,9,P)},k=(L,P)=>{const x=P[1];N(L,P),ve(L)?L.every(D=>D.length<=1)&&x():L.length<=1&&x()},z={mode:i,persisted:o,beforeEnter(L){let P=a;if(!n.isMounted)if(s)P=w||a;else return;L[Br]&&L[Br](!0);const x=C[b];x&&Cs(t,x)&&x.el[Br]&&x.el[Br](),N(P,[L])},enter(L){let P=l,x=c,D=u;if(!n.isMounted)if(s)P=y||l,x=_||c,D=E||u;else return;let S=!1;const G=L[Oa]=ue=>{S||(S=!0,ue?N(D,[L]):N(x,[L]),z.delayedLeave&&z.delayedLeave(),L[Oa]=void 0)};P?k(P,[L,G]):G()},leave(L,P){const x=String(t.key);if(L[Oa]&&L[Oa](!0),n.isUnmounting)return P();N(f,[L]);let D=!1;const S=L[Br]=G=>{D||(D=!0,P(),G?N(g,[L]):N(m,[L]),L[Br]=void 0,C[x]===t&&delete C[x])};C[x]=t,h?k(h,[L,S]):S()},clone(L){return Ao(L,e,n,r)}};return z}function Qc(t){if(ec(t))return t=ns(t),t.children=null,t}function Yd(t){return ec(t)?t.children?t.children[0]:void 0:t}function Ro(t,e){t.shapeFlag&6&&t.component?Ro(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function vf(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===We?(o.patchFlag&128&&s++,r=r.concat(vf(o.children,e,a))):(e||o.type!==jn)&&r.push(a!=null?ns(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function ke(t,e){return Oe(t)?bt({name:t.name},e,{setup:t}):t}const Za=t=>!!t.type.__asyncLoader,ec=t=>t.type.__isKeepAlive;function w5(t,e){zg(t,"a",e)}function E5(t,e){zg(t,"da",e)}function zg(t,e,n=Dt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(tc(e,r,n),n){let s=n.parent;for(;s&&s.parent;)ec(s.parent.vnode)&&C5(r,e,n,s),s=s.parent}}function C5(t,e,n,r){const s=tc(e,t,r,!0);nc(()=>{ef(r[e],s)},n)}function tc(t,e,n=Dt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;Us();const a=la(n),l=Nn(e,n,t,o);return a(),js(),l});return r?s.unshift(i):s.push(i),i}}const Sr=t=>(e,n=Dt)=>(!sc||t==="sp")&&tc(t,(...r)=>e(...r),n),Wg=Sr("bm"),fn=Sr("m"),b5=Sr("bu"),yf=Sr("u"),Po=Sr("bum"),nc=Sr("um"),T5=Sr("sp"),k5=Sr("rtg"),S5=Sr("rtc");function I5(t,e=Dt){tc("ec",t,e)}function tr(t,e,n,r){let s;const i=n&&n[r];if(ve(t)||yt(t)){s=new Array(t.length);for(let o=0,a=t.length;o<a;o++)s[o]=e(t[o],o,void 0,i&&i[o])}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,i&&i[o])}else if(it(t))if(t[Symbol.iterator])s=Array.from(t,(o,a)=>e(o,a,void 0,i&&i[a]));else{const o=Object.keys(t);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];s[a]=e(t[c],c,a,i&&i[a])}}else s=[];return n&&(n[r]=s),s}const Gu=t=>t?s1(t)?ic(t)||t.proxy:Gu(t.parent):null,uo=bt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Gu(t.parent),$root:t=>Gu(t.root),$emit:t=>t.emit,$options:t=>wf(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,mf(t.update)}),$nextTick:t=>t.n||(t.n=Mi.bind(t.proxy)),$watch:t=>_5.bind(t)}),Yc=(t,e)=>t!==ht&&!t.__isScriptSetup&&Qe(t,e),A5={get({_:t},e){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(Yc(r,e))return o[e]=1,r[e];if(s!==ht&&Qe(s,e))return o[e]=2,s[e];if((c=t.propsOptions[0])&&Qe(c,e))return o[e]=3,i[e];if(n!==ht&&Qe(n,e))return o[e]=4,n[e];qu&&(o[e]=0)}}const u=uo[e];let f,h;if(u)return e==="$attrs"&&pn(t,"get",e),u(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(n!==ht&&Qe(n,e))return o[e]=4,n[e];if(h=l.config.globalProperties,Qe(h,e))return h[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return Yc(s,e)?(s[e]=n,!0):r!==ht&&Qe(r,e)?(r[e]=n,!0):Qe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||t!==ht&&Qe(t,o)||Yc(e,o)||(a=i[0])&&Qe(a,o)||Qe(r,o)||Qe(uo,o)||Qe(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Qe(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Xd(t){return ve(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let qu=!0;function R5(t){const e=wf(t),n=t.proxy,r=t.ctx;qu=!1,e.beforeCreate&&Jd(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:f,mounted:h,beforeUpdate:m,updated:g,activated:w,deactivated:y,beforeDestroy:_,beforeUnmount:E,destroyed:b,unmounted:C,render:N,renderTracked:k,renderTriggered:z,errorCaptured:L,serverPrefetch:P,expose:x,inheritAttrs:D,components:S,directives:G,filters:ue}=e;if(c&&P5(c,r,null),o)for(const be in o){const we=o[be];Oe(we)&&(r[be]=we.bind(n))}if(s){const be=s.call(n,n);it(be)&&(t.data=ia(be))}if(qu=!0,i)for(const be in i){const we=i[be],Be=Oe(we)?we.bind(n,n):Oe(we.get)?we.get.bind(n,n):Ln,Ke=!Oe(we)&&Oe(we.set)?we.set.bind(n):Ln,ge=Y({get:Be,set:Ke});Object.defineProperty(r,be,{enumerable:!0,configurable:!0,get:()=>ge.value,set:Ue=>ge.value=Ue})}if(a)for(const be in a)Hg(a[be],r,n,be);if(l){const be=Oe(l)?l.call(n):l;Reflect.ownKeys(be).forEach(we=>{el(we,be[we])})}u&&Jd(u,t,"c");function de(be,we){ve(we)?we.forEach(Be=>be(Be.bind(n))):we&&be(we.bind(n))}if(de(Wg,f),de(fn,h),de(b5,m),de(yf,g),de(w5,w),de(E5,y),de(I5,L),de(S5,k),de(k5,z),de(Po,E),de(nc,C),de(T5,P),ve(x))if(x.length){const be=t.exposed||(t.exposed={});x.forEach(we=>{Object.defineProperty(be,we,{get:()=>n[we],set:Be=>n[we]=Be})})}else t.exposed||(t.exposed={});N&&t.render===Ln&&(t.render=N),D!=null&&(t.inheritAttrs=D),S&&(t.components=S),G&&(t.directives=G)}function P5(t,e,n=Ln){ve(t)&&(t=Ku(t));for(const r in t){const s=t[r];let i;it(s)?"default"in s?i=xn(s.from||r,s.default,!0):i=xn(s.from||r):i=xn(s),_t(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function Jd(t,e,n){Nn(ve(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Hg(t,e,n,r){const s=r.includes(".")?$g(n,r):()=>n[r];if(yt(t)){const i=e[t];Oe(i)&&Mn(s,i)}else if(Oe(t))Mn(s,t.bind(n));else if(it(t))if(ve(t))t.forEach(i=>Hg(i,e,n,r));else{const i=Oe(t.handler)?t.handler.bind(n):e[t.handler];Oe(i)&&Mn(s,i,t)}}function wf(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(c=>ml(l,c,o,!0)),ml(l,e,o)),it(e)&&i.set(e,l),l}function ml(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&ml(t,i,n,!0),s&&s.forEach(o=>ml(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=L5[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const L5={data:Zd,props:e0,emits:e0,methods:to,computed:to,beforeCreate:tn,created:tn,beforeMount:tn,mounted:tn,beforeUpdate:tn,updated:tn,beforeDestroy:tn,beforeUnmount:tn,destroyed:tn,unmounted:tn,activated:tn,deactivated:tn,errorCaptured:tn,serverPrefetch:tn,components:to,directives:to,watch:M5,provide:Zd,inject:N5};function Zd(t,e){return e?t?function(){return bt(Oe(t)?t.call(this,this):t,Oe(e)?e.call(this,this):e)}:e:t}function N5(t,e){return to(Ku(t),Ku(e))}function Ku(t){if(ve(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function tn(t,e){return t?[...new Set([].concat(t,e))]:e}function to(t,e){return t?bt(Object.create(null),t,e):e}function e0(t,e){return t?ve(t)&&ve(e)?[...new Set([...t,...e])]:bt(Object.create(null),Xd(t),Xd(e!=null?e:{})):e}function M5(t,e){if(!t)return e;if(!e)return t;const n=bt(Object.create(null),t);for(const r in e)n[r]=tn(t[r],e[r]);return n}function Gg(){return{app:null,config:{isNativeTag:dy,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let x5=0;function O5(t,e){return function(r,s=null){Oe(r)||(r=bt({},r)),s!=null&&!it(s)&&(s=null);const i=Gg(),o=new WeakSet;let a=!1;const l=i.app={_uid:x5++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:s3,get config(){return i.config},set config(c){},use(c,...u){return o.has(c)||(c&&Oe(c.install)?(o.add(c),c.install(l,...u)):Oe(c)&&(o.add(c),c(l,...u))),l},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),l},component(c,u){return u?(i.components[c]=u,l):i.components[c]},directive(c,u){return u?(i.directives[c]=u,l):i.directives[c]},mount(c,u,f){if(!a){const h=Re(r,s);return h.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),u&&e?e(h,c):t(h,c,f),a=!0,l._container=c,c.__vue_app__=l,ic(h.component)||h.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return i.provides[c]=u,l},runWithContext(c){const u=ci;ci=l;try{return c()}finally{ci=u}}};return l}}let ci=null;function el(t,e){if(Dt){let n=Dt.provides;const r=Dt.parent&&Dt.parent.provides;r===n&&(n=Dt.provides=Object.create(r)),n[t]=e}}function xn(t,e,n=!1){const r=Dt||Xt;if(r||ci){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:ci._context.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Oe(e)?e.call(r&&r.proxy):e}}function D5(){return!!(Dt||Xt||ci)}function V5(t,e,n,r=!1){const s={},i={};ul(i,rc,1),t.propsDefaults=Object.create(null),qg(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:Tg(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function F5(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=Ge(s),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let f=0;f<u.length;f++){let h=u[f];if(Yl(t.emitsOptions,h))continue;const m=e[h];if(l)if(Qe(i,h))m!==i[h]&&(i[h]=m,c=!0);else{const g=lr(h);s[g]=Qu(l,a,g,m,t,!1)}else m!==i[h]&&(i[h]=m,c=!0)}}}else{qg(t,e,s,i)&&(c=!0);let u;for(const f in a)(!e||!Qe(e,f)&&((u=Ni(f))===f||!Qe(e,u)))&&(l?n&&(n[f]!==void 0||n[u]!==void 0)&&(s[f]=Qu(l,a,f,void 0,t,!0)):delete s[f]);if(i!==a)for(const f in i)(!e||!Qe(e,f))&&(delete i[f],c=!0)}c&&vr(t,"set","$attrs")}function qg(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(co(l))continue;const c=e[l];let u;s&&Qe(s,u=lr(l))?!i||!i.includes(u)?n[u]=c:(a||(a={}))[u]=c:Yl(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(i){const l=Ge(n),c=a||ht;for(let u=0;u<i.length;u++){const f=i[u];n[f]=Qu(s,l,f,c[f],t,!Qe(c,f))}}return o}function Qu(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=Qe(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Oe(l)){const{propsDefaults:c}=s;if(n in c)r=c[n];else{const u=la(s);r=c[n]=l.call(null,e),u()}}else r=l}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Ni(n))&&(r=!0))}return r}function Kg(t,e,n=!1){const r=e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let l=!1;if(!Oe(t)){const u=f=>{l=!0;const[h,m]=Kg(f,e,!0);bt(o,h),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return it(t)&&r.set(t,oi),oi;if(ve(i))for(let u=0;u<i.length;u++){const f=lr(i[u]);t0(f)&&(o[f]=ht)}else if(i)for(const u in i){const f=lr(u);if(t0(f)){const h=i[u],m=o[f]=ve(h)||Oe(h)?{type:h}:bt({},h);if(m){const g=s0(Boolean,m.type),w=s0(String,m.type);m[0]=g>-1,m[1]=w<0||g<w,(g>-1||Qe(m,"default"))&&a.push(f)}}}const c=[o,a];return it(t)&&r.set(t,c),c}function t0(t){return t[0]!=="$"&&!co(t)}function n0(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function r0(t,e){return n0(t)===n0(e)}function s0(t,e){return ve(e)?e.findIndex(n=>r0(n,t)):Oe(e)&&r0(e,t)?0:-1}const Qg=t=>t[0]==="_"||t==="$stable",Ef=t=>ve(t)?t.map(Jn):[Jn(t)],$5=(t,e,n)=>{if(e._n)return e;const r=Dg((...s)=>Ef(e(...s)),n);return r._c=!1,r},Yg=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Qg(s))continue;const i=t[s];if(Oe(i))e[s]=$5(s,i,r);else if(i!=null){const o=Ef(i);e[s]=()=>o}}},Xg=(t,e)=>{const n=Ef(e);t.slots.default=()=>n},B5=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Ge(e),ul(e,"_",n)):Yg(e,t.slots={})}else t.slots={},e&&Xg(t,e);ul(t.slots,rc,1)},U5=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=ht;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:(bt(s,e),!n&&a===1&&delete s._):(i=!e.$stable,Yg(e,s)),o=e}else e&&(Xg(t,e),o={default:1});if(i)for(const a in s)!Qg(a)&&o[a]==null&&delete s[a]};function Yu(t,e,n,r,s=!1){if(ve(t)){t.forEach((h,m)=>Yu(h,e&&(ve(e)?e[m]:e),n,r,s));return}if(Za(r)&&!s)return;const i=r.shapeFlag&4?ic(r.component)||r.component.proxy:r.el,o=s?null:i,{i:a,r:l}=t,c=e&&e.r,u=a.refs===ht?a.refs={}:a.refs,f=a.setupState;if(c!=null&&c!==l&&(yt(c)?(u[c]=null,Qe(f,c)&&(f[c]=null)):_t(c)&&(c.value=null)),Oe(l))Yr(l,a,12,[o,u]);else{const h=yt(l),m=_t(l);if(h||m){const g=()=>{if(t.f){const w=h?Qe(f,l)?f[l]:u[l]:l.value;s?ve(w)&&ef(w,i):ve(w)?w.includes(i)||w.push(i):h?(u[l]=[i],Qe(f,l)&&(f[l]=u[l])):(l.value=[i],t.k&&(u[t.k]=l.value))}else h?(u[l]=o,Qe(f,l)&&(f[l]=o)):m&&(l.value=o,t.k&&(u[t.k]=o))};o?(g.id=-1,cn(g,n)):g()}}}const cn=d5;function j5(t){return z5(t)}function z5(t,e){const n=lg();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:h,setScopeId:m=Ln,insertStaticContent:g}=t,w=(p,d,v,T=null,A=null,j=null,Z=void 0,O=null,V=!!d.dynamicChildren)=>{if(p===d)return;p&&!Cs(p,d)&&(T=U(p),Ue(p,A,j,!0),p=null),d.patchFlag===-2&&(V=!1,d.dynamicChildren=null);const{type:F,ref:W,shapeFlag:J}=d;switch(F){case aa:y(p,d,v,T);break;case jn:_(p,d,v,T);break;case ho:p==null&&E(d,v,T,Z);break;case We:S(p,d,v,T,A,j,Z,O,V);break;default:J&1?N(p,d,v,T,A,j,Z,O,V):J&6?G(p,d,v,T,A,j,Z,O,V):(J&64||J&128)&&F.process(p,d,v,T,A,j,Z,O,V,se)}W!=null&&A&&Yu(W,p&&p.ref,j,d||p,!d)},y=(p,d,v,T)=>{if(p==null)r(d.el=a(d.children),v,T);else{const A=d.el=p.el;d.children!==p.children&&c(A,d.children)}},_=(p,d,v,T)=>{p==null?r(d.el=l(d.children||""),v,T):d.el=p.el},E=(p,d,v,T)=>{[p.el,p.anchor]=g(p.children,d,v,T,p.el,p.anchor)},b=({el:p,anchor:d},v,T)=>{let A;for(;p&&p!==d;)A=h(p),r(p,v,T),p=A;r(d,v,T)},C=({el:p,anchor:d})=>{let v;for(;p&&p!==d;)v=h(p),s(p),p=v;s(d)},N=(p,d,v,T,A,j,Z,O,V)=>{d.type==="svg"?Z="svg":d.type==="math"&&(Z="mathml"),p==null?k(d,v,T,A,j,Z,O,V):P(p,d,A,j,Z,O,V)},k=(p,d,v,T,A,j,Z,O)=>{let V,F;const{props:W,shapeFlag:J,transition:Q,dirs:I}=p;if(V=p.el=o(p.type,j,W&&W.is,W),J&8?u(V,p.children):J&16&&L(p.children,V,null,T,A,Xc(p,j),Z,O),I&&ps(p,null,T,"created"),z(V,p,p.scopeId,Z,T),W){for(const ae in W)ae!=="value"&&!co(ae)&&i(V,ae,null,W[ae],j,p.children,T,A,_e);"value"in W&&i(V,"value",null,W.value,j),(F=W.onVnodeBeforeMount)&&Qn(F,T,p)}I&&ps(p,null,T,"beforeMount");const B=W5(A,Q);B&&Q.beforeEnter(V),r(V,d,v),((F=W&&W.onVnodeMounted)||B||I)&&cn(()=>{F&&Qn(F,T,p),B&&Q.enter(V),I&&ps(p,null,T,"mounted")},A)},z=(p,d,v,T,A)=>{if(v&&m(p,v),T)for(let j=0;j<T.length;j++)m(p,T[j]);if(A){let j=A.subTree;if(d===j){const Z=A.vnode;z(p,Z,Z.scopeId,Z.slotScopeIds,A.parent)}}},L=(p,d,v,T,A,j,Z,O,V=0)=>{for(let F=V;F<p.length;F++){const W=p[F]=O?Ur(p[F]):Jn(p[F]);w(null,W,d,v,T,A,j,Z,O)}},P=(p,d,v,T,A,j,Z)=>{const O=d.el=p.el;let{patchFlag:V,dynamicChildren:F,dirs:W}=d;V|=p.patchFlag&16;const J=p.props||ht,Q=d.props||ht;let I;if(v&&ms(v,!1),(I=Q.onVnodeBeforeUpdate)&&Qn(I,v,d,p),W&&ps(d,p,v,"beforeUpdate"),v&&ms(v,!0),F?x(p.dynamicChildren,F,O,v,T,Xc(d,A),j):Z||we(p,d,O,null,v,T,Xc(d,A),j,!1),V>0){if(V&16)D(O,d,J,Q,v,T,A);else if(V&2&&J.class!==Q.class&&i(O,"class",null,Q.class,A),V&4&&i(O,"style",J.style,Q.style,A),V&8){const B=d.dynamicProps;for(let ae=0;ae<B.length;ae++){const me=B[ae],Ve=J[me],Je=Q[me];(Je!==Ve||me==="value")&&i(O,me,Ve,Je,A,p.children,v,T,_e)}}V&1&&p.children!==d.children&&u(O,d.children)}else!Z&&F==null&&D(O,d,J,Q,v,T,A);((I=Q.onVnodeUpdated)||W)&&cn(()=>{I&&Qn(I,v,d,p),W&&ps(d,p,v,"updated")},T)},x=(p,d,v,T,A,j,Z)=>{for(let O=0;O<d.length;O++){const V=p[O],F=d[O],W=V.el&&(V.type===We||!Cs(V,F)||V.shapeFlag&70)?f(V.el):v;w(V,F,W,null,T,A,j,Z,!0)}},D=(p,d,v,T,A,j,Z)=>{if(v!==T){if(v!==ht)for(const O in v)!co(O)&&!(O in T)&&i(p,O,v[O],null,Z,d.children,A,j,_e);for(const O in T){if(co(O))continue;const V=T[O],F=v[O];V!==F&&O!=="value"&&i(p,O,F,V,Z,d.children,A,j,_e)}"value"in T&&i(p,"value",v.value,T.value,Z)}},S=(p,d,v,T,A,j,Z,O,V)=>{const F=d.el=p?p.el:a(""),W=d.anchor=p?p.anchor:a("");let{patchFlag:J,dynamicChildren:Q,slotScopeIds:I}=d;I&&(O=O?O.concat(I):I),p==null?(r(F,v,T),r(W,v,T),L(d.children||[],v,W,A,j,Z,O,V)):J>0&&J&64&&Q&&p.dynamicChildren?(x(p.dynamicChildren,Q,v,A,j,Z,O),(d.key!=null||A&&d===A.subTree)&&Jg(p,d,!0)):we(p,d,v,W,A,j,Z,O,V)},G=(p,d,v,T,A,j,Z,O,V)=>{d.slotScopeIds=O,p==null?d.shapeFlag&512?A.ctx.activate(d,v,T,Z,V):ue(d,v,T,A,j,Z,V):ye(p,d,V)},ue=(p,d,v,T,A,j,Z)=>{const O=p.component=X5(p,T,A);if(ec(p)&&(O.ctx.renderer=se),J5(O),O.asyncDep){if(A&&A.registerDep(O,de),!p.el){const V=O.subTree=Re(jn);_(null,V,d,v)}}else de(O,p,d,v,A,j,Z)},ye=(p,d,v)=>{const T=d.component=p.component;if(c5(p,d,v))if(T.asyncDep&&!T.asyncResolved){be(T,d,v);return}else T.next=d,r5(T.update),T.effect.dirty=!0,T.update();else d.el=p.el,T.vnode=d},de=(p,d,v,T,A,j,Z)=>{const O=()=>{if(p.isMounted){let{next:W,bu:J,u:Q,parent:I,vnode:B}=p;{const mt=Zg(p);if(mt){W&&(W.el=B.el,be(p,W,Z)),mt.asyncDep.then(()=>{p.isUnmounted||O()});return}}let ae=W,me;ms(p,!1),W?(W.el=B.el,be(p,W,Z)):W=B,J&&Xa(J),(me=W.props&&W.props.onVnodeBeforeUpdate)&&Qn(me,I,W,B),ms(p,!0);const Ve=Kc(p),Je=p.subTree;p.subTree=Ve,w(Je,Ve,f(Je.el),U(Je),p,A,j),W.el=Ve.el,ae===null&&u5(p,Ve.el),Q&&cn(Q,A),(me=W.props&&W.props.onVnodeUpdated)&&cn(()=>Qn(me,I,W,B),A)}else{let W;const{el:J,props:Q}=d,{bm:I,m:B,parent:ae}=p,me=Za(d);if(ms(p,!1),I&&Xa(I),!me&&(W=Q&&Q.onVnodeBeforeMount)&&Qn(W,ae,d),ms(p,!0),J&&ze){const Ve=()=>{p.subTree=Kc(p),ze(J,p.subTree,p,A,null)};me?d.type.__asyncLoader().then(()=>!p.isUnmounted&&Ve()):Ve()}else{const Ve=p.subTree=Kc(p);w(null,Ve,v,T,p,A,j),d.el=Ve.el}if(B&&cn(B,A),!me&&(W=Q&&Q.onVnodeMounted)){const Ve=d;cn(()=>Qn(W,ae,Ve),A)}(d.shapeFlag&256||ae&&Za(ae.vnode)&&ae.vnode.shapeFlag&256)&&p.a&&cn(p.a,A),p.isMounted=!0,d=v=T=null}},V=p.effect=new of(O,Ln,()=>mf(F),p.scope),F=p.update=()=>{V.dirty&&V.run()};F.id=p.uid,ms(p,!0),F()},be=(p,d,v)=>{d.component=p;const T=p.vnode.props;p.vnode=d,p.next=null,F5(p,d.props,T,v),U5(p,d.children,v),Us(),qd(p),js()},we=(p,d,v,T,A,j,Z,O,V=!1)=>{const F=p&&p.children,W=p?p.shapeFlag:0,J=d.children,{patchFlag:Q,shapeFlag:I}=d;if(Q>0){if(Q&128){Ke(F,J,v,T,A,j,Z,O,V);return}else if(Q&256){Be(F,J,v,T,A,j,Z,O,V);return}}I&8?(W&16&&_e(F,A,j),J!==F&&u(v,J)):W&16?I&16?Ke(F,J,v,T,A,j,Z,O,V):_e(F,A,j,!0):(W&8&&u(v,""),I&16&&L(J,v,T,A,j,Z,O,V))},Be=(p,d,v,T,A,j,Z,O,V)=>{p=p||oi,d=d||oi;const F=p.length,W=d.length,J=Math.min(F,W);let Q;for(Q=0;Q<J;Q++){const I=d[Q]=V?Ur(d[Q]):Jn(d[Q]);w(p[Q],I,v,null,A,j,Z,O,V)}F>W?_e(p,A,j,!0,!1,J):L(d,v,T,A,j,Z,O,V,J)},Ke=(p,d,v,T,A,j,Z,O,V)=>{let F=0;const W=d.length;let J=p.length-1,Q=W-1;for(;F<=J&&F<=Q;){const I=p[F],B=d[F]=V?Ur(d[F]):Jn(d[F]);if(Cs(I,B))w(I,B,v,null,A,j,Z,O,V);else break;F++}for(;F<=J&&F<=Q;){const I=p[J],B=d[Q]=V?Ur(d[Q]):Jn(d[Q]);if(Cs(I,B))w(I,B,v,null,A,j,Z,O,V);else break;J--,Q--}if(F>J){if(F<=Q){const I=Q+1,B=I<W?d[I].el:T;for(;F<=Q;)w(null,d[F]=V?Ur(d[F]):Jn(d[F]),v,B,A,j,Z,O,V),F++}}else if(F>Q)for(;F<=J;)Ue(p[F],A,j,!0),F++;else{const I=F,B=F,ae=new Map;for(F=B;F<=Q;F++){const Tt=d[F]=V?Ur(d[F]):Jn(d[F]);Tt.key!=null&&ae.set(Tt.key,F)}let me,Ve=0;const Je=Q-B+1;let mt=!1,Dn=0;const gt=new Array(Je);for(F=0;F<Je;F++)gt[F]=0;for(F=I;F<=J;F++){const Tt=p[F];if(Ve>=Je){Ue(Tt,A,j,!0);continue}let Tn;if(Tt.key!=null)Tn=ae.get(Tt.key);else for(me=B;me<=Q;me++)if(gt[me-B]===0&&Cs(Tt,d[me])){Tn=me;break}Tn===void 0?Ue(Tt,A,j,!0):(gt[Tn-B]=F+1,Tn>=Dn?Dn=Tn:mt=!0,w(Tt,d[Tn],v,null,A,j,Z,O,V),Ve++)}const Vn=mt?H5(gt):oi;for(me=Vn.length-1,F=Je-1;F>=0;F--){const Tt=B+F,Tn=d[Tt],Ia=Tt+1<W?d[Tt+1].el:T;gt[F]===0?w(null,Tn,v,Ia,A,j,Z,O,V):mt&&(me<0||F!==Vn[me]?ge(Tn,v,Ia,2):me--)}}},ge=(p,d,v,T,A=null)=>{const{el:j,type:Z,transition:O,children:V,shapeFlag:F}=p;if(F&6){ge(p.component.subTree,d,v,T);return}if(F&128){p.suspense.move(d,v,T);return}if(F&64){Z.move(p,d,v,se);return}if(Z===We){r(j,d,v);for(let J=0;J<V.length;J++)ge(V[J],d,v,T);r(p.anchor,d,v);return}if(Z===ho){b(p,d,v);return}if(T!==2&&F&1&&O)if(T===0)O.beforeEnter(j),r(j,d,v),cn(()=>O.enter(j),A);else{const{leave:J,delayLeave:Q,afterLeave:I}=O,B=()=>r(j,d,v),ae=()=>{J(j,()=>{B(),I&&I()})};Q?Q(j,B,ae):ae()}else r(j,d,v)},Ue=(p,d,v,T=!1,A=!1)=>{const{type:j,props:Z,ref:O,children:V,dynamicChildren:F,shapeFlag:W,patchFlag:J,dirs:Q}=p;if(O!=null&&Yu(O,null,v,p,!0),W&256){d.ctx.deactivate(p);return}const I=W&1&&Q,B=!Za(p);let ae;if(B&&(ae=Z&&Z.onVnodeBeforeUnmount)&&Qn(ae,d,p),W&6)ot(p.component,v,T);else{if(W&128){p.suspense.unmount(v,T);return}I&&ps(p,null,d,"beforeUnmount"),W&64?p.type.remove(p,d,v,A,se,T):F&&(j!==We||J>0&&J&64)?_e(F,d,v,!1,!0):(j===We&&J&384||!A&&W&16)&&_e(V,d,v),T&&le(p)}(B&&(ae=Z&&Z.onVnodeUnmounted)||I)&&cn(()=>{ae&&Qn(ae,d,p),I&&ps(p,null,d,"unmounted")},v)},le=p=>{const{type:d,el:v,anchor:T,transition:A}=p;if(d===We){st(v,T);return}if(d===ho){C(p);return}const j=()=>{s(v),A&&!A.persisted&&A.afterLeave&&A.afterLeave()};if(p.shapeFlag&1&&A&&!A.persisted){const{leave:Z,delayLeave:O}=A,V=()=>Z(v,j);O?O(p.el,j,V):V()}else j()},st=(p,d)=>{let v;for(;p!==d;)v=h(p),s(p),p=v;s(d)},ot=(p,d,v)=>{const{bum:T,scope:A,update:j,subTree:Z,um:O}=p;T&&Xa(T),A.stop(),j&&(j.active=!1,Ue(Z,p,d,v)),O&&cn(O,d),cn(()=>{p.isUnmounted=!0},d),d&&d.pendingBranch&&!d.isUnmounted&&p.asyncDep&&!p.asyncResolved&&p.suspenseId===d.pendingId&&(d.deps--,d.deps===0&&d.resolve())},_e=(p,d,v,T=!1,A=!1,j=0)=>{for(let Z=j;Z<p.length;Z++)Ue(p[Z],d,v,T,A)},U=p=>p.shapeFlag&6?U(p.component.subTree):p.shapeFlag&128?p.suspense.next():h(p.anchor||p.el);let te=!1;const ee=(p,d,v)=>{p==null?d._vnode&&Ue(d._vnode,null,null,!0):w(d._vnode||null,p,d,null,null,null,v),te||(te=!0,qd(),Mg(),te=!1),d._vnode=p},se={p:w,um:Ue,m:ge,r:le,mt:ue,mc:L,pc:we,pbc:x,n:U,o:t};let Ne,ze;return e&&([Ne,ze]=e(se)),{render:ee,hydrate:Ne,createApp:O5(ee,Ne)}}function Xc({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function ms({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function W5(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Jg(t,e,n=!1){const r=t.children,s=e.children;if(ve(r)&&ve(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Ur(s[i]),a.el=o.el),n||Jg(o,a)),a.type===aa&&(a.el=o.el)}}function H5(t){const e=t.slice(),n=[0];let r,s,i,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(s=n[n.length-1],t[s]<c){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<c?i=a+1:o=a;c<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Zg(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Zg(e)}const G5=t=>t.__isTeleport,We=Symbol.for("v-fgt"),aa=Symbol.for("v-txt"),jn=Symbol.for("v-cmt"),ho=Symbol.for("v-stc"),fo=[];let Bn=null;function M(t=!1){fo.push(Bn=t?null:[])}function q5(){fo.pop(),Bn=fo[fo.length-1]||null}let Lo=1;function i0(t){Lo+=t}function e1(t){return t.dynamicChildren=Lo>0?Bn||oi:null,q5(),Lo>0&&Bn&&Bn.push(t),t}function H(t,e,n,r,s,i){return e1(R(t,e,n,r,s,i,!0))}function Ce(t,e,n,r,s){return e1(Re(t,e,n,r,s,!0))}function gl(t){return t?t.__v_isVNode===!0:!1}function Cs(t,e){return t.type===e.type&&t.key===e.key}const rc="__vInternal",t1=({key:t})=>t!=null?t:null,tl=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?yt(t)||_t(t)||Oe(t)?{i:Xt,r:t,k:e,f:!!n}:t:null);function R(t,e=null,n=null,r=0,s=null,i=t===We?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&t1(e),ref:e&&tl(e),scopeId:Xl,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Xt};return a?(Cf(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=yt(n)?8:16),Lo>0&&!o&&Bn&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Bn.push(l),l}const Re=K5;function K5(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===Vg)&&(t=jn),gl(t)){const a=ns(t,e,!0);return n&&Cf(a,n),Lo>0&&!i&&Bn&&(a.shapeFlag&6?Bn[Bn.indexOf(t)]=a:Bn.push(a)),a.patchFlag|=-2,a}if(r3(t)&&(t=t.__vccOpts),e){e=n1(e);let{class:a,style:l}=e;a&&!yt(a)&&(e.class=ut(a)),it(l)&&(kg(l)&&!ve(l)&&(l=bt({},l)),e.style=Gl(l))}const o=yt(t)?1:f5(t)?128:G5(t)?64:it(t)?4:Oe(t)?2:0;return R(t,e,n,r,s,o,i,!0)}function n1(t){return t?kg(t)||rc in t?bt({},t):t:null}function ns(t,e,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=t,a=e?r1(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&t1(a),ref:e&&e.ref?n&&s?ve(s)?s.concat(tl(e)):[s,tl(e)]:tl(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==We?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ns(t.ssContent),ssFallback:t.ssFallback&&ns(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function po(t=" ",e=0){return Re(aa,null,t,e)}function et(t,e){const n=Re(ho,null,t);return n.staticCount=e,n}function Ot(t="",e=!1){return e?(M(),Ce(jn,null,t)):Re(jn,null,t)}function Jn(t){return t==null||typeof t=="boolean"?Re(jn):ve(t)?Re(We,null,t.slice()):typeof t=="object"?Ur(t):Re(aa,null,String(t))}function Ur(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ns(t)}function Cf(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ve(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Cf(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!(rc in e)?e._ctx=Xt:s===3&&Xt&&(Xt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Oe(e)?(e={default:e,_ctx:Xt},n=32):(e=String(e),r&64?(n=16,e=[po(e)]):n=8);t.children=e,t.shapeFlag|=n}function r1(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=ut([e.class,r.class]));else if(s==="style")e.style=Gl([e.style,r.style]);else if(zl(s)){const i=e[s],o=r[s];o&&i!==o&&!(ve(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function Qn(t,e,n,r=null){Nn(t,e,7,[n,r])}const Q5=Gg();let Y5=0;function X5(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||Q5,i={uid:Y5++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new hg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Kg(r,s),emitsOptions:Og(r,s),emit:null,emitted:null,propsDefaults:ht,inheritAttrs:r.inheritAttrs,ctx:ht,data:ht,props:ht,attrs:ht,slots:ht,refs:ht,setupState:ht,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=o5.bind(null,i),t.ce&&t.ce(i),i}let Dt=null;const Cr=()=>Dt||Xt;let _l,Xu;{const t=lg(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};_l=e("__VUE_INSTANCE_SETTERS__",n=>Dt=n),Xu=e("__VUE_SSR_SETTERS__",n=>sc=n)}const la=t=>{const e=Dt;return _l(t),t.scope.on(),()=>{t.scope.off(),_l(e)}},o0=()=>{Dt&&Dt.scope.off(),_l(null)};function s1(t){return t.vnode.shapeFlag&4}let sc=!1;function J5(t,e=!1){e&&Xu(e);const{props:n,children:r}=t.vnode,s=s1(t);V5(t,n,s,e),B5(t,r);const i=s?Z5(t,e):void 0;return e&&Xu(!1),i}function Z5(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Kl(new Proxy(t.ctx,A5));const{setup:r}=n;if(r){const s=t.setupContext=r.length>1?t3(t):null,i=la(t);Us();const o=Yr(r,t,0,[t.props,s]);if(js(),i(),ig(o)){if(o.then(o0,o0),e)return o.then(a=>{a0(t,a,e)}).catch(a=>{Ql(a,t,0)});t.asyncDep=o}else a0(t,o,e)}else i1(t,e)}function a0(t,e,n){Oe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:it(e)&&(t.setupState=Rg(e)),i1(t,n)}let l0;function i1(t,e,n){const r=t.type;if(!t.render){if(!e&&l0&&!r.render){const s=r.template||wf(t).template;if(s){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=bt(bt({isCustomElement:i,delimiters:a},o),l);r.render=l0(s,c)}}t.render=r.render||Ln}{const s=la(t);Us();try{R5(t)}finally{js(),s()}}}function e3(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return pn(t,"get","$attrs"),e[n]}}))}function t3(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return e3(t)},slots:t.slots,emit:t.emit,expose:e}}function ic(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Rg(Kl(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in uo)return uo[n](t)},has(e,n){return n in e||n in uo}}))}function n3(t,e=!0){return Oe(t)?t.displayName||t.name:t.name||e&&t.__name}function r3(t){return Oe(t)&&"__vccOpts"in t}const Y=(t,e)=>Ky(t,e,sc);function ca(t,e,n){const r=arguments.length;return r===2?it(e)&&!ve(e)?gl(e)?Re(t,null,[e]):Re(t,e):Re(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&gl(n)&&(n=[n]),Re(t,e,n))}const s3="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const i3="http://www.w3.org/2000/svg",o3="http://www.w3.org/1998/Math/MathML",jr=typeof document<"u"?document:null,c0=jr&&jr.createElement("template"),a3={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?jr.createElementNS(i3,t):e==="mathml"?jr.createElementNS(o3,t):jr.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>jr.createTextNode(t),createComment:t=>jr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>jr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{c0.innerHTML=r==="svg"?"<svg>".concat(t,"</svg>"):r==="mathml"?"<math>".concat(t,"</math>"):t;const a=c0.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Rr="transition",Wi="animation",gi=Symbol("_vtc"),bf=(t,{slots:e})=>ca(y5,a1(t),e);bf.displayName="Transition";const o1={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},l3=bf.props=bt({},Ug,o1),gs=(t,e=[])=>{ve(t)?t.forEach(n=>n(...e)):t&&t(...e)},u0=t=>t?ve(t)?t.some(e=>e.length>1):t.length>1:!1;function a1(t){const e={};for(const S in t)S in o1||(e[S]=t[S]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i="".concat(n,"-enter-from"),enterActiveClass:o="".concat(n,"-enter-active"),enterToClass:a="".concat(n,"-enter-to"),appearFromClass:l=i,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:f="".concat(n,"-leave-from"),leaveActiveClass:h="".concat(n,"-leave-active"),leaveToClass:m="".concat(n,"-leave-to")}=t,g=c3(s),w=g&&g[0],y=g&&g[1],{onBeforeEnter:_,onEnter:E,onEnterCancelled:b,onLeave:C,onLeaveCancelled:N,onBeforeAppear:k=_,onAppear:z=E,onAppearCancelled:L=b}=e,P=(S,G,ue)=>{Vr(S,G?u:a),Vr(S,G?c:o),ue&&ue()},x=(S,G)=>{S._isLeaving=!1,Vr(S,f),Vr(S,m),Vr(S,h),G&&G()},D=S=>(G,ue)=>{const ye=S?z:E,de=()=>P(G,S,ue);gs(ye,[G,de]),h0(()=>{Vr(G,S?l:i),mr(G,S?u:a),u0(ye)||f0(G,r,w,de)})};return bt(e,{onBeforeEnter(S){gs(_,[S]),mr(S,i),mr(S,o)},onBeforeAppear(S){gs(k,[S]),mr(S,l),mr(S,c)},onEnter:D(!1),onAppear:D(!0),onLeave(S,G){S._isLeaving=!0;const ue=()=>x(S,G);mr(S,f),c1(),mr(S,h),h0(()=>{S._isLeaving&&(Vr(S,f),mr(S,m),u0(C)||f0(S,r,y,ue))}),gs(C,[S,ue])},onEnterCancelled(S){P(S,!1),gs(b,[S])},onAppearCancelled(S){P(S,!0),gs(L,[S])},onLeaveCancelled(S){x(S),gs(N,[S])}})}function c3(t){if(t==null)return null;if(it(t))return[Jc(t.enter),Jc(t.leave)];{const e=Jc(t);return[e,e]}}function Jc(t){return vy(t)}function mr(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[gi]||(t[gi]=new Set)).add(e)}function Vr(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[gi];n&&(n.delete(e),n.size||(t[gi]=void 0))}function h0(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let u3=0;function f0(t,e,n,r){const s=t._endId=++u3,i=()=>{s===t._endId&&r()};if(n)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=l1(t,e);if(!o)return r();const c=o+"end";let u=0;const f=()=>{t.removeEventListener(c,h),i()},h=m=>{m.target===t&&++u>=l&&f()};setTimeout(()=>{u<l&&f()},a+1),t.addEventListener(c,h)}function l1(t,e){const n=window.getComputedStyle(t),r=g=>(n[g]||"").split(", "),s=r("".concat(Rr,"Delay")),i=r("".concat(Rr,"Duration")),o=d0(s,i),a=r("".concat(Wi,"Delay")),l=r("".concat(Wi,"Duration")),c=d0(a,l);let u=null,f=0,h=0;e===Rr?o>0&&(u=Rr,f=o,h=i.length):e===Wi?c>0&&(u=Wi,f=c,h=l.length):(f=Math.max(o,c),u=f>0?o>c?Rr:Wi:null,h=u?u===Rr?i.length:l.length:0);const m=u===Rr&&/\b(transform|all)(,|$)/.test(r("".concat(Rr,"Property")).toString());return{type:u,timeout:f,propCount:h,hasTransform:m}}function d0(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>p0(n)+p0(t[r])))}function p0(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function c1(){return document.body.offsetHeight}function h3(t,e,n){const r=t[gi];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const m0=Symbol("_vod"),f3=Symbol("_vsh"),u1=Symbol("");function ua(t){const e=Cr();if(!e)return;const n=e.ut=(s=t(e.proxy))=>{Array.from(document.querySelectorAll('[data-v-owner="'.concat(e.uid,'"]'))).forEach(i=>Zu(i,s))},r=()=>{const s=t(e.proxy);Ju(e.subTree,s),n(s)};g5(r),fn(()=>{const s=new MutationObserver(r);s.observe(e.subTree.el.parentNode,{childList:!0}),nc(()=>s.disconnect())})}function Ju(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{Ju(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)Zu(t.el,e);else if(t.type===We)t.children.forEach(n=>Ju(n,e));else if(t.type===ho){let{el:n,anchor:r}=t;for(;n&&(Zu(n,e),n!==r);)n=n.nextSibling}}function Zu(t,e){if(t.nodeType===1){const n=t.style;let r="";for(const s in e)n.setProperty("--".concat(s),e[s]),r+="--".concat(s,": ").concat(e[s],";");n[u1]=r}}const d3=/(^|;)\s*display\s*:/;function p3(t,e,n){const r=t.style,s=yt(n);let i=!1;if(n&&!s){if(e)if(yt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&nl(r,a,"")}else for(const o in e)n[o]==null&&nl(r,o,"");for(const o in n)o==="display"&&(i=!0),nl(r,o,n[o])}else if(s){if(e!==n){const o=r[u1];o&&(n+=";"+o),r.cssText=n,i=d3.test(n)}}else e&&t.removeAttribute("style");m0 in t&&(t[m0]=i?r.display:"",t[f3]&&(r.display="none"))}const g0=/\s*!important$/;function nl(t,e,n){if(ve(n))n.forEach(r=>nl(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=m3(t,e);g0.test(n)?t.setProperty(Ni(r),n.replace(g0,""),"important"):t[r]=n}}const _0=["Webkit","Moz","ms"],Zc={};function m3(t,e){const n=Zc[e];if(n)return n;let r=lr(e);if(r!=="filter"&&r in t)return Zc[e]=r;r=Hl(r);for(let s=0;s<_0.length;s++){const i=_0[s]+r;if(i in t)return Zc[e]=i}return e}const v0="http://www.w3.org/1999/xlink";function g3(t,e,n,r,s){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(v0,e.slice(6,e.length)):t.setAttributeNS(v0,e,n);else{const i=ky(e);n==null||i&&!cg(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function _3(t,e,n,r,s,i,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,s,i),t[e]=n==null?"":n;return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const c=a==="OPTION"?t.getAttribute("value")||"":t.value,u=n==null?"":n;(c!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(e),t._value=n;return}let l=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=cg(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{t[e]=n}catch(c){}l&&t.removeAttribute(e)}function qr(t,e,n,r){t.addEventListener(e,n,r)}function v3(t,e,n,r){t.removeEventListener(e,n,r)}const y0=Symbol("_vei");function y3(t,e,n,r,s=null){const i=t[y0]||(t[y0]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=w3(e);if(r){const c=i[e]=b3(r,s);qr(t,a,c,l)}else o&&(v3(t,a,o,l),i[e]=void 0)}}const w0=/(?:Once|Passive|Capture)$/;function w3(t){let e;if(w0.test(t)){e={};let r;for(;r=t.match(w0);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ni(t.slice(2)),e]}let eu=0;const E3=Promise.resolve(),C3=()=>eu||(E3.then(()=>eu=0),eu=Date.now());function b3(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Nn(T3(r,n.value),e,5,[r])};return n.value=t,n.attached=C3(),n}function T3(t,e){if(ve(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const E0=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,k3=(t,e,n,r,s,i,o,a,l)=>{const c=s==="svg";e==="class"?h3(t,r,c):e==="style"?p3(t,n,r):zl(e)?Zh(e)||y3(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):S3(t,e,r,c))?_3(t,e,r,i,o,a,l):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),g3(t,e,r,c))};function S3(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&E0(e)&&Oe(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return E0(e)&&yt(n)?!1:e in t}const h1=new WeakMap,f1=new WeakMap,vl=Symbol("_moveCb"),C0=Symbol("_enterCb"),d1={name:"TransitionGroup",props:bt({},l3,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Cr(),r=Bg();let s,i;return yf(()=>{if(!s.length)return;const o=t.moveClass||"".concat(t.name||"v","-move");if(!L3(s[0].el,n.vnode.el,o))return;s.forEach(A3),s.forEach(R3);const a=s.filter(P3);c1(),a.forEach(l=>{const c=l.el,u=c.style;mr(c,o),u.transform=u.webkitTransform=u.transitionDuration="";const f=c[vl]=h=>{h&&h.target!==c||(!h||/transform$/.test(h.propertyName))&&(c.removeEventListener("transitionend",f),c[vl]=null,Vr(c,o))};c.addEventListener("transitionend",f)})}),()=>{const o=Ge(t),a=a1(o);let l=o.tag||We;s=i,i=e.default?vf(e.default()):[];for(let c=0;c<i.length;c++){const u=i[c];u.key!=null&&Ro(u,Ao(u,a,r,n))}if(s)for(let c=0;c<s.length;c++){const u=s[c];Ro(u,Ao(u,a,r,n)),h1.set(u,u.el.getBoundingClientRect())}return Re(l,null,i)}}},I3=t=>delete t.mode;d1.props;const p1=d1;function A3(t){const e=t.el;e[vl]&&e[vl](),e[C0]&&e[C0]()}function R3(t){f1.set(t,t.el.getBoundingClientRect())}function P3(t){const e=h1.get(t),n=f1.get(t),r=e.left-n.left,s=e.top-n.top;if(r||s){const i=t.el.style;return i.transform=i.webkitTransform="translate(".concat(r,"px,").concat(s,"px)"),i.transitionDuration="0s",t}}function L3(t,e,n){const r=t.cloneNode(),s=t[gi];s&&s.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(r);const{hasTransform:o}=l1(r);return i.removeChild(r),o}const _i=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ve(e)?n=>Xa(e,n):e};function N3(t){t.target.composing=!0}function b0(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const wr=Symbol("_assign"),Hi={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[wr]=_i(s);const i=r||s.props&&s.props.type==="number";qr(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=To(a)),t[wr](a)}),n&&qr(t,"change",()=>{t.value=t.value.trim()}),e||(qr(t,"compositionstart",N3),qr(t,"compositionend",b0),qr(t,"change",b0))},mounted(t,{value:e}){t.value=e==null?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:s}},i){if(t[wr]=_i(i),t.composing)return;const o=s||t.type==="number"?To(t.value):t.value,a=e==null?"":e;o!==a&&(document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===a)||(t.value=a))}},Da={deep:!0,created(t,e,n){t[wr]=_i(n),qr(t,"change",()=>{const r=t._modelValue,s=No(t),i=t.checked,o=t[wr];if(ve(r)){const a=nf(r,s),l=a!==-1;if(i&&!l)o(r.concat(s));else if(!i&&l){const c=[...r];c.splice(a,1),o(c)}}else if(Li(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o(m1(t,i))})},mounted:T0,beforeUpdate(t,e,n){t[wr]=_i(n),T0(t,e,n)}};function T0(t,{value:e,oldValue:n},r){t._modelValue=e,ve(e)?t.checked=nf(e,r.props.value)>-1:Li(e)?t.checked=e.has(r.props.value):e!==n&&(t.checked=sa(e,m1(t,!0)))}const M3={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=Li(e);qr(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?To(No(o)):No(o));t[wr](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,Mi(()=>{t._assigning=!1})}),t[wr]=_i(r)},mounted(t,{value:e,modifiers:{number:n}}){k0(t,e,n)},beforeUpdate(t,e,n){t[wr]=_i(n)},updated(t,{value:e,modifiers:{number:n}}){t._assigning||k0(t,e,n)}};function k0(t,e,n){const r=t.multiple,s=ve(e);if(!(r&&!s&&!Li(e))){for(let i=0,o=t.options.length;i<o;i++){const a=t.options[i],l=No(a);if(r)if(s){const c=typeof l;c==="string"||c==="number"?a.selected=e.includes(n?To(l):l):a.selected=nf(e,l)>-1}else a.selected=e.has(l);else if(sa(No(a),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!r&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function No(t){return"_value"in t?t._value:t.value}function m1(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const x3=bt({patchProp:k3},a3);let S0;function O3(){return S0||(S0=j5(x3))}const D3=(...t)=>{const e=O3().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=F3(r);if(!s)return;const i=e._component;!Oe(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,V3(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function V3(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function F3(t){return yt(t)?document.querySelector(t):t}/*!
  * vue-router v4.3.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Zs=typeof document<"u";function $3(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const nt=Object.assign;function tu(t,e){const n={};for(const r in e){const s=e[r];n[r]=zn(s)?s.map(t):t(s)}return n}const mo=()=>{},zn=Array.isArray,g1=/#/g,B3=/&/g,U3=/\//g,j3=/=/g,z3=/\?/g,_1=/\+/g,W3=/%5B/g,H3=/%5D/g,v1=/%5E/g,G3=/%60/g,y1=/%7B/g,q3=/%7C/g,w1=/%7D/g,K3=/%20/g;function Tf(t){return encodeURI(""+t).replace(q3,"|").replace(W3,"[").replace(H3,"]")}function Q3(t){return Tf(t).replace(y1,"{").replace(w1,"}").replace(v1,"^")}function eh(t){return Tf(t).replace(_1,"%2B").replace(K3,"+").replace(g1,"%23").replace(B3,"%26").replace(G3,"`").replace(y1,"{").replace(w1,"}").replace(v1,"^")}function Y3(t){return eh(t).replace(j3,"%3D")}function X3(t){return Tf(t).replace(g1,"%23").replace(z3,"%3F")}function J3(t){return t==null?"":X3(t).replace(U3,"%2F")}function Mo(t){try{return decodeURIComponent(""+t)}catch(e){}return""+t}const Z3=/\/$/,ew=t=>t.replace(Z3,"");function nu(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),s=t(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=sw(r!=null?r:e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:Mo(o)}}function tw(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function I0(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function nw(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&vi(e.matched[r],n.matched[s])&&E1(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function vi(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function E1(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!rw(t[n],e[n]))return!1;return!0}function rw(t,e){return zn(t)?A0(t,e):zn(e)?A0(e,t):t===e}function A0(t,e){return zn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function sw(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}var xo;(function(t){t.pop="pop",t.push="push"})(xo||(xo={}));var go;(function(t){t.back="back",t.forward="forward",t.unknown=""})(go||(go={}));function iw(t){if(!t)if(Zs){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),ew(t)}const ow=/^[^#]+#/;function aw(t,e){return t.replace(ow,"#")+e}function lw(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const oc=()=>({left:window.scrollX,top:window.scrollY});function cw(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=lw(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function R0(t,e){return(history.state?history.state.position-e:-1)+t}const th=new Map;function uw(t,e){th.set(t,e)}function hw(t){const e=th.get(t);return th.delete(t),e}let fw=()=>location.protocol+"//"+location.host;function C1(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),I0(l,"")}return I0(n,t)+r+s}function dw(t,e,n,r){let s=[],i=[],o=null;const a=({state:h})=>{const m=C1(t,location),g=n.value,w=e.value;let y=0;if(h){if(n.value=m,e.value=h,o&&o===g){o=null;return}y=w?h.position-w.position:0}else r(m);s.forEach(_=>{_(n.value,g,{delta:y,type:xo.pop,direction:y?y>0?go.forward:go.back:go.unknown})})};function l(){o=n.value}function c(h){s.push(h);const m=()=>{const g=s.indexOf(h);g>-1&&s.splice(g,1)};return i.push(m),m}function u(){const{history:h}=window;h.state&&h.replaceState(nt({},h.state,{scroll:oc()}),"")}function f(){for(const h of i)h();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:f}}function P0(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?oc():null}}function pw(t){const{history:e,location:n}=window,r={value:C1(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const f=t.indexOf("#"),h=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+l:fw()+t+l;try{e[u?"replaceState":"pushState"](c,"",h),s.value=c}catch(m){console.error(m),n[u?"replace":"assign"](h)}}function o(l,c){const u=nt({},e.state,P0(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});i(l,u,!0),r.value=l}function a(l,c){const u=nt({},s.value,e.state,{forward:l,scroll:oc()});i(u.current,u,!0);const f=nt({},P0(r.value,l,null),{position:u.position+1},c);i(l,f,!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function mw(t){t=iw(t);const e=pw(t),n=dw(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=nt({location:"",base:t,go:r,createHref:aw.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function gw(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),mw(t)}function _w(t){return typeof t=="string"||t&&typeof t=="object"}function b1(t){return typeof t=="string"||typeof t=="symbol"}const Pr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},T1=Symbol("");var L0;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(L0||(L0={}));function yi(t,e){return nt(new Error,{type:t,[T1]:!0},e)}function fr(t,e){return t instanceof Error&&T1 in t&&(e==null||!!(t.type&e))}const N0="[^/]+?",vw={sensitive:!1,strict:!1,start:!0,end:!0},yw=/[.+*?^${}()[\]/\\]/g;function ww(t,e){const n=nt({},vw,e),r=[];let s=n.start?"^":"";const i=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(s+="/");for(let f=0;f<c.length;f++){const h=c[f];let m=40+(n.sensitive?.25:0);if(h.type===0)f||(s+="/"),s+=h.value.replace(yw,"\\$&"),m+=40;else if(h.type===1){const{value:g,repeatable:w,optional:y,regexp:_}=h;i.push({name:g,repeatable:w,optional:y});const E=_||N0;if(E!==N0){m+=10;try{new RegExp("(".concat(E,")"))}catch(C){throw new Error('Invalid custom RegExp for param "'.concat(g,'" (').concat(E,"): ")+C.message)}}let b=w?"((?:".concat(E,")(?:/(?:").concat(E,"))*)"):"(".concat(E,")");f||(b=y&&c.length<2?"(?:/".concat(b,")"):"/"+b),y&&(b+="?"),s+=b,m+=20,y&&(m+=-8),w&&(m+=-20),E===".*"&&(m+=-50)}u.push(m)}r.push(u)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(c){const u=c.match(o),f={};if(!u)return null;for(let h=1;h<u.length;h++){const m=u[h]||"",g=i[h-1];f[g.name]=m&&g.repeatable?m.split("/"):m}return f}function l(c){let u="",f=!1;for(const h of t){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const m of h)if(m.type===0)u+=m.value;else if(m.type===1){const{value:g,repeatable:w,optional:y}=m,_=g in c?c[g]:"";if(zn(_)&&!w)throw new Error('Provided param "'.concat(g,'" is an array but it is not repeatable (* or + modifiers)'));const E=zn(_)?_.join("/"):_;if(!E)if(y)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error('Missing required param "'.concat(g,'"'));u+=E}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function Ew(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Cw(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=Ew(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(M0(r))return 1;if(M0(s))return-1}return s.length-r.length}function M0(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const bw={type:0,value:""},Tw=/[a-zA-Z0-9_]/;function kw(t){if(!t)return[[]];if(t==="/")return[[bw]];if(!t.startsWith("/"))throw new Error('Invalid path "'.concat(t,'"'));function e(m){throw new Error("ERR (".concat(n,')/"').concat(c,'": ').concat(m))}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,c="",u="";function f(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e("A repeatable param (".concat(c,") must be alone in its segment. eg: '/:ids+.")),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&f(),o()):l===":"?(f(),n=1):h();break;case 4:h(),n=r;break;case 1:l==="("?n=2:Tw.test(l)?h():(f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e('Unfinished custom RegExp for param "'.concat(c,'"')),f(),o(),s}function Sw(t,e,n){const r=ww(kw(t.path),n),s=nt(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function Iw(t,e){const n=[],r=new Map;e=D0({strict:!1,end:!0,sensitive:!1},e);function s(u){return r.get(u)}function i(u,f,h){const m=!h,g=Aw(u);g.aliasOf=h&&h.record;const w=D0(e,u),y=[g];if("alias"in u){const b=typeof u.alias=="string"?[u.alias]:u.alias;for(const C of b)y.push(nt({},g,{components:h?h.record.components:g.components,path:C,aliasOf:h?h.record:g}))}let _,E;for(const b of y){const{path:C}=b;if(f&&C[0]!=="/"){const N=f.record.path,k=N[N.length-1]==="/"?"":"/";b.path=f.record.path+(C&&k+C)}if(_=Sw(b,f,w),h?h.alias.push(_):(E=E||_,E!==_&&E.alias.push(_),m&&u.name&&!O0(_)&&o(u.name)),g.children){const N=g.children;for(let k=0;k<N.length;k++)i(N[k],_,h&&h.children[k])}h=h||_,(_.record.components&&Object.keys(_.record.components).length||_.record.name||_.record.redirect)&&l(_)}return E?()=>{o(E)}:mo}function o(u){if(b1(u)){const f=r.get(u);f&&(r.delete(u),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(u);f>-1&&(n.splice(f,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let f=0;for(;f<n.length&&Cw(u,n[f])>=0&&(u.record.path!==n[f].record.path||!k1(u,n[f]));)f++;n.splice(f,0,u),u.record.name&&!O0(u)&&r.set(u.record.name,u)}function c(u,f){let h,m={},g,w;if("name"in u&&u.name){if(h=r.get(u.name),!h)throw yi(1,{location:u});w=h.record.name,m=nt(x0(f.params,h.keys.filter(E=>!E.optional).concat(h.parent?h.parent.keys.filter(E=>E.optional):[]).map(E=>E.name)),u.params&&x0(u.params,h.keys.map(E=>E.name))),g=h.stringify(m)}else if(u.path!=null)g=u.path,h=n.find(E=>E.re.test(g)),h&&(m=h.parse(g),w=h.record.name);else{if(h=f.name?r.get(f.name):n.find(E=>E.re.test(f.path)),!h)throw yi(1,{location:u,currentLocation:f});w=h.record.name,m=nt({},f.params,u.params),g=h.stringify(m)}const y=[];let _=h;for(;_;)y.unshift(_.record),_=_.parent;return{name:w,path:g,params:m,matched:y,meta:Pw(y)}}return t.forEach(u=>i(u)),{addRoute:i,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function x0(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function Aw(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:Rw(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function Rw(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function O0(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Pw(t){return t.reduce((e,n)=>nt(e,n.meta),{})}function D0(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function k1(t,e){return e.children.some(n=>n===t||k1(t,n))}function Lw(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(_1," "),o=i.indexOf("="),a=Mo(o<0?i:i.slice(0,o)),l=o<0?null:Mo(i.slice(o+1));if(a in e){let c=e[a];zn(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function V0(t){let e="";for(let n in t){const r=t[n];if(n=Y3(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(zn(r)?r.map(i=>i&&eh(i)):[r&&eh(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function Nw(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=zn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const Mw=Symbol(""),F0=Symbol(""),ac=Symbol(""),S1=Symbol(""),nh=Symbol("");function Gi(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function zr(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const c=h=>{h===!1?l(yi(4,{from:n,to:e})):h instanceof Error?l(h):_w(h)?l(yi(2,{from:e,to:h})):(o&&r.enterCallbacks[s]===o&&typeof h=="function"&&o.push(h),a())},u=i(()=>t.call(r&&r.instances[s],e,n,c));let f=Promise.resolve(u);t.length<3&&(f=f.then(c)),f.catch(h=>l(h))})}function ru(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(xw(l)){const u=(l.__vccOpts||l)[e];u&&i.push(zr(u,n,r,o,a,s))}else{let c=l();i.push(()=>c.then(u=>{if(!u)return Promise.reject(new Error("Couldn't resolve component \"".concat(a,'" at "').concat(o.path,'"')));const f=$3(u)?u.default:u;o.components[a]=f;const m=(f.__vccOpts||f)[e];return m&&zr(m,n,r,o,a,s)()}))}}return i}function xw(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function $0(t){const e=xn(ac),n=xn(S1),r=Y(()=>e.resolve($(t.to))),s=Y(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],f=n.matched;if(!u||!f.length)return-1;const h=f.findIndex(vi.bind(null,u));if(h>-1)return h;const m=B0(l[c-2]);return c>1&&B0(u)===m&&f[f.length-1].path!==m?f.findIndex(vi.bind(null,l[c-2])):h}),i=Y(()=>s.value>-1&&Fw(n.params,r.value.params)),o=Y(()=>s.value>-1&&s.value===n.matched.length-1&&E1(n.params,r.value.params));function a(l={}){return Vw(l)?e[$(t.replace)?"replace":"push"]($(t.to)).catch(mo):Promise.resolve()}return{route:r,href:Y(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const Ow=ke({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:$0,setup(t,{slots:e}){const n=ia($0(t)),{options:r}=xn(ac),s=Y(()=>({[U0(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[U0(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&e.default(n);return t.custom?i:ca("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),Dw=Ow;function Vw(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Fw(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!zn(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function B0(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const U0=(t,e,n)=>t!=null?t:e!=null?e:n,$w=ke({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=xn(nh),s=Y(()=>t.route||r.value),i=xn(F0,0),o=Y(()=>{let c=$(i);const{matched:u}=s.value;let f;for(;(f=u[c])&&!f.components;)c++;return c}),a=Y(()=>s.value.matched[o.value]);el(F0,Y(()=>o.value+1)),el(Mw,a),el(nh,s);const l=X();return Mn(()=>[l.value,a.value,t.name],([c,u,f],[h,m,g])=>{u&&(u.instances[f]=c,m&&m!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=m.leaveGuards),u.updateGuards.size||(u.updateGuards=m.updateGuards))),c&&u&&(!m||!vi(u,m)||!h)&&(u.enterCallbacks[f]||[]).forEach(w=>w(c))},{flush:"post"}),()=>{const c=s.value,u=t.name,f=a.value,h=f&&f.components[u];if(!h)return j0(n.default,{Component:h,route:c});const m=f.props[u],g=m?m===!0?c.params:typeof m=="function"?m(c):m:null,y=ca(h,nt({},g,e,{onVnodeUnmounted:_=>{_.component.isUnmounted&&(f.instances[u]=null)},ref:l}));return j0(n.default,{Component:y,route:c})||y}}});function j0(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Bw=$w;function Uw(t){const e=Iw(t.routes,t),n=t.parseQuery||Lw,r=t.stringifyQuery||V0,s=t.history,i=Gi(),o=Gi(),a=Gi(),l=oa(Pr);let c=Pr;Zs&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=tu.bind(null,U=>""+U),f=tu.bind(null,J3),h=tu.bind(null,Mo);function m(U,te){let ee,se;return b1(U)?(ee=e.getRecordMatcher(U),se=te):se=U,e.addRoute(se,ee)}function g(U){const te=e.getRecordMatcher(U);te&&e.removeRoute(te)}function w(){return e.getRoutes().map(U=>U.record)}function y(U){return!!e.getRecordMatcher(U)}function _(U,te){if(te=nt({},te||l.value),typeof U=="string"){const d=nu(n,U,te.path),v=e.resolve({path:d.path},te),T=s.createHref(d.fullPath);return nt(d,v,{params:h(v.params),hash:Mo(d.hash),redirectedFrom:void 0,href:T})}let ee;if(U.path!=null)ee=nt({},U,{path:nu(n,U.path,te.path).path});else{const d=nt({},U.params);for(const v in d)d[v]==null&&delete d[v];ee=nt({},U,{params:f(d)}),te.params=f(te.params)}const se=e.resolve(ee,te),Ne=U.hash||"";se.params=u(h(se.params));const ze=tw(r,nt({},U,{hash:Q3(Ne),path:se.path})),p=s.createHref(ze);return nt({fullPath:ze,hash:Ne,query:r===V0?Nw(U.query):U.query||{}},se,{redirectedFrom:void 0,href:p})}function E(U){return typeof U=="string"?nu(n,U,l.value.path):nt({},U)}function b(U,te){if(c!==U)return yi(8,{from:te,to:U})}function C(U){return z(U)}function N(U){return C(nt(E(U),{replace:!0}))}function k(U){const te=U.matched[U.matched.length-1];if(te&&te.redirect){const{redirect:ee}=te;let se=typeof ee=="function"?ee(U):ee;return typeof se=="string"&&(se=se.includes("?")||se.includes("#")?se=E(se):{path:se},se.params={}),nt({query:U.query,hash:U.hash,params:se.path!=null?{}:U.params},se)}}function z(U,te){const ee=c=_(U),se=l.value,Ne=U.state,ze=U.force,p=U.replace===!0,d=k(ee);if(d)return z(nt(E(d),{state:typeof d=="object"?nt({},Ne,d.state):Ne,force:ze,replace:p}),te||ee);const v=ee;v.redirectedFrom=te;let T;return!ze&&nw(r,se,ee)&&(T=yi(16,{to:v,from:se}),ge(se,se,!0,!1)),(T?Promise.resolve(T):x(v,se)).catch(A=>fr(A)?fr(A,2)?A:Ke(A):we(A,v,se)).then(A=>{if(A){if(fr(A,2))return z(nt({replace:p},E(A.to),{state:typeof A.to=="object"?nt({},Ne,A.to.state):Ne,force:ze}),te||v)}else A=S(v,se,!0,p,Ne);return D(v,se,A),A})}function L(U,te){const ee=b(U,te);return ee?Promise.reject(ee):Promise.resolve()}function P(U){const te=st.values().next().value;return te&&typeof te.runWithContext=="function"?te.runWithContext(U):U()}function x(U,te){let ee;const[se,Ne,ze]=jw(U,te);ee=ru(se.reverse(),"beforeRouteLeave",U,te);for(const d of se)d.leaveGuards.forEach(v=>{ee.push(zr(v,U,te))});const p=L.bind(null,U,te);return ee.push(p),_e(ee).then(()=>{ee=[];for(const d of i.list())ee.push(zr(d,U,te));return ee.push(p),_e(ee)}).then(()=>{ee=ru(Ne,"beforeRouteUpdate",U,te);for(const d of Ne)d.updateGuards.forEach(v=>{ee.push(zr(v,U,te))});return ee.push(p),_e(ee)}).then(()=>{ee=[];for(const d of ze)if(d.beforeEnter)if(zn(d.beforeEnter))for(const v of d.beforeEnter)ee.push(zr(v,U,te));else ee.push(zr(d.beforeEnter,U,te));return ee.push(p),_e(ee)}).then(()=>(U.matched.forEach(d=>d.enterCallbacks={}),ee=ru(ze,"beforeRouteEnter",U,te,P),ee.push(p),_e(ee))).then(()=>{ee=[];for(const d of o.list())ee.push(zr(d,U,te));return ee.push(p),_e(ee)}).catch(d=>fr(d,8)?d:Promise.reject(d))}function D(U,te,ee){a.list().forEach(se=>P(()=>se(U,te,ee)))}function S(U,te,ee,se,Ne){const ze=b(U,te);if(ze)return ze;const p=te===Pr,d=Zs?history.state:{};ee&&(se||p?s.replace(U.fullPath,nt({scroll:p&&d&&d.scroll},Ne)):s.push(U.fullPath,Ne)),l.value=U,ge(U,te,ee,p),Ke()}let G;function ue(){G||(G=s.listen((U,te,ee)=>{if(!ot.listening)return;const se=_(U),Ne=k(se);if(Ne){z(nt(Ne,{replace:!0}),se).catch(mo);return}c=se;const ze=l.value;Zs&&uw(R0(ze.fullPath,ee.delta),oc()),x(se,ze).catch(p=>fr(p,12)?p:fr(p,2)?(z(p.to,se).then(d=>{fr(d,20)&&!ee.delta&&ee.type===xo.pop&&s.go(-1,!1)}).catch(mo),Promise.reject()):(ee.delta&&s.go(-ee.delta,!1),we(p,se,ze))).then(p=>{p=p||S(se,ze,!1),p&&(ee.delta&&!fr(p,8)?s.go(-ee.delta,!1):ee.type===xo.pop&&fr(p,20)&&s.go(-1,!1)),D(se,ze,p)}).catch(mo)}))}let ye=Gi(),de=Gi(),be;function we(U,te,ee){Ke(U);const se=de.list();return se.length?se.forEach(Ne=>Ne(U,te,ee)):console.error(U),Promise.reject(U)}function Be(){return be&&l.value!==Pr?Promise.resolve():new Promise((U,te)=>{ye.add([U,te])})}function Ke(U){return be||(be=!U,ue(),ye.list().forEach(([te,ee])=>U?ee(U):te()),ye.reset()),U}function ge(U,te,ee,se){const{scrollBehavior:Ne}=t;if(!Zs||!Ne)return Promise.resolve();const ze=!ee&&hw(R0(U.fullPath,0))||(se||!ee)&&history.state&&history.state.scroll||null;return Mi().then(()=>Ne(U,te,ze)).then(p=>p&&cw(p)).catch(p=>we(p,U,te))}const Ue=U=>s.go(U);let le;const st=new Set,ot={currentRoute:l,listening:!0,addRoute:m,removeRoute:g,hasRoute:y,getRoutes:w,resolve:_,options:t,push:C,replace:N,go:Ue,back:()=>Ue(-1),forward:()=>Ue(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:de.add,isReady:Be,install(U){const te=this;U.component("RouterLink",Dw),U.component("RouterView",Bw),U.config.globalProperties.$router=te,Object.defineProperty(U.config.globalProperties,"$route",{enumerable:!0,get:()=>$(l)}),Zs&&!le&&l.value===Pr&&(le=!0,C(s.location).catch(Ne=>{}));const ee={};for(const Ne in Pr)Object.defineProperty(ee,Ne,{get:()=>l.value[Ne],enumerable:!0});U.provide(ac,te),U.provide(S1,Tg(ee)),U.provide(nh,l);const se=U.unmount;st.add(U),U.unmount=function(){st.delete(U),st.size<1&&(c=Pr,G&&G(),G=null,l.value=Pr,le=!1,be=!1),se()}}};function _e(U){return U.reduce((te,ee)=>te.then(()=>P(ee)),Promise.resolve())}return ot}function jw(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(c=>vi(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>vi(c,l))||s.push(l))}return[n,r,s]}function kf(){return xn(ac)}/*!
  * shared v9.10.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const yl=typeof window<"u",as=(t,e=!1)=>e?Symbol.for(t):Symbol(t),zw=(t,e,n)=>Ww({l:t,k:e,s:n}),Ww=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),It=t=>typeof t=="number"&&isFinite(t),Hw=t=>A1(t)==="[object Date]",rs=t=>A1(t)==="[object RegExp]",lc=t=>Pe(t)&&Object.keys(t).length===0,zt=Object.assign;let z0;const gr=()=>z0||(z0=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function W0(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const Gw=Object.prototype.hasOwnProperty;function wl(t,e){return Gw.call(t,e)}const dt=Array.isArray,lt=t=>typeof t=="function",ie=t=>typeof t=="string",je=t=>typeof t=="boolean",Ze=t=>t!==null&&typeof t=="object",qw=t=>Ze(t)&&lt(t.then)&&lt(t.catch),I1=Object.prototype.toString,A1=t=>I1.call(t),Pe=t=>{if(!Ze(t))return!1;const e=Object.getPrototypeOf(t);return e===null||e.constructor===Object},Kw=t=>t==null?"":dt(t)||Pe(t)&&t.toString===I1?JSON.stringify(t,null,2):String(t);function Qw(t,e=""){return t.reduce((n,r,s)=>s===0?n+r:n+e+r,"")}function Sf(t){let e=t;return()=>++e}function Yw(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const Va=t=>!Ze(t)||dt(t);function rl(t,e){if(Va(t)||Va(e))throw new Error("Invalid value");const n=[{src:t,des:e}];for(;n.length;){const{src:r,des:s}=n.pop();Object.keys(r).forEach(i=>{Va(r[i])||Va(s[i])?s[i]=r[i]:n.push({src:r[i],des:s[i]})})}}/*!
  * message-compiler v9.10.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function Xw(t,e,n){return{line:t,column:e,offset:n}}function rh(t,e,n){const r={start:t,end:e};return n!=null&&(r.source=n),r}const Jw=/\{([0-9a-zA-Z]+)\}/g;function Zw(t,...e){return e.length===1&&eE(e[0])&&(e=e[0]),(!e||!e.hasOwnProperty)&&(e={}),t.replace(Jw,(n,r)=>e.hasOwnProperty(r)?e[r]:"")}const R1=Object.assign,H0=t=>typeof t=="string",eE=t=>t!==null&&typeof t=="object";function P1(t,e=""){return t.reduce((n,r,s)=>s===0?n+r:n+e+r,"")}const Te={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},tE={[Te.EXPECTED_TOKEN]:"Expected token: '{0}'",[Te.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[Te.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[Te.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[Te.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[Te.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[Te.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[Te.EMPTY_PLACEHOLDER]:"Empty placeholder",[Te.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[Te.INVALID_LINKED_FORMAT]:"Invalid linked format",[Te.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[Te.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[Te.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[Te.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[Te.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[Te.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function xi(t,e,n={}){const{domain:r,messages:s,args:i}=n,o=Zw((s||tE)[t]||"",...i||[]),a=new SyntaxError(String(o));return a.code=t,e&&(a.location=e),a.domain=r,a}function nE(t){throw t}const dr=" ",rE="\r",nn="\n",sE="\u2028",iE="\u2029";function oE(t){const e=t;let n=0,r=1,s=1,i=0;const o=z=>e[z]===rE&&e[z+1]===nn,a=z=>e[z]===nn,l=z=>e[z]===iE,c=z=>e[z]===sE,u=z=>o(z)||a(z)||l(z)||c(z),f=()=>n,h=()=>r,m=()=>s,g=()=>i,w=z=>o(z)||l(z)||c(z)?nn:e[z],y=()=>w(n),_=()=>w(n+i);function E(){return i=0,u(n)&&(r++,s=0),o(n)&&n++,n++,s++,e[n]}function b(){return o(n+i)&&i++,i++,e[n+i]}function C(){n=0,r=1,s=1,i=0}function N(z=0){i=z}function k(){const z=n+i;for(;z!==n;)E();i=0}return{index:f,line:h,column:m,peekOffset:g,charAt:w,currentChar:y,currentPeek:_,next:E,peek:b,reset:C,resetPeek:N,skipToPeek:k}}const Lr=void 0,aE=".",G0="'",lE="tokenizer";function cE(t,e={}){const n=e.location!==!1,r=oE(t),s=()=>r.index(),i=()=>Xw(r.line(),r.column(),r.index()),o=i(),a=s(),l={currentType:14,offset:a,startLoc:o,endLoc:o,lastType:14,lastOffset:a,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},c=()=>l,{onError:u}=e;function f(p,d,v,...T){const A=c();if(d.column+=v,d.offset+=v,u){const j=n?rh(A.startLoc,d):null,Z=xi(p,j,{domain:lE,args:T});u(Z)}}function h(p,d,v){p.endLoc=i(),p.currentType=d;const T={type:d};return n&&(T.loc=rh(p.startLoc,p.endLoc)),v!=null&&(T.value=v),T}const m=p=>h(p,14);function g(p,d){return p.currentChar()===d?(p.next(),d):(f(Te.EXPECTED_TOKEN,i(),0,d),"")}function w(p){let d="";for(;p.currentPeek()===dr||p.currentPeek()===nn;)d+=p.currentPeek(),p.peek();return d}function y(p){const d=w(p);return p.skipToPeek(),d}function _(p){if(p===Lr)return!1;const d=p.charCodeAt(0);return d>=97&&d<=122||d>=65&&d<=90||d===95}function E(p){if(p===Lr)return!1;const d=p.charCodeAt(0);return d>=48&&d<=57}function b(p,d){const{currentType:v}=d;if(v!==2)return!1;w(p);const T=_(p.currentPeek());return p.resetPeek(),T}function C(p,d){const{currentType:v}=d;if(v!==2)return!1;w(p);const T=p.currentPeek()==="-"?p.peek():p.currentPeek(),A=E(T);return p.resetPeek(),A}function N(p,d){const{currentType:v}=d;if(v!==2)return!1;w(p);const T=p.currentPeek()===G0;return p.resetPeek(),T}function k(p,d){const{currentType:v}=d;if(v!==8)return!1;w(p);const T=p.currentPeek()===".";return p.resetPeek(),T}function z(p,d){const{currentType:v}=d;if(v!==9)return!1;w(p);const T=_(p.currentPeek());return p.resetPeek(),T}function L(p,d){const{currentType:v}=d;if(!(v===8||v===12))return!1;w(p);const T=p.currentPeek()===":";return p.resetPeek(),T}function P(p,d){const{currentType:v}=d;if(v!==10)return!1;const T=()=>{const j=p.currentPeek();return j==="{"?_(p.peek()):j==="@"||j==="%"||j==="|"||j===":"||j==="."||j===dr||!j?!1:j===nn?(p.peek(),T()):_(j)},A=T();return p.resetPeek(),A}function x(p){w(p);const d=p.currentPeek()==="|";return p.resetPeek(),d}function D(p){const d=w(p),v=p.currentPeek()==="%"&&p.peek()==="{";return p.resetPeek(),{isModulo:v,hasSpace:d.length>0}}function S(p,d=!0){const v=(A=!1,j="",Z=!1)=>{const O=p.currentPeek();return O==="{"?j==="%"?!1:A:O==="@"||!O?j==="%"?!0:A:O==="%"?(p.peek(),v(A,"%",!0)):O==="|"?j==="%"||Z?!0:!(j===dr||j===nn):O===dr?(p.peek(),v(!0,dr,Z)):O===nn?(p.peek(),v(!0,nn,Z)):!0},T=v();return d&&p.resetPeek(),T}function G(p,d){const v=p.currentChar();return v===Lr?Lr:d(v)?(p.next(),v):null}function ue(p){return G(p,v=>{const T=v.charCodeAt(0);return T>=97&&T<=122||T>=65&&T<=90||T>=48&&T<=57||T===95||T===36})}function ye(p){return G(p,v=>{const T=v.charCodeAt(0);return T>=48&&T<=57})}function de(p){return G(p,v=>{const T=v.charCodeAt(0);return T>=48&&T<=57||T>=65&&T<=70||T>=97&&T<=102})}function be(p){let d="",v="";for(;d=ye(p);)v+=d;return v}function we(p){y(p);const d=p.currentChar();return d!=="%"&&f(Te.EXPECTED_TOKEN,i(),0,d),p.next(),"%"}function Be(p){let d="";for(;;){const v=p.currentChar();if(v==="{"||v==="}"||v==="@"||v==="|"||!v)break;if(v==="%")if(S(p))d+=v,p.next();else break;else if(v===dr||v===nn)if(S(p))d+=v,p.next();else{if(x(p))break;d+=v,p.next()}else d+=v,p.next()}return d}function Ke(p){y(p);let d="",v="";for(;d=ue(p);)v+=d;return p.currentChar()===Lr&&f(Te.UNTERMINATED_CLOSING_BRACE,i(),0),v}function ge(p){y(p);let d="";return p.currentChar()==="-"?(p.next(),d+="-".concat(be(p))):d+=be(p),p.currentChar()===Lr&&f(Te.UNTERMINATED_CLOSING_BRACE,i(),0),d}function Ue(p){y(p),g(p,"'");let d="",v="";const T=j=>j!==G0&&j!==nn;for(;d=G(p,T);)d==="\\"?v+=le(p):v+=d;const A=p.currentChar();return A===nn||A===Lr?(f(Te.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,i(),0),A===nn&&(p.next(),g(p,"'")),v):(g(p,"'"),v)}function le(p){const d=p.currentChar();switch(d){case"\\":case"'":return p.next(),"\\".concat(d);case"u":return st(p,d,4);case"U":return st(p,d,6);default:return f(Te.UNKNOWN_ESCAPE_SEQUENCE,i(),0,d),""}}function st(p,d,v){g(p,d);let T="";for(let A=0;A<v;A++){const j=de(p);if(!j){f(Te.INVALID_UNICODE_ESCAPE_SEQUENCE,i(),0,"\\".concat(d).concat(T).concat(p.currentChar()));break}T+=j}return"\\".concat(d).concat(T)}function ot(p){y(p);let d="",v="";const T=A=>A!=="{"&&A!=="}"&&A!==dr&&A!==nn;for(;d=G(p,T);)v+=d;return v}function _e(p){let d="",v="";for(;d=ue(p);)v+=d;return v}function U(p){const d=(v=!1,T)=>{const A=p.currentChar();return A==="{"||A==="%"||A==="@"||A==="|"||A==="("||A===")"||!A||A===dr?T:A===nn||A===aE?(T+=A,p.next(),d(v,T)):(T+=A,p.next(),d(!0,T))};return d(!1,"")}function te(p){y(p);const d=g(p,"|");return y(p),d}function ee(p,d){let v=null;switch(p.currentChar()){case"{":return d.braceNest>=1&&f(Te.NOT_ALLOW_NEST_PLACEHOLDER,i(),0),p.next(),v=h(d,2,"{"),y(p),d.braceNest++,v;case"}":return d.braceNest>0&&d.currentType===2&&f(Te.EMPTY_PLACEHOLDER,i(),0),p.next(),v=h(d,3,"}"),d.braceNest--,d.braceNest>0&&y(p),d.inLinked&&d.braceNest===0&&(d.inLinked=!1),v;case"@":return d.braceNest>0&&f(Te.UNTERMINATED_CLOSING_BRACE,i(),0),v=se(p,d)||m(d),d.braceNest=0,v;default:{let A=!0,j=!0,Z=!0;if(x(p))return d.braceNest>0&&f(Te.UNTERMINATED_CLOSING_BRACE,i(),0),v=h(d,1,te(p)),d.braceNest=0,d.inLinked=!1,v;if(d.braceNest>0&&(d.currentType===5||d.currentType===6||d.currentType===7))return f(Te.UNTERMINATED_CLOSING_BRACE,i(),0),d.braceNest=0,Ne(p,d);if(A=b(p,d))return v=h(d,5,Ke(p)),y(p),v;if(j=C(p,d))return v=h(d,6,ge(p)),y(p),v;if(Z=N(p,d))return v=h(d,7,Ue(p)),y(p),v;if(!A&&!j&&!Z)return v=h(d,13,ot(p)),f(Te.INVALID_TOKEN_IN_PLACEHOLDER,i(),0,v.value),y(p),v;break}}return v}function se(p,d){const{currentType:v}=d;let T=null;const A=p.currentChar();switch((v===8||v===9||v===12||v===10)&&(A===nn||A===dr)&&f(Te.INVALID_LINKED_FORMAT,i(),0),A){case"@":return p.next(),T=h(d,8,"@"),d.inLinked=!0,T;case".":return y(p),p.next(),h(d,9,".");case":":return y(p),p.next(),h(d,10,":");default:return x(p)?(T=h(d,1,te(p)),d.braceNest=0,d.inLinked=!1,T):k(p,d)||L(p,d)?(y(p),se(p,d)):z(p,d)?(y(p),h(d,12,_e(p))):P(p,d)?(y(p),A==="{"?ee(p,d)||T:h(d,11,U(p))):(v===8&&f(Te.INVALID_LINKED_FORMAT,i(),0),d.braceNest=0,d.inLinked=!1,Ne(p,d))}}function Ne(p,d){let v={type:14};if(d.braceNest>0)return ee(p,d)||m(d);if(d.inLinked)return se(p,d)||m(d);switch(p.currentChar()){case"{":return ee(p,d)||m(d);case"}":return f(Te.UNBALANCED_CLOSING_BRACE,i(),0),p.next(),h(d,3,"}");case"@":return se(p,d)||m(d);default:{if(x(p))return v=h(d,1,te(p)),d.braceNest=0,d.inLinked=!1,v;const{isModulo:A,hasSpace:j}=D(p);if(A)return j?h(d,0,Be(p)):h(d,4,we(p));if(S(p))return h(d,0,Be(p));break}}return v}function ze(){const{currentType:p,offset:d,startLoc:v,endLoc:T}=l;return l.lastType=p,l.lastOffset=d,l.lastStartLoc=v,l.lastEndLoc=T,l.offset=s(),l.startLoc=i(),r.currentChar()===Lr?h(l,14):Ne(r,l)}return{nextToken:ze,currentOffset:s,currentPosition:i,context:c}}const uE="parser",hE=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function fE(t,e,n){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const r=parseInt(e||n,16);return r<=55295||r>=57344?String.fromCodePoint(r):"�"}}}function dE(t={}){const e=t.location!==!1,{onError:n}=t;function r(_,E,b,C,...N){const k=_.currentPosition();if(k.offset+=C,k.column+=C,n){const z=e?rh(b,k):null,L=xi(E,z,{domain:uE,args:N});n(L)}}function s(_,E,b){const C={type:_};return e&&(C.start=E,C.end=E,C.loc={start:b,end:b}),C}function i(_,E,b,C){C&&(_.type=C),e&&(_.end=E,_.loc&&(_.loc.end=b))}function o(_,E){const b=_.context(),C=s(3,b.offset,b.startLoc);return C.value=E,i(C,_.currentOffset(),_.currentPosition()),C}function a(_,E){const b=_.context(),{lastOffset:C,lastStartLoc:N}=b,k=s(5,C,N);return k.index=parseInt(E,10),_.nextToken(),i(k,_.currentOffset(),_.currentPosition()),k}function l(_,E){const b=_.context(),{lastOffset:C,lastStartLoc:N}=b,k=s(4,C,N);return k.key=E,_.nextToken(),i(k,_.currentOffset(),_.currentPosition()),k}function c(_,E){const b=_.context(),{lastOffset:C,lastStartLoc:N}=b,k=s(9,C,N);return k.value=E.replace(hE,fE),_.nextToken(),i(k,_.currentOffset(),_.currentPosition()),k}function u(_){const E=_.nextToken(),b=_.context(),{lastOffset:C,lastStartLoc:N}=b,k=s(8,C,N);return E.type!==12?(r(_,Te.UNEXPECTED_EMPTY_LINKED_MODIFIER,b.lastStartLoc,0),k.value="",i(k,C,N),{nextConsumeToken:E,node:k}):(E.value==null&&r(_,Te.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,Yn(E)),k.value=E.value||"",i(k,_.currentOffset(),_.currentPosition()),{node:k})}function f(_,E){const b=_.context(),C=s(7,b.offset,b.startLoc);return C.value=E,i(C,_.currentOffset(),_.currentPosition()),C}function h(_){const E=_.context(),b=s(6,E.offset,E.startLoc);let C=_.nextToken();if(C.type===9){const N=u(_);b.modifier=N.node,C=N.nextConsumeToken||_.nextToken()}switch(C.type!==10&&r(_,Te.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Yn(C)),C=_.nextToken(),C.type===2&&(C=_.nextToken()),C.type){case 11:C.value==null&&r(_,Te.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Yn(C)),b.key=f(_,C.value||"");break;case 5:C.value==null&&r(_,Te.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Yn(C)),b.key=l(_,C.value||"");break;case 6:C.value==null&&r(_,Te.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Yn(C)),b.key=a(_,C.value||"");break;case 7:C.value==null&&r(_,Te.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Yn(C)),b.key=c(_,C.value||"");break;default:{r(_,Te.UNEXPECTED_EMPTY_LINKED_KEY,E.lastStartLoc,0);const N=_.context(),k=s(7,N.offset,N.startLoc);return k.value="",i(k,N.offset,N.startLoc),b.key=k,i(b,N.offset,N.startLoc),{nextConsumeToken:C,node:b}}}return i(b,_.currentOffset(),_.currentPosition()),{node:b}}function m(_){const E=_.context(),b=E.currentType===1?_.currentOffset():E.offset,C=E.currentType===1?E.endLoc:E.startLoc,N=s(2,b,C);N.items=[];let k=null;do{const P=k||_.nextToken();switch(k=null,P.type){case 0:P.value==null&&r(_,Te.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Yn(P)),N.items.push(o(_,P.value||""));break;case 6:P.value==null&&r(_,Te.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Yn(P)),N.items.push(a(_,P.value||""));break;case 5:P.value==null&&r(_,Te.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Yn(P)),N.items.push(l(_,P.value||""));break;case 7:P.value==null&&r(_,Te.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Yn(P)),N.items.push(c(_,P.value||""));break;case 8:{const x=h(_);N.items.push(x.node),k=x.nextConsumeToken||null;break}}}while(E.currentType!==14&&E.currentType!==1);const z=E.currentType===1?E.lastOffset:_.currentOffset(),L=E.currentType===1?E.lastEndLoc:_.currentPosition();return i(N,z,L),N}function g(_,E,b,C){const N=_.context();let k=C.items.length===0;const z=s(1,E,b);z.cases=[],z.cases.push(C);do{const L=m(_);k||(k=L.items.length===0),z.cases.push(L)}while(N.currentType!==14);return k&&r(_,Te.MUST_HAVE_MESSAGES_IN_PLURAL,b,0),i(z,_.currentOffset(),_.currentPosition()),z}function w(_){const E=_.context(),{offset:b,startLoc:C}=E,N=m(_);return E.currentType===14?N:g(_,b,C,N)}function y(_){const E=cE(_,R1({},t)),b=E.context(),C=s(0,b.offset,b.startLoc);return e&&C.loc&&(C.loc.source=_),C.body=w(E),t.onCacheKey&&(C.cacheKey=t.onCacheKey(_)),b.currentType!==14&&r(E,Te.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,_[b.offset]||""),i(C,E.currentOffset(),E.currentPosition()),C}return{parse:y}}function Yn(t){if(t.type===14)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"…":e}function pE(t,e={}){const n={ast:t,helpers:new Set};return{context:()=>n,helper:i=>(n.helpers.add(i),i)}}function q0(t,e){for(let n=0;n<t.length;n++)If(t[n],e)}function If(t,e){switch(t.type){case 1:q0(t.cases,e),e.helper("plural");break;case 2:q0(t.items,e);break;case 6:{If(t.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function mE(t,e={}){const n=pE(t);n.helper("normalize"),t.body&&If(t.body,n);const r=n.context();t.helpers=Array.from(r.helpers)}function gE(t){const e=t.body;return e.type===2?K0(e):e.cases.forEach(n=>K0(n)),t}function K0(t){if(t.items.length===1){const e=t.items[0];(e.type===3||e.type===9)&&(t.static=e.value,delete e.value)}else{const e=[];for(let n=0;n<t.items.length;n++){const r=t.items[n];if(!(r.type===3||r.type===9)||r.value==null)break;e.push(r.value)}if(e.length===t.items.length){t.static=P1(e);for(let n=0;n<t.items.length;n++){const r=t.items[n];(r.type===3||r.type===9)&&delete r.value}}}}const _E="minifier";function ei(t){switch(t.t=t.type,t.type){case 0:{const e=t;ei(e.body),e.b=e.body,delete e.body;break}case 1:{const e=t,n=e.cases;for(let r=0;r<n.length;r++)ei(n[r]);e.c=n,delete e.cases;break}case 2:{const e=t,n=e.items;for(let r=0;r<n.length;r++)ei(n[r]);e.i=n,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=t;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=t;ei(e.key),e.k=e.key,delete e.key,e.modifier&&(ei(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=t;e.i=e.index,delete e.index;break}case 4:{const e=t;e.k=e.key,delete e.key;break}default:throw xi(Te.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:_E,args:[t.type]})}delete t.type}const vE="parser";function yE(t,e){const{sourceMap:n,filename:r,breakLineCode:s,needIndent:i}=e,o=e.location!==!1,a={filename:r,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:s,needIndent:i,indentLevel:0};o&&t.loc&&(a.source=t.loc.source);const l=()=>a;function c(y,_){a.code+=y}function u(y,_=!0){const E=_?s:"";c(i?E+"  ".repeat(y):E)}function f(y=!0){const _=++a.indentLevel;y&&u(_)}function h(y=!0){const _=--a.indentLevel;y&&u(_)}function m(){u(a.indentLevel)}return{context:l,push:c,indent:f,deindent:h,newline:m,helper:y=>"_".concat(y),needIndent:()=>a.needIndent}}function wE(t,e){const{helper:n}=t;t.push("".concat(n("linked"),"(")),wi(t,e.key),e.modifier?(t.push(", "),wi(t,e.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function EE(t,e){const{helper:n,needIndent:r}=t;t.push("".concat(n("normalize"),"([")),t.indent(r());const s=e.items.length;for(let i=0;i<s&&(wi(t,e.items[i]),i!==s-1);i++)t.push(", ");t.deindent(r()),t.push("])")}function CE(t,e){const{helper:n,needIndent:r}=t;if(e.cases.length>1){t.push("".concat(n("plural"),"([")),t.indent(r());const s=e.cases.length;for(let i=0;i<s&&(wi(t,e.cases[i]),i!==s-1);i++)t.push(", ");t.deindent(r()),t.push("])")}}function bE(t,e){e.body?wi(t,e.body):t.push("null")}function wi(t,e){const{helper:n}=t;switch(e.type){case 0:bE(t,e);break;case 1:CE(t,e);break;case 2:EE(t,e);break;case 6:wE(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push("".concat(n("interpolate"),"(").concat(n("list"),"(").concat(e.index,"))"),e);break;case 4:t.push("".concat(n("interpolate"),"(").concat(n("named"),"(").concat(JSON.stringify(e.key),"))"),e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break;default:throw xi(Te.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:vE,args:[e.type]})}}const TE=(t,e={})=>{const n=H0(e.mode)?e.mode:"normal",r=H0(e.filename)?e.filename:"message.intl",s=!!e.sourceMap,i=e.breakLineCode!=null?e.breakLineCode:n==="arrow"?";":"\n",o=e.needIndent?e.needIndent:n!=="arrow",a=t.helpers||[],l=yE(t,{mode:n,filename:r,sourceMap:s,breakLineCode:i,needIndent:o});l.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(o),a.length>0&&(l.push("const { ".concat(P1(a.map(f=>"".concat(f,": _").concat(f)),", ")," } = ctx")),l.newline()),l.push("return "),wi(l,t),l.deindent(o),l.push("}"),delete t.helpers;const{code:c,map:u}=l.context();return{ast:t,code:c,map:u?u.toJSON():void 0}};function kE(t,e={}){const n=R1({},e),r=!!n.jit,s=!!n.minify,i=n.optimize==null?!0:n.optimize,a=dE(n).parse(t);return r?(i&&gE(a),s&&ei(a),{ast:a,code:""}):(mE(a,n),TE(a,n))}/*!
  * core-base v9.10.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function SE(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(gr().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(gr().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(gr().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}const ls=[];ls[0]={w:[0],i:[3,0],"[":[4],o:[7]};ls[1]={w:[1],".":[2],"[":[4],o:[7]};ls[2]={w:[2],i:[3,0],0:[3,0]};ls[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};ls[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};ls[5]={"'":[4,0],o:8,l:[5,0]};ls[6]={'"':[4,0],o:8,l:[6,0]};const IE=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function AE(t){return IE.test(t)}function RE(t){const e=t.charCodeAt(0),n=t.charCodeAt(t.length-1);return e===n&&(e===34||e===39)?t.slice(1,-1):t}function PE(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function LE(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:AE(e)?RE(e):"*"+e}function NE(t){const e=[];let n=-1,r=0,s=0,i,o,a,l,c,u,f;const h=[];h[0]=()=>{o===void 0?o=a:o+=a},h[1]=()=>{o!==void 0&&(e.push(o),o=void 0)},h[2]=()=>{h[0](),s++},h[3]=()=>{if(s>0)s--,r=4,h[0]();else{if(s=0,o===void 0||(o=LE(o),o===!1))return!1;h[1]()}};function m(){const g=t[n+1];if(r===5&&g==="'"||r===6&&g==='"')return n++,a="\\"+g,h[0](),!0}for(;r!==null;)if(n++,i=t[n],!(i==="\\"&&m())){if(l=PE(i),f=ls[r],c=f[l]||f.l||8,c===8||(r=c[0],c[1]!==void 0&&(u=h[c[1]],u&&(a=i,u()===!1))))return;if(r===7)return e}}const Q0=new Map;function ME(t,e){return Ze(t)?t[e]:null}function xE(t,e){if(!Ze(t))return null;let n=Q0.get(e);if(n||(n=NE(e),n&&Q0.set(e,n)),!n)return null;const r=n.length;let s=t,i=0;for(;i<r;){const o=s[n[i]];if(o===void 0||lt(s))return null;s=o,i++}return s}const OE=t=>t,DE=t=>"",VE="text",FE=t=>t.length===0?"":Qw(t),$E=Kw;function Y0(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function BE(t){const e=It(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(It(t.named.count)||It(t.named.n))?It(t.named.count)?t.named.count:It(t.named.n)?t.named.n:e:e}function UE(t,e){e.count||(e.count=t),e.n||(e.n=t)}function jE(t={}){const e=t.locale,n=BE(t),r=Ze(t.pluralRules)&&ie(e)&&lt(t.pluralRules[e])?t.pluralRules[e]:Y0,s=Ze(t.pluralRules)&&ie(e)&&lt(t.pluralRules[e])?Y0:void 0,i=_=>_[r(n,_.length,s)],o=t.list||[],a=_=>o[_],l=t.named||{};It(t.pluralIndex)&&UE(n,l);const c=_=>l[_];function u(_){const E=lt(t.messages)?t.messages(_):Ze(t.messages)?t.messages[_]:!1;return E||(t.parent?t.parent.message(_):DE)}const f=_=>t.modifiers?t.modifiers[_]:OE,h=Pe(t.processor)&&lt(t.processor.normalize)?t.processor.normalize:FE,m=Pe(t.processor)&&lt(t.processor.interpolate)?t.processor.interpolate:$E,g=Pe(t.processor)&&ie(t.processor.type)?t.processor.type:VE,y={list:a,named:c,plural:i,linked:(_,...E)=>{const[b,C]=E;let N="text",k="";E.length===1?Ze(b)?(k=b.modifier||k,N=b.type||N):ie(b)&&(k=b||k):E.length===2&&(ie(b)&&(k=b||k),ie(C)&&(N=C||N));const z=u(_)(y),L=N==="vnode"&&dt(z)&&k?z[0]:z;return k?f(k)(L,N):L},message:u,type:g,interpolate:m,normalize:h,values:zt({},o,l)};return y}let Oo=null;function zE(t){Oo=t}function WE(t,e,n){Oo&&Oo.emit("i18n:init",{timestamp:Date.now(),i18n:t,version:e,meta:n})}const HE=GE("function:translate");function GE(t){return e=>Oo&&Oo.emit(t,e)}const qE={NOT_FOUND_KEY:1,FALLBACK_TO_TRANSLATE:2,CANNOT_FORMAT_NUMBER:3,FALLBACK_TO_NUMBER_FORMAT:4,CANNOT_FORMAT_DATE:5,FALLBACK_TO_DATE_FORMAT:6,EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:7,__EXTEND_POINT__:8},L1=Te.__EXTEND_POINT__,_s=Sf(L1),Un={INVALID_ARGUMENT:L1,INVALID_DATE_ARGUMENT:_s(),INVALID_ISO_DATE_ARGUMENT:_s(),NOT_SUPPORT_NON_STRING_MESSAGE:_s(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:_s(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:_s(),NOT_SUPPORT_LOCALE_TYPE:_s(),__EXTEND_POINT__:_s()};function nr(t){return xi(t,null,void 0)}function Af(t,e){return e.locale!=null?X0(e.locale):X0(t.locale)}let su;function X0(t){if(ie(t))return t;if(lt(t)){if(t.resolvedOnce&&su!=null)return su;if(t.constructor.name==="Function"){const e=t();if(qw(e))throw nr(Un.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return su=e}else throw nr(Un.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw nr(Un.NOT_SUPPORT_LOCALE_TYPE)}function KE(t,e,n){return[...new Set([n,...dt(e)?e:Ze(e)?Object.keys(e):ie(e)?[e]:[n]])]}function N1(t,e,n){const r=ie(n)?n:Ei,s=t;s.__localeChainCache||(s.__localeChainCache=new Map);let i=s.__localeChainCache.get(r);if(!i){i=[];let o=[n];for(;dt(o);)o=J0(i,o,e);const a=dt(e)||!Pe(e)?e:e.default?e.default:null;o=ie(a)?[a]:a,dt(o)&&J0(i,o,!1),s.__localeChainCache.set(r,i)}return i}function J0(t,e,n){let r=!0;for(let s=0;s<e.length&&je(r);s++){const i=e[s];ie(i)&&(r=QE(t,e[s],n))}return r}function QE(t,e,n){let r;const s=e.split("-");do{const i=s.join("-");r=YE(t,i,n),s.splice(-1,1)}while(s.length&&r===!0);return r}function YE(t,e,n){let r=!1;if(!t.includes(e)&&(r=!0,e)){r=e[e.length-1]!=="!";const s=e.replace(/!/g,"");t.push(s),(dt(n)||Pe(n))&&n[s]&&(r=n[s])}return r}const XE="9.10.2",cc=-1,Ei="en-US",Z0="",ep=t=>"".concat(t.charAt(0).toLocaleUpperCase()).concat(t.substr(1));function JE(){return{upper:(t,e)=>e==="text"&&ie(t)?t.toUpperCase():e==="vnode"&&Ze(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&ie(t)?t.toLowerCase():e==="vnode"&&Ze(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&ie(t)?ep(t):e==="vnode"&&Ze(t)&&"__v_isVNode"in t?ep(t.children):t}}let M1;function tp(t){M1=t}let x1;function ZE(t){x1=t}let O1;function eC(t){O1=t}let D1=null;const tC=t=>{D1=t},nC=()=>D1;let V1=null;const np=t=>{V1=t},rC=()=>V1;let rp=0;function sC(t={}){const e=lt(t.onWarn)?t.onWarn:Yw,n=ie(t.version)?t.version:XE,r=ie(t.locale)||lt(t.locale)?t.locale:Ei,s=lt(r)?Ei:r,i=dt(t.fallbackLocale)||Pe(t.fallbackLocale)||ie(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:s,o=Pe(t.messages)?t.messages:{[s]:{}},a=Pe(t.datetimeFormats)?t.datetimeFormats:{[s]:{}},l=Pe(t.numberFormats)?t.numberFormats:{[s]:{}},c=zt({},t.modifiers||{},JE()),u=t.pluralRules||{},f=lt(t.missing)?t.missing:null,h=je(t.missingWarn)||rs(t.missingWarn)?t.missingWarn:!0,m=je(t.fallbackWarn)||rs(t.fallbackWarn)?t.fallbackWarn:!0,g=!!t.fallbackFormat,w=!!t.unresolving,y=lt(t.postTranslation)?t.postTranslation:null,_=Pe(t.processor)?t.processor:null,E=je(t.warnHtmlMessage)?t.warnHtmlMessage:!0,b=!!t.escapeParameter,C=lt(t.messageCompiler)?t.messageCompiler:M1,N=lt(t.messageResolver)?t.messageResolver:x1||ME,k=lt(t.localeFallbacker)?t.localeFallbacker:O1||KE,z=Ze(t.fallbackContext)?t.fallbackContext:void 0,L=t,P=Ze(L.__datetimeFormatters)?L.__datetimeFormatters:new Map,x=Ze(L.__numberFormatters)?L.__numberFormatters:new Map,D=Ze(L.__meta)?L.__meta:{};rp++;const S={version:n,cid:rp,locale:r,fallbackLocale:i,messages:o,modifiers:c,pluralRules:u,missing:f,missingWarn:h,fallbackWarn:m,fallbackFormat:g,unresolving:w,postTranslation:y,processor:_,warnHtmlMessage:E,escapeParameter:b,messageCompiler:C,messageResolver:N,localeFallbacker:k,fallbackContext:z,onWarn:e,__meta:D};return S.datetimeFormats=a,S.numberFormats=l,S.__datetimeFormatters=P,S.__numberFormatters=x,__INTLIFY_PROD_DEVTOOLS__&&WE(S,n,D),S}function Rf(t,e,n,r,s){const{missing:i,onWarn:o}=t;if(i!==null){const a=i(t,n,e,s);return ie(a)?a:e}else return e}function qi(t,e,n){const r=t;r.__localeChainCache=new Map,t.localeFallbacker(t,n,e)}function iu(t){return n=>iC(n,t)}function iC(t,e){const n=e.b||e.body;if((n.t||n.type)===1){const r=n,s=r.c||r.cases;return t.plural(s.reduce((i,o)=>[...i,sp(t,o)],[]))}else return sp(t,n)}function sp(t,e){const n=e.s||e.static;if(n)return t.type==="text"?n:t.normalize([n]);{const r=(e.i||e.items).reduce((s,i)=>[...s,sh(t,i)],[]);return t.normalize(r)}}function sh(t,e){const n=e.t||e.type;switch(n){case 3:{const r=e;return r.v||r.value}case 9:{const r=e;return r.v||r.value}case 4:{const r=e;return t.interpolate(t.named(r.k||r.key))}case 5:{const r=e;return t.interpolate(t.list(r.i!=null?r.i:r.index))}case 6:{const r=e,s=r.m||r.modifier;return t.linked(sh(t,r.k||r.key),s?sh(t,s):void 0,t.type)}case 7:{const r=e;return r.v||r.value}case 8:{const r=e;return r.v||r.value}default:throw new Error("unhandled node type on format message part: ".concat(n))}}const F1=t=>t;let si=Object.create(null);const Ci=t=>Ze(t)&&(t.t===0||t.type===0)&&("b"in t||"body"in t);function $1(t,e={}){let n=!1;const r=e.onError||nE;return e.onError=s=>{n=!0,r(s)},{...kE(t,e),detectError:n}}const oC=(t,e)=>{if(!ie(t))throw nr(Un.NOT_SUPPORT_NON_STRING_MESSAGE);{je(e.warnHtmlMessage)&&e.warnHtmlMessage;const r=(e.onCacheKey||F1)(t),s=si[r];if(s)return s;const{code:i,detectError:o}=$1(t,e),a=new Function("return ".concat(i))();return o?a:si[r]=a}};function aC(t,e){if(__INTLIFY_JIT_COMPILATION__&&!__INTLIFY_DROP_MESSAGE_COMPILER__&&ie(t)){je(e.warnHtmlMessage)&&e.warnHtmlMessage;const r=(e.onCacheKey||F1)(t),s=si[r];if(s)return s;const{ast:i,detectError:o}=$1(t,{...e,location:!1,jit:!0}),a=iu(i);return o?a:si[r]=a}else{const n=t.cacheKey;if(n){const r=si[n];return r||(si[n]=iu(t))}else return iu(t)}}const ip=()=>"",Rn=t=>lt(t);function op(t,...e){const{fallbackFormat:n,postTranslation:r,unresolving:s,messageCompiler:i,fallbackLocale:o,messages:a}=t,[l,c]=ih(...e),u=je(c.missingWarn)?c.missingWarn:t.missingWarn,f=je(c.fallbackWarn)?c.fallbackWarn:t.fallbackWarn,h=je(c.escapeParameter)?c.escapeParameter:t.escapeParameter,m=!!c.resolvedMessage,g=ie(c.default)||je(c.default)?je(c.default)?i?l:()=>l:c.default:n?i?l:()=>l:"",w=n||g!=="",y=Af(t,c);h&&lC(c);let[_,E,b]=m?[l,y,a[y]||{}]:B1(t,l,y,o,f,u),C=_,N=l;if(!m&&!(ie(C)||Ci(C)||Rn(C))&&w&&(C=g,N=C),!m&&(!(ie(C)||Ci(C)||Rn(C))||!ie(E)))return s?cc:l;let k=!1;const z=()=>{k=!0},L=Rn(C)?C:U1(t,l,E,C,N,z);if(k)return C;const P=hC(t,E,b,c),x=jE(P),D=cC(t,L,x),S=r?r(D,l):D;if(__INTLIFY_PROD_DEVTOOLS__){const G={timestamp:Date.now(),key:ie(l)?l:Rn(C)?C.key:"",locale:E||(Rn(C)?C.locale:""),format:ie(C)?C:Rn(C)?C.source:"",message:S};G.meta=zt({},t.__meta,nC()||{}),HE(G)}return S}function lC(t){dt(t.list)?t.list=t.list.map(e=>ie(e)?W0(e):e):Ze(t.named)&&Object.keys(t.named).forEach(e=>{ie(t.named[e])&&(t.named[e]=W0(t.named[e]))})}function B1(t,e,n,r,s,i){const{messages:o,onWarn:a,messageResolver:l,localeFallbacker:c}=t,u=c(t,r,n);let f={},h,m=null;const g="translate";for(let w=0;w<u.length&&(h=u[w],f=o[h]||{},(m=l(f,e))===null&&(m=f[e]),!(ie(m)||Ci(m)||Rn(m)));w++){const y=Rf(t,e,h,i,g);y!==e&&(m=y)}return[m,h,f]}function U1(t,e,n,r,s,i){const{messageCompiler:o,warnHtmlMessage:a}=t;if(Rn(r)){const c=r;return c.locale=c.locale||n,c.key=c.key||e,c}if(o==null){const c=()=>r;return c.locale=n,c.key=e,c}const l=o(r,uC(t,n,s,r,a,i));return l.locale=n,l.key=e,l.source=r,l}function cC(t,e,n){return e(n)}function ih(...t){const[e,n,r]=t,s={};if(!ie(e)&&!It(e)&&!Rn(e)&&!Ci(e))throw nr(Un.INVALID_ARGUMENT);const i=It(e)?String(e):(Rn(e),e);return It(n)?s.plural=n:ie(n)?s.default=n:Pe(n)&&!lc(n)?s.named=n:dt(n)&&(s.list=n),It(r)?s.plural=r:ie(r)?s.default=r:Pe(r)&&zt(s,r),[i,s]}function uC(t,e,n,r,s,i){return{locale:e,key:n,warnHtmlMessage:s,onError:o=>{throw i&&i(o),o},onCacheKey:o=>zw(e,n,o)}}function hC(t,e,n,r){const{modifiers:s,pluralRules:i,messageResolver:o,fallbackLocale:a,fallbackWarn:l,missingWarn:c,fallbackContext:u}=t,h={locale:e,modifiers:s,pluralRules:i,messages:m=>{let g=o(n,m);if(g==null&&u){const[,,w]=B1(u,m,e,a,l,c);g=o(w,m)}if(ie(g)||Ci(g)){let w=!1;const _=U1(t,m,e,g,m,()=>{w=!0});return w?ip:_}else return Rn(g)?g:ip}};return t.processor&&(h.processor=t.processor),r.list&&(h.list=r.list),r.named&&(h.named=r.named),It(r.plural)&&(h.pluralIndex=r.plural),h}function ap(t,...e){const{datetimeFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=t,{__datetimeFormatters:a}=t,[l,c,u,f]=oh(...e),h=je(u.missingWarn)?u.missingWarn:t.missingWarn;je(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn;const m=!!u.part,g=Af(t,u),w=o(t,s,g);if(!ie(l)||l==="")return new Intl.DateTimeFormat(g,f).format(c);let y={},_,E=null;const b="datetime format";for(let k=0;k<w.length&&(_=w[k],y=n[_]||{},E=y[l],!Pe(E));k++)Rf(t,l,_,h,b);if(!Pe(E)||!ie(_))return r?cc:l;let C="".concat(_,"__").concat(l);lc(f)||(C="".concat(C,"__").concat(JSON.stringify(f)));let N=a.get(C);return N||(N=new Intl.DateTimeFormat(_,zt({},E,f)),a.set(C,N)),m?N.formatToParts(c):N.format(c)}const j1=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function oh(...t){const[e,n,r,s]=t,i={};let o={},a;if(ie(e)){const l=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!l)throw nr(Un.INVALID_ISO_DATE_ARGUMENT);const c=l[3]?l[3].trim().startsWith("T")?"".concat(l[1].trim()).concat(l[3].trim()):"".concat(l[1].trim(),"T").concat(l[3].trim()):l[1].trim();a=new Date(c);try{a.toISOString()}catch(u){throw nr(Un.INVALID_ISO_DATE_ARGUMENT)}}else if(Hw(e)){if(isNaN(e.getTime()))throw nr(Un.INVALID_DATE_ARGUMENT);a=e}else if(It(e))a=e;else throw nr(Un.INVALID_ARGUMENT);return ie(n)?i.key=n:Pe(n)&&Object.keys(n).forEach(l=>{j1.includes(l)?o[l]=n[l]:i[l]=n[l]}),ie(r)?i.locale=r:Pe(r)&&(o=r),Pe(s)&&(o=s),[i.key||"",a,i,o]}function lp(t,e,n){const r=t;for(const s in n){const i="".concat(e,"__").concat(s);r.__datetimeFormatters.has(i)&&r.__datetimeFormatters.delete(i)}}function cp(t,...e){const{numberFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=t,{__numberFormatters:a}=t,[l,c,u,f]=ah(...e),h=je(u.missingWarn)?u.missingWarn:t.missingWarn;je(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn;const m=!!u.part,g=Af(t,u),w=o(t,s,g);if(!ie(l)||l==="")return new Intl.NumberFormat(g,f).format(c);let y={},_,E=null;const b="number format";for(let k=0;k<w.length&&(_=w[k],y=n[_]||{},E=y[l],!Pe(E));k++)Rf(t,l,_,h,b);if(!Pe(E)||!ie(_))return r?cc:l;let C="".concat(_,"__").concat(l);lc(f)||(C="".concat(C,"__").concat(JSON.stringify(f)));let N=a.get(C);return N||(N=new Intl.NumberFormat(_,zt({},E,f)),a.set(C,N)),m?N.formatToParts(c):N.format(c)}const z1=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function ah(...t){const[e,n,r,s]=t,i={};let o={};if(!It(e))throw nr(Un.INVALID_ARGUMENT);const a=e;return ie(n)?i.key=n:Pe(n)&&Object.keys(n).forEach(l=>{z1.includes(l)?o[l]=n[l]:i[l]=n[l]}),ie(r)?i.locale=r:Pe(r)&&(o=r),Pe(s)&&(o=s),[i.key||"",a,i,o]}function up(t,e,n){const r=t;for(const s in n){const i="".concat(e,"__").concat(s);r.__numberFormatters.has(i)&&r.__numberFormatters.delete(i)}}SE();/*!
  * vue-i18n v9.10.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const fC="9.10.2";function dC(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(gr().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(gr().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(gr().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(gr().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(gr().__INTLIFY_PROD_DEVTOOLS__=!1)}const W1=qE.__EXTEND_POINT__,pr=Sf(W1);pr(),pr(),pr(),pr(),pr(),pr(),pr(),pr(),pr();const H1=Un.__EXTEND_POINT__,sn=Sf(H1),Rt={UNEXPECTED_RETURN_TYPE:H1,INVALID_ARGUMENT:sn(),MUST_BE_CALL_SETUP_TOP:sn(),NOT_INSTALLED:sn(),NOT_AVAILABLE_IN_LEGACY_MODE:sn(),REQUIRED_VALUE:sn(),INVALID_VALUE:sn(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:sn(),NOT_INSTALLED_WITH_PROVIDE:sn(),UNEXPECTED_ERROR:sn(),NOT_COMPATIBLE_LEGACY_VUE_I18N:sn(),BRIDGE_SUPPORT_VUE_2_ONLY:sn(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:sn(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:sn(),__EXTEND_POINT__:sn()};function Vt(t,...e){return xi(t,null,void 0)}const lh=as("__translateVNode"),ch=as("__datetimeParts"),uh=as("__numberParts"),G1=as("__setPluralRules"),q1=as("__injectWithOption"),hh=as("__dispose");function Do(t){if(!Ze(t))return t;for(const e in t)if(wl(t,e))if(!e.includes("."))Ze(t[e])&&Do(t[e]);else{const n=e.split("."),r=n.length-1;let s=t,i=!1;for(let o=0;o<r;o++){if(n[o]in s||(s[n[o]]={}),!Ze(s[n[o]])){i=!0;break}s=s[n[o]]}i||(s[n[r]]=t[e],delete t[e]),Ze(s[n[r]])&&Do(s[n[r]])}return t}function uc(t,e){const{messages:n,__i18n:r,messageResolver:s,flatJson:i}=e,o=Pe(n)?n:dt(r)?{}:{[t]:{}};if(dt(r)&&r.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:l,resource:c}=a;l?(o[l]=o[l]||{},rl(c,o[l])):rl(c,o)}else ie(a)&&rl(JSON.parse(a),o)}),s==null&&i)for(const a in o)wl(o,a)&&Do(o[a]);return o}function K1(t){return t.type}function Q1(t,e,n){let r=Ze(e.messages)?e.messages:{};"__i18nGlobal"in n&&(r=uc(t.locale.value,{messages:r,__i18n:n.__i18nGlobal}));const s=Object.keys(r);s.length&&s.forEach(i=>{t.mergeLocaleMessage(i,r[i])});{if(Ze(e.datetimeFormats)){const i=Object.keys(e.datetimeFormats);i.length&&i.forEach(o=>{t.mergeDateTimeFormat(o,e.datetimeFormats[o])})}if(Ze(e.numberFormats)){const i=Object.keys(e.numberFormats);i.length&&i.forEach(o=>{t.mergeNumberFormat(o,e.numberFormats[o])})}}}function hp(t){return Re(aa,null,t,0)}const fp="__INTLIFY_META__",dp=()=>[],pC=()=>!1;let pp=0;function mp(t){return(e,n,r,s)=>t(n,r,Cr()||void 0,s)}const mC=()=>{const t=Cr();let e=null;return t&&(e=K1(t)[fp])?{[fp]:e}:null};function Pf(t={},e){const{__root:n,__injectWithOption:r}=t,s=n===void 0,i=t.flatJson,o=yl?X:oa,a=!!t.translateExistCompatible;let l=je(t.inheritLocale)?t.inheritLocale:!0;const c=o(n&&l?n.locale.value:ie(t.locale)?t.locale:Ei),u=o(n&&l?n.fallbackLocale.value:ie(t.fallbackLocale)||dt(t.fallbackLocale)||Pe(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:c.value),f=o(uc(c.value,t)),h=o(Pe(t.datetimeFormats)?t.datetimeFormats:{[c.value]:{}}),m=o(Pe(t.numberFormats)?t.numberFormats:{[c.value]:{}});let g=n?n.missingWarn:je(t.missingWarn)||rs(t.missingWarn)?t.missingWarn:!0,w=n?n.fallbackWarn:je(t.fallbackWarn)||rs(t.fallbackWarn)?t.fallbackWarn:!0,y=n?n.fallbackRoot:je(t.fallbackRoot)?t.fallbackRoot:!0,_=!!t.fallbackFormat,E=lt(t.missing)?t.missing:null,b=lt(t.missing)?mp(t.missing):null,C=lt(t.postTranslation)?t.postTranslation:null,N=n?n.warnHtmlMessage:je(t.warnHtmlMessage)?t.warnHtmlMessage:!0,k=!!t.escapeParameter;const z=n?n.modifiers:Pe(t.modifiers)?t.modifiers:{};let L=t.pluralRules||n&&n.pluralRules,P;P=(()=>{s&&np(null);const I={version:fC,locale:c.value,fallbackLocale:u.value,messages:f.value,modifiers:z,pluralRules:L,missing:b===null?void 0:b,missingWarn:g,fallbackWarn:w,fallbackFormat:_,unresolving:!0,postTranslation:C===null?void 0:C,warnHtmlMessage:N,escapeParameter:k,messageResolver:t.messageResolver,messageCompiler:t.messageCompiler,__meta:{framework:"vue"}};I.datetimeFormats=h.value,I.numberFormats=m.value,I.__datetimeFormatters=Pe(P)?P.__datetimeFormatters:void 0,I.__numberFormatters=Pe(P)?P.__numberFormatters:void 0;const B=sC(I);return s&&np(B),B})(),qi(P,c.value,u.value);function D(){return[c.value,u.value,f.value,h.value,m.value]}const S=Y({get:()=>c.value,set:I=>{c.value=I,P.locale=c.value}}),G=Y({get:()=>u.value,set:I=>{u.value=I,P.fallbackLocale=u.value,qi(P,c.value,I)}}),ue=Y(()=>f.value),ye=Y(()=>h.value),de=Y(()=>m.value);function be(){return lt(C)?C:null}function we(I){C=I,P.postTranslation=I}function Be(){return E}function Ke(I){I!==null&&(b=mp(I)),E=I,P.missing=b}const ge=(I,B,ae,me,Ve,Je)=>{D();let mt;try{__INTLIFY_PROD_DEVTOOLS__,s||(P.fallbackContext=n?rC():void 0),mt=I(P)}finally{__INTLIFY_PROD_DEVTOOLS__,s||(P.fallbackContext=void 0)}if(ae!=="translate exists"&&It(mt)&&mt===cc||ae==="translate exists"&&!mt){const[Dn,gt]=B();return n&&y?me(n):Ve(Dn)}else{if(Je(mt))return mt;throw Vt(Rt.UNEXPECTED_RETURN_TYPE)}};function Ue(...I){return ge(B=>Reflect.apply(op,null,[B,...I]),()=>ih(...I),"translate",B=>Reflect.apply(B.t,B,[...I]),B=>B,B=>ie(B))}function le(...I){const[B,ae,me]=I;if(me&&!Ze(me))throw Vt(Rt.INVALID_ARGUMENT);return Ue(B,ae,zt({resolvedMessage:!0},me||{}))}function st(...I){return ge(B=>Reflect.apply(ap,null,[B,...I]),()=>oh(...I),"datetime format",B=>Reflect.apply(B.d,B,[...I]),()=>Z0,B=>ie(B))}function ot(...I){return ge(B=>Reflect.apply(cp,null,[B,...I]),()=>ah(...I),"number format",B=>Reflect.apply(B.n,B,[...I]),()=>Z0,B=>ie(B))}function _e(I){return I.map(B=>ie(B)||It(B)||je(B)?hp(String(B)):B)}const te={normalize:_e,interpolate:I=>I,type:"vnode"};function ee(...I){return ge(B=>{let ae;const me=B;try{me.processor=te,ae=Reflect.apply(op,null,[me,...I])}finally{me.processor=null}return ae},()=>ih(...I),"translate",B=>B[lh](...I),B=>[hp(B)],B=>dt(B))}function se(...I){return ge(B=>Reflect.apply(cp,null,[B,...I]),()=>ah(...I),"number format",B=>B[uh](...I),dp,B=>ie(B)||dt(B))}function Ne(...I){return ge(B=>Reflect.apply(ap,null,[B,...I]),()=>oh(...I),"datetime format",B=>B[ch](...I),dp,B=>ie(B)||dt(B))}function ze(I){L=I,P.pluralRules=L}function p(I,B){return ge(()=>{if(!I)return!1;const ae=ie(B)?B:c.value,me=T(ae),Ve=P.messageResolver(me,I);return a?Ve!=null:Ci(Ve)||Rn(Ve)||ie(Ve)},()=>[I],"translate exists",ae=>Reflect.apply(ae.te,ae,[I,B]),pC,ae=>je(ae))}function d(I){let B=null;const ae=N1(P,u.value,c.value);for(let me=0;me<ae.length;me++){const Ve=f.value[ae[me]]||{},Je=P.messageResolver(Ve,I);if(Je!=null){B=Je;break}}return B}function v(I){const B=d(I);return B!=null?B:n?n.tm(I)||{}:{}}function T(I){return f.value[I]||{}}function A(I,B){if(i){const ae={[I]:B};for(const me in ae)wl(ae,me)&&Do(ae[me]);B=ae[I]}f.value[I]=B,P.messages=f.value}function j(I,B){f.value[I]=f.value[I]||{};const ae={[I]:B};if(i)for(const me in ae)wl(ae,me)&&Do(ae[me]);B=ae[I],rl(B,f.value[I]),P.messages=f.value}function Z(I){return h.value[I]||{}}function O(I,B){h.value[I]=B,P.datetimeFormats=h.value,lp(P,I,B)}function V(I,B){h.value[I]=zt(h.value[I]||{},B),P.datetimeFormats=h.value,lp(P,I,B)}function F(I){return m.value[I]||{}}function W(I,B){m.value[I]=B,P.numberFormats=m.value,up(P,I,B)}function J(I,B){m.value[I]=zt(m.value[I]||{},B),P.numberFormats=m.value,up(P,I,B)}pp++,n&&yl&&(Mn(n.locale,I=>{l&&(c.value=I,P.locale=I,qi(P,c.value,u.value))}),Mn(n.fallbackLocale,I=>{l&&(u.value=I,P.fallbackLocale=I,qi(P,c.value,u.value))}));const Q={id:pp,locale:S,fallbackLocale:G,get inheritLocale(){return l},set inheritLocale(I){l=I,I&&n&&(c.value=n.locale.value,u.value=n.fallbackLocale.value,qi(P,c.value,u.value))},get availableLocales(){return Object.keys(f.value).sort()},messages:ue,get modifiers(){return z},get pluralRules(){return L||{}},get isGlobal(){return s},get missingWarn(){return g},set missingWarn(I){g=I,P.missingWarn=g},get fallbackWarn(){return w},set fallbackWarn(I){w=I,P.fallbackWarn=w},get fallbackRoot(){return y},set fallbackRoot(I){y=I},get fallbackFormat(){return _},set fallbackFormat(I){_=I,P.fallbackFormat=_},get warnHtmlMessage(){return N},set warnHtmlMessage(I){N=I,P.warnHtmlMessage=I},get escapeParameter(){return k},set escapeParameter(I){k=I,P.escapeParameter=I},t:Ue,getLocaleMessage:T,setLocaleMessage:A,mergeLocaleMessage:j,getPostTranslationHandler:be,setPostTranslationHandler:we,getMissingHandler:Be,setMissingHandler:Ke,[G1]:ze};return Q.datetimeFormats=ye,Q.numberFormats=de,Q.rt=le,Q.te=p,Q.tm=v,Q.d=st,Q.n=ot,Q.getDateTimeFormat=Z,Q.setDateTimeFormat=O,Q.mergeDateTimeFormat=V,Q.getNumberFormat=F,Q.setNumberFormat=W,Q.mergeNumberFormat=J,Q[q1]=r,Q[lh]=ee,Q[ch]=Ne,Q[uh]=se,Q}function gC(t){const e=ie(t.locale)?t.locale:Ei,n=ie(t.fallbackLocale)||dt(t.fallbackLocale)||Pe(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:e,r=lt(t.missing)?t.missing:void 0,s=je(t.silentTranslationWarn)||rs(t.silentTranslationWarn)?!t.silentTranslationWarn:!0,i=je(t.silentFallbackWarn)||rs(t.silentFallbackWarn)?!t.silentFallbackWarn:!0,o=je(t.fallbackRoot)?t.fallbackRoot:!0,a=!!t.formatFallbackMessages,l=Pe(t.modifiers)?t.modifiers:{},c=t.pluralizationRules,u=lt(t.postTranslation)?t.postTranslation:void 0,f=ie(t.warnHtmlInMessage)?t.warnHtmlInMessage!=="off":!0,h=!!t.escapeParameterHtml,m=je(t.sync)?t.sync:!0;let g=t.messages;if(Pe(t.sharedMessages)){const k=t.sharedMessages;g=Object.keys(k).reduce((L,P)=>{const x=L[P]||(L[P]={});return zt(x,k[P]),L},g||{})}const{__i18n:w,__root:y,__injectWithOption:_}=t,E=t.datetimeFormats,b=t.numberFormats,C=t.flatJson,N=t.translateExistCompatible;return{locale:e,fallbackLocale:n,messages:g,flatJson:C,datetimeFormats:E,numberFormats:b,missing:r,missingWarn:s,fallbackWarn:i,fallbackRoot:o,fallbackFormat:a,modifiers:l,pluralRules:c,postTranslation:u,warnHtmlMessage:f,escapeParameter:h,messageResolver:t.messageResolver,inheritLocale:m,translateExistCompatible:N,__i18n:w,__root:y,__injectWithOption:_}}function fh(t={},e){{const n=Pf(gC(t)),{__extender:r}=t,s={id:n.id,get locale(){return n.locale.value},set locale(i){n.locale.value=i},get fallbackLocale(){return n.fallbackLocale.value},set fallbackLocale(i){n.fallbackLocale.value=i},get messages(){return n.messages.value},get datetimeFormats(){return n.datetimeFormats.value},get numberFormats(){return n.numberFormats.value},get availableLocales(){return n.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(i){},get missing(){return n.getMissingHandler()},set missing(i){n.setMissingHandler(i)},get silentTranslationWarn(){return je(n.missingWarn)?!n.missingWarn:n.missingWarn},set silentTranslationWarn(i){n.missingWarn=je(i)?!i:i},get silentFallbackWarn(){return je(n.fallbackWarn)?!n.fallbackWarn:n.fallbackWarn},set silentFallbackWarn(i){n.fallbackWarn=je(i)?!i:i},get modifiers(){return n.modifiers},get formatFallbackMessages(){return n.fallbackFormat},set formatFallbackMessages(i){n.fallbackFormat=i},get postTranslation(){return n.getPostTranslationHandler()},set postTranslation(i){n.setPostTranslationHandler(i)},get sync(){return n.inheritLocale},set sync(i){n.inheritLocale=i},get warnHtmlInMessage(){return n.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(i){n.warnHtmlMessage=i!=="off"},get escapeParameterHtml(){return n.escapeParameter},set escapeParameterHtml(i){n.escapeParameter=i},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(i){},get pluralizationRules(){return n.pluralRules||{}},__composer:n,t(...i){const[o,a,l]=i,c={};let u=null,f=null;if(!ie(o))throw Vt(Rt.INVALID_ARGUMENT);const h=o;return ie(a)?c.locale=a:dt(a)?u=a:Pe(a)&&(f=a),dt(l)?u=l:Pe(l)&&(f=l),Reflect.apply(n.t,n,[h,u||f||{},c])},rt(...i){return Reflect.apply(n.rt,n,[...i])},tc(...i){const[o,a,l]=i,c={plural:1};let u=null,f=null;if(!ie(o))throw Vt(Rt.INVALID_ARGUMENT);const h=o;return ie(a)?c.locale=a:It(a)?c.plural=a:dt(a)?u=a:Pe(a)&&(f=a),ie(l)?c.locale=l:dt(l)?u=l:Pe(l)&&(f=l),Reflect.apply(n.t,n,[h,u||f||{},c])},te(i,o){return n.te(i,o)},tm(i){return n.tm(i)},getLocaleMessage(i){return n.getLocaleMessage(i)},setLocaleMessage(i,o){n.setLocaleMessage(i,o)},mergeLocaleMessage(i,o){n.mergeLocaleMessage(i,o)},d(...i){return Reflect.apply(n.d,n,[...i])},getDateTimeFormat(i){return n.getDateTimeFormat(i)},setDateTimeFormat(i,o){n.setDateTimeFormat(i,o)},mergeDateTimeFormat(i,o){n.mergeDateTimeFormat(i,o)},n(...i){return Reflect.apply(n.n,n,[...i])},getNumberFormat(i){return n.getNumberFormat(i)},setNumberFormat(i,o){n.setNumberFormat(i,o)},mergeNumberFormat(i,o){n.mergeNumberFormat(i,o)},getChoiceIndex(i,o){return-1}};return s.__extender=r,s}}const Lf={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function _C({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((r,s)=>[...r,...s.type===We?s.children:[s]],[]):e.reduce((n,r)=>{const s=t[r];return s&&(n[r]=s()),n},{})}function Y1(t){return We}const vC=ke({name:"i18n-t",props:zt({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>It(t)||!isNaN(t)}},Lf),setup(t,e){const{slots:n,attrs:r}=e,s=t.i18n||Ir({useScope:t.scope,__useComponent:!0});return()=>{const i=Object.keys(n).filter(f=>f!=="_"),o={};t.locale&&(o.locale=t.locale),t.plural!==void 0&&(o.plural=ie(t.plural)?+t.plural:t.plural);const a=_C(e,i),l=s[lh](t.keypath,a,o),c=zt({},r),u=ie(t.tag)||Ze(t.tag)?t.tag:Y1();return ca(u,c,l)}}}),gp=vC;function yC(t){return dt(t)&&!ie(t[0])}function X1(t,e,n,r){const{slots:s,attrs:i}=e;return()=>{const o={part:!0};let a={};t.locale&&(o.locale=t.locale),ie(t.format)?o.key=t.format:Ze(t.format)&&(ie(t.format.key)&&(o.key=t.format.key),a=Object.keys(t.format).reduce((h,m)=>n.includes(m)?zt({},h,{[m]:t.format[m]}):h,{}));const l=r(t.value,o,a);let c=[o.key];dt(l)?c=l.map((h,m)=>{const g=s[h.type],w=g?g({[h.type]:h.value,index:m,parts:l}):[h.value];return yC(w)&&(w[0].key="".concat(h.type,"-").concat(m)),w}):ie(l)&&(c=[l]);const u=zt({},i),f=ie(t.tag)||Ze(t.tag)?t.tag:Y1();return ca(f,u,c)}}const wC=ke({name:"i18n-n",props:zt({value:{type:Number,required:!0},format:{type:[String,Object]}},Lf),setup(t,e){const n=t.i18n||Ir({useScope:"parent",__useComponent:!0});return X1(t,e,z1,(...r)=>n[uh](...r))}}),_p=wC,EC=ke({name:"i18n-d",props:zt({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},Lf),setup(t,e){const n=t.i18n||Ir({useScope:"parent",__useComponent:!0});return X1(t,e,j1,(...r)=>n[ch](...r))}}),vp=EC;function CC(t,e){const n=t;if(t.mode==="composition")return n.__getInstance(e)||t.global;{const r=n.__getInstance(e);return r!=null?r.__composer:t.global.__composer}}function bC(t){const e=o=>{const{instance:a,modifiers:l,value:c}=o;if(!a||!a.$)throw Vt(Rt.UNEXPECTED_ERROR);const u=CC(t,a.$),f=yp(c);return[Reflect.apply(u.t,u,[...wp(f)]),u]};return{created:(o,a)=>{const[l,c]=e(a);yl&&t.global===c&&(o.__i18nWatcher=Mn(c.locale,()=>{a.instance&&a.instance.$forceUpdate()})),o.__composer=c,o.textContent=l},unmounted:o=>{yl&&o.__i18nWatcher&&(o.__i18nWatcher(),o.__i18nWatcher=void 0,delete o.__i18nWatcher),o.__composer&&(o.__composer=void 0,delete o.__composer)},beforeUpdate:(o,{value:a})=>{if(o.__composer){const l=o.__composer,c=yp(a);o.textContent=Reflect.apply(l.t,l,[...wp(c)])}},getSSRProps:o=>{const[a]=e(o);return{textContent:a}}}}function yp(t){if(ie(t))return{path:t};if(Pe(t)){if(!("path"in t))throw Vt(Rt.REQUIRED_VALUE,"path");return t}else throw Vt(Rt.INVALID_VALUE)}function wp(t){const{path:e,locale:n,args:r,choice:s,plural:i}=t,o={},a=r||{};return ie(n)&&(o.locale=n),It(s)&&(o.plural=s),It(i)&&(o.plural=i),[e,a,o]}function TC(t,e,...n){const r=Pe(n[0])?n[0]:{},s=!!r.useI18nComponentName;(je(r.globalInstall)?r.globalInstall:!0)&&([s?"i18n":gp.name,"I18nT"].forEach(o=>t.component(o,gp)),[_p.name,"I18nN"].forEach(o=>t.component(o,_p)),[vp.name,"I18nD"].forEach(o=>t.component(o,vp))),t.directive("t",bC(e))}function kC(t,e,n){return{beforeCreate(){const r=Cr();if(!r)throw Vt(Rt.UNEXPECTED_ERROR);const s=this.$options;if(s.i18n){const i=s.i18n;if(s.__i18n&&(i.__i18n=s.__i18n),i.__root=e,this===this.$root)this.$i18n=Ep(t,i);else{i.__injectWithOption=!0,i.__extender=n.__vueI18nExtend,this.$i18n=fh(i);const o=this.$i18n;o.__extender&&(o.__disposer=o.__extender(this.$i18n))}}else if(s.__i18n)if(this===this.$root)this.$i18n=Ep(t,s);else{this.$i18n=fh({__i18n:s.__i18n,__injectWithOption:!0,__extender:n.__vueI18nExtend,__root:e});const i=this.$i18n;i.__extender&&(i.__disposer=i.__extender(this.$i18n))}else this.$i18n=t;s.__i18nGlobal&&Q1(e,s,s),this.$t=(...i)=>this.$i18n.t(...i),this.$rt=(...i)=>this.$i18n.rt(...i),this.$tc=(...i)=>this.$i18n.tc(...i),this.$te=(i,o)=>this.$i18n.te(i,o),this.$d=(...i)=>this.$i18n.d(...i),this.$n=(...i)=>this.$i18n.n(...i),this.$tm=i=>this.$i18n.tm(i),n.__setInstance(r,this.$i18n)},mounted(){},unmounted(){const r=Cr();if(!r)throw Vt(Rt.UNEXPECTED_ERROR);const s=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,s.__disposer&&(s.__disposer(),delete s.__disposer,delete s.__extender),n.__deleteInstance(r),delete this.$i18n}}}function Ep(t,e){t.locale=e.locale||t.locale,t.fallbackLocale=e.fallbackLocale||t.fallbackLocale,t.missing=e.missing||t.missing,t.silentTranslationWarn=e.silentTranslationWarn||t.silentFallbackWarn,t.silentFallbackWarn=e.silentFallbackWarn||t.silentFallbackWarn,t.formatFallbackMessages=e.formatFallbackMessages||t.formatFallbackMessages,t.postTranslation=e.postTranslation||t.postTranslation,t.warnHtmlInMessage=e.warnHtmlInMessage||t.warnHtmlInMessage,t.escapeParameterHtml=e.escapeParameterHtml||t.escapeParameterHtml,t.sync=e.sync||t.sync,t.__composer[G1](e.pluralizationRules||t.pluralizationRules);const n=uc(t.locale,{messages:e.messages,__i18n:e.__i18n});return Object.keys(n).forEach(r=>t.mergeLocaleMessage(r,n[r])),e.datetimeFormats&&Object.keys(e.datetimeFormats).forEach(r=>t.mergeDateTimeFormat(r,e.datetimeFormats[r])),e.numberFormats&&Object.keys(e.numberFormats).forEach(r=>t.mergeNumberFormat(r,e.numberFormats[r])),t}const SC=as("global-vue-i18n");function IC(t={},e){const n=__VUE_I18N_LEGACY_API__&&je(t.legacy)?t.legacy:__VUE_I18N_LEGACY_API__,r=je(t.globalInjection)?t.globalInjection:!0,s=__VUE_I18N_LEGACY_API__&&n?!!t.allowComposition:!0,i=new Map,[o,a]=AC(t,n),l=as("");function c(h){return i.get(h)||null}function u(h,m){i.set(h,m)}function f(h){i.delete(h)}{const h={get mode(){return __VUE_I18N_LEGACY_API__&&n?"legacy":"composition"},get allowComposition(){return s},async install(m,...g){if(m.__VUE_I18N_SYMBOL__=l,m.provide(m.__VUE_I18N_SYMBOL__,h),Pe(g[0])){const _=g[0];h.__composerExtend=_.__composerExtend,h.__vueI18nExtend=_.__vueI18nExtend}let w=null;!n&&r&&(w=VC(m,h.global)),__VUE_I18N_FULL_INSTALL__&&TC(m,h,...g),__VUE_I18N_LEGACY_API__&&n&&m.mixin(kC(a,a.__composer,h));const y=m.unmount;m.unmount=()=>{w&&w(),h.dispose(),y()}},get global(){return a},dispose(){o.stop()},__instances:i,__getInstance:c,__setInstance:u,__deleteInstance:f};return h}}function Ir(t={}){const e=Cr();if(e==null)throw Vt(Rt.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw Vt(Rt.NOT_INSTALLED);const n=RC(e),r=LC(n),s=K1(e),i=PC(t,s);if(__VUE_I18N_LEGACY_API__&&n.mode==="legacy"&&!t.__useComponent){if(!n.allowComposition)throw Vt(Rt.NOT_AVAILABLE_IN_LEGACY_MODE);return OC(e,i,r,t)}if(i==="global")return Q1(r,t,s),r;if(i==="parent"){let l=NC(n,e,t.__useComponent);return l==null&&(l=r),l}const o=n;let a=o.__getInstance(e);if(a==null){const l=zt({},t);"__i18n"in s&&(l.__i18n=s.__i18n),r&&(l.__root=r),a=Pf(l),o.__composerExtend&&(a[hh]=o.__composerExtend(a)),xC(o,e,a),o.__setInstance(e,a)}return a}function AC(t,e,n){const r=rf();{const s=__VUE_I18N_LEGACY_API__&&e?r.run(()=>fh(t)):r.run(()=>Pf(t));if(s==null)throw Vt(Rt.UNEXPECTED_ERROR);return[r,s]}}function RC(t){{const e=xn(t.isCE?SC:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw Vt(t.isCE?Rt.NOT_INSTALLED_WITH_PROVIDE:Rt.UNEXPECTED_ERROR);return e}}function PC(t,e){return lc(t)?"__i18n"in e?"local":"global":t.useScope?t.useScope:"local"}function LC(t){return t.mode==="composition"?t.global:t.global.__composer}function NC(t,e,n=!1){let r=null;const s=e.root;let i=MC(e,n);for(;i!=null;){const o=t;if(t.mode==="composition")r=o.__getInstance(i);else if(__VUE_I18N_LEGACY_API__){const a=o.__getInstance(i);a!=null&&(r=a.__composer,n&&r&&!r[q1]&&(r=null))}if(r!=null||s===i)break;i=i.parent}return r}function MC(t,e=!1){return t==null?null:e&&t.vnode.ctx||t.parent}function xC(t,e,n){fn(()=>{},e),nc(()=>{const r=n;t.__deleteInstance(e);const s=r[hh];s&&(s(),delete r[hh])},e)}function OC(t,e,n,r={}){const s=e==="local",i=oa(null);if(s&&t.proxy&&!(t.proxy.$options.i18n||t.proxy.$options.__i18n))throw Vt(Rt.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const o=je(r.inheritLocale)?r.inheritLocale:!ie(r.locale),a=X(!s||o?n.locale.value:ie(r.locale)?r.locale:Ei),l=X(!s||o?n.fallbackLocale.value:ie(r.fallbackLocale)||dt(r.fallbackLocale)||Pe(r.fallbackLocale)||r.fallbackLocale===!1?r.fallbackLocale:a.value),c=X(uc(a.value,r)),u=X(Pe(r.datetimeFormats)?r.datetimeFormats:{[a.value]:{}}),f=X(Pe(r.numberFormats)?r.numberFormats:{[a.value]:{}}),h=s?n.missingWarn:je(r.missingWarn)||rs(r.missingWarn)?r.missingWarn:!0,m=s?n.fallbackWarn:je(r.fallbackWarn)||rs(r.fallbackWarn)?r.fallbackWarn:!0,g=s?n.fallbackRoot:je(r.fallbackRoot)?r.fallbackRoot:!0,w=!!r.fallbackFormat,y=lt(r.missing)?r.missing:null,_=lt(r.postTranslation)?r.postTranslation:null,E=s?n.warnHtmlMessage:je(r.warnHtmlMessage)?r.warnHtmlMessage:!0,b=!!r.escapeParameter,C=s?n.modifiers:Pe(r.modifiers)?r.modifiers:{},N=r.pluralRules||s&&n.pluralRules;function k(){return[a.value,l.value,c.value,u.value,f.value]}const z=Y({get:()=>i.value?i.value.locale.value:a.value,set:d=>{i.value&&(i.value.locale.value=d),a.value=d}}),L=Y({get:()=>i.value?i.value.fallbackLocale.value:l.value,set:d=>{i.value&&(i.value.fallbackLocale.value=d),l.value=d}}),P=Y(()=>i.value?i.value.messages.value:c.value),x=Y(()=>u.value),D=Y(()=>f.value);function S(){return i.value?i.value.getPostTranslationHandler():_}function G(d){i.value&&i.value.setPostTranslationHandler(d)}function ue(){return i.value?i.value.getMissingHandler():y}function ye(d){i.value&&i.value.setMissingHandler(d)}function de(d){return k(),d()}function be(...d){return i.value?de(()=>Reflect.apply(i.value.t,null,[...d])):de(()=>"")}function we(...d){return i.value?Reflect.apply(i.value.rt,null,[...d]):""}function Be(...d){return i.value?de(()=>Reflect.apply(i.value.d,null,[...d])):de(()=>"")}function Ke(...d){return i.value?de(()=>Reflect.apply(i.value.n,null,[...d])):de(()=>"")}function ge(d){return i.value?i.value.tm(d):{}}function Ue(d,v){return i.value?i.value.te(d,v):!1}function le(d){return i.value?i.value.getLocaleMessage(d):{}}function st(d,v){i.value&&(i.value.setLocaleMessage(d,v),c.value[d]=v)}function ot(d,v){i.value&&i.value.mergeLocaleMessage(d,v)}function _e(d){return i.value?i.value.getDateTimeFormat(d):{}}function U(d,v){i.value&&(i.value.setDateTimeFormat(d,v),u.value[d]=v)}function te(d,v){i.value&&i.value.mergeDateTimeFormat(d,v)}function ee(d){return i.value?i.value.getNumberFormat(d):{}}function se(d,v){i.value&&(i.value.setNumberFormat(d,v),f.value[d]=v)}function Ne(d,v){i.value&&i.value.mergeNumberFormat(d,v)}const ze={get id(){return i.value?i.value.id:-1},locale:z,fallbackLocale:L,messages:P,datetimeFormats:x,numberFormats:D,get inheritLocale(){return i.value?i.value.inheritLocale:o},set inheritLocale(d){i.value&&(i.value.inheritLocale=d)},get availableLocales(){return i.value?i.value.availableLocales:Object.keys(c.value)},get modifiers(){return i.value?i.value.modifiers:C},get pluralRules(){return i.value?i.value.pluralRules:N},get isGlobal(){return i.value?i.value.isGlobal:!1},get missingWarn(){return i.value?i.value.missingWarn:h},set missingWarn(d){i.value&&(i.value.missingWarn=d)},get fallbackWarn(){return i.value?i.value.fallbackWarn:m},set fallbackWarn(d){i.value&&(i.value.missingWarn=d)},get fallbackRoot(){return i.value?i.value.fallbackRoot:g},set fallbackRoot(d){i.value&&(i.value.fallbackRoot=d)},get fallbackFormat(){return i.value?i.value.fallbackFormat:w},set fallbackFormat(d){i.value&&(i.value.fallbackFormat=d)},get warnHtmlMessage(){return i.value?i.value.warnHtmlMessage:E},set warnHtmlMessage(d){i.value&&(i.value.warnHtmlMessage=d)},get escapeParameter(){return i.value?i.value.escapeParameter:b},set escapeParameter(d){i.value&&(i.value.escapeParameter=d)},t:be,getPostTranslationHandler:S,setPostTranslationHandler:G,getMissingHandler:ue,setMissingHandler:ye,rt:we,d:Be,n:Ke,tm:ge,te:Ue,getLocaleMessage:le,setLocaleMessage:st,mergeLocaleMessage:ot,getDateTimeFormat:_e,setDateTimeFormat:U,mergeDateTimeFormat:te,getNumberFormat:ee,setNumberFormat:se,mergeNumberFormat:Ne};function p(d){d.locale.value=a.value,d.fallbackLocale.value=l.value,Object.keys(c.value).forEach(v=>{d.mergeLocaleMessage(v,c.value[v])}),Object.keys(u.value).forEach(v=>{d.mergeDateTimeFormat(v,u.value[v])}),Object.keys(f.value).forEach(v=>{d.mergeNumberFormat(v,f.value[v])}),d.escapeParameter=b,d.fallbackFormat=w,d.fallbackRoot=g,d.fallbackWarn=m,d.missingWarn=h,d.warnHtmlMessage=E}return Wg(()=>{if(t.proxy==null||t.proxy.$i18n==null)throw Vt(Rt.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const d=i.value=t.proxy.$i18n.__composer;e==="global"?(a.value=d.locale.value,l.value=d.fallbackLocale.value,c.value=d.messages.value,u.value=d.datetimeFormats.value,f.value=d.numberFormats.value):s&&p(d)}),ze}const DC=["locale","fallbackLocale","availableLocales"],Cp=["t","rt","d","n","tm","te"];function VC(t,e){const n=Object.create(null);return DC.forEach(s=>{const i=Object.getOwnPropertyDescriptor(e,s);if(!i)throw Vt(Rt.UNEXPECTED_ERROR);const o=_t(i.value)?{get(){return i.value.value},set(a){i.value.value=a}}:{get(){return i.get&&i.get()}};Object.defineProperty(n,s,o)}),t.config.globalProperties.$i18n=n,Cp.forEach(s=>{const i=Object.getOwnPropertyDescriptor(e,s);if(!i||!i.value)throw Vt(Rt.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,"$".concat(s),i)}),()=>{delete t.config.globalProperties.$i18n,Cp.forEach(s=>{delete t.config.globalProperties["$".concat(s)]})}}dC();__INTLIFY_JIT_COMPILATION__?tp(aC):tp(oC);ZE(xE);eC(N1);if(__INTLIFY_PROD_DEVTOOLS__){const t=gr();t.__INTLIFY__=!0,zE(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}var FC=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let J1;const hc=t=>J1=t,Z1=Symbol();function dh(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var _o;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(_o||(_o={}));function $C(){const t=rf(!0),e=t.run(()=>X({}));let n=[],r=[];const s=Kl({install(i){hc(s),s._a=i,i.provide(Z1,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return!this._a&&!FC?r.push(i):n.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const e2=()=>{};function bp(t,e,n,r=e2){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),r())};return!n&&sf()&&fg(s),s}function Ys(t,...e){t.slice().forEach(n=>{n(...e)})}const BC=t=>t();function ph(t,e){t instanceof Map&&e instanceof Map&&e.forEach((n,r)=>t.set(r,n)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];dh(s)&&dh(r)&&t.hasOwnProperty(n)&&!_t(r)&&!yr(r)?t[n]=ph(s,r):t[n]=r}return t}const UC=Symbol();function jC(t){return!dh(t)||!t.hasOwnProperty(UC)}const{assign:Fr}=Object;function zC(t){return!!(_t(t)&&t.effect)}function WC(t,e,n,r){const{state:s,actions:i,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=s?s():{});const u=Xy(n.state.value[t]);return Fr(u,i,Object.keys(o||{}).reduce((f,h)=>(f[h]=Kl(Y(()=>{hc(n);const m=n._s.get(t);return o[h].call(m,m)})),f),{}))}return l=t2(t,c,e,n,r,!0),l}function t2(t,e,n={},r,s,i){let o;const a=Fr({actions:{}},n),l={deep:!0};let c,u,f=[],h=[],m;const g=r.state.value[t];!i&&!g&&(r.state.value[t]={}),X({});let w;function y(L){let P;c=u=!1,typeof L=="function"?(L(r.state.value[t]),P={type:_o.patchFunction,storeId:t,events:m}):(ph(r.state.value[t],L),P={type:_o.patchObject,payload:L,storeId:t,events:m});const x=w=Symbol();Mi().then(()=>{w===x&&(c=!0)}),u=!0,Ys(f,P,r.state.value[t])}const _=i?function(){const{state:P}=n,x=P?P():{};this.$patch(D=>{Fr(D,x)})}:e2;function E(){o.stop(),f=[],h=[],r._s.delete(t)}function b(L,P){return function(){hc(r);const x=Array.from(arguments),D=[],S=[];function G(de){D.push(de)}function ue(de){S.push(de)}Ys(h,{args:x,name:L,store:N,after:G,onError:ue});let ye;try{ye=P.apply(this&&this.$id===t?this:N,x)}catch(de){throw Ys(S,de),de}return ye instanceof Promise?ye.then(de=>(Ys(D,de),de)).catch(de=>(Ys(S,de),Promise.reject(de))):(Ys(D,ye),ye)}}const C={_p:r,$id:t,$onAction:bp.bind(null,h),$patch:y,$reset:_,$subscribe(L,P={}){const x=bp(f,L,P.detached,()=>D()),D=o.run(()=>Mn(()=>r.state.value[t],S=>{(P.flush==="sync"?u:c)&&L({storeId:t,type:_o.direct,events:m},S)},Fr({},l,P)));return x},$dispose:E},N=ia(C);r._s.set(t,N);const z=(r._a&&r._a.runWithContext||BC)(()=>r._e.run(()=>(o=rf()).run(e)));for(const L in z){const P=z[L];if(_t(P)&&!zC(P)||yr(P))i||(g&&jC(P)&&(_t(P)?P.value=g[L]:ph(P,g[L])),r.state.value[t][L]=P);else if(typeof P=="function"){const x=b(L,P);z[L]=x,a.actions[L]=P}}return Fr(N,z),Fr(Ge(N),z),Object.defineProperty(N,"$state",{get:()=>r.state.value[t],set:L=>{y(P=>{Fr(P,L)})}}),r._p.forEach(L=>{Fr(N,o.run(()=>L({store:N,app:r._a,pinia:r,options:a})))}),g&&i&&n.hydrate&&n.hydrate(N.$state,g),c=!0,u=!0,N}function Nf(t,e,n){let r,s;const i=typeof e=="function";typeof t=="string"?(r=t,s=i?n:e):(s=t,r=t.id);function o(a,l){const c=D5();return a=a||(c?xn(Z1,null):null),a&&hc(a),a=J1,a._s.has(r)||(i?t2(r,e,s,a):WC(r,s,a)),a._s.get(r)}return o.$id=r,o}function n2(t){{t=Ge(t);const e={};for(const n in t){const r=t[n];(_t(r)||yr(r))&&(e[n]=e5(t,n))}return e}}(function(){var t;try{if(typeof document<"u"){var e=document.createElement("style");e.nonce=(t=document.head.querySelector("meta[property=csp-nonce]"))==null?void 0:t.content,e.appendChild(document.createTextNode(".vue-notification-group{display:block;position:fixed;z-index:5000}.vue-notification-wrapper{display:block;overflow:hidden;width:100%;margin:0;padding:0}.notification-title{font-weight:600}.vue-notification-template{display:block;box-sizing:border-box;background:white;text-align:left}.vue-notification{display:block;box-sizing:border-box;text-align:left;font-size:12px;padding:10px;margin:0 5px 5px;color:#fff;background:#44A4FC;border-left:5px solid #187FE7}.vue-notification.warn{background:#ffb648;border-left-color:#f48a06}.vue-notification.error{background:#E54D42;border-left-color:#b82e24}.vue-notification.success{background:#68CD86;border-left-color:#42a85f}.vn-fade-enter-active,.vn-fade-leave-active,.vn-fade-move{transition:all .5s}.vn-fade-enter-from,.vn-fade-leave-to{opacity:0}")),document.head.appendChild(e)}}catch(n){console.error("vite-plugin-css-injected-by-js",n)}})();const r2=new Map;let HC=class{constructor(e,n,r){this.remaining=n,this.callback=e,this.notifyItem=r,this.resume()}pause(){clearTimeout(this.notifyItem.timer),this.remaining-=Date.now()-this.start}resume(){this.start=Date.now(),clearTimeout(this.notifyItem.timer),this.notifyItem.timer=setTimeout(this.callback,this.remaining)}};function GC(t){return{all:t=t||new Map,on:function(e,n){var r=t.get(e);r?r.push(n):t.set(e,[n])},off:function(e,n){var r=t.get(e);r&&(n?r.splice(r.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var r=t.get(e);r&&r.slice().map(function(s){s(n)}),(r=t.get("*"))&&r.slice().map(function(s){s(e,n)})}}}const El=GC(),ou="[-+]?[0-9]*.?[0-9]+",Tp=[{name:"px",regexp:new RegExp("^".concat(ou,"px$"))},{name:"%",regexp:new RegExp("^".concat(ou,"%$"))},{name:"px",regexp:new RegExp("^".concat(ou,"$"))}],qC=t=>{if(t==="auto")return{type:t,value:0};for(let e=0;e<Tp.length;e++){const n=Tp[e];if(n.regexp.test(t))return{type:n.name,value:parseFloat(t)}}return{type:"",value:t}},KC=t=>{switch(typeof t){case"number":return{type:"px",value:t};case"string":return qC(t);default:return{type:"",value:t}}},kp={x:new Set(["left","center","right"]),y:new Set(["top","bottom"])},QC=(t=>()=>t++)(0),YC=t=>typeof t!="string"?[]:t.split(/\s+/gi).filter(Boolean),XC=t=>{typeof t=="string"&&(t=YC(t));let e=null,n=null;return t.forEach(r=>{kp.y.has(r)&&(n=r),kp.x.has(r)&&(e=r)}),{x:e,y:n}},au={position:["top","right"],cssAnimation:"vn-fade",velocityAnimation:{enter:t=>({height:[t.clientHeight,0],opacity:[1,0]}),leave:{height:0,opacity:[0,1]}}},JC=ke({name:"velocity-group",inheritAttrs:!1,props:{name:{type:String,default:""}},emits:{enter:(t,e)=>!0,leave:(t,e)=>!0,afterLeave:()=>!0},setup:(t,{slots:e,emit:n})=>{const r=(o,a)=>{n("enter",o,a)},s=(o,a)=>{n("leave",o,a)},i=()=>{n("afterLeave")};return()=>Re(p1,{tag:"div",css:!1,name:t.name,onEnter:r,onLeave:s,onAfterLeave:i},{default:()=>{var o;return[(o=e.default)==null?void 0:o.call(e)]}})}}),ZC=ke({name:"css-group",inheritAttrs:!1,props:{name:{type:String,default:""}},setup:(t,{slots:e})=>()=>Re(p1,{tag:"div",name:t.name},{default:()=>{var n;return[(n=e.default)==null?void 0:n.call(e)]}})});function eb(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!gl(t)}const Fa={IDLE:0,DESTROYED:2},tb=ke({name:"notifications",props:{group:{type:String,default:""},width:{type:[Number,String],default:300},reverse:{type:Boolean,default:!1},position:{type:[String,Array],default:()=>au.position},classes:{type:[String,Array],default:"vue-notification"},animationType:{type:String,default:"css",validator(t){return t==="css"||t==="velocity"}},animation:{type:Object,default(){return au.velocityAnimation}},animationName:{type:String,default:au.cssAnimation},speed:{type:Number,default:300},duration:{type:Number,default:3e3},delay:{type:Number,default:0},max:{type:Number,default:1/0},ignoreDuplicates:{type:Boolean,default:!1},closeOnClick:{type:Boolean,default:!0},pauseOnHover:{type:Boolean,default:!1},dangerouslySetInnerHtml:{type:Boolean,default:!1}},emits:{click:t=>!0,destroy:t=>!0,start:t=>!0},slots:Object,setup:(t,{emit:e,slots:n,expose:r})=>{const s=X([]),i=X(null),o=r2.get("velocity"),a=Y(()=>t.animationType==="velocity"),l=Y(()=>a.value?JC:ZC),c=Y(()=>s.value.filter(D=>D.state!==Fa.DESTROYED)),u=Y(()=>KC(t.width)),f=Y(()=>{const{x:D,y:S}=XC(t.position),G=u.value.value,ue=u.value.type,ye={width:G+ue};return S&&(ye[S]="0px"),D&&(D==="center"?ye.left="calc(50% - ".concat(+G/2).concat(ue,")"):ye[D]="0px"),ye}),h=Y(()=>"bottom"in f.value),m=D=>{e("click",D),t.closeOnClick&&C(D)},g=()=>{var D;t.pauseOnHover&&((D=i.value)==null||D.pause())},w=()=>{var D;t.pauseOnHover&&((D=i.value)==null||D.resume())},y=(D={})=>{if(D.group||(D.group=""),D.data||(D.data={}),t.group!==D.group)return;if(D.clean||D.clear){k();return}const S=typeof D.duration=="number"?D.duration:t.duration,G=typeof D.speed=="number"?D.speed:t.speed,ue=typeof D.ignoreDuplicates=="boolean"?D.ignoreDuplicates:t.ignoreDuplicates,{title:ye,text:de,type:be,data:we,id:Be}=D,Ke={id:Be||QC(),title:ye,text:de,type:be,state:Fa.IDLE,speed:G,length:S+2*G,data:we,duplicates:0};S>=0&&(i.value=new HC(()=>C(Ke),Ke.length,Ke));const ge=t.reverse?!h.value:h.value;let Ue=-1;const le=c.value.find(st=>st.title===D.title&&st.text===D.text);if(ue&&le){le.duplicates++;return}ge?(s.value.push(Ke),e("start",Ke),c.value.length>t.max&&(Ue=0)):(s.value.unshift(Ke),e("start",Ke),c.value.length>t.max&&(Ue=c.value.length-1)),Ue!==-1&&C(c.value[Ue])},_=D=>{N(D)},E=D=>["vue-notification-template",t.classes,D.type||""],b=D=>a.value?void 0:{transition:"all ".concat(D.speed,"ms")},C=D=>{clearTimeout(D.timer),D.state=Fa.DESTROYED,x(),e("destroy",D)},N=D=>{const S=s.value.find(G=>G.id===D);S&&C(S)},k=()=>{c.value.forEach(C)},z=(D,S)=>{var G;const ue=(G=t.animation)==null?void 0:G[D];return typeof ue=="function"?ue(S):ue},L=(D,S)=>{if(!a.value)return;const G=z("enter",D);o(D,G,{duration:t.speed,complete:S})},P=(D,S)=>{if(!a.value)return;const G=z("leave",D);o(D,G,{duration:t.speed,complete:S})};function x(){s.value=s.value.filter(D=>D.state!==Fa.DESTROYED)}return fn(()=>{El.on("add",y),El.on("close",_)}),()=>{let D;return Re("div",{class:"vue-notification-group",style:f.value},[Re(l.value,{name:t.animationName,onEnter:L,onLeave:P,onAfterLeave:x},eb(D=c.value.map(S=>Re("div",{key:S.id,class:"vue-notification-wrapper",style:b(S),"data-id":S.id,onMouseenter:g,onMouseleave:w},[n.body?n.body({item:S,class:[t.classes,S.type],close:()=>C(S)}):Re("div",{class:E(S),onClick:()=>m(S)},[t.dangerouslySetInnerHtml?Re(We,null,[S.title?Re("div",{class:"notification-title",innerHTML:S.title},null):null,Re("div",{class:"notification-content",innerHTML:S.text},null)]):Re(We,null,[S.title?Re("div",{class:"notification-title"},[S.title]):null,Re("div",{class:"notification-content"},[S.text])])])])))?D:{default:()=>[D]})])}}}),Mt=t=>{typeof t=="string"&&(t={title:"",text:t}),typeof t=="object"&&El.emit("add",t)};Mt.close=t=>{El.emit("close",t)};const nb="Notifications";function rb(t,e={}){Object.entries(e).forEach(r=>r2.set(...r));const n=e.name||"notify";t.config.globalProperties["$"+n]=Mt,t.component(e.componentName||nb,tb)}const sb={install:rb};var ib=Object.defineProperty,ob=(t,e,n)=>e in t?ib(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$n=(t,e,n)=>(ob(t,typeof e!="symbol"?e+"":e,n),n);/**
 * @license
 * Copyright (c) 2023, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const qt="w",In="b",Lt="p",mh="n",sl="b",no="r",Wr="q",kt="k",lu="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",on=-1,ab={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},Ie={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},Fe={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},cu={b:[16,32,17,15],w:[-16,-32,-17,-15]},Sp={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},lb=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],cb=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],ub={p:1,n:2,b:4,r:8,q:16,k:32},hb="pnbrqkPNBRQK",Ip=[mh,sl,no,Wr],fb=7,db=6,pb=1,mb=0,$a={[kt]:Ie.KSIDE_CASTLE,[Wr]:Ie.QSIDE_CASTLE},Nr={w:[{square:Fe.a1,flag:Ie.QSIDE_CASTLE},{square:Fe.h1,flag:Ie.KSIDE_CASTLE}],b:[{square:Fe.a8,flag:Ie.QSIDE_CASTLE},{square:Fe.h8,flag:Ie.KSIDE_CASTLE}]},gb={b:pb,w:db},_b=["1-0","0-1","1/2-1/2","*"];function Ls(t){return t>>4}function Vo(t){return t&15}function s2(t){return"0123456789".indexOf(t)!==-1}function vn(t){const e=Vo(t),n=Ls(t);return"abcdefgh".substring(e,e+1)+"87654321".substring(n,n+1)}function Ki(t){return t===qt?In:qt}function vb(t){const e=t.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const n=parseInt(e[5],10);if(isNaN(n)||n<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const r=parseInt(e[4],10);if(isNaN(r)||r<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const s=e[0].split("/");if(s.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let o=0;o<s.length;o++){let a=0,l=!1;for(let c=0;c<s[o].length;c++)if(s2(s[o][c])){if(l)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};a+=parseInt(s[o][c],10),l=!0}else{if(!/^[prnbqkPRNBQK]$/.test(s[o][c]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};a+=1,l=!1}if(a!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const i=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:o,regex:a}of i){if(!a.test(e[0]))return{ok:!1,error:"Invalid FEN: missing ".concat(o," king")};if((e[0].match(a)||[]).length>1)return{ok:!1,error:"Invalid FEN: too many ".concat(o," kings")}}return Array.from(s[0]+s[7]).some(o=>o.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function yb(t,e){const n=t.from,r=t.to,s=t.piece;let i=0,o=0,a=0;for(let l=0,c=e.length;l<c;l++){const u=e[l].from,f=e[l].to,h=e[l].piece;s===h&&n!==u&&r===f&&(i++,Ls(n)===Ls(u)&&o++,Vo(n)===Vo(u)&&a++)}return i>0?o>0&&a>0?vn(n):a>0?vn(n).charAt(1):vn(n).charAt(0):""}function Mr(t,e,n,r,s,i=void 0,o=Ie.NORMAL){const a=Ls(r);if(s===Lt&&(a===fb||a===mb))for(let l=0;l<Ip.length;l++){const c=Ip[l];t.push({color:e,from:n,to:r,piece:s,captured:i,promotion:c,flags:o|Ie.PROMOTION})}else t.push({color:e,from:n,to:r,piece:s,captured:i,flags:o})}function Ap(t){let e=t.charAt(0);return e>="a"&&e<="h"?t.match(/[a-h]\d.*[a-h]\d/)?void 0:Lt:(e=e.toLowerCase(),e==="o"?kt:e)}function uu(t){return t.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function hu(t){return t.split(" ").slice(0,4).join(" ")}let Hr=class{constructor(e=lu){$n(this,"_board",new Array(128)),$n(this,"_turn",qt),$n(this,"_header",{}),$n(this,"_kings",{w:on,b:on}),$n(this,"_epSquare",-1),$n(this,"_halfMoves",0),$n(this,"_moveNumber",0),$n(this,"_history",[]),$n(this,"_comments",{}),$n(this,"_castling",{w:0,b:0}),$n(this,"_positionCount",{}),this.load(e)}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:on,b:on},this._turn=qt,this._castling={w:0,b:0},this._epSquare=on,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{},this._positionCount={},delete this._header.SetUp,delete this._header.FEN}removeHeader(e){e in this._header&&delete this._header[e]}load(e,{skipValidation:n=!1,preserveHeaders:r=!1}={}){let s=e.split(/\s+/);if(s.length>=2&&s.length<6){const a=["-","-","0","1"];e=s.concat(a.slice(-(6-s.length))).join(" ")}if(s=e.split(/\s+/),!n){const{ok:a,error:l}=vb(e);if(!a)throw new Error(l)}const i=s[0];let o=0;this.clear({preserveHeaders:r});for(let a=0;a<i.length;a++){const l=i.charAt(a);if(l==="/")o+=8;else if(s2(l))o+=parseInt(l,10);else{const c=l<"a"?qt:In;this._put({type:l.toLowerCase(),color:c},vn(o)),o++}}this._turn=s[1],s[2].indexOf("K")>-1&&(this._castling.w|=Ie.KSIDE_CASTLE),s[2].indexOf("Q")>-1&&(this._castling.w|=Ie.QSIDE_CASTLE),s[2].indexOf("k")>-1&&(this._castling.b|=Ie.KSIDE_CASTLE),s[2].indexOf("q")>-1&&(this._castling.b|=Ie.QSIDE_CASTLE),this._epSquare=s[3]==="-"?on:Fe[s[3]],this._halfMoves=parseInt(s[4],10),this._moveNumber=parseInt(s[5],10),this._updateSetup(e),this._incPositionCount(e)}fen(){var e,n;let r=0,s="";for(let a=Fe.a8;a<=Fe.h1;a++){if(this._board[a]){r>0&&(s+=r,r=0);const{color:l,type:c}=this._board[a];s+=l===qt?c.toUpperCase():c.toLowerCase()}else r++;a+1&136&&(r>0&&(s+=r),a!==Fe.h1&&(s+="/"),r=0,a+=8)}let i="";this._castling[qt]&Ie.KSIDE_CASTLE&&(i+="K"),this._castling[qt]&Ie.QSIDE_CASTLE&&(i+="Q"),this._castling[In]&Ie.KSIDE_CASTLE&&(i+="k"),this._castling[In]&Ie.QSIDE_CASTLE&&(i+="q"),i=i||"-";let o="-";if(this._epSquare!==on){const a=this._epSquare+(this._turn===qt?16:-16),l=[a+1,a-1];for(const c of l){if(c&136)continue;const u=this._turn;if(((e=this._board[c])==null?void 0:e.color)===u&&((n=this._board[c])==null?void 0:n.type)===Lt){this._makeMove({color:u,from:c,to:this._epSquare,piece:Lt,captured:Lt,flags:Ie.EP_CAPTURE});const f=!this._isKingAttacked(u);if(this._undoMove(),f){o=vn(this._epSquare);break}}}}return[s,this._turn,i,o,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(e){this._history.length>0||(e!==lu?(this._header.SetUp="1",this._header.FEN=e):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(lu)}get(e){return this._board[Fe[e]]||!1}put({type:e,color:n},r){return this._put({type:e,color:n},r)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_put({type:e,color:n},r){if(hb.indexOf(e.toLowerCase())===-1||!(r in Fe))return!1;const s=Fe[r];if(e==kt&&!(this._kings[n]==on||this._kings[n]==s))return!1;const i=this._board[s];return i&&i.type===kt&&(this._kings[i.color]=on),this._board[s]={type:e,color:n},e===kt&&(this._kings[n]=s),!0}remove(e){const n=this.get(e);return delete this._board[Fe[e]],n&&n.type===kt&&(this._kings[n.color]=on),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),n}_updateCastlingRights(){var e,n,r,s,i,o,a,l,c,u,f,h;const m=((e=this._board[Fe.e1])==null?void 0:e.type)===kt&&((n=this._board[Fe.e1])==null?void 0:n.color)===qt,g=((r=this._board[Fe.e8])==null?void 0:r.type)===kt&&((s=this._board[Fe.e8])==null?void 0:s.color)===In;(!m||((i=this._board[Fe.a1])==null?void 0:i.type)!==no||((o=this._board[Fe.a1])==null?void 0:o.color)!==qt)&&(this._castling.w&=~Ie.QSIDE_CASTLE),(!m||((a=this._board[Fe.h1])==null?void 0:a.type)!==no||((l=this._board[Fe.h1])==null?void 0:l.color)!==qt)&&(this._castling.w&=~Ie.KSIDE_CASTLE),(!g||((c=this._board[Fe.a8])==null?void 0:c.type)!==no||((u=this._board[Fe.a8])==null?void 0:u.color)!==In)&&(this._castling.b&=~Ie.QSIDE_CASTLE),(!g||((f=this._board[Fe.h8])==null?void 0:f.type)!==no||((h=this._board[Fe.h8])==null?void 0:h.color)!==In)&&(this._castling.b&=~Ie.KSIDE_CASTLE)}_updateEnPassantSquare(){var e,n;if(this._epSquare===on)return;const r=this._epSquare+(this._turn===qt?-16:16),s=this._epSquare+(this._turn===qt?16:-16),i=[s+1,s-1];if(this._board[r]!==null||this._board[this._epSquare]!==null||((e=this._board[s])==null?void 0:e.color)!==Ki(this._turn)||((n=this._board[s])==null?void 0:n.type)!==Lt){this._epSquare=on;return}const o=a=>{var l,c;return!(a&136)&&((l=this._board[a])==null?void 0:l.color)===this._turn&&((c=this._board[a])==null?void 0:c.type)===Lt};i.some(o)||(this._epSquare=on)}_attacked(e,n){for(let r=Fe.a8;r<=Fe.h1;r++){if(r&136){r+=7;continue}if(this._board[r]===void 0||this._board[r].color!==e)continue;const s=this._board[r],i=r-n;if(i===0)continue;const o=i+119;if(lb[o]&ub[s.type]){if(s.type===Lt){if(i>0){if(s.color===qt)return!0}else if(s.color===In)return!0;continue}if(s.type==="n"||s.type==="k")return!0;const a=cb[o];let l=r+a,c=!1;for(;l!==n;){if(this._board[l]!=null){c=!0;break}l+=a}if(!c)return!0}}return!1}_isKingAttacked(e){const n=this._kings[e];return n===-1?!1:this._attacked(Ki(e),n)}isAttacked(e,n){return this._attacked(n,Fe[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},n=[];let r=0,s=0;for(let i=Fe.a8;i<=Fe.h1;i++){if(s=(s+1)%2,i&136){i+=7;continue}const o=this._board[i];o&&(e[o.type]=o.type in e?e[o.type]+1:1,o.type===sl&&n.push(s),r++)}if(r===2||r===3&&(e[sl]===1||e[mh]===1))return!0;if(r===e[sl]+2){let i=0;const o=n.length;for(let a=0;a<o;a++)i+=n[a];if(i===0||i===o)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this.fen())>=3}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:e=!1,square:n=void 0,piece:r=void 0}={}){const s=this._moves({square:n,piece:r});return e?s.map(i=>this._makePretty(i)):s.map(i=>this._moveToSan(i,s))}_moves({legal:e=!0,piece:n=void 0,square:r=void 0}={}){var s;const i=r?r.toLowerCase():void 0,o=n==null?void 0:n.toLowerCase(),a=[],l=this._turn,c=Ki(l);let u=Fe.a8,f=Fe.h1,h=!1;if(i)if(i in Fe)u=f=Fe[i],h=!0;else return[];for(let g=u;g<=f;g++){if(g&136){g+=7;continue}if(!this._board[g]||this._board[g].color===c)continue;const{type:w}=this._board[g];let y;if(w===Lt){if(o&&o!==w)continue;y=g+cu[l][0],this._board[y]||(Mr(a,l,g,y,Lt),y=g+cu[l][1],gb[l]===Ls(g)&&!this._board[y]&&Mr(a,l,g,y,Lt,void 0,Ie.BIG_PAWN));for(let _=2;_<4;_++)y=g+cu[l][_],!(y&136)&&(((s=this._board[y])==null?void 0:s.color)===c?Mr(a,l,g,y,Lt,this._board[y].type,Ie.CAPTURE):y===this._epSquare&&Mr(a,l,g,y,Lt,Lt,Ie.EP_CAPTURE))}else{if(o&&o!==w)continue;for(let _=0,E=Sp[w].length;_<E;_++){const b=Sp[w][_];for(y=g;y+=b,!(y&136);){if(!this._board[y])Mr(a,l,g,y,w);else{if(this._board[y].color===l)break;Mr(a,l,g,y,w,this._board[y].type,Ie.CAPTURE);break}if(w===mh||w===kt)break}}}}if((o===void 0||o===kt)&&(!h||f===this._kings[l])){if(this._castling[l]&Ie.KSIDE_CASTLE){const g=this._kings[l],w=g+2;!this._board[g+1]&&!this._board[w]&&!this._attacked(c,this._kings[l])&&!this._attacked(c,g+1)&&!this._attacked(c,w)&&Mr(a,l,this._kings[l],w,kt,void 0,Ie.KSIDE_CASTLE)}if(this._castling[l]&Ie.QSIDE_CASTLE){const g=this._kings[l],w=g-2;!this._board[g-1]&&!this._board[g-2]&&!this._board[g-3]&&!this._attacked(c,this._kings[l])&&!this._attacked(c,g-1)&&!this._attacked(c,w)&&Mr(a,l,this._kings[l],w,kt,void 0,Ie.QSIDE_CASTLE)}}if(!e||this._kings[l]===-1)return a;const m=[];for(let g=0,w=a.length;g<w;g++)this._makeMove(a[g]),this._isKingAttacked(l)||m.push(a[g]),this._undoMove();return m}move(e,{strict:n=!1}={}){let r=null;if(typeof e=="string")r=this._moveFromSan(e,n);else if(typeof e=="object"){const i=this._moves();for(let o=0,a=i.length;o<a;o++)if(e.from===vn(i[o].from)&&e.to===vn(i[o].to)&&(!("promotion"in i[o])||e.promotion===i[o].promotion)){r=i[o];break}}if(!r)throw typeof e=="string"?new Error("Invalid move: ".concat(e)):new Error("Invalid move: ".concat(JSON.stringify(e)));const s=this._makePretty(r);return this._makeMove(r),this._incPositionCount(s.after),s}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(e){const n=this._turn,r=Ki(n);if(this._push(e),this._board[e.to]=this._board[e.from],delete this._board[e.from],e.flags&Ie.EP_CAPTURE&&(this._turn===In?delete this._board[e.to-16]:delete this._board[e.to+16]),e.promotion&&(this._board[e.to]={type:e.promotion,color:n}),this._board[e.to].type===kt){if(this._kings[n]=e.to,e.flags&Ie.KSIDE_CASTLE){const s=e.to-1,i=e.to+1;this._board[s]=this._board[i],delete this._board[i]}else if(e.flags&Ie.QSIDE_CASTLE){const s=e.to+1,i=e.to-2;this._board[s]=this._board[i],delete this._board[i]}this._castling[n]=0}if(this._castling[n]){for(let s=0,i=Nr[n].length;s<i;s++)if(e.from===Nr[n][s].square&&this._castling[n]&Nr[n][s].flag){this._castling[n]^=Nr[n][s].flag;break}}if(this._castling[r]){for(let s=0,i=Nr[r].length;s<i;s++)if(e.to===Nr[r][s].square&&this._castling[r]&Nr[r][s].flag){this._castling[r]^=Nr[r][s].flag;break}}e.flags&Ie.BIG_PAWN?n===In?this._epSquare=e.to-16:this._epSquare=e.to+16:this._epSquare=on,e.piece===Lt?this._halfMoves=0:e.flags&(Ie.CAPTURE|Ie.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,n===In&&this._moveNumber++,this._turn=r}undo(){const e=this._undoMove();if(e){const n=this._makePretty(e);return this._decPositionCount(n.after),n}return null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;const n=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber;const r=this._turn,s=Ki(r);if(this._board[n.from]=this._board[n.to],this._board[n.from].type=n.piece,delete this._board[n.to],n.captured)if(n.flags&Ie.EP_CAPTURE){let i;r===In?i=n.to-16:i=n.to+16,this._board[i]={type:Lt,color:s}}else this._board[n.to]={type:n.captured,color:s};if(n.flags&(Ie.KSIDE_CASTLE|Ie.QSIDE_CASTLE)){let i,o;n.flags&Ie.KSIDE_CASTLE?(i=n.to+1,o=n.to-1):(i=n.to-2,o=n.to+1),this._board[i]=this._board[o],delete this._board[o]}return n}pgn({newline:e="\n",maxWidth:n=0}={}){const r=[];let s=!1;for(const h in this._header)r.push("["+h+' "'+this._header[h]+'"]'+e),s=!0;s&&this._history.length&&r.push(e);const i=h=>{const m=this._comments[this.fen()];if(typeof m<"u"){const g=h.length>0?" ":"";h="".concat(h).concat(g,"{").concat(m,"}")}return h},o=[];for(;this._history.length>0;)o.push(this._undoMove());const a=[];let l="";for(o.length===0&&a.push(i(""));o.length>0;){l=i(l);const h=o.pop();if(!h)break;if(!this._history.length&&h.color==="b"){const m="".concat(this._moveNumber,". ...");l=l?"".concat(l," ").concat(m):m}else h.color==="w"&&(l.length&&a.push(l),l=this._moveNumber+".");l=l+" "+this._moveToSan(h,this._moves({legal:!0})),this._makeMove(h)}if(l.length&&a.push(i(l)),typeof this._header.Result<"u"&&a.push(this._header.Result),n===0)return r.join("")+a.join(" ");const c=function(){return r.length>0&&r[r.length-1]===" "?(r.pop(),!0):!1},u=function(h,m){for(const g of m.split(" "))if(g){if(h+g.length>n){for(;c();)h--;r.push(e),h=0}r.push(g),h+=g.length,r.push(" "),h++}return c()&&h--,h};let f=0;for(let h=0;h<a.length;h++){if(f+a[h].length>n&&a[h].includes("{")){f=u(f,a[h]);continue}f+a[h].length>n&&h!==0?(r[r.length-1]===" "&&r.pop(),r.push(e),f=0):h!==0&&(r.push(" "),f++),r.push(a[h]),f+=a[h].length}return r.join("")}header(...e){for(let n=0;n<e.length;n+=2)typeof e[n]=="string"&&typeof e[n+1]=="string"&&(this._header[e[n]]=e[n+1]);return this._header}loadPgn(e,{strict:n=!1,newlineChar:r="\r?\n"}={}){function s(E){return E.replace(/\\/g,"\\")}function i(E){const b={},C=E.split(new RegExp(s(r)));let N="",k="";for(let z=0;z<C.length;z++){const L=/^\s*\[\s*([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;N=C[z].replace(L,"$1"),k=C[z].replace(L,"$2"),N.trim().length>0&&(b[N]=k)}return b}e=e.trim();const o=new RegExp("^(\\[((?:"+s(r)+")|.)*\\])((?:\\s*"+s(r)+"){2}|(?:\\s*"+s(r)+")*$)").exec(e),a=o&&o.length>=2?o[1]:"";this.reset();const l=i(a);let c="";for(const E in l)E.toLowerCase()==="fen"&&(c=l[E]),this.header(E,l[E]);if(!n)c&&this.load(c,{preserveHeaders:!0});else if(l.SetUp==="1"){if(!("FEN"in l))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(l.FEN,{preserveHeaders:!0})}function u(E){return Array.from(E).map(function(b){return b.charCodeAt(0)<128?b.charCodeAt(0).toString(16):encodeURIComponent(b).replace(/%/g,"").toLowerCase()}).join("")}function f(E){return E.length==0?"":decodeURIComponent("%"+(E.match(/.{1,2}/g)||[]).join("%"))}const h=function(E){return E=E.replace(new RegExp(s(r),"g")," "),"{".concat(u(E.slice(1,E.length-1)),"}")},m=function(E){if(E.startsWith("{")&&E.endsWith("}"))return f(E.slice(1,E.length-1))};let g=e.replace(a,"").replace(new RegExp("({[^}]*})+?|;([^".concat(s(r),"]*)"),"g"),function(E,b,C){return b!==void 0?h(b):" "+h("{".concat(C.slice(1),"}"))}).replace(new RegExp(s(r),"g")," ");const w=/(\([^()]+\))+?/g;for(;w.test(g);)g=g.replace(w,"");g=g.replace(/\d+\.(\.\.)?/g,""),g=g.replace(/\.\.\./g,""),g=g.replace(/\$\d+/g,"");let y=g.trim().split(new RegExp(/\s+/));y=y.filter(E=>E!=="");let _="";for(let E=0;E<y.length;E++){const b=m(y[E]);if(b!==void 0){this._comments[this.fen()]=b;continue}const C=this._moveFromSan(y[E],n);if(C==null)if(_b.indexOf(y[E])>-1)_=y[E];else throw new Error("Invalid move in PGN: ".concat(y[E]));else _="",this._makeMove(C),this._incPositionCount(this.fen())}_&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",_)}_moveToSan(e,n){let r="";if(e.flags&Ie.KSIDE_CASTLE)r="O-O";else if(e.flags&Ie.QSIDE_CASTLE)r="O-O-O";else{if(e.piece!==Lt){const s=yb(e,n);r+=e.piece.toUpperCase()+s}e.flags&(Ie.CAPTURE|Ie.EP_CAPTURE)&&(e.piece===Lt&&(r+=vn(e.from)[0]),r+="x"),r+=vn(e.to),e.promotion&&(r+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?r+="#":r+="+"),this._undoMove(),r}_moveFromSan(e,n=!1){const r=uu(e);let s=Ap(r),i=this._moves({legal:!0,piece:s});for(let h=0,m=i.length;h<m;h++)if(r===uu(this._moveToSan(i[h],i)))return i[h];if(n)return null;let o,a,l,c,u,f=!1;if(a=r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),a?(o=a[1],l=a[2],c=a[3],u=a[4],l.length==1&&(f=!0)):(a=r.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),a&&(o=a[1],l=a[2],c=a[3],u=a[4],l.length==1&&(f=!0))),s=Ap(r),i=this._moves({legal:!0,piece:o||s}),!c)return null;for(let h=0,m=i.length;h<m;h++)if(l){if((!o||o.toLowerCase()==i[h].piece)&&Fe[l]==i[h].from&&Fe[c]==i[h].to&&(!u||u.toLowerCase()==i[h].promotion))return i[h];if(f){const g=vn(i[h].from);if((!o||o.toLowerCase()==i[h].piece)&&Fe[c]==i[h].to&&(l==g[0]||l==g[1])&&(!u||u.toLowerCase()==i[h].promotion))return i[h]}}else if(r===uu(this._moveToSan(i[h],i)).replace("x",""))return i[h];return null}ascii(){let e="   +------------------------+\n";for(let n=Fe.a8;n<=Fe.h1;n++){if(Vo(n)===0&&(e+=" "+"87654321"[Ls(n)]+" |"),this._board[n]){const r=this._board[n].type,s=this._board[n].color===qt?r.toUpperCase():r.toLowerCase();e+=" "+s+" "}else e+=" . ";n+1&136&&(e+="|\n",n+=8)}return e+="   +------------------------+\n",e+="     a  b  c  d  e  f  g  h",e}perft(e){const n=this._moves({legal:!1});let r=0;const s=this._turn;for(let i=0,o=n.length;i<o;i++)this._makeMove(n[i]),this._isKingAttacked(s)||(e-1>0?r+=this.perft(e-1):r++),this._undoMove();return r}_makePretty(e){const{color:n,piece:r,from:s,to:i,flags:o,captured:a,promotion:l}=e;let c="";for(const m in Ie)Ie[m]&o&&(c+=ab[m]);const u=vn(s),f=vn(i),h={color:n,piece:r,from:u,to:f,san:this._moveToSan(e,this._moves({legal:!0})),flags:c,lan:u+f,before:this.fen(),after:""};return this._makeMove(e),h.after=this.fen(),this._undoMove(),a&&(h.captured=a),l&&(h.promotion=l,h.lan+=l),h}turn(){return this._turn}board(){const e=[];let n=[];for(let r=Fe.a8;r<=Fe.h1;r++)this._board[r]==null?n.push(null):n.push({square:vn(r),type:this._board[r].type,color:this._board[r].color}),r+1&136&&(e.push(n),n=[],r+=8);return e}squareColor(e){if(e in Fe){const n=Fe[e];return(Ls(n)+Vo(n))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const n=[],r=[];for(;this._history.length>0;)n.push(this._undoMove());for(;;){const s=n.pop();if(!s)break;e?r.push(this._makePretty(s)):r.push(this._moveToSan(s,this._moves())),this._makeMove(s)}return r}_getPositionCount(e){const n=hu(e);return this._positionCount[n]||0}_incPositionCount(e){const n=hu(e);this._positionCount[n]===void 0&&(this._positionCount[n]=0),this._positionCount[n]+=1}_decPositionCount(e){const n=hu(e);this._positionCount[n]===1?delete this._positionCount[n]:this._positionCount[n]-=1}_pruneComments(){const e=[],n={},r=s=>{s in this._comments&&(n[s]=this._comments[s])};for(;this._history.length>0;)e.push(this._undoMove());for(r(this.fen());;){const s=e.pop();if(!s)break;this._makeMove(s),r(this.fen())}this._comments=n}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const n=this._comments[e];return delete this._comments[e],{fen:e,comment:n}})}setCastlingRights(e,n){for(const s of[kt,Wr])n[s]!==void 0&&(n[s]?this._castling[e]|=$a[s]:this._castling[e]&=~$a[s]);this._updateCastlingRights();const r=this.getCastlingRights(e);return(n[kt]===void 0||n[kt]===r[kt])&&(n[Wr]===void 0||n[Wr]===r[Wr])}getCastlingRights(e){return{[kt]:(this._castling[e]&$a[kt])!==0,[Wr]:(this._castling[e]&$a[Wr])!==0}}moveNumber(){return this._moveNumber}};const wb=["width","height"],Eb=R("path",{d:"M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z ",style:{opacity:"1",fill:"#000000","fill-opacity":"1","fill-rule":"nonzero",stroke:"#000000","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-opacity":"1"}},null,-1),Cb=[Eb],Rp=ke({__name:"BP",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},Cb,8,wb))}}),bb=["width","height"],Tb=et('<g style="opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18" style="fill:#000000;stroke:#000000;"></path><path d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10" style="fill:#000000;stroke:#000000;"></path><path d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z" style="fill:#ffffff;stroke:#ffffff;"></path><path d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z" transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)" style="fill:#ffffff;stroke:#ffffff;"></path><path d="M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z " style="fill:#ffffff;stroke:none;"></path></g>',1),kb=[Tb],fu=ke({__name:"BN",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},kb,8,bb))}}),Sb=["width","height"],Ib=et('<g style="opacity:1;fill:none;fill-rule:evenodd;fill-opacity:1;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><g style="fill:#000000;stroke:#000000;stroke-linecap:butt;"><path d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z"></path><path d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"></path><path d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"></path></g><path d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18" style="fill:none;stroke:#ffffff;stroke-linejoin:miter;"></path></g>',1),Ab=[Ib],du=ke({__name:"BB",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},Ab,8,Sb))}}),Rb=["width","height"],Pb=et('<g style="opacity:1;fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z " style="stroke-linecap:butt;"></path><path d="M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z " style="stroke-linecap:butt;"></path><path d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z " style="stroke-linecap:butt;"></path><path d="M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z " style="stroke-linecap:butt;stroke-linejoin:miter;"></path><path d="M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z " style="stroke-linecap:butt;"></path><path d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z " style="stroke-linecap:butt;"></path><path d="M 12,35.5 L 33,35.5 L 33,35.5" style="fill:none;stroke:#ffffff;stroke-width:1;stroke-linejoin:miter;"></path><path d="M 13,31.5 L 32,31.5" style="fill:none;stroke:#ffffff;stroke-width:1;stroke-linejoin:miter;"></path><path d="M 14,29.5 L 31,29.5" style="fill:none;stroke:#ffffff;stroke-width:1;stroke-linejoin:miter;"></path><path d="M 14,16.5 L 31,16.5" style="fill:none;stroke:#ffffff;stroke-width:1;stroke-linejoin:miter;"></path><path d="M 11,14 L 34,14" style="fill:none;stroke:#ffffff;stroke-width:1;stroke-linejoin:miter;"></path></g>',1),Lb=[Pb],pu=ke({__name:"BR",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},Lb,8,Rb))}}),Nb=["width","height"],Mb=et('<g style="opacity:1;fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><g style="fill:#000000;stroke:none;"><circle cx="6" cy="12" r="2.75"></circle><circle cx="14" cy="9" r="2.75"></circle><circle cx="22.5" cy="8" r="2.75"></circle><circle cx="31" cy="9" r="2.75"></circle><circle cx="39" cy="12" r="2.75"></circle></g><path d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z" style="stroke-linecap:butt;stroke:#000000;"></path><path d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z" style="stroke-linecap:butt;"></path><path d="M 11,38.5 A 35,35 1 0 0 34,38.5" style="fill:none;stroke:#000000;stroke-linecap:butt;"></path><path d="M 11,29 A 35,35 1 0 1 34,29" style="fill:none;stroke:#ffffff;"></path><path d="M 12.5,31.5 L 32.5,31.5" style="fill:none;stroke:#ffffff;"></path><path d="M 11.5,34.5 A 35,35 1 0 0 33.5,34.5" style="fill:none;stroke:#ffffff;"></path><path d="M 10.5,37.5 A 35,35 1 0 0 34.5,37.5" style="fill:none;stroke:#ffffff;"></path></g>',1),xb=[Mb],mu=ke({__name:"BQ",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},xb,8,Nb))}}),Ob=["width","height"],Db=et('<g style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 22.5,11.63 L 22.5,6" style="fill:none;stroke:#000000;stroke-linejoin:miter;" id="path6570"></path><path d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25" style="fill:#000000;fill-opacity:1;stroke-linecap:butt;stroke-linejoin:miter;"></path><path d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z " style="fill:#000000;stroke:#000000;"></path><path d="M 20,8 L 25,8" style="fill:none;stroke:#000000;stroke-linejoin:miter;"></path><path d="M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.51,26.6 L 22.5,24.5 C 20,18 9.906,14 6.997,19.85 C 4.5,25.5 11.85,28.85 11.85,28.85" style="fill:none;stroke:#ffffff;"></path><path d="M 11.5,30 C 17,27 27,27 32.5,30 M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5 M 11.5,37 C 17,34 27,34 32.5,37" style="fill:none;stroke:#ffffff;"></path></g>',1),Vb=[Db],Pp=ke({__name:"BK",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},Vb,8,Ob))}}),Fb=["width","height"],$b=R("path",{d:"M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z ",style:{opacity:"1",fill:"#ffffff","fill-opacity":"1","fill-rule":"nonzero",stroke:"#000000","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-opacity":"1"}},null,-1),Bb=[$b],Lp=ke({__name:"WP",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},Bb,8,Fb))}}),Ub=["width","height"],jb=et('<g style="opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18" style="fill:#ffffff;stroke:#000000;"></path><path d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10" style="fill:#ffffff;stroke:#000000;"></path><path d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z" style="fill:#000000;stroke:#000000;"></path><path d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z" transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)" style="fill:#000000;stroke:#000000;"></path></g>',1),zb=[jb],gu=ke({__name:"WN",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},zb,8,Ub))}}),Wb=["width","height"],Hb=et('<g style="opacity:1;fill:none;fill-rule:evenodd;fill-opacity:1;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><g style="fill:#ffffff;stroke:#000000;stroke-linecap:butt;"><path d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z"></path><path d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"></path><path d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"></path></g><path d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18" style="fill:none;stroke:#000000;stroke-linejoin:miter;"></path></g>',1),Gb=[Hb],_u=ke({__name:"WB",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},Gb,8,Wb))}}),qb=["width","height"],Kb=et('<g style="opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z " style="stroke-linecap:butt;"></path><path d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z " style="stroke-linecap:butt;"></path><path d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14" style="stroke-linecap:butt;"></path><path d="M 34,14 L 31,17 L 14,17 L 11,14"></path><path d="M 31,17 L 31,29.5 L 14,29.5 L 14,17" style="stroke-linecap:butt;stroke-linejoin:miter;"></path><path d="M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5"></path><path d="M 11,14 L 34,14" style="fill:none;stroke:#000000;stroke-linejoin:miter;"></path></g>',1),Qb=[Kb],vu=ke({__name:"WR",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},Qb,8,qb))}}),Yb=["width","height"],Xb=et('<g style="opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z" transform="translate(-1,-1)"></path><path d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z" transform="translate(15.5,-5.5)"></path><path d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z" transform="translate(32,-1)"></path><path d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z" transform="translate(7,-4.5)"></path><path d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z" transform="translate(24,-4)"></path><path d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38,14 L 31,25 L 31,11 L 25.5,24.5 L 22.5,9.5 L 19.5,24.5 L 14,10.5 L 14,25 L 7,14 L 9,26 z " style="stroke-linecap:butt;"></path><path d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z " style="stroke-linecap:butt;"></path><path d="M 11.5,30 C 15,29 30,29 33.5,30" style="fill:none;"></path><path d="M 12,33.5 C 18,32.5 27,32.5 33,33.5" style="fill:none;"></path></g>',1),Jb=[Xb],yu=ke({__name:"WQ",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},Jb,8,Yb))}}),Zb=["width","height"],eT=et('<g style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 22.5,11.63 L 22.5,6" style="fill:none;stroke:#000000;stroke-linejoin:miter;"></path><path d="M 20,8 L 25,8" style="fill:none;stroke:#000000;stroke-linejoin:miter;"></path><path d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25" style="fill:#ffffff;stroke:#000000;stroke-linecap:butt;stroke-linejoin:miter;"></path><path d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z " style="fill:#ffffff;stroke:#000000;"></path><path d="M 11.5,30 C 17,27 27,27 32.5,30" style="fill:none;stroke:#000000;"></path><path d="M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5" style="fill:none;stroke:#000000;"></path><path d="M 11.5,37 C 17,34 27,34 32.5,37" style="fill:none;stroke:#000000;"></path></g>',1),tT=[eT],Np=ke({__name:"WK",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},tT,8,Zb))}}),nT=["width","height"],rT=R("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"},null,-1),sT=R("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),iT=R("g",{id:"SVGRepo_iconCarrier"},[R("polygon",{points:"456.851,0 245,212.564 33.149,0 0.708,32.337 212.669,245.004 0.708,457.678 33.149,490 245,277.443 456.851,490 489.292,457.678 277.331,245.004 489.292,32.337 "})],-1),oT=[rT,sT,iT],Mp=ke({__name:"Cross",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{fill:"#d01616",width:n.value,height:n.value,version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 490 490","xml:space":"preserve",stroke:"#d01616"},oT,8,nT))}});function Cl(t,e){return"".concat(String.fromCharCode(97+t)).concat(String.fromCharCode(49+e))}function mn(t,e,n){return t.split(" ")[0].split("/").map(cT).toReversed()[n][e]}function aT(t){const e=t.charCodeAt(0);return e>=48&&e<=57}function lT(t){const e=parseInt(t);let n=[];for(let r=0;r<e;r++)n.push("");return n}function cT(t){return t.split("").flatMap(e=>aT(e)?lT(e):e)}function uT(t,e,n){const r=mn(t,e,n);return r===void 0?!1:r==="P"}function hT(t,e,n){const r=mn(t,e,n);return r===void 0?!1:r==="N"}function fT(t,e,n){const r=mn(t,e,n);return r===void 0?!1:r==="B"}function dT(t,e,n){const r=mn(t,e,n);return r===void 0?!1:r==="R"}function pT(t,e,n){const r=mn(t,e,n);return r===void 0?!1:r==="Q"}function mT(t,e,n){const r=mn(t,e,n);return r===void 0?!1:r==="K"}function gT(t,e,n){const r=mn(t,e,n);return r===void 0?!1:r==="p"}function _T(t,e,n){const r=mn(t,e,n);return r===void 0?!1:r==="n"}function vT(t,e,n){const r=mn(t,e,n);return r===void 0?!1:r==="b"}function yT(t,e,n){const r=mn(t,e,n);return r===void 0?!1:r==="r"}function wT(t,e,n){const r=mn(t,e,n);return r===void 0?!1:r==="q"}function ET(t,e,n){const r=mn(t,e,n);return r===void 0?!1:r==="k"}function Mf(t,e,n,r){const s=Math.floor((t-n*.5)/n),i=Math.floor((e-n*.5)/n),o=[!0,"true"].includes(r)?7-s:s,a=[!0,"true"].includes(r)?i:7-i;return[o,a]}function xf(t,e){if(!e)return[];const n=e.getBoundingClientRect(),r=t.clientX-n.x,s=t.clientY-n.y;return[r,s]}function CT(t,e,n,r,s,i,o,a,l){if(!r||!o||a||!l)return;const[c,u]=xf(t,r),[f,h]=Mf(c,u,e,n),m=mn(s,f,h);if(m===void 0)return;const g=s.split(" ")[1]==="w",w="PNRBQK".includes(m);g===w&&i(c,u,f,h,m)}function bT(t,e,n,r,s,i,o,a,l,c,u){if(!r||!l||c||!e||a||!u)return;const[f,h]=xf(t,r),[m,g]=Mf(f,h,i,o),w=r.getBoundingClientRect();if(!(f>=0&&f<=w.width&&h>=0&&h<=w.height)){s();return}n(f,h,m,g)}function TT(t,e,n,r,s,i,o,a,l,c,u,f,h,m,g,w,y,_){if(!r||!h||w||!i||u||!y)return;const[E,b]=xf(t,r),[C,N]=Mf(E,b,e,n),k=o.originCell;if(!(k.file>=0&&k.file<=7&&k.rank>=0&&k.rank<=7&&C>=0&&C<=7&&N>=0&&N<=7)){a();return}const z=mn(s.fen(),o.originCell.file,o.originCell.rank),L=["P","p"].includes(z),P=N===0||N===7;let x;const D=new Hr(s.fen()),S=gh(k.file,k.rank,C,N,"q");try{D.move(S),x=!0}catch(ye){x=!1}if(x&&L&&P){f(k.file,k.rank,C,N);return}const G=gh(k.file,k.rank,C,N),ue=new Hr(s.fen());try{s.move(G)}catch(ye){a();return}l(),a(),m(),c(k.file,k.rank,C,N,ue,s),_(),g()}function kT(t,e,n,r,s,i){r&&(s||n||i&&e())}function gh(t,e,n,r,s){const i=Cl(t,e),o=Cl(n,r);return{from:i,to:o,promotion:s}}function xp(t,e,n){const r=n.originCell;return r.file===t&&r.rank===e}function an(t,e,n){const r=n.targetCell;return r.file===t&&r.rank===e}function _n(t,e,n){const r=n.targetCell;return r.file===t||r.rank===e}function ST(t){return t.piece==="P"}function IT(t){return t.piece==="N"}function AT(t){return t.piece==="B"}function RT(t){return t.piece==="R"}function PT(t){return t.piece==="Q"}function LT(t){return t.piece==="K"}function NT(t){return t.piece==="p"}function MT(t){return t.piece==="n"}function xT(t){return t.piece==="b"}function OT(t){return t.piece==="r"}function DT(t){return t.piece==="q"}function VT(t){return t.piece==="k"}const zs=t=>(Jl("data-v-c00eddd7"),t=t(),Zl(),t),FT={class:"lowest-layer"},$T=zs(()=>R("div",null,null,-1)),BT={key:0,class:"coordinate"},UT={key:1},jT=zs(()=>R("div",null,null,-1)),zT={key:0,class:"coordinate"},WT={key:1},HT={key:0,class:"dnd-orig"},GT={key:2,class:"coordinate"},qT={key:3},KT=zs(()=>R("div",null,null,-1)),QT={key:0,class:"coordinate"},YT={key:1},XT={class:"player-turn-cell"},JT={key:0,class:"last-move-layer"},ZT=zs(()=>R("div",{class:"last-move-line last-move-base-line"},null,-1)),ek=zs(()=>R("div",{class:"last-move-line last-move-arrow-1"},null,-1)),tk=zs(()=>R("div",{class:"last-move-line last-move-arrow-2"},null,-1)),nk=zs(()=>R("div",{class:"last-move-line last-move-arrow-point"},null,-1)),rk=[ZT,ek,tk,nk],sk={class:"dnd-layer"},ik={key:12},ok={key:0,class:"promotion-overlay-layer"},ak={class:"promotion-layer"},lk={class:"promotion-buttons"},Op="4k3/8/8/8/8/8/8/4K3 w - - 0 1",ck="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",uk=ke({__name:"ChessboardVue",props:{size:{default:100},reversed:{type:Boolean,default:!1},background:{default:"#124589"},coordinatesVisible:{type:Boolean,default:!0},coordinatesColor:{default:"yellow"},whiteCellsColor:{default:"navajowhite"},blackCellsColor:{default:"peru"},originCellColor:{default:"crimson"},targetCellColor:{default:"ForestGreen"},dndCrossCellColor:{default:"DimGrey"},moveHighlightColor:{default:"CadetBlue"},whitePlayerHuman:{type:Boolean,default:!0},blackPlayerHuman:{type:Boolean,default:!0},lastMoveVisible:{type:Boolean,default:!0}},emits:["checkmate","stalemate","perpetualDraw","missingMaterialDraw","fiftyMovesDraw","waitingManualMove","moveDone"],setup(t,{expose:e,emit:n}){ua(oe=>({23365052:ee.value,"7b12f459":oe.background,"4e90964b":T.value,"0ccafbb5":Ne.value,aac90db0:ze.value,edbfd394:p.value,"66d0db47":d.value,c9bfb090:v.value,"3dba7350":oe.whiteCellsColor,"26ac38b4":oe.blackCellsColor,"7e290edb":te.value,"9d9f45da":oe.coordinatesColor,"33a18c2e":V.value,"33a18c2c":F.value,"313142cf":se.value,b588fb60:oe.originCellColor,"2f8b4845":oe.targetCellColor,"4eea78f0":oe.dndCrossCellColor,14110304:m.value,"397bb7fe":g.value,"6cd5c3a2":w.value,"4f3fadde":y.value,"3b360156":_.value,"0bbbf24a":E.value,"13014d6b":oe.moveHighlightColor,"5487e881":b.value,"2c04819b":C.value,"3d11f48c":N.value,"4b5da321":k.value,"04a55f32":z.value,f1bf6610:L.value,54960002:P.value,"2c04f5fa":x.value,"3ec6cd2b":D.value,ff78433c:S.value,"0e225f5e":G.value,"68b22ad7":ue.value,"730e6736":ye.value,40359137:de.value,"093d8d28":be.value,"04a51e05":we.value,"29db49ce":Be.value,"41ea5ad8":Ke.value}));const r=n;let s=new Hr(Op);const i=X(s.fen()),o=X(Op),a=X(!1),l=X(!1),c=X(!1),u=X(!1),f=X({start:{file:-100,rank:-100},end:{file:-100,rank:-100}}),h=X({start:{file:-100,rank:-100},end:{file:-100,rank:-100}}),m=X("0px"),g=X("0px"),w=X("0px"),y=X("0px"),_=X(""),E=X("center"),b=X("0px"),C=X("0px"),N=X("0px"),k=X("0px"),z=X(""),L=X("center"),P=X("0px"),x=X("0px"),D=X("0px"),S=X("0px"),G=X(""),ue=X("center"),ye=X("0px"),de=X("0px"),be=X("0px"),we=X("0px"),Be=X(""),Ke=X("center"),ge=t;function Ue(){i.value=s.fen()}const le=X({piece:"",originCell:{file:-100,rank:-100},targetCell:{file:-100,rank:-100}}),st=X({x:-100,y:-100}),ot=X(!1),_e=Y(()=>ge.size/9),U=Y(()=>_e.value*.5),te=Y(()=>"".concat(_e.value*.3,"px")),ee=Y(()=>"".concat(ge.size,"px")),se=Y(()=>"".concat(_e.value,"px")),Ne=Y(()=>"".concat(ge.size*.8,"px")),ze=Y(()=>"".concat(ge.size*.6,"px")),p=Y(()=>"".concat(_e.value*.08,"px solid black")),d=Y(()=>"".concat(_e.value*.01,"px")),v=Y(()=>"".concat(_e.value*.02,"px")),T=Y(()=>"".concat(U.value,"px repeat(8, ").concat(_e.value,"px) ").concat(U.value,"px / ").concat(U.value,"px repeat(8, ").concat(_e.value,"px) ").concat(U.value,"px")),A=Y(()=>_e.value*.08),j=X(),Z=Y(()=>ge.reversed?[7,6,5,4,3,2,1,0]:[0,1,2,3,4,5,6,7]),O=Y(()=>ge.reversed?[0,1,2,3,4,5,6,7]:[7,6,5,4,3,2,1,0]),V=Y(()=>st.value.x+"px"),F=Y(()=>st.value.y+"px");function W(){a.value&&(c.value=!l.value,c.value&&r("waitingManualMove"))}function J(){s.isCheckmate()?(I(),a.value=!1,r("checkmate",s.turn()!=="w")):s.isStalemate()?(I(),a.value=!1,r("stalemate")):s.isThreefoldRepetition()?(I(),a.value=!1,r("perpetualDraw")):s.isDraw()&&(s.isInsufficientMaterial()?(I(),a.value=!1,r("missingMaterialDraw")):(I(),a.value=!1,r("fiftyMovesDraw")))}function Q(oe,xe,ce,he,gn){st.value={x:oe,y:xe},le.value={piece:gn,originCell:{file:ce,rank:he},targetCell:{file:ce,rank:he}},u.value=!0}function I(){u.value=!1,le.value={piece:"",originCell:{file:-100,rank:-100},targetCell:{file:-100,rank:-100}},st.value={x:-100,y:-100}}function B(){if(!a.value){l.value=!1;return}const oe=s.turn()==="w";l.value=oe&&ge.whitePlayerHuman||!oe&&ge.blackPlayerHuman}function ae(oe=ck){s=new Hr(oe),Ue(),Vd(),o.value=oe,ot.value=!1,I(),a.value=!0,J(),B(),W()}function me(){I(),c.value=!1,ot.value=!1,a.value=!1}function Ve(oe,xe){return oe=oe.replace(/K/g,xe?"♔":"♚").normalize("NFKC"),oe=oe.replace(/Q/g,xe?"♕":"♛").normalize("NFKC"),oe=oe.replace(/R/g,xe?"♖":"♜").normalize("NFKC"),oe=oe.replace(/B/g,xe?"♗":"♝").normalize("NFKC"),oe=oe.replace(/N/g,xe?"♘":"♞").normalize("NFKC"),oe}function Je(oe,xe,ce,he,gn,Fn,Hn){f.value={start:{file:oe,rank:xe},end:{file:ce,rank:he}},Aa();const ji=parseInt(gn.fen().split(" ")[5]),Ks=Fn.history(),zi=gn.turn()==="w",ds=Ks[Ks.length-1],Qs=Ve(ds,zi);r("moveDone",ji,zi,ds,Qs,Fn.fen(),{start:{file:oe,rank:xe},end:{file:ce,rank:he}},Hn)}function mt(oe,xe,ce,he){st.value={x:oe,y:xe},le.value.targetCell.file=ce,le.value.targetCell.rank=he}function Dn(oe,xe,ce,he){ot.value=!0,h.value={start:{file:oe,rank:xe},end:{file:ce,rank:he}}}function gt(oe){const xe={from:Cl(h.value.start.file,h.value.start.rank),to:Cl(h.value.end.file,h.value.end.rank),promotion:oe},ce=new Hr(s.fen());s.move(xe),Ue(),I();const{start:{file:he,rank:gn},end:{file:Fn,rank:Hn}}=h.value;h.value={start:{file:-100,rank:-100},end:{file:-100,rank:-100}},ot.value=!1,J(),Je(he,gn,Fn,Hn,ce,s,oe),B(),W()}function Vn(){ot.value=!1,h.value={start:{file:-100,rank:-100},end:{file:-100,rank:-100}},I()}function Tt(oe){if(!a.value||!c.value)return!1;const xe=new Hr(s.fen());let ce,he,gn,Fn,Hn;typeof oe=="string"?(ce=oe.charCodeAt(0)-97,he=oe.charCodeAt(1)-49,gn=oe.charCodeAt(2)-97,Fn=oe.charCodeAt(3)-49,Hn=oe.length>=5?oe.charAt(4):void 0):(ce=oe.from.charCodeAt(0)-97,he=oe.from.charCodeAt(1)-49,gn=oe.to.charCodeAt(0)-97,Fn=oe.to.charCodeAt(1)-49,Hn=oe.promotion);const ji=gh(ce,he,gn,Fn,Hn);try{s.move(ji)}catch(Ks){return!1}return Ue(),Je(ce,he,gn,Fn,xe,s,Hn),J(),B(),W(),!0}function Tn(oe){oe.preventDefault(),CT(oe,_e.value,ge.reversed,j.value,i.value,Q,a.value,c.value,l.value)}function Ia(oe){oe.preventDefault(),bT(oe,u.value,mt,j.value,I,_e.value,ge.reversed,ot.value,a.value,c.value,l.value)}function Qv(oe){oe.preventDefault(),TT(oe,_e.value,ge.reversed,j.value,s,u.value,le.value,I,Ue,Je,ot.value,Dn,a.value,J,W,c.value,l.value,B)}function Yv(oe){oe.preventDefault(),kT(oe,I,ot.value,a.value,c.value,l.value)}function Xv(){return s.turn()==="w"}function Vd(){f.value={start:{file:-100,rank:-100},end:{file:-100,rank:-100}},m.value="0px",g.value="0px",w.value="0px",y.value="0px",_.value="",E.value="0px 0px",b.value="0px",C.value="0px",N.value="0px",k.value="0px",z.value="",L.value="0px 0px",P.value="0px",x.value="0px",D.value="0px",S.value="0px",G.value=")",ue.value="0px 0px",ye.value="0px",de.value="0px",be.value="0px",we.value="0px",Be.value="",Ke.value="center"}function Aa(){const oe=ge.reversed?7-f.value.start.file:f.value.start.file,xe=ge.reversed?f.value.start.rank:7-f.value.start.rank,ce=ge.reversed?7-f.value.end.file:f.value.end.file,he=ge.reversed?f.value.end.rank:7-f.value.end.rank,gn=_e.value*(oe+1),Fn=_e.value*(xe+1),Hn=_e.value*(ce+1),ji=_e.value*(he+1),Ks=gn-A.value,zi=Fn,ds=Hn-A.value,Qs=ji,Gn=ds-Ks,qn=Qs-zi,ry=Math.atan2(qn,Gn)-Math.PI/2,sy=Math.sqrt(Gn*Gn+qn*qn);m.value="".concat(Ks,"px"),g.value="".concat(zi,"px"),w.value="".concat(2*A.value,"px"),y.value="".concat(sy,"px"),_.value="rotate(".concat(ry,"rad)"),E.value="".concat(A.value,"px 0px");const iy=Math.atan2(qn,Gn)-Math.PI/2-3*Math.PI/4,oy=Math.sqrt(Gn*Gn+qn*qn)*.4;b.value="".concat(ds,"px"),C.value="".concat(Qs,"px"),N.value="".concat(2*A.value,"px"),k.value="".concat(oy,"px"),z.value="rotate(".concat(iy,"rad)"),L.value="".concat(A.value,"px 0px");const ay=Math.atan2(qn,Gn)-Math.PI/2+3*Math.PI/4,ly=Math.sqrt(Gn*Gn+qn*qn)*.4;P.value="".concat(ds,"px"),x.value="".concat(Qs,"px"),D.value="".concat(2*A.value,"px"),S.value="".concat(ly,"px"),G.value="rotate(".concat(ay,"rad)"),ue.value="".concat(A.value,"px 0px");const cy=Math.atan2(qn,Gn)+Math.PI/4,uy=2*A.value;ye.value="".concat(ds,"px"),de.value="".concat(Qs,"px"),be.value="".concat(2*A.value,"px"),we.value="".concat(uy,"px"),Be.value="rotate(".concat(cy,"rad)"),Ke.value="center"}function Jv(){return a.value}function Zv(){return a.value?!1:(s=new Hr(o.value),Vd(),Ue(),!0)}function ey(oe,xe){return a.value?!1:(s=new Hr(oe),f.value=xe,Aa(),Ue(),!0)}function ty(){return s.fen()}function ny(oe){f.value=oe,Aa(),Ue()}return yf(()=>{Aa(),B(),W()}),e({newGame:ae,stop:me,isWhiteTurn:Xv,playManualMove:Tt,gameIsInProgress:Jv,setStartPosition:Zv,setPositionAndLastMove:ey,getCurrentPosition:ty,setLastMoveArrow:ny}),(oe,xe)=>(M(),H("div",{class:"root",ref_key:"rootElement",ref:j},[R("div",{class:"inner-layer",onMousedown:Tn,onMousemove:Ia,onMouseup:Qv,onMouseleave:Yv},[R("div",FT,[$T,(M(!0),H(We,null,tr(Z.value,ce=>(M(),H(We,null,[ge.coordinatesVisible?(M(),H("p",BT,pe(String.fromCharCode(65+ce)),1)):(M(),H("div",UT))],64))),256)),jT,(M(!0),H(We,null,tr(O.value,ce=>(M(),H(We,null,[ge.coordinatesVisible?(M(),H("p",zT,pe(String.fromCharCode(49+ce)),1)):(M(),H("div",WT)),(M(!0),H(We,null,tr(Z.value,he=>(M(),H("div",{class:ut(["cell",(ce+he)%2!==0?"white":"black"])},[$(xp)(he,ce,le.value)?(M(),H("div",HT)):$(uT)(i.value,he,ce)?(M(),Ce(Lp,{key:1,class:ut($(an)(he,ce,le.value)?"dnd-target":$(_n)(he,ce,le.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):$(hT)(i.value,he,ce)?(M(),Ce(gu,{key:2,class:ut($(an)(he,ce,le.value)?"dnd-target":$(_n)(he,ce,le.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):$(fT)(i.value,he,ce)?(M(),Ce(_u,{key:3,class:ut($(an)(he,ce,le.value)?"dnd-target":$(_n)(he,ce,le.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):$(dT)(i.value,he,ce)?(M(),Ce(vu,{key:4,class:ut($(an)(he,ce,le.value)?"dnd-target":$(_n)(he,ce,le.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):$(pT)(i.value,he,ce)?(M(),Ce(yu,{key:5,class:ut($(an)(he,ce,le.value)?"dnd-target":$(_n)(he,ce,le.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):$(mT)(i.value,he,ce)?(M(),Ce(Np,{key:6,class:ut($(an)(he,ce,le.value)?"dnd-target":$(_n)(he,ce,le.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):$(gT)(i.value,he,ce)?(M(),Ce(Rp,{key:7,class:ut($(an)(he,ce,le.value)?"dnd-target":$(_n)(he,ce,le.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):$(_T)(i.value,he,ce)?(M(),Ce(fu,{key:8,class:ut($(an)(he,ce,le.value)?"dnd-target":$(_n)(he,ce,le.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):$(vT)(i.value,he,ce)?(M(),Ce(du,{key:9,class:ut($(an)(he,ce,le.value)?"dnd-target":$(_n)(he,ce,le.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):$(yT)(i.value,he,ce)?(M(),Ce(pu,{key:10,class:ut($(an)(he,ce,le.value)?"dnd-target":$(_n)(he,ce,le.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):$(wT)(i.value,he,ce)?(M(),Ce(mu,{key:11,class:ut($(an)(he,ce,le.value)?"dnd-target":$(_n)(he,ce,le.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):$(ET)(i.value,he,ce)?(M(),Ce(Pp,{key:12,class:ut($(an)(he,ce,le.value)?"dnd-target":$(_n)(he,ce,le.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):$(xp)(he,ce,le.value)?(M(),H("div",{key:13,class:ut($(an)(he,ce,le.value)?"dnd-origin":"dnd-target")},null,2)):(M(),H("div",{key:14,class:ut($(an)(he,ce,le.value)?"dnd-target":$(_n)(he,ce,le.value)?"dnd-cross-cell":"no-highlight-cell")},null,2))],2))),256)),ge.coordinatesVisible?(M(),H("p",GT,pe(String.fromCharCode(49+ce)),1)):(M(),H("div",qT))],64))),256)),KT,(M(!0),H(We,null,tr(Z.value,ce=>(M(),H(We,null,[ge.coordinatesVisible?(M(),H("p",QT,pe(String.fromCharCode(65+ce)),1)):(M(),H("div",YT))],64))),256)),R("div",XT,[R("div",{class:ut(["player-turn",$(s).turn()==="w"?"white-turn":"black-turn"])},null,2)])]),oe.lastMoveVisible?(M(),H("div",JT,rk)):Ot("",!0),R("div",sk,[$(ST)(le.value)&&!ot.value?(M(),Ce(Lp,{key:0,class:"dndPiece"})):$(IT)(le.value)?(M(),Ce(gu,{key:1,class:"dndPiece"})):$(AT)(le.value)?(M(),Ce(_u,{key:2,class:"dndPiece"})):$(RT)(le.value)?(M(),Ce(vu,{key:3,class:"dndPiece"})):$(PT)(le.value)?(M(),Ce(yu,{key:4,class:"dndPiece"})):$(LT)(le.value)?(M(),Ce(Np,{key:5,class:"dndPiece"})):$(NT)(le.value)&&!ot.value?(M(),Ce(Rp,{key:6,class:"dndPiece"})):$(MT)(le.value)?(M(),Ce(fu,{key:7,class:"dndPiece"})):$(xT)(le.value)?(M(),Ce(du,{key:8,class:"dndPiece"})):$(OT)(le.value)?(M(),Ce(pu,{key:9,class:"dndPiece"})):$(DT)(le.value)?(M(),Ce(mu,{key:10,class:"dndPiece"})):$(VT)(le.value)?(M(),Ce(Pp,{key:11,class:"dndPiece"})):(M(),H("div",ik))])],32),ot.value?(M(),H("div",ok,[R("div",ak,[R("div",lk,[$(s).turn()==="w"?(M(),H(We,{key:0},[Re(yu,{size:_e.value,class:"single-promotion-button",onClick:xe[0]||(xe[0]=()=>gt("q"))},null,8,["size"]),Re(vu,{size:_e.value,class:"single-promotion-button",onClick:xe[1]||(xe[1]=()=>gt("r"))},null,8,["size"]),Re(_u,{size:_e.value,class:"single-promotion-button",onClick:xe[2]||(xe[2]=()=>gt("b"))},null,8,["size"]),Re(gu,{size:_e.value,class:"single-promotion-button",onClick:xe[3]||(xe[3]=()=>gt("n"))},null,8,["size"]),Re(Mp,{size:_e.value,class:"single-promotion-button",onClick:xe[4]||(xe[4]=()=>Vn())},null,8,["size"])],64)):(M(),H(We,{key:1},[Re(mu,{size:_e.value,class:"single-promotion-button",onClick:xe[5]||(xe[5]=()=>gt("q"))},null,8,["size"]),Re(pu,{size:_e.value,class:"single-promotion-button",onClick:xe[6]||(xe[6]=()=>gt("r"))},null,8,["size"]),Re(du,{size:_e.value,class:"single-promotion-button",onClick:xe[7]||(xe[7]=()=>gt("b"))},null,8,["size"]),Re(fu,{size:_e.value,class:"single-promotion-button",onClick:xe[8]||(xe[8]=()=>gt("n"))},null,8,["size"]),Re(Mp,{size:_e.value,class:"single-promotion-button",onClick:xe[9]||(xe[9]=()=>Vn())},null,8,["size"])],64))])])])):Ot("",!0)],512))}}),hk=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},fk=hk(uk,[["__scopeId","data-v-c00eddd7"]]),dk={install(t){t.component("ChessboardVue",fk)}},pk=["width","height"],mk=R("path",{d:"M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z ",style:{opacity:"1",fill:"#000000","fill-opacity":"1","fill-rule":"nonzero",stroke:"#000000","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-opacity":"1"}},null,-1),gk=[mk],_k=ke({__name:"BP",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},gk,8,pk))}}),vk=["width","height"],yk=et('<g style="opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18" style="fill:#000000;stroke:#000000;"></path><path d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10" style="fill:#000000;stroke:#000000;"></path><path d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z" style="fill:#ffffff;stroke:#ffffff;"></path><path d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z" transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)" style="fill:#ffffff;stroke:#ffffff;"></path><path d="M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z " style="fill:#ffffff;stroke:none;"></path></g>',1),wk=[yk],Ek=ke({__name:"BN",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},wk,8,vk))}}),Ck=["width","height"],bk=et('<g style="opacity:1;fill:none;fill-rule:evenodd;fill-opacity:1;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><g style="fill:#000000;stroke:#000000;stroke-linecap:butt;"><path d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z"></path><path d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"></path><path d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"></path></g><path d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18" style="fill:none;stroke:#ffffff;stroke-linejoin:miter;"></path></g>',1),Tk=[bk],kk=ke({__name:"BB",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},Tk,8,Ck))}}),Sk=["width","height"],Ik=et('<g style="opacity:1;fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z " style="stroke-linecap:butt;"></path><path d="M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z " style="stroke-linecap:butt;"></path><path d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z " style="stroke-linecap:butt;"></path><path d="M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z " style="stroke-linecap:butt;stroke-linejoin:miter;"></path><path d="M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z " style="stroke-linecap:butt;"></path><path d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z " style="stroke-linecap:butt;"></path><path d="M 12,35.5 L 33,35.5 L 33,35.5" style="fill:none;stroke:#ffffff;stroke-width:1;stroke-linejoin:miter;"></path><path d="M 13,31.5 L 32,31.5" style="fill:none;stroke:#ffffff;stroke-width:1;stroke-linejoin:miter;"></path><path d="M 14,29.5 L 31,29.5" style="fill:none;stroke:#ffffff;stroke-width:1;stroke-linejoin:miter;"></path><path d="M 14,16.5 L 31,16.5" style="fill:none;stroke:#ffffff;stroke-width:1;stroke-linejoin:miter;"></path><path d="M 11,14 L 34,14" style="fill:none;stroke:#ffffff;stroke-width:1;stroke-linejoin:miter;"></path></g>',1),Ak=[Ik],Rk=ke({__name:"BR",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},Ak,8,Sk))}}),Pk=["width","height"],Lk=et('<g style="opacity:1;fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><g style="fill:#000000;stroke:none;"><circle cx="6" cy="12" r="2.75"></circle><circle cx="14" cy="9" r="2.75"></circle><circle cx="22.5" cy="8" r="2.75"></circle><circle cx="31" cy="9" r="2.75"></circle><circle cx="39" cy="12" r="2.75"></circle></g><path d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z" style="stroke-linecap:butt;stroke:#000000;"></path><path d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z" style="stroke-linecap:butt;"></path><path d="M 11,38.5 A 35,35 1 0 0 34,38.5" style="fill:none;stroke:#000000;stroke-linecap:butt;"></path><path d="M 11,29 A 35,35 1 0 1 34,29" style="fill:none;stroke:#ffffff;"></path><path d="M 12.5,31.5 L 32.5,31.5" style="fill:none;stroke:#ffffff;"></path><path d="M 11.5,34.5 A 35,35 1 0 0 33.5,34.5" style="fill:none;stroke:#ffffff;"></path><path d="M 10.5,37.5 A 35,35 1 0 0 34.5,37.5" style="fill:none;stroke:#ffffff;"></path></g>',1),Nk=[Lk],Mk=ke({__name:"BQ",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},Nk,8,Pk))}}),xk=["width","height"],Ok=et('<g style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 22.5,11.63 L 22.5,6" style="fill:none;stroke:#000000;stroke-linejoin:miter;" id="path6570"></path><path d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25" style="fill:#000000;fill-opacity:1;stroke-linecap:butt;stroke-linejoin:miter;"></path><path d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z " style="fill:#000000;stroke:#000000;"></path><path d="M 20,8 L 25,8" style="fill:none;stroke:#000000;stroke-linejoin:miter;"></path><path d="M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.51,26.6 L 22.5,24.5 C 20,18 9.906,14 6.997,19.85 C 4.5,25.5 11.85,28.85 11.85,28.85" style="fill:none;stroke:#ffffff;"></path><path d="M 11.5,30 C 17,27 27,27 32.5,30 M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5 M 11.5,37 C 17,34 27,34 32.5,37" style="fill:none;stroke:#ffffff;"></path></g>',1),Dk=[Ok],Vk=ke({__name:"BK",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},Dk,8,xk))}}),Fk=["width","height"],$k=R("path",{d:"M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z ",style:{opacity:"1",fill:"#ffffff","fill-opacity":"1","fill-rule":"nonzero",stroke:"#000000","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-opacity":"1"}},null,-1),Bk=[$k],Uk=ke({__name:"WP",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},Bk,8,Fk))}}),jk=["width","height"],zk=et('<g style="opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18" style="fill:#ffffff;stroke:#000000;"></path><path d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10" style="fill:#ffffff;stroke:#000000;"></path><path d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z" style="fill:#000000;stroke:#000000;"></path><path d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z" transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)" style="fill:#000000;stroke:#000000;"></path></g>',1),Wk=[zk],Hk=ke({__name:"WN",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},Wk,8,jk))}}),Gk=["width","height"],qk=et('<g style="opacity:1;fill:none;fill-rule:evenodd;fill-opacity:1;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><g style="fill:#ffffff;stroke:#000000;stroke-linecap:butt;"><path d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z"></path><path d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"></path><path d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"></path></g><path d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18" style="fill:none;stroke:#000000;stroke-linejoin:miter;"></path></g>',1),Kk=[qk],Qk=ke({__name:"WB",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},Kk,8,Gk))}}),Yk=["width","height"],Xk=et('<g style="opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z " style="stroke-linecap:butt;"></path><path d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z " style="stroke-linecap:butt;"></path><path d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14" style="stroke-linecap:butt;"></path><path d="M 34,14 L 31,17 L 14,17 L 11,14"></path><path d="M 31,17 L 31,29.5 L 14,29.5 L 14,17" style="stroke-linecap:butt;stroke-linejoin:miter;"></path><path d="M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5"></path><path d="M 11,14 L 34,14" style="fill:none;stroke:#000000;stroke-linejoin:miter;"></path></g>',1),Jk=[Xk],Zk=ke({__name:"WR",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},Jk,8,Yk))}}),eS=["width","height"],tS=et('<g style="opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z" transform="translate(-1,-1)"></path><path d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z" transform="translate(15.5,-5.5)"></path><path d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z" transform="translate(32,-1)"></path><path d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z" transform="translate(7,-4.5)"></path><path d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z" transform="translate(24,-4)"></path><path d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38,14 L 31,25 L 31,11 L 25.5,24.5 L 22.5,9.5 L 19.5,24.5 L 14,10.5 L 14,25 L 7,14 L 9,26 z " style="stroke-linecap:butt;"></path><path d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z " style="stroke-linecap:butt;"></path><path d="M 11.5,30 C 15,29 30,29 33.5,30" style="fill:none;"></path><path d="M 12,33.5 C 18,32.5 27,32.5 33,33.5" style="fill:none;"></path></g>',1),nS=[tS],rS=ke({__name:"WQ",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},nS,8,eS))}}),sS=["width","height"],iS=et('<g style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 22.5,11.63 L 22.5,6" style="fill:none;stroke:#000000;stroke-linejoin:miter;"></path><path d="M 20,8 L 25,8" style="fill:none;stroke:#000000;stroke-linejoin:miter;"></path><path d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25" style="fill:#ffffff;stroke:#000000;stroke-linecap:butt;stroke-linejoin:miter;"></path><path d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z " style="fill:#ffffff;stroke:#000000;"></path><path d="M 11.5,30 C 17,27 27,27 32.5,30" style="fill:none;stroke:#000000;"></path><path d="M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5" style="fill:none;stroke:#000000;"></path><path d="M 11.5,37 C 17,34 27,34 32.5,37" style="fill:none;stroke:#000000;"></path></g>',1),oS=[iS],aS=ke({__name:"WK",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},oS,8,sS))}});function i2(t){return t.split(" ")[0].split("/").map(uS).toReversed()}function lS(t,e){return t.map(hS).toReversed().join("/")+(e?" w":" b")+" - - 0 1"}function On(t,e,n){return i2(t)[n][e]}function o2(t){const e=t.charCodeAt(0);return e>=48&&e<=57}function cS(t){const e=parseInt(t);let n=[];for(let r=0;r<e;r++)n.push("");return n}function uS(t){return t.split("").flatMap(e=>o2(e)?cS(e):e)}function hS(t){return t.reduce((e,n)=>{if(n===""){const r=e.charAt(e.length-1);if(o2(r)){const s=parseInt(r)+1;return e.substring(0,e.length-1)+s}else return e+"1"}else return e+n},"")}function fS(t,e,n){const r=On(t,e,n);return r===void 0?!1:r==="P"}function dS(t,e,n){const r=On(t,e,n);return r===void 0?!1:r==="N"}function pS(t,e,n){const r=On(t,e,n);return r===void 0?!1:r==="B"}function mS(t,e,n){const r=On(t,e,n);return r===void 0?!1:r==="R"}function gS(t,e,n){const r=On(t,e,n);return r===void 0?!1:r==="Q"}function _S(t,e,n){const r=On(t,e,n);return r===void 0?!1:r==="K"}function vS(t,e,n){const r=On(t,e,n);return r===void 0?!1:r==="p"}function yS(t,e,n){const r=On(t,e,n);return r===void 0?!1:r==="n"}function wS(t,e,n){const r=On(t,e,n);return r===void 0?!1:r==="b"}function ES(t,e,n){const r=On(t,e,n);return r===void 0?!1:r==="r"}function CS(t,e,n){const r=On(t,e,n);return r===void 0?!1:r==="q"}function bS(t,e,n){const r=On(t,e,n);return r===void 0?!1:r==="k"}const Of=t=>(Jl("data-v-6a406ac3"),t=t(),Zl(),t),TS=Of(()=>R("div",null,null,-1)),kS={key:0,class:"coordinate"},SS={key:1},IS=Of(()=>R("div",null,null,-1)),AS={key:0,class:"coordinate"},RS={key:1},PS={key:12,class:"no-highlight-cell"},LS={key:2,class:"coordinate"},NS={key:3},MS=Of(()=>R("div",null,null,-1)),xS={key:0,class:"coordinate"},OS={key:1},DS={class:"player-turn-cell"},VS="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",FS=ke({__name:"EditableBoardVue",props:{size:{default:100},whiteTurn:{type:Boolean,default:!0},reversed:{type:Boolean,default:!1},background:{default:"#124589"},coordinatesVisible:{type:Boolean,default:!0},coordinatesColor:{default:"yellow"},whiteCellsColor:{default:"navajowhite"},blackCellsColor:{default:"peru"}},emits:["checkmate","stalemate","perpetualDraw","missingMaterialDraw","fiftyMovesDraw","waitingManualMove","moveDone"],setup(t,{expose:e,emit:n}){ua(k=>({"7c0d1e38":c.value,e5b726b4:k.background,"22252f58":f.value,17392323:k.whiteCellsColor,"73aed90e":k.blackCellsColor,"6a339330":l.value,"0787a7a0":k.coordinatesColor,"614ed422":u.value}));const r=X(""),s=X(VS),i=t,o=Y(()=>i.size/9),a=Y(()=>o.value*.5),l=Y(()=>"".concat(o.value*.3,"px")),c=Y(()=>"".concat(i.size,"px")),u=Y(()=>"".concat(o.value,"px")),f=Y(()=>"".concat(a.value,"px repeat(8, ").concat(o.value,"px) ").concat(a.value,"px / ").concat(a.value,"px repeat(8, ").concat(o.value,"px) ").concat(a.value,"px")),h=X(),m=Y(()=>i.reversed?[7,6,5,4,3,2,1,0]:[0,1,2,3,4,5,6,7]),g=Y(()=>i.reversed?[0,1,2,3,4,5,6,7]:[7,6,5,4,3,2,1,0]);function w(k,z){let L=i2(s.value);L[z][k]=r.value,s.value=lS(L,i.whiteTurn)}function y(k,z,L,P){const x=Math.floor((k-L*.5)/L),D=Math.floor((z-L*.5)/L),S=[!0,"true"].includes(P)?7-x:x,G=[!0,"true"].includes(P)?D:7-D;return{cellX:x,cellY:D,file:S,rank:G}}function _(k,z){if(!z)return[];const L=z.getBoundingClientRect(),P=k.clientX-L.x,x=k.clientY-L.y;return[P,x]}function E(k){if(k.preventDefault(),!h.value)return;const[z,L]=_(k,h.value),{file:P,rank:x}=y(z,L,o.value,i.reversed);P<0||P>7||x<0||x>7||w(P,x)}function b(k){s.value=k}function C(k){r.value=k.charAt(0)}function N(){return s.value.split(" ")[0]}return e({getBoardCode:N,setCurrentEditingValue:C,setFromBoardCode:b}),(k,z)=>(M(),H("div",{class:"root",ref_key:"rootElement",ref:h},[R("div",{class:"lowest-layer",onClick:E},[TS,(M(!0),H(We,null,tr(m.value,L=>(M(),H(We,null,[i.coordinatesVisible?(M(),H("p",kS,pe(String.fromCharCode(65+L)),1)):(M(),H("div",SS))],64))),256)),IS,(M(!0),H(We,null,tr(g.value,L=>(M(),H(We,null,[i.coordinatesVisible?(M(),H("p",AS,pe(String.fromCharCode(49+L)),1)):(M(),H("div",RS)),(M(!0),H(We,null,tr(m.value,P=>(M(),H("div",{class:ut(["cell",(L+P)%2!==0?"white":"black"])},[$(fS)(s.value,P,L)?(M(),Ce(Uk,{key:0,class:"no-highlight-cell"})):$(dS)(s.value,P,L)?(M(),Ce(Hk,{key:1,class:"no-highlight-cell"})):$(pS)(s.value,P,L)?(M(),Ce(Qk,{key:2,class:"no-highlight-cell"})):$(mS)(s.value,P,L)?(M(),Ce(Zk,{key:3,class:"no-highlight-cell"})):$(gS)(s.value,P,L)?(M(),Ce(rS,{key:4,class:"no-highlight-cell"})):$(_S)(s.value,P,L)?(M(),Ce(aS,{key:5,class:"no-highlight-cell"})):$(vS)(s.value,P,L)?(M(),Ce(_k,{key:6,class:"no-highlight-cell"})):$(yS)(s.value,P,L)?(M(),Ce(Ek,{key:7,class:"no-highlight-cell"})):$(wS)(s.value,P,L)?(M(),Ce(kk,{key:8,class:"no-highlight-cell"})):$(ES)(s.value,P,L)?(M(),Ce(Rk,{key:9,class:"no-highlight-cell"})):$(CS)(s.value,P,L)?(M(),Ce(Mk,{key:10,class:"no-highlight-cell"})):$(bS)(s.value,P,L)?(M(),Ce(Vk,{key:11,class:"no-highlight-cell"})):(M(),H("div",PS))],2))),256)),i.coordinatesVisible?(M(),H("p",LS,pe(String.fromCharCode(49+L)),1)):(M(),H("div",NS))],64))),256)),MS,(M(!0),H(We,null,tr(m.value,L=>(M(),H(We,null,[i.coordinatesVisible?(M(),H("p",xS,pe(String.fromCharCode(65+L)),1)):(M(),H("div",OS))],64))),256)),R("div",DS,[R("div",{class:ut(["player-turn",k.whiteTurn?"white-turn":"black-turn"])},null,2)])])],512))}}),$S=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},BS=$S(FS,[["__scopeId","data-v-6a406ac3"]]),US={install(t){t.component("EditableBoardVue",BS)}},Ns=oa();function bl(t){t===void 0&&(t=Ns.value.comp.returnValue()),Ns.value.resolve(t),Ns.value=null}function Dp(t,e,n="default"){return new Promise(r=>{Ns.value={dialog:t,props:e,wrapper:n,resolve:r}})}var jS=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n};const zS=ke({name:"DialogWrapper",components:{},props:{name:{type:String,default:"default"},transitionAttrs:Object},setup(){const t=X();return Mn(t,()=>{Ns.value&&(Ns.value.comp=t.value)}),{dialogRef:Ns,dialogInstance:t}}});function WS(t,e,n,r,s,i){return M(),Ce(bf,by(n1(t.transitionAttrs)),{default:Dg(()=>[t.dialogRef&&t.dialogRef.wrapper===t.name?(M(),Ce(h5(t.dialogRef.dialog),r1({key:0},t.dialogRef.props,{ref:"dialogInstance"}),null,16)):Ot("",!0)]),_:1},16)}var HS=jS(zS,[["render",WS]]);const GS={__name:"App",setup(t){return(e,n)=>{const r=pl("RouterView"),s=pl("notifications");return M(),H(We,null,[Re(r),Re(s),Re($(HS))],64)}}},qS={pages:{home:{title:"home",createRoom:"Create a room",joinRoom:"Join a room",yourRoom:"Your room",roomIdCopied:"Room id copied in the clipboard."},createRoom:{title:"Create a room",labels:{nickname:"Your nickname"},placeholders:{nickname:"nickname"},errors:{emptyNickname:"Nickname must not be empty !",tooShortNickname:"Nickname must contains at least 4 characters !",failedCreatingRoom:"Failed to create room !"},submit:"Create",cancel:"Cancel"},joinRoom:{title:"Join a room",labels:{nickname:"Your nickname",roomId:"Room id"},placeholders:{nickname:"nickname",roomId:"id"},errors:{emptyNickname:"Nickname must not be empty !",tooShortNickname:"Nickname must contains at least 4 characters !",emptyRoomId:"Room id must not be empty !",noMatchingRoom:"There's no matching room !",alreadyFilledRoom:"This room is already busy !",failedJoiningRoom:"Failed to join room !"},submit:"Join",cancel:"Cancel"},newGame:{title:"New game",submit:"Confirm",cancel:"Cancel",hasWhite:"Do you have white ?",hasWhiteYes:"Yes",hasWhiteNo:"No",whiteTurn:"Is it white turn ?",whiteTurnYes:"Yes",whiteTurnNo:"No",minutes:"minutes",seconds:"seconds",increment:"increment (s)",includeTime:"Play with clock ?",includeTimeYes:"Yes",includeTimeNo:"No",timeSetToZero:"You gave a time of zero (without the increment) !",editStartPosition:"Edit",copyFen:"Copy FEN",pasteFen:"Paste FEN",resetFen:"Reset",defaultFen:"Default",clearFen:"Clear",whiteOO:"White O-O",whiteOOO:"White O-O-O",blackOO:"Black O-O",blackOOO:"Black O-O-O",enPassantLabel:"En passant",noEnPassant:"None",nullityHalfMovesCount:"Half-moves count for draw",moveNumber:"Move number",copiedPosition:"Copied position into clipboard.",refusedCopyingPosition:"Illegal position ! Also, check all parameters !",cannotCopyFromClipboard:"Cannot get text content from clipboard !",illegalPositionFromClipboard:"Clipboard's content is not a legal position !"},giveUp:{title:"Give up ?",submit:"Confirm",cancel:"Cancel"},game:{outcomes:{gaveUp:"Game gave up by your opponent.",checkmate:"Checkmate !",stalemate:"Stalemate !",perpetualDraw:"Draw by three-fold repetition !",missingMaterial:"Draw by missing material !",fiftyMovesDraw:"Draw by the 50 moves rule !",userLostOnTime:"You lost on time out !",opponentLostOnTime:"Your opponent lost on time out !"}},pgn:{confirmationMessage:"Download the generated PGN file ?"},generic:{errors:{failedUpdatingRoom:"Failed to update room in database !",failedReadingRoom:"Failed to read room from database !",failedDeletingFieldsFromRoom:"Failed to delete fields in room in database !"}}}},KS={pages:{home:{title:"Accueil",createRoom:"Créér un salon",joinRoom:"Rejoindre un salon",yourRoom:"Votre salon",roomIdCopied:"ID du salon copié dans le presse-papiers."},createRoom:{title:"Créér un salon",labels:{nickname:"Votre pseudo"},placeholders:{nickname:"pseudo"},errors:{emptyNickname:"Le pseudo ne doit pas être vide !",tooShortNickname:"Le pseudo doit contenir au moins 4 caractères !",failedCreatingRoom:"Échec de création du salon !"},submit:"Créer",cancel:"Annuler"},joinRoom:{title:"Rejoindre un salon",labels:{nickname:"Votre pseudo",roomId:"Id du salon"},placeholders:{nickname:"pseudo",roomId:"id"},errors:{emptyNickname:"Le pseudo ne doit pas être vide !",tooShortNickname:"Le pseudo doit contenir au moins 4 caractères !",emptyRoomId:"L'id du salon ne doit pas être vide !",noMatchingRoom:"Aucun salon ne correspond !",alreadyFilledRoom:"Ce salon est déjà occupé !",failedJoiningRoom:"Erreur en tentant de rejoindre le salon !",userLostOnTime:"Vous avez perdu au temps !",opponentLostOnTime:"Votre adversaire a perdu au temps !"},submit:"Joindre",cancel:"Annuler"},newGame:{title:"Nouvelle partie",submit:"Confirmer",cancel:"Annuler",hasWhite:"Avez-vous les Blancs ?",hasWhiteYes:"Oui",hasWhiteNo:"Non",whiteTurn:"Est-ce trait aux Blancs ?",whiteTurnYes:"Oui",whiteTurnNo:"Non",minutes:"minutes",seconds:"secondes",increment:"incrément (s)",includeTime:"Jouer avec la pendule ?",includeTimeYes:"Oui",includeTimeNo:"Non",timeSetToZero:"Vous avez donné un temps de 0 (sans compter l'incrément) !",editStartPosition:"Éditer",copyFen:"Copier FEN",pasteFen:"Coller FEN",resetFen:"Réinitialiser",defaultFen:"Par défaut",clearFen:"Effacer",whiteOO:"O-O Blanc",whiteOOO:"O-O-O Blanc",blackOO:"O-O Noir",blackOOO:"O-O-O Noir",enPassantLabel:"En passant",noEnPassant:"Aucun",nullityHalfMovesCount:"Demi-coups pour la nulle",moveNumber:"Numéro de coup",oveNumber:"Movimiento número",copiedPosition:"Position copiée dans le porte-papiers.",refusedCopyingPosition:"Position illégale ! Vérifiez tous les paramètres !",cannotCopyFromClipboard:"Impossible de récupérer du texte à partir du presse-papier !",illegalPositionFromClipboard:"Le presse-papier ne contient pas de position légale !"},giveUp:{title:"Abandonner ?",submit:"Confirmer",cancel:"Annuler"},game:{outcomes:{gaveUp:"Partie abandonnée par votre adversaire.",checkmate:"Échec et mat !",stalemate:"Pat !",perpetualDraw:"Nulle par triple répétition !",missingMaterial:"Nulle par manque de matériel !",fiftyMovesDraw:"Nulle par la règle des 50 coups !",userLostOnTime:"Vous avez perdu au temps !",opponentLostOnTime:"Votre adversaire a perdu au temps !"}},pgn:{confirmationMessage:"Télécharger le fichier PGN généré ?"},generic:{errors:{failedUpdatingRoom:"Échec de mise à jour du salon dans la base de données !",failedReadingRoom:"Échec de lecture du salon depuis la base de données !",failedDeletingFieldsFromRoom:"Échec de suppression de données du salon dans la base de données !"}}}},QS={pages:{home:{title:"Bienvenida",createRoom:"Crear una sala de estar",joinRoom:"Entrar a una sala",yourRoom:"Su sala",roomIdCopied:"ID de la sala copiada en el portapapeles."},createRoom:{title:"Crear una sala de estar",labels:{nickname:"Tu apodo"},placeholders:{nickname:"apodo"},errors:{emptyNickname:"¡El apodo no debe estar vacío!",tooShortNickname:"¡El apodo debe contener al menos 4 caracteres!",failedCreatingRoom:"¡No se pudo crear sala!"},submit:"Crear",cancel:"Anular"},joinRoom:{title:"Entrar a una sala",labels:{nickname:"Tu apodo",roomId:"Identificación de la sala"},placeholders:{nickname:"apodo",roomId:"identificación"},errors:{emptyNickname:"¡El apodo no debe estar vacío!",tooShortNickname:"¡El apodo debe contener al menos 4 caracteres!",emptyRoomId:"¡La identificación de la sala no debe estar vacía!",noMatchingRoom:"¡No hay ninguna sala que coincida!",alreadyFilledRoom:"¡Esta sala ya está ocupada!",failedJoiningRoom:"¡No se pudo entrar a la sala!"},submit:"Entrar",cancel:"Anular"},newGame:{title:"Nueva partida",submit:"Confirmar",cancel:"Anular",hasWhite:"¿Tiene los blancos?",hasWhiteYes:"Sí",hasWhiteNo:"No",whiteTurn:"¿Es blanco para jugar?",whiteTurnYes:"Sí",whiteTurnNo:"No",minutes:"minutos",seconds:"segundos",increment:"incremento (s)",includeTime:"¿Jugar con el reloj?",includeTimeYes:"Sí",includeTimeNo:"No",timeSetToZero:"¡Diste un tiempo de cero (sin el incremento)!",editStartPosition:"Editar",copyFen:"Copiar FEN",pasteFen:"Pegar FEN",resetFen:"Reiniciar",defaultFen:"Por defecto",clearFen:"Borrar",whiteOO:"O-O Blanco",whiteOOO:"O-O-O Blanco",blackOO:"O-O Negro",blackOOO:"O-O-O Negro",enPassantLabel:"De paso",noEnPassant:"Ninguno",nullityHalfMovesCount:"Medios movimientos para empatar",moveNumber:"Movimiento número",copiedPosition:"Posición copiada en el portapapeles.",refusedCopyingPosition:"¡Posición ilegal!¡Además, verifique todos los parámetros!",cannotCopyFromClipboard:"¡No se puede obtener contenido de texto del portapapeles!",illegalPositionFromClipboard:"¡El contenido del portapapeles no es una posición legal!"},giveUp:{title:"¿Abandonar?",submit:"Confirmar",cancel:"Anular"},game:{outcomes:{gaveUp:"Partida abandonada por su oponente.",checkmate:"¡Jaque mate!",stalemate:"¡Empate!",perpetualDraw:"¡Igualdad por repetición triple!",missingMaterial:"¡Igualdad con el material que falta!",fiftyMovesDraw:"¡Igualdad según la regla de los 50 movimientos!",userLostOnTime:"¡Perdiste por tiempo muerto!",opponentLostOnTime:"¡Su oponente perdió por tiempo muerto!"}},pgn:{confirmationMessage:"¿Descargar el archivo PGN generado?"},generic:{errors:{failedUpdatingRoom:"¡No se pudo actualizar la sala en la base de datos!",failedReadingRoom:"¡No se pudo leer la sala de la base de datos!",failedDeletingFieldsFromRoom:"¡No se pudieron eliminar los campos en la sala de la base de datos!"}}}},YS={en:qS,es:QS,fr:KS},XS={apiKey:"AIzaSyDJsIcF_jVDnNf7VGwGtLX2Fs5UiK3u8G8",authDomain:"peer-chess-20535.firebaseapp.com",projectId:"peer-chess-20535",storageBucket:"peer-chess-20535.appspot.com",messagingSenderId:"249834096947",appId:"1:249834096947:web:9116716c18a90b0493d646"},JS="dF_+&tOZK~kqIjz{0]Nt4q}M;+JxF4";var Vp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},ZS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},l2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,f=(i&3)<<4|a>>4;let h=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(h=64)),r.push(n[u],n[f],n[h],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ZS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new eI;const h=i<<2|a>>4;if(r.push(h),c!==64){const m=a<<4&240|c>>2;if(r.push(m),f!==64){const g=c<<6&192|f;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class eI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tI=function(t){const e=a2(t);return l2.encodeByteArray(e,!0)},c2=function(t){return tI(t).replace(/\./g,"")},nI=function(t){try{return l2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=()=>rI().__FIREBASE_DEFAULTS__,iI=()=>{if(typeof process>"u"||typeof Vp>"u")return;const t=Vp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},oI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&nI(t[1]);return e&&JSON.parse(e)},u2=()=>{try{return sI()||iI()||oI()}catch(t){console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(t));return}},aI=()=>{var t;return(t=u2())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cI(){var t;const e=(t=u2())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch(n){return!1}}function uI(){return!cI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function h2(){try{return typeof indexedDB=="object"}catch(t){return!1}}function hI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI="FirebaseError";class Oi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=fI,Object.setPrototypeOf(this,Oi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,f2.prototype.create)}}class f2{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s="".concat(this.service,"/").concat(e),i=this.errors[e],o=i?dI(i,r):"Error",a="".concat(this.serviceName,": ").concat(o," (").concat(s,").");return new Oi(s,a,r)}}function dI(t,e){return t.replace(pI,(n,r)=>{const s=e[r];return s!=null?String(s):"<".concat(r,"?>")})}const pI=/\{\$([^}]+)}/g;function kl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Fp(i)&&Fp(o)){if(!kl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Fp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(t){return t&&t._delegate?t._delegate:t}class Fo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new lI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch(s){}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error("Service ".concat(this.name," is not available"))}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,!!this.shouldAutoInitialize()){if(_I(e))try{this.getOrInitializeService({instanceIdentifier:vs})}catch(n){}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch(i){}}}}clearInstance(e=vs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vs){return this.instances.has(e)}getOptions(e=vs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch(i){}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:gI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(s){}return r||null}normalizeInstanceIdentifier(e=vs){return this.component?this.component.multipleInstances?e:vs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gI(t){return t===vs?void 0:t}function _I(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new mI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ye||(Ye={}));const yI={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},wI=Ye.INFO,EI={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},CI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=EI[e];if(s)console[s]("[".concat(r,"]  ").concat(t.name,":"),...n);else throw new Error("Attempted to log a message with an invalid logType (value: ".concat(e,")"))};class d2{constructor(e){this.name=e,this._logLevel=wI,this._logHandler=CI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}}const bI=(t,e)=>e.some(n=>t instanceof n);let $p,Bp;function TI(){return $p||($p=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kI(){return Bp||(Bp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const p2=new WeakMap,_h=new WeakMap,m2=new WeakMap,wu=new WeakMap,Df=new WeakMap;function SI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Xr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&p2.set(n,t)}).catch(()=>{}),Df.set(e,t),e}function II(t){if(_h.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});_h.set(t,e)}let vh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return _h.get(t);if(e==="objectStoreNames")return t.objectStoreNames||m2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function AI(t){vh=t(vh)}function RI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Eu(this),e,...n);return m2.set(r,e.sort?e.sort():[e]),Xr(r)}:kI().includes(t)?function(...e){return t.apply(Eu(this),e),Xr(p2.get(this))}:function(...e){return Xr(t.apply(Eu(this),e))}}function PI(t){return typeof t=="function"?RI(t):(t instanceof IDBTransaction&&II(t),bI(t,TI())?new Proxy(t,vh):t)}function Xr(t){if(t instanceof IDBRequest)return SI(t);if(wu.has(t))return wu.get(t);const e=PI(t);return e!==t&&(wu.set(t,e),Df.set(e,t)),e}const Eu=t=>Df.get(t);function LI(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Xr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Xr(o.result),l.oldVersion,l.newVersion,Xr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const NI=["get","getKey","getAll","getAllKeys","count"],MI=["put","add","delete","clear"],Cu=new Map;function Up(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Cu.get(e))return Cu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=MI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||NI.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Cu.set(e,i),i}AI(t=>({...t,get:(e,n,r)=>Up(e,n)||t.get(e,n,r),has:(e,n)=>!!Up(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(OI(n)){const r=n.getImmediate();return"".concat(r.library,"/").concat(r.version)}else return null}).filter(n=>n).join(" ")}}function OI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const yh="@firebase/app",jp="0.10.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new d2("@firebase/app"),DI="@firebase/app-compat",VI="@firebase/analytics-compat",FI="@firebase/analytics",$I="@firebase/app-check-compat",BI="@firebase/app-check",UI="@firebase/auth",jI="@firebase/auth-compat",zI="@firebase/database",WI="@firebase/database-compat",HI="@firebase/functions",GI="@firebase/functions-compat",qI="@firebase/installations",KI="@firebase/installations-compat",QI="@firebase/messaging",YI="@firebase/messaging-compat",XI="@firebase/performance",JI="@firebase/performance-compat",ZI="@firebase/remote-config",e4="@firebase/remote-config-compat",t4="@firebase/storage",n4="@firebase/storage-compat",r4="@firebase/firestore",s4="@firebase/firestore-compat",i4="firebase",o4="10.11.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4="[DEFAULT]",l4={[yh]:"fire-core",[DI]:"fire-core-compat",[FI]:"fire-analytics",[VI]:"fire-analytics-compat",[BI]:"fire-app-check",[$I]:"fire-app-check-compat",[UI]:"fire-auth",[jI]:"fire-auth-compat",[zI]:"fire-rtdb",[WI]:"fire-rtdb-compat",[HI]:"fire-fn",[GI]:"fire-fn-compat",[qI]:"fire-iid",[KI]:"fire-iid-compat",[QI]:"fire-fcm",[YI]:"fire-fcm-compat",[XI]:"fire-perf",[JI]:"fire-perf-compat",[ZI]:"fire-rc",[e4]:"fire-rc-compat",[t4]:"fire-gcs",[n4]:"fire-gcs-compat",[r4]:"fire-fst",[s4]:"fire-fst-compat","fire-js":"fire-js",[i4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh=new Map,c4=new Map,Eh=new Map;function zp(t,e){try{t.container.addComponent(e)}catch(n){Ds.debug("Component ".concat(e.name," failed to register with FirebaseApp ").concat(t.name),n)}}function Sl(t){const e=t.name;if(Eh.has(e))return Ds.debug("There were multiple attempts to register component ".concat(e,".")),!1;Eh.set(e,t);for(const n of wh.values())zp(n,t);for(const n of c4.values())zp(n,t);return!0}function u4(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ms=new f2("app","Firebase",h4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ms.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4=o4;function p4(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:a4,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ms.create("bad-app-name",{appName:String(s)});if(n||(n=aI()),!n)throw Ms.create("no-options");const i=wh.get(s);if(i){if(kl(n,i.options)&&kl(r,i.config))return i;throw Ms.create("duplicate-app",{appName:s})}const o=new vI(s);for(const l of Eh.values())o.addComponent(l);const a=new f4(n,r,o);return wh.set(s,a),a}function ui(t,e,n){var r;let s=(r=l4[t])!==null&&r!==void 0?r:t;n&&(s+="-".concat(n));const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=['Unable to register library "'.concat(s,'" with version "').concat(e,'":')];i&&a.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),i&&o&&a.push("and"),o&&a.push('version name "'.concat(e,'" contains illegal characters (whitespace or "/")')),Ds.warn(a.join(" "));return}Sl(new Fo("".concat(s,"-version"),()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4="firebase-heartbeat-database",g4=1,$o="firebase-heartbeat-store";let bu=null;function g2(){return bu||(bu=LI(m4,g4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($o)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ms.create("idb-open",{originalErrorMessage:t.message})})),bu}async function _4(t){try{const n=(await g2()).transaction($o),r=await n.objectStore($o).get(_2(t));return await n.done,r}catch(e){if(e instanceof Oi)Ds.warn(e.message);else{const n=Ms.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ds.warn(n.message)}}}async function Wp(t,e){try{const r=(await g2()).transaction($o,"readwrite");await r.objectStore($o).put(e,_2(t)),await r.done}catch(n){if(n instanceof Oi)Ds.warn(n.message);else{const r=Ms.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ds.warn(r.message)}}}function _2(t){return"".concat(t.name,"!").concat(t.options.appId)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4=1024,y4=30*24*60*60*1e3;class w4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new C4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Hp();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=y4}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Hp(),{heartbeatsToSend:r,unsentEntries:s}=E4(this._heartbeatsCache.heartbeats),i=c2(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Hp(){return new Date().toISOString().substring(0,10)}function E4(t,e=v4){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Gp(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Gp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class C4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return h2()?hI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await _4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Wp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Wp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Gp(t){return c2(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b4(t){Sl(new Fo("platform-logger",e=>new xI(e),"PRIVATE")),Sl(new Fo("heartbeat",e=>new w4(e),"PRIVATE")),ui(yh,jp,t),ui(yh,jp,"esm2017"),ui("fire-js","")}b4("");var T4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},re,Vf=Vf||{},Le=T4||self;function fc(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function ha(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function k4(t){return Object.prototype.hasOwnProperty.call(t,Tu)&&t[Tu]||(t[Tu]=++S4)}var Tu="closure_uid_"+(1e9*Math.random()>>>0),S4=0;function I4(t,e,n){return t.call.apply(t.bind,arguments)}function A4(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function Jt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Jt=I4:Jt=A4,Jt.apply(null,arguments)}function Ba(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function $t(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function cs(){this.s=this.s,this.o=this.o}var R4=0;cs.prototype.s=!1;cs.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),R4!=0)&&k4(this)};cs.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const v2=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Ff(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function qp(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(fc(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function Zt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Zt.prototype.h=function(){this.defaultPrevented=!0};var P4=function(){if(!Le.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};Le.addEventListener("test",n,e),Le.removeEventListener("test",n,e)}catch(n){}return t}();function Bo(t){return/^[\s\xa0]*$/.test(t)}function dc(){var t=Le.navigator;return t&&(t=t.userAgent)?t:""}function er(t){return dc().indexOf(t)!=-1}function $f(t){return $f[" "](t),t}$f[" "]=function(){};function L4(t,e){var n=bA;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var N4=er("Opera"),bi=er("Trident")||er("MSIE"),y2=er("Edge"),Ch=y2||bi,w2=er("Gecko")&&!(dc().toLowerCase().indexOf("webkit")!=-1&&!er("Edge"))&&!(er("Trident")||er("MSIE"))&&!er("Edge"),M4=dc().toLowerCase().indexOf("webkit")!=-1&&!er("Edge");function E2(){var t=Le.document;return t?t.documentMode:void 0}var bh;e:{var ku="",Su=function(){var t=dc();if(w2)return/rv:([^\);]+)(\)|;)/.exec(t);if(y2)return/Edge\/([\d\.]+)/.exec(t);if(bi)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(M4)return/WebKit\/(\S+)/.exec(t);if(N4)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Su&&(ku=Su?Su[1]:""),bi){var Iu=E2();if(Iu!=null&&Iu>parseFloat(ku)){bh=String(Iu);break e}}bh=ku}var Th;if(Le.document&&bi){var Kp=E2();Th=Kp||parseInt(bh,10)||void 0}else Th=void 0;var x4=Th;function Uo(t,e){if(Zt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(w2){e:{try{$f(e.nodeName);var s=!0;break e}catch(i){}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:O4[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Uo.$.h.call(this)}}$t(Uo,Zt);var O4={2:"touch",3:"pen",4:"mouse"};Uo.prototype.h=function(){Uo.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var fa="closure_listenable_"+(1e6*Math.random()|0),D4=0;function V4(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++D4,this.fa=this.ia=!1}function pc(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Bf(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function F4(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function C2(t){const e={};for(const n in t)e[n]=t[n];return e}const Qp="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b2(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<Qp.length;i++)n=Qp[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function mc(t){this.src=t,this.g={},this.h=0}mc.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=Sh(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new V4(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function kh(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=v2(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(pc(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Sh(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var Uf="closure_lm_"+(1e6*Math.random()|0),Au={};function T2(t,e,n,r,s){if(r&&r.once)return S2(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)T2(t,e[i],n,r,s);return null}return n=Wf(n),t&&t[fa]?t.O(e,n,ha(r)?!!r.capture:!!r,s):k2(t,e,n,!1,r,s)}function k2(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=ha(s)?!!s.capture:!!s,a=zf(t);if(a||(t[Uf]=a=new mc(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=$4(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)P4||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(A2(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function $4(){function t(n){return e.call(t.src,t.listener,n)}const e=B4;return t}function S2(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)S2(t,e[i],n,r,s);return null}return n=Wf(n),t&&t[fa]?t.P(e,n,ha(r)?!!r.capture:!!r,s):k2(t,e,n,!0,r,s)}function I2(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)I2(t,e[i],n,r,s);else r=ha(r)?!!r.capture:!!r,n=Wf(n),t&&t[fa]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=Sh(i,n,r,s),-1<n&&(pc(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=zf(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Sh(e,n,r,s)),(n=-1<t?e[t]:null)&&jf(n))}function jf(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[fa])kh(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(A2(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=zf(e))?(kh(n,t),n.h==0&&(n.src=null,e[Uf]=null)):pc(t)}}}function A2(t){return t in Au?Au[t]:Au[t]="on"+t}function B4(t,e){if(t.fa)t=!0;else{e=new Uo(e,this);var n=t.listener,r=t.la||t.src;t.ia&&jf(t),t=n.call(r,e)}return t}function zf(t){return t=t[Uf],t instanceof mc?t:null}var Ru="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wf(t){return typeof t=="function"?t:(t[Ru]||(t[Ru]=function(e){return t.handleEvent(e)}),t[Ru])}function Ft(){cs.call(this),this.i=new mc(this),this.S=this,this.J=null}$t(Ft,cs);Ft.prototype[fa]=!0;Ft.prototype.removeEventListener=function(t,e,n,r){I2(this,t,e,n,r)};function Wt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Zt(e,t);else if(e instanceof Zt)e.target=e.target||t;else{var s=e;e=new Zt(r,t),b2(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=Ua(o,r,!0,e)&&s}if(o=e.g=t,s=Ua(o,r,!0,e)&&s,s=Ua(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=Ua(o,r,!1,e)&&s}Ft.prototype.N=function(){if(Ft.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)pc(n[r]);delete t.g[e],t.h--}}this.J=null};Ft.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Ft.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Ua(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&kh(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var Hf=Le.JSON.stringify;class U4{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function j4(){var t=Gf;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class z4{constructor(){this.h=this.g=null}add(e,n){const r=R2.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var R2=new U4(()=>new W4,t=>t.reset());class W4{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function H4(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function G4(t){Le.setTimeout(()=>{throw t},0)}let jo,zo=!1,Gf=new z4,P2=()=>{const t=Le.Promise.resolve(void 0);jo=()=>{t.then(q4)}};var q4=()=>{for(var t;t=j4();){try{t.h.call(t.g)}catch(n){G4(n)}var e=R2;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}zo=!1};function gc(t,e){Ft.call(this),this.h=t||1,this.g=e||Le,this.j=Jt(this.qb,this),this.l=Date.now()}$t(gc,Ft);re=gc.prototype;re.ga=!1;re.T=null;re.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Wt(this,"tick"),this.ga&&(qf(this),this.start()))}};re.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function qf(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}re.N=function(){gc.$.N.call(this),qf(this),delete this.g};function Kf(t,e,n){if(typeof t=="function")n&&(t=Jt(t,n));else if(t&&typeof t.handleEvent=="function")t=Jt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Le.setTimeout(t,e||0)}function L2(t){t.g=Kf(()=>{t.g=null,t.i&&(t.i=!1,L2(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class K4 extends cs{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:L2(this)}N(){super.N(),this.g&&(Le.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wo(t){cs.call(this),this.h=t,this.g={}}$t(Wo,cs);var Yp=[];function N2(t,e,n,r){Array.isArray(n)||(n&&(Yp[0]=n.toString()),n=Yp);for(var s=0;s<n.length;s++){var i=T2(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function M2(t){Bf(t.g,function(e,n){this.g.hasOwnProperty(n)&&jf(e)},t),t.g={}}Wo.prototype.N=function(){Wo.$.N.call(this),M2(this)};Wo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function _c(){this.g=!0}_c.prototype.Ea=function(){this.g=!1};function Q4(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var f=u.split("_");o=2<=f.length&&f[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+n+"\n"+o})}function Y4(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+n+"\n"+i+" "+o})}function ii(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+J4(t,n)+(r?" "+r:"")})}function X4(t,e){t.info(function(){return"TIMEOUT: "+e})}_c.prototype.info=function(){};function J4(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return Hf(n)}catch(a){return e}}var Ws={},Xp=null;function vc(){return Xp=Xp||new Ft}Ws.Ta="serverreachability";function x2(t){Zt.call(this,Ws.Ta,t)}$t(x2,Zt);function Ho(t){const e=vc();Wt(e,new x2(e))}Ws.STAT_EVENT="statevent";function O2(t,e){Zt.call(this,Ws.STAT_EVENT,t),this.stat=e}$t(O2,Zt);function rn(t){const e=vc();Wt(e,new O2(e,t))}Ws.Ua="timingevent";function D2(t,e){Zt.call(this,Ws.Ua,t),this.size=e}$t(D2,Zt);function da(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Le.setTimeout(function(){t()},e)}var yc={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},V2={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Qf(){}Qf.prototype.h=null;function Jp(t){return t.h||(t.h=t.i())}function F2(){}var pa={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Yf(){Zt.call(this,"d")}$t(Yf,Zt);function Xf(){Zt.call(this,"c")}$t(Xf,Zt);var Ih;function wc(){}$t(wc,Qf);wc.prototype.g=function(){return new XMLHttpRequest};wc.prototype.i=function(){return{}};Ih=new wc;function ma(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Wo(this),this.P=Z4,t=Ch?125:void 0,this.V=new gc(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new $2}function $2(){this.i=null,this.g="",this.h=!1}var Z4=45e3,B2={},Ah={};re=ma.prototype;re.setTimeout=function(t){this.P=t};function Rh(t,e,n){t.L=1,t.A=Cc(Tr(e)),t.u=n,t.S=!0,U2(t,null)}function U2(t,e){t.G=Date.now(),ga(t),t.B=Tr(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),Q2(n.i,"t",r),t.o=0,n=t.l.J,t.h=new $2,t.g=g_(t.l,n?e:null,!t.u),0<t.O&&(t.M=new K4(Jt(t.Pa,t,t.g),t.O)),N2(t.U,t.g,"readystatechange",t.nb),e=t.I?C2(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Ho(),Q4(t.j,t.v,t.B,t.m,t.W,t.u)}re.nb=function(t){t=t.target;const e=this.M;e&&rr(t)==3?e.l():this.Pa(t)};re.Pa=function(t){try{if(t==this.g)e:{const u=rr(this.g);var e=this.g.Ia();const f=this.g.da();if(!(3>u)&&(u!=3||Ch||this.g&&(this.h.h||this.g.ja()||nm(this.g)))){this.J||u!=4||e==7||(e==8||0>=f?Ho(3):Ho(2)),Ec(this);var n=this.g.da();this.ca=n;t:if(j2(this)){var r=nm(this.g);t="";var s=r.length,i=rr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ks(this),vo(this);var o="";break t}this.h.i=new Le.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,Y4(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Bo(a)){var c=a;break t}}c=null}if(n=c)ii(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ph(this,n);else{this.i=!1,this.s=3,rn(12),ks(this),vo(this);break e}}this.S?(z2(this,u,o),Ch&&this.i&&u==3&&(N2(this.U,this.V,"tick",this.mb),this.V.start())):(ii(this.j,this.m,o,null),Ph(this,o)),u==4&&ks(this),this.i&&!this.J&&(u==4?f_(this.l,this):(this.i=!1,ga(this)))}else wA(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,rn(12)):(this.s=0,rn(13)),ks(this),vo(this)}}}catch(u){}finally{}};function j2(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function z2(t,e,n){let r=!0,s;for(;!t.J&&t.o<n.length;)if(s=eA(t,n),s==Ah){e==4&&(t.s=4,rn(14),r=!1),ii(t.j,t.m,null,"[Incomplete Response]");break}else if(s==B2){t.s=4,rn(15),ii(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else ii(t.j,t.m,s,null),Ph(t,s);j2(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,rn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),rd(e),e.M=!0,rn(11))):(ii(t.j,t.m,n,"[Invalid Chunked Response]"),ks(t),vo(t))}re.mb=function(){if(this.g){var t=rr(this.g),e=this.g.ja();this.o<e.length&&(Ec(this),z2(this,t,e),this.i&&t!=4&&ga(this))}};function eA(t,e){var n=t.o,r=e.indexOf("\n",n);return r==-1?Ah:(n=Number(e.substring(n,r)),isNaN(n)?B2:(r+=1,r+n>e.length?Ah:(e=e.slice(r,r+n),t.o=r+n,e)))}re.cancel=function(){this.J=!0,ks(this)};function ga(t){t.Y=Date.now()+t.P,W2(t,t.P)}function W2(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=da(Jt(t.lb,t),e)}function Ec(t){t.C&&(Le.clearTimeout(t.C),t.C=null)}re.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(X4(this.j,this.B),this.L!=2&&(Ho(),rn(17)),ks(this),this.s=2,vo(this)):W2(this,this.Y-t)};function vo(t){t.l.H==0||t.J||f_(t.l,t)}function ks(t){Ec(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,qf(t.V),M2(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Ph(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Lh(n.i,t))){if(!t.K&&Lh(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch(c){r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Rl(n),Sc(n);else break e;nd(n),rn(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=da(Jt(n.ib,n),6e3));if(1>=J2(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else Ss(n,11)}else if((t.K||n.g==t)&&Rl(n),!Bo(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const f=c[4];f!=null&&(n.Ga=f,n.l.info("SVER="+n.Ga));const h=c[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const m=t.g;if(m){const g=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var i=r.i;i.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Jf(i,i.h),i.h=null))}if(r.F){const w=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(r.Da=w,ft(r.I,r.F,w))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=m_(r,r.J?r.pa:null,r.Y),o.K){Z2(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(Ec(a),ga(a)),r.g=o}else u_(r);0<n.j.length&&Ic(n)}else c[0]!="stop"&&c[0]!="close"||Ss(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Ss(n,7):td(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Ho(4)}catch(c){}}function tA(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(fc(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function nA(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(fc(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function H2(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(fc(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=nA(t),r=tA(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var G2=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rA(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function xs(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof xs){this.h=t.h,Il(this,t.j),this.s=t.s,this.g=t.g,Al(this,t.m),this.l=t.l;var e=t.i,n=new Go;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Zp(this,n),this.o=t.o}else t&&(e=String(t).match(G2))?(this.h=!1,Il(this,e[1]||"",!0),this.s=ro(e[2]||""),this.g=ro(e[3]||"",!0),Al(this,e[4]),this.l=ro(e[5]||"",!0),Zp(this,e[6]||"",!0),this.o=ro(e[7]||"")):(this.h=!1,this.i=new Go(null,this.h))}xs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(so(e,em,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(so(e,em,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(so(n,n.charAt(0)=="/"?oA:iA,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",so(n,lA)),t.join("")};function Tr(t){return new xs(t)}function Il(t,e,n){t.j=n?ro(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Al(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Zp(t,e,n){e instanceof Go?(t.i=e,cA(t.i,t.h)):(n||(e=so(e,aA)),t.i=new Go(e,t.h))}function ft(t,e,n){t.i.set(e,n)}function Cc(t){return ft(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ro(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function so(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,sA),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function sA(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var em=/[#\/\?@]/g,iA=/[#\?:]/g,oA=/[#\?]/g,aA=/[#\?@]/g,lA=/#/g;function Go(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function us(t){t.g||(t.g=new Map,t.h=0,t.i&&rA(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}re=Go.prototype;re.add=function(t,e){us(this),this.i=null,t=Di(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function q2(t,e){us(t),e=Di(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function K2(t,e){return us(t),e=Di(t,e),t.g.has(e)}re.forEach=function(t,e){us(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};re.ta=function(){us(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};re.Z=function(t){us(this);let e=[];if(typeof t=="string")K2(this,t)&&(e=e.concat(this.g.get(Di(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};re.set=function(t,e){return us(this),this.i=null,t=Di(this,t),K2(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};re.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function Q2(t,e,n){q2(t,e),0<n.length&&(t.i=null,t.g.set(Di(t,e),Ff(n)),t.h+=n.length)}re.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function Di(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function cA(t,e){e&&!t.j&&(us(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(q2(this,r),Q2(this,s,n))},t)),t.j=e}var uA=class{constructor(t,e){this.g=t,this.map=e}};function Y2(t){this.l=t||hA,Le.PerformanceNavigationTiming?(t=Le.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Le.g&&Le.g.Ka&&Le.g.Ka()&&Le.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var hA=10;function X2(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function J2(t){return t.h?1:t.g?t.g.size:0}function Lh(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Jf(t,e){t.g?t.g.add(e):t.h=e}function Z2(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Y2.prototype.cancel=function(){if(this.i=e_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function e_(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Ff(t.i)}var fA=class{stringify(t){return Le.JSON.stringify(t,void 0)}parse(t){return Le.JSON.parse(t,void 0)}};function dA(){this.g=new fA}function pA(t,e,n){const r=n||"";try{H2(t,function(s,i){let o=s;ha(s)&&(o=Hf(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function mA(t,e){const n=new _c;if(Le.Image){const r=new Image;r.onload=Ba(ja,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ba(ja,n,r,"TestLoadImage: error",!1,e),r.onabort=Ba(ja,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ba(ja,n,r,"TestLoadImage: timeout",!1,e),Le.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function ja(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch(i){}}function bc(t){this.l=t.ec||null,this.j=t.ob||!1}$t(bc,Qf);bc.prototype.g=function(){return new Tc(this.l,this.j)};bc.prototype.i=function(t){return function(){return t}}({});function Tc(t,e){Ft.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Zf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}$t(Tc,Ft);var Zf=0;re=Tc.prototype;re.open=function(t,e){if(this.readyState!=Zf)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,qo(this)};re.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Le).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};re.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_a(this)),this.readyState=Zf};re.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,qo(this)),this.g&&(this.readyState=3,qo(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Le.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;t_(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function t_(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}re.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?_a(this):qo(this),this.readyState==3&&t_(this)}};re.Za=function(t){this.g&&(this.response=this.responseText=t,_a(this))};re.Ya=function(t){this.g&&(this.response=t,_a(this))};re.ka=function(){this.g&&_a(this)};function _a(t){t.readyState=4,t.l=null,t.j=null,t.A=null,qo(t)}re.setRequestHeader=function(t,e){this.v.append(t,e)};re.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};re.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")};function qo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Tc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var gA=Le.JSON.parse;function wt(t){Ft.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=n_,this.L=this.M=!1}$t(wt,Ft);var n_="",_A=/^https?$/i,vA=["POST","PUT"];re=wt.prototype;re.Oa=function(t){this.M=t};re.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ih.g(),this.C=this.u?Jp(this.u):Jp(Ih),this.g.onreadystatechange=Jt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){tm(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=Le.FormData&&t instanceof Le.FormData,!(0<=v2(vA,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{i_(this),0<this.B&&((this.L=yA(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Jt(this.ua,this)):this.A=Kf(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){tm(this,i)}};function yA(t){return bi&&typeof t.timeout=="number"&&t.ontimeout!==void 0}re.ua=function(){typeof Vf<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Wt(this,"timeout"),this.abort(8))};function tm(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,r_(t),kc(t)}function r_(t){t.F||(t.F=!0,Wt(t,"complete"),Wt(t,"error"))}re.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Wt(this,"complete"),Wt(this,"abort"),kc(this))};re.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),kc(this,!0)),wt.$.N.call(this)};re.La=function(){this.s||(this.G||this.v||this.l?s_(this):this.kb())};re.kb=function(){s_(this)};function s_(t){if(t.h&&typeof Vf<"u"&&(!t.C[1]||rr(t)!=4||t.da()!=2)){if(t.v&&rr(t)==4)Kf(t.La,0,t);else if(Wt(t,"readystatechange"),rr(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(G2)[1]||null;!s&&Le.self&&Le.self.location&&(s=Le.self.location.protocol.slice(0,-1)),r=!_A.test(s?s.toLowerCase():"")}n=r}if(n)Wt(t,"complete"),Wt(t,"success");else{t.m=6;try{var i=2<rr(t)?t.g.statusText:""}catch(a){i=""}t.j=i+" ["+t.da()+"]",r_(t)}}finally{kc(t)}}}}function kc(t,e){if(t.g){i_(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Wt(t,"ready");try{n.onreadystatechange=r}catch(s){}}}function i_(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Le.clearTimeout(t.A),t.A=null)}re.isActive=function(){return!!this.g};function rr(t){return t.g?t.g.readyState:0}re.da=function(){try{return 2<rr(this)?this.g.status:-1}catch(t){return-1}};re.ja=function(){try{return this.g?this.g.responseText:""}catch(t){return""}};re.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),gA(e)}};function nm(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case n_:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function wA(t){const e={};t=(t.g&&2<=rr(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(Bo(t[r]))continue;var n=H4(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}F4(e,function(r){return r.join(", ")})}re.Ia=function(){return this.m};re.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function o_(t){let e="";return Bf(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function ed(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=o_(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ft(t,e,n))}function Qi(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function a_(t){this.Ga=0,this.j=[],this.l=new _c,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Qi("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Qi("baseRetryDelayMs",5e3,t),this.hb=Qi("retryDelaySeedMs",1e4,t),this.eb=Qi("forwardChannelMaxRetries",2,t),this.xa=Qi("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Y2(t&&t.concurrentRequestLimit),this.Ja=new dA,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}re=a_.prototype;re.ra=8;re.H=1;function td(t){if(l_(t),t.H==3){var e=t.W++,n=Tr(t.I);if(ft(n,"SID",t.K),ft(n,"RID",e),ft(n,"TYPE","terminate"),va(t,n),e=new ma(t,t.l,e),e.L=2,e.A=Cc(Tr(n)),n=!1,Le.navigator&&Le.navigator.sendBeacon)try{n=Le.navigator.sendBeacon(e.A.toString(),"")}catch(r){}!n&&Le.Image&&(new Image().src=e.A,n=!0),n||(e.g=g_(e.l,null),e.g.ha(e.A)),e.G=Date.now(),ga(e)}p_(t)}function Sc(t){t.g&&(rd(t),t.g.cancel(),t.g=null)}function l_(t){Sc(t),t.u&&(Le.clearTimeout(t.u),t.u=null),Rl(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Le.clearTimeout(t.m),t.m=null)}function Ic(t){if(!X2(t.i)&&!t.m){t.m=!0;var e=t.Na;jo||P2(),zo||(jo(),zo=!0),Gf.add(e,t),t.C=0}}function EA(t,e){return J2(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=da(Jt(t.Na,t,e),d_(t,t.C)),t.C++,!0)}re.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new ma(this,this.l,t);let i=this.s;if(this.U&&(i?(i=C2(i),b2(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=c_(this,s,e),n=Tr(this.I),ft(n,"RID",t),ft(n,"CVER",22),this.F&&ft(n,"X-HTTP-Session-Id",this.F),va(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(o_(i)))+"&"+e:this.o&&ed(n,this.o,i)),Jf(this.i,s),this.bb&&ft(n,"TYPE","init"),this.P?(ft(n,"$req",e),ft(n,"SID","null"),s.aa=!0,Rh(s,n,null)):Rh(s,n,e),this.H=2}}else this.H==3&&(t?rm(this,t):this.j.length==0||X2(this.i)||rm(this))};function rm(t,e){var n;e?n=e.m:n=t.W++;const r=Tr(t.I);ft(r,"SID",t.K),ft(r,"RID",n),ft(r,"AID",t.V),va(t,r),t.o&&t.s&&ed(r,t.o,t.s),n=new ma(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=c_(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Jf(t.i,n),Rh(n,r,e)}function va(t,e){t.na&&Bf(t.na,function(n,r){ft(e,r,n)}),t.h&&H2({},function(n,r){ft(e,r,n)})}function c_(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Jt(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const u=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{pA(u,o,"req"+c+"_")}catch(f){r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function u_(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;jo||P2(),zo||(jo(),zo=!0),Gf.add(e,t),t.A=0}}function nd(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=da(Jt(t.Ma,t),d_(t,t.A)),t.A++,!0)}re.Ma=function(){if(this.u=null,h_(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=da(Jt(this.jb,this),t)}};re.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,rn(10),Sc(this),h_(this))};function rd(t){t.B!=null&&(Le.clearTimeout(t.B),t.B=null)}function h_(t){t.g=new ma(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Tr(t.wa);ft(e,"RID","rpc"),ft(e,"SID",t.K),ft(e,"AID",t.V),ft(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&ft(e,"TO",t.qa),ft(e,"TYPE","xmlhttp"),va(t,e),t.o&&t.s&&ed(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Cc(Tr(e)),n.u=null,n.S=!0,U2(n,t)}re.ib=function(){this.v!=null&&(this.v=null,Sc(this),nd(this),rn(19))};function Rl(t){t.v!=null&&(Le.clearTimeout(t.v),t.v=null)}function f_(t,e){var n=null;if(t.g==e){Rl(t),rd(t),t.g=null;var r=2}else if(Lh(t.i,e))n=e.F,Z2(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var s=t.C;r=vc(),Wt(r,new D2(r,n)),Ic(t)}else u_(t);else if(s=e.s,s==3||s==0&&0<e.ca||!(r==1&&EA(t,e)||r==2&&nd(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:Ss(t,5);break;case 4:Ss(t,10);break;case 3:Ss(t,6);break;default:Ss(t,2)}}}function d_(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ss(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Jt(t.pb,t);n||(n=new xs("//www.google.com/images/cleardot.gif"),Le.location&&Le.location.protocol=="http"||Il(n,"https"),Cc(n)),mA(n.toString(),r)}else rn(2);t.H=0,t.h&&t.h.za(e),p_(t),l_(t)}re.pb=function(t){t?(this.l.info("Successfully pinged google.com"),rn(2)):(this.l.info("Failed to ping google.com"),rn(1))};function p_(t){if(t.H=0,t.ma=[],t.h){const e=e_(t.i);(e.length!=0||t.j.length!=0)&&(qp(t.ma,e),qp(t.ma,t.j),t.i.i.length=0,Ff(t.j),t.j.length=0),t.h.ya()}}function m_(t,e,n){var r=n instanceof xs?Tr(n):new xs(n);if(r.g!="")e&&(r.g=e+"."+r.g),Al(r,r.m);else{var s=Le.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new xs(null);r&&Il(i,r),e&&(i.g=e),s&&Al(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&ft(r,n,e),ft(r,"VER",t.ra),va(t,r),r}function g_(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new wt(new bc({ob:n})):new wt(t.va),e.Oa(t.J),e}re.isActive=function(){return!!this.h&&this.h.isActive(this)};function __(){}re=__.prototype;re.Ba=function(){};re.Aa=function(){};re.za=function(){};re.ya=function(){};re.isActive=function(){return!0};re.Va=function(){};function Pl(){if(bi&&!(10<=Number(x4)))throw Error("Environmental error: no available transport.")}Pl.prototype.g=function(t,e){return new Cn(t,e)};function Cn(t,e){Ft.call(this),this.g=new a_(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Bo(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Bo(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Vi(this)}$t(Cn,Ft);Cn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;rn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=m_(t,null,t.Y),Ic(t)};Cn.prototype.close=function(){td(this.g)};Cn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Hf(t),t=n);e.j.push(new uA(e.fb++,t)),e.H==3&&Ic(e)};Cn.prototype.N=function(){this.g.h=null,delete this.j,td(this.g),delete this.g,Cn.$.N.call(this)};function v_(t){Yf.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}$t(v_,Yf);function y_(){Xf.call(this),this.status=1}$t(y_,Xf);function Vi(t){this.g=t}$t(Vi,__);Vi.prototype.Ba=function(){Wt(this.g,"a")};Vi.prototype.Aa=function(t){Wt(this.g,new v_(t))};Vi.prototype.za=function(t){Wt(this.g,new y_)};Vi.prototype.ya=function(){Wt(this.g,"b")};function CA(){this.blockSize=-1}function Wn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}$t(Wn,CA);Wn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Pu(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}Wn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)Pu(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){Pu(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){Pu(this,r),s=0;break}}this.h=s,this.i+=e};Wn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function rt(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var bA={};function sd(t){return-128<=t&&128>t?L4(t,function(e){return new rt([e|0],0>e?-1:0)}):new rt([t|0],0>t?-1:0)}function sr(t){if(isNaN(t)||!isFinite(t))return hi;if(0>t)return Ut(sr(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Nh;return new rt(e,0)}function w_(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Ut(w_(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=sr(Math.pow(e,8)),r=hi,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=sr(Math.pow(e,i)),r=r.R(i).add(sr(o))):(r=r.R(n),r=r.add(sr(o)))}return r}var Nh=4294967296,hi=sd(0),Mh=sd(1),sm=sd(16777216);re=rt.prototype;re.ea=function(){if(Pn(this))return-Ut(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Nh+r)*e,e*=Nh}return t};re.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(_r(this))return"0";if(Pn(this))return"-"+Ut(this).toString(t);for(var e=sr(Math.pow(t,6)),n=this,r="";;){var s=Nl(n,e).g;n=Ll(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,_r(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};re.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function _r(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Pn(t){return t.h==-1}re.X=function(t){return t=Ll(this,t),Pn(t)?-1:_r(t)?0:1};function Ut(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new rt(n,~t.h).add(Mh)}re.abs=function(){return Pn(this)?Ut(this):this};re.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new rt(n,n[n.length-1]&-2147483648?-1:0)};function Ll(t,e){return t.add(Ut(e))}re.R=function(t){if(_r(this)||_r(t))return hi;if(Pn(this))return Pn(t)?Ut(this).R(Ut(t)):Ut(Ut(this).R(t));if(Pn(t))return Ut(this.R(Ut(t)));if(0>this.X(sm)&&0>t.X(sm))return sr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*r+2*s]+=o*l,za(n,2*r+2*s),n[2*r+2*s+1]+=i*l,za(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,za(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,za(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new rt(n,0)};function za(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Yi(t,e){this.g=t,this.h=e}function Nl(t,e){if(_r(e))throw Error("division by zero");if(_r(t))return new Yi(hi,hi);if(Pn(t))return e=Nl(Ut(t),e),new Yi(Ut(e.g),Ut(e.h));if(Pn(e))return e=Nl(t,Ut(e)),new Yi(Ut(e.g),e.h);if(30<t.g.length){if(Pn(t)||Pn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Mh,r=e;0>=r.X(t);)n=im(n),r=im(r);var s=Xs(n,1),i=Xs(r,1);for(r=Xs(r,2),n=Xs(n,2);!_r(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=Xs(r,1),n=Xs(n,1)}return e=Ll(t,s.R(e)),new Yi(s,e)}for(s=hi;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=sr(n),o=i.R(e);Pn(o)||0<o.X(t);)n-=r,i=sr(n),o=i.R(e);_r(i)&&(i=Mh),s=s.add(i),t=Ll(t,o)}return new Yi(s,t)}re.gb=function(t){return Nl(this,t).h};re.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new rt(n,this.h&t.h)};re.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new rt(n,this.h|t.h)};re.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new rt(n,this.h^t.h)};function im(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new rt(n,t.h)}function Xs(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new rt(s,t.h)}Pl.prototype.createWebChannel=Pl.prototype.g;Cn.prototype.send=Cn.prototype.u;Cn.prototype.open=Cn.prototype.m;Cn.prototype.close=Cn.prototype.close;yc.NO_ERROR=0;yc.TIMEOUT=8;yc.HTTP_ERROR=6;V2.COMPLETE="complete";F2.EventType=pa;pa.OPEN="a";pa.CLOSE="b";pa.ERROR="c";pa.MESSAGE="d";Ft.prototype.listen=Ft.prototype.O;wt.prototype.listenOnce=wt.prototype.P;wt.prototype.getLastError=wt.prototype.Sa;wt.prototype.getLastErrorCode=wt.prototype.Ia;wt.prototype.getStatus=wt.prototype.da;wt.prototype.getResponseJson=wt.prototype.Wa;wt.prototype.getResponseText=wt.prototype.ja;wt.prototype.send=wt.prototype.ha;wt.prototype.setWithCredentials=wt.prototype.Oa;Wn.prototype.digest=Wn.prototype.l;Wn.prototype.reset=Wn.prototype.reset;Wn.prototype.update=Wn.prototype.j;rt.prototype.add=rt.prototype.add;rt.prototype.multiply=rt.prototype.R;rt.prototype.modulo=rt.prototype.gb;rt.prototype.compare=rt.prototype.X;rt.prototype.toNumber=rt.prototype.ea;rt.prototype.toString=rt.prototype.toString;rt.prototype.getBits=rt.prototype.D;rt.fromNumber=sr;rt.fromString=w_;var TA=function(){return new Pl},kA=function(){return vc()},Lu=yc,SA=V2,IA=Ws,om={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Wa=F2,AA=wt,RA=Wn,fi=rt;const am="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fi="10.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=new d2("@firebase/firestore");function Xi(){return Vs.logLevel}function ne(t,...e){if(Vs.logLevel<=Ye.DEBUG){const n=e.map(id);Vs.debug("Firestore (".concat(Fi,"): ").concat(t),...n)}}function cr(t,...e){if(Vs.logLevel<=Ye.ERROR){const n=e.map(id);Vs.error("Firestore (".concat(Fi,"): ").concat(t),...n)}}function Ko(t,...e){if(Vs.logLevel<=Ye.WARN){const n=e.map(id);Vs.warn("Firestore (".concat(Fi,"): ").concat(t),...n)}}function id(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch(e){return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(t="Unexpected state"){const e="FIRESTORE (".concat(Fi,") INTERNAL ASSERTION FAILED: ")+t;throw cr(e),new Error(e)}function ct(t,e){t||Se()}function De(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends Oi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class LA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(un.UNAUTHENTICATED))}shutdown(){}}class NA{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Er;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Er,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Er)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct(typeof r.accessToken=="string"),new PA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ct(e===null||typeof e=="string"),new un(e)}}class MA{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=un.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class xA{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new MA(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(un.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class OA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&ne("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(i.error.message));const o=i.token!==this.R;return this.R=i.token,ne("FirebaseAppCheckTokenProvider","Received ".concat(o?"new":"existing"," token.")),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ct(typeof n.token=="string"),this.R=n.token,new OA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=VA(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Xe(t,e){return t<e?-1:t>e?1:0}function Ti(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new fe(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fe(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new fe(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pt.fromMillis(Date.now())}static fromDate(e){return Pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Pt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Me(e)}static min(){return new Me(new Pt(0,0))}static max(){return new Me(new Pt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,n,r){n===void 0?n=0:n>e.length&&Se(),r===void 0?r=e.length-n:r>e.length-n&&Se(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Qo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Qo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class pt extends Qo{construct(e,n,r){return new pt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new fe(K.INVALID_ARGUMENT,"Invalid segment (".concat(r,"). Paths must not contain // in them."));n.push(...r.split("/").filter(s=>s.length>0))}return new pt(n)}static emptyPath(){return new pt([])}}const FA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jt extends Qo{construct(e,n,r){return new jt(e,n,r)}static isValidIdentifier(e){return FA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new jt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new fe(K.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new fe(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new fe(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new fe(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jt(n)}static emptyPath(){return new jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(pt.fromString(e))}static fromName(e){return new Ee(pt.fromString(e).popFirst(5))}static empty(){return new Ee(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new pt(e.slice()))}}function $A(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Me.fromTimestamp(r===1e9?new Pt(n+1,0):new Pt(n,r));return new ss(s,Ee.empty(),e)}function BA(t){return new ss(t.readTime,t.key,-1)}class ss{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ss(Me.min(),Ee.empty(),-1)}static max(){return new ss(Me.max(),Ee.empty(),-1)}}function UA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ee.comparator(t.documentKey,e.documentKey),n!==0?n:Xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ya(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==jA)throw t;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(s=>s?q.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new q((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(e,n){return new q((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Er,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new yo(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=ad(r.target.error);this.V.reject(new yo(e,s))}}static open(e,n,r,s){try{return new od(n,e.transaction(s,r))}catch(i){throw new yo(n,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new HA(n)}}class Is{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Is.S(Tl())===12.2&&cr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ne("SimpleDb","Removing database:",e),bs(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!h2())return!1;if(Is.C())return!0;const e=Tl(),n=Is.S(e),r=0<n&&n<10,s=Is.v(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(ne("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new yo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new fe(K.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new fe(K.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new yo(e,o))},s.onupgradeneeded=i=>{ne("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.N(o,s.transaction,i.oldVersion,this.version).next(()=>{ne("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=od.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),q.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(ne("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class WA{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return bs(this.k.delete())}}class yo extends fe{constructor(e,n){super(K.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(n)),this.name="IndexedDbTransactionError"}}function wa(t){return t.name==="IndexedDbTransactionError"}class HA{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(ne("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),bs(r)}add(e){return ne("SimpleDb","ADD",this.store.name,e,e),bs(this.store.add(e))}get(e){return bs(this.store.get(e)).next(n=>(n===void 0&&(n=null),ne("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return ne("SimpleDb","DELETE",this.store.name,e),bs(this.store.delete(e))}count(){return ne("SimpleDb","COUNT",this.store.name),bs(this.store.count())}W(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new q((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.G(i,(a,l)=>{o.push(l)}).next(()=>o)}}j(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new q((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}H(e,n){ne("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const s=this.cursor(r);return this.G(s,(i,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.G(s,n)}Z(e){const n=this.cursor({});return new q((r,s)=>{n.onerror=i=>{const o=ad(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new q((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new WA(a),c=n(a.primaryKey,a.value,l);if(c instanceof q){const u=c.catch(f=>(l.done(),q.reject(f)));r.push(u)}l.isDone?s():l.$===null?a.continue():a.continue(l.$)}}).next(()=>q.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function bs(t){return new q((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=ad(r.target.error);n(s)}})}let lm=!1;function ad(t){const e=Is.S(Tl());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new fe("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return lm||(lm=!0,setTimeout(()=>{throw r},0)),r}}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}ld._e=-1;function Ac(t){return t==null}function Ml(t){return t===0&&1/t==-1/0}function GA(t){return typeof t=="number"&&Number.isInteger(t)&&!Ml(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Hs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function C_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,n){this.comparator=e,this.root=n||Bt.EMPTY}insert(e,n){return new vt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Bt.BLACK,null,null))}remove(e){return new vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push("".concat(n,":").concat(r)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ha(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ha(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ha(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ha(this.root,e,this.comparator,!0)}}class Ha{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r!=null?r:Bt.RED,this.left=s!=null?s:Bt.EMPTY,this.right=i!=null?i:Bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Bt(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,s!=null?s:this.left,i!=null?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Bt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Se();const e=this.left.check();if(e!==this.right.check())throw Se();return e+(this.isRed()?0:1)}}Bt.EMPTY=null,Bt.RED=!0,Bt.BLACK=!1;Bt.EMPTY=new class{constructor(){this.size=0}get key(){throw Se()}get value(){throw Se()}get color(){throw Se()}get left(){throw Se()}get right(){throw Se()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Bt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.comparator=e,this.data=new vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new um(this.data.getIterator())}getIteratorFrom(e){return new um(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ht)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ht(this.comparator);return n.data=e,n}}class um{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.fields=e,e.sort(jt.comparator)}static empty(){return new En([])}unionWith(e){let n=new Ht(jt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new En(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ti(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new b_("Invalid base64 string: "+i):i}}(e);return new en(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new en(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const qA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function is(t){if(ct(!!t),typeof t=="string"){let e=0;const n=qA.exec(t);if(ct(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ct(t.seconds),nanos:Ct(t.nanos)}}function Ct(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Fs(t){return typeof t=="string"?en.fromBase64String(t):en.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ud(t){const e=t.mapValue.fields.__previous_value__;return cd(e)?ud(e):e}function Yo(t){const e=is(t.mapValue.fields.__local_write_time__.timestampValue);return new Pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Xo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Xo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Xo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function $s(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cd(t)?4:QA(t)?9007199254740991:10:Se()}function ur(t,e){if(t===e)return!0;const n=$s(t);if(n!==$s(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yo(t).isEqual(Yo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=is(s.timestampValue),a=is(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Fs(s.bytesValue).isEqual(Fs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ct(s.geoPointValue.latitude)===Ct(i.geoPointValue.latitude)&&Ct(s.geoPointValue.longitude)===Ct(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ct(s.integerValue)===Ct(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ct(s.doubleValue),a=Ct(i.doubleValue);return o===a?Ml(o)===Ml(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ti(t.arrayValue.values||[],e.arrayValue.values||[],ur);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(cm(o)!==cm(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ur(o[l],a[l])))return!1;return!0}(t,e);default:return Se()}}function Jo(t,e){return(t.values||[]).find(n=>ur(n,e))!==void 0}function ki(t,e){if(t===e)return 0;const n=$s(t),r=$s(e);if(n!==r)return Xe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Ct(i.integerValue||i.doubleValue),l=Ct(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return hm(t.timestampValue,e.timestampValue);case 4:return hm(Yo(t),Yo(e));case 5:return Xe(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Fs(i),l=Fs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Xe(a[c],l[c]);if(u!==0)return u}return Xe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Xe(Ct(i.latitude),Ct(o.latitude));return a!==0?a:Xe(Ct(i.longitude),Ct(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=ki(a[c],l[c]);if(u)return u}return Xe(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===Ga.mapValue&&o===Ga.mapValue)return 0;if(i===Ga.mapValue)return 1;if(o===Ga.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const h=Xe(l[f],u[f]);if(h!==0)return h;const m=ki(a[l[f]],c[u[f]]);if(m!==0)return m}return Xe(l.length,u.length)}(t.mapValue,e.mapValue);default:throw Se()}}function hm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Xe(t,e);const n=is(t),r=is(e),s=Xe(n.seconds,r.seconds);return s!==0?s:Xe(n.nanos,r.nanos)}function Si(t){return xh(t)}function xh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=is(n);return"time(".concat(r.seconds,",").concat(r.nanos,")")}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Fs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return"geo(".concat(n.latitude,",").concat(n.longitude,")")}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=xh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+="".concat(o,":").concat(xh(n.fields[o]));return s+"}"}(t.mapValue):Se()}function Oh(t){return!!t&&"integerValue"in t}function hd(t){return!!t&&"arrayValue"in t}function fm(t){return!!t&&"nullValue"in t}function dm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function il(t){return!!t&&"mapValue"in t}function wo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Hs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=wo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=wo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function QA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.value=e}static empty(){return new hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!il(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=wo(n)}setAll(e){let n=jt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=wo(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());il(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ur(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];il(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Hs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new hn(wo(this.value))}}function T_(t){const e=[];return Hs(t.fields,(n,r)=>{const s=new jt([n]);if(il(r)){const i=T_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new En(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Qt(e,0,Me.min(),Me.min(),Me.min(),hn.empty(),0)}static newFoundDocument(e,n,r,s){return new Qt(e,1,n,Me.min(),r,s,0)}static newNoDocument(e,n){return new Qt(e,2,n,Me.min(),Me.min(),hn.empty(),0)}static newUnknownDocument(e,n){return new Qt(e,3,n,Me.min(),Me.min(),hn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n){this.position=e,this.inclusive=n}}function pm(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Ee.comparator(Ee.fromName(o.referenceValue),n.key):r=ki(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function mm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ur(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,n="asc"){this.field=e,this.dir=n}}function YA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{}class At extends k_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new JA(e,n,r):n==="array-contains"?new tR(e,r):n==="in"?new nR(e,r):n==="not-in"?new rR(e,r):n==="array-contains-any"?new sR(e,r):new At(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new ZA(e,r):new eR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ki(n,this.value)):n!==null&&$s(this.value)===$s(n)&&this.matchesComparison(ki(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hr extends k_{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new hr(e,n)}matches(e){return S_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function S_(t){return t.op==="and"}function I_(t){return XA(t)&&S_(t)}function XA(t){for(const e of t.filters)if(e instanceof hr)return!1;return!0}function Dh(t){if(t instanceof At)return t.field.canonicalString()+t.op.toString()+Si(t.value);if(I_(t))return t.filters.map(e=>Dh(e)).join(",");{const e=t.filters.map(n=>Dh(n)).join(",");return"".concat(t.op,"(").concat(e,")")}}function A_(t,e){return t instanceof At?function(r,s){return s instanceof At&&r.op===s.op&&r.field.isEqual(s.field)&&ur(r.value,s.value)}(t,e):t instanceof hr?function(r,s){return s instanceof hr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&A_(o,s.filters[a]),!0):!1}(t,e):void Se()}function R_(t){return t instanceof At?function(n){return"".concat(n.field.canonicalString()," ").concat(n.op," ").concat(Si(n.value))}(t):t instanceof hr?function(n){return n.op.toString()+" {"+n.getFilters().map(R_).join(" ,")+"}"}(t):"Filter"}class JA extends At{constructor(e,n,r){super(e,n,r),this.key=Ee.fromName(r.referenceValue)}matches(e){const n=Ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class ZA extends At{constructor(e,n){super(e,"in",n),this.keys=P_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class eR extends At{constructor(e,n){super(e,"not-in",n),this.keys=P_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function P_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ee.fromName(r.referenceValue))}class tR extends At{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return hd(n)&&Jo(n.arrayValue,this.value)}}class nR extends At{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Jo(this.value.arrayValue,n)}}class rR extends At{constructor(e,n){super(e,"not-in",n)}matches(e){if(Jo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Jo(this.value.arrayValue,n)}}class sR extends At{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!hd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Jo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ce=null}}function gm(t,e=null,n=[],r=[],s=null,i=null,o=null){return new iR(t,e,n,r,s,i,o)}function fd(t){const e=De(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Dh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ac(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Si(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Si(r)).join(",")),e.ce=n}return e.ce}function dd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!YA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!A_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!mm(t.startAt,e.startAt)&&mm(t.endAt,e.endAt)}function Vh(t){return Ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function oR(t,e,n,r,s,i,o,a){return new Rc(t,e,n,r,s,i,o,a)}function Pc(t){return new Rc(t)}function _m(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function aR(t){return t.collectionGroup!==null}function Eo(t){const e=De(t);if(e.le===null){e.le=[];const n=new Set;for(const i of e.explicitOrderBy)e.le.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ht(jt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.le.push(new Ol(i,r))}),n.has(jt.keyField().canonicalString())||e.le.push(new Ol(jt.keyField(),r))}return e.le}function ir(t){const e=De(t);return e.he||(e.he=lR(e,Eo(t))),e.he}function lR(t,e){if(t.limitType==="F")return gm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ol(s.field,i)});const n=t.endAt?new xl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new xl(t.startAt.position,t.startAt.inclusive):null;return gm(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Fh(t,e,n){return new Rc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Lc(t,e){return dd(ir(t),ir(e))&&t.limitType===e.limitType}function L_(t){return"".concat(fd(ir(t)),"|lt:").concat(t.limitType)}function ti(t){return"Query(target=".concat(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=", filters: [".concat(n.filters.map(s=>R_(s)).join(", "),"]")),Ac(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=", orderBy: [".concat(n.orderBy.map(s=>function(o){return"".concat(o.field.canonicalString()," (").concat(o.dir,")")}(s)).join(", "),"]")),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Si(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Si(s)).join(",")),"Target(".concat(r,")")}(ir(t)),"; limitType=").concat(t.limitType,")")}function Nc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Ee.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Eo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=pm(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Eo(r),s)||r.endAt&&!function(o,a,l){const c=pm(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Eo(r),s))}(t,e)}function cR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function N_(t){return(e,n)=>{let r=!1;for(const s of Eo(t)){const i=uR(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function uR(t,e,n){const r=t.field.isKeyField()?Ee.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?ki(l,c):Se()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Se()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Hs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return C_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=new vt(Ee.comparator);function kr(){return hR}const M_=new vt(Ee.comparator);function io(...t){let e=M_;for(const n of t)e=e.insert(n.key,n);return e}function x_(t){let e=M_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function As(){return Co()}function O_(){return Co()}function Co(){return new $i(t=>t.toString(),(t,e)=>t.isEqual(e))}const fR=new vt(Ee.comparator),dR=new Ht(Ee.comparator);function He(...t){let e=dR;for(const n of t)e=e.add(n);return e}const pR=new Ht(Xe);function mR(){return pR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ml(e)?"-0":e}}function V_(t){return{integerValue:""+t}}function gR(t,e){return GA(e)?V_(e):D_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(){this._=void 0}}function _R(t,e,n){return t instanceof Dl?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&cd(i)&&(i=ud(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Zo?$_(t,e):t instanceof ea?B_(t,e):function(s,i){const o=F_(s,i),a=vm(o)+vm(s.Ie);return Oh(o)&&Oh(s.Ie)?V_(a):D_(s.serializer,a)}(t,e)}function vR(t,e,n){return t instanceof Zo?$_(t,e):t instanceof ea?B_(t,e):n}function F_(t,e){return t instanceof Vl?function(r){return Oh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Dl extends Mc{}class Zo extends Mc{constructor(e){super(),this.elements=e}}function $_(t,e){const n=U_(e);for(const r of t.elements)n.some(s=>ur(s,r))||n.push(r);return{arrayValue:{values:n}}}class ea extends Mc{constructor(e){super(),this.elements=e}}function B_(t,e){let n=U_(e);for(const r of t.elements)n=n.filter(s=>!ur(s,r));return{arrayValue:{values:n}}}class Vl extends Mc{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function vm(t){return Ct(t.integerValue||t.doubleValue)}function U_(t){return hd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function yR(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Zo&&s instanceof Zo||r instanceof ea&&s instanceof ea?Ti(r.elements,s.elements,ur):r instanceof Vl&&s instanceof Vl?ur(r.Ie,s.Ie):r instanceof Dl&&s instanceof Dl}(t.transform,e.transform)}class wR{constructor(e,n){this.version=e,this.transformResults=n}}class or{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new or}static exists(e){return new or(void 0,e)}static updateTime(e){return new or(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ol(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class xc{}function j_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new W_(t.key,or.none()):new Ea(t.key,t.data,or.none());{const n=t.data,r=hn.empty();let s=new Ht(jt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new hs(t.key,r,new En(s.toArray()),or.none())}}function ER(t,e,n){t instanceof Ea?function(s,i,o){const a=s.value.clone(),l=wm(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof hs?function(s,i,o){if(!ol(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=wm(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(z_(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function bo(t,e,n,r){return t instanceof Ea?function(i,o,a,l){if(!ol(i.precondition,o))return a;const c=i.value.clone(),u=Em(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof hs?function(i,o,a,l){if(!ol(i.precondition,o))return a;const c=Em(i.fieldTransforms,l,o),u=o.data;return u.setAll(z_(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return ol(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function CR(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=F_(r.transform,s||null);i!=null&&(n===null&&(n=hn.empty()),n.set(r.field,i))}return n||null}function ym(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ti(r,s,(i,o)=>yR(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ea extends xc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class hs extends xc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function z_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function wm(t,e,n){const r=new Map;ct(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,vR(o,a,n[s]))}return r}function Em(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,_R(i,o,e))}return r}class W_ extends xc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bR extends xc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&ER(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=bo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=bo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=O_();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=j_(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Me.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),He())}isEqual(e){return this.batchId===e.batchId&&Ti(this.mutations,e.mutations,(n,r)=>ym(n,r))&&Ti(this.baseMutations,e.baseMutations,(n,r)=>ym(n,r))}}class pd{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ct(e.mutations.length===r.length);let s=function(){return fR}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new pd(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Et,qe;function IR(t){switch(t){default:return Se();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function H_(t){if(t===void 0)return cr("GRPC error has no .code"),K.UNKNOWN;switch(t){case Et.OK:return K.OK;case Et.CANCELLED:return K.CANCELLED;case Et.UNKNOWN:return K.UNKNOWN;case Et.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case Et.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case Et.INTERNAL:return K.INTERNAL;case Et.UNAVAILABLE:return K.UNAVAILABLE;case Et.UNAUTHENTICATED:return K.UNAUTHENTICATED;case Et.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case Et.NOT_FOUND:return K.NOT_FOUND;case Et.ALREADY_EXISTS:return K.ALREADY_EXISTS;case Et.PERMISSION_DENIED:return K.PERMISSION_DENIED;case Et.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case Et.ABORTED:return K.ABORTED;case Et.OUT_OF_RANGE:return K.OUT_OF_RANGE;case Et.UNIMPLEMENTED:return K.UNIMPLEMENTED;case Et.DATA_LOSS:return K.DATA_LOSS;default:return Se()}}(qe=Et||(Et={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=new fi([4294967295,4294967295],0);function Cm(t){const e=AR().encode(t),n=new RA;return n.update(e),new Uint8Array(n.digest())}function bm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new fi([n,r],0),new fi([s,i],0)]}class md{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new oo("Invalid padding: ".concat(n));if(r<0)throw new oo("Invalid hash count: ".concat(r));if(e.length>0&&this.hashCount===0)throw new oo("Invalid hash count: ".concat(r));if(e.length===0&&n!==0)throw new oo("Invalid padding when bitmap length is 0: ".concat(n));this.Te=8*e.length-n,this.Ee=fi.fromNumber(this.Te)}de(e,n,r){let s=e.add(n.multiply(fi.fromNumber(r)));return s.compare(RR)===1&&(s=new fi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=Cm(e),[r,s]=bm(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new md(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=Cm(e),[r,s]=bm(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);this.Re(o)}}Re(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class oo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ca.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Oc(Me.min(),s,new vt(Xe),kr(),He())}}class Ca{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ca(r,n,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,n,r,s){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=s}}class G_{constructor(e,n){this.targetId=e,this.fe=n}}class q_{constructor(e,n,r=en.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Tm{constructor(){this.ge=0,this.pe=Sm(),this.ye=en.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=He(),n=He(),r=He();return this.pe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Se()}}),new Ca(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=Sm()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,ct(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class PR{constructor(e){this.Be=e,this.ke=new Map,this.qe=kr(),this.Qe=km(),this.Ke=new vt(Xe)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:Se()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,s)=>{this.je(s)&&n(s)})}Je(e){const n=e.targetId,r=e.fe.count,s=this.Ye(n);if(s){const i=s.target;if(Vh(i))if(r===0){const o=new Ee(i.path);this.We(n,o,Qt.newNoDocument(o,Me.min()))}else ct(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Fs(r).toUint8Array()}catch(l){if(l instanceof b_)return Ko("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new md(o,s,i)}catch(l){return Ko(l instanceof oo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Be.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Be.nt(),a="projects/".concat(o.projectId,"/databases/").concat(o.database,"/documents/").concat(i.path.canonicalString());e.mightContain(a)||(this.We(n,i,null),s++)}),s}it(e){const n=new Map;this.ke.forEach((i,o)=>{const a=this.Ye(o);if(a){if(i.current&&Vh(a.target)){const l=new Ee(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,Qt.newNoDocument(l,e))}i.De&&(n.set(o,i.ve()),i.Fe())}});let r=He();this.Qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.qe.forEach((i,o)=>o.setReadTime(e));const s=new Oc(e,n,this.Ke,this.qe,r);return this.qe=kr(),this.Qe=km(),this.Ke=new vt(Xe),s}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const s=this.ze(e);this.st(e,n)?s.Me(n,1):s.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Tm,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Ht(Xe),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new Tm),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function km(){return new vt(Ee.comparator)}function Sm(){return new vt(Ee.comparator)}const LR={asc:"ASCENDING",desc:"DESCENDING"},NR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MR={and:"AND",or:"OR"};class xR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function $h(t,e){return t.useProto3Json||Ac(e)?e:{value:e}}function Fl(t,e){return t.useProto3Json?"".concat(new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+e.nanoseconds).slice(-9),"Z"):{seconds:""+e.seconds,nanos:e.nanoseconds}}function K_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function OR(t,e){return Fl(t,e.toTimestamp())}function ar(t){return ct(!!t),Me.fromTimestamp(function(n){const r=is(n);return new Pt(r.seconds,r.nanos)}(t))}function gd(t,e){return Bh(t,e).canonicalString()}function Bh(t,e){const n=function(s){return new pt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Q_(t){const e=pt.fromString(t);return ct(ev(e)),e}function Uh(t,e){return gd(t.databaseId,e.path)}function Nu(t,e){const n=Q_(e);if(n.get(1)!==t.databaseId.projectId)throw new fe(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new fe(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ee(X_(n))}function Y_(t,e){return gd(t.databaseId,e)}function DR(t){const e=Q_(t);return e.length===4?pt.emptyPath():X_(e)}function jh(t){return new pt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function X_(t){return ct(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Im(t,e,n){return{name:Uh(t,e),fields:n.value.mapValue.fields}}function VR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Se()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(ct(u===void 0||typeof u=="string"),en.fromBase64String(u||"")):(ct(u===void 0||u instanceof Buffer||u instanceof Uint8Array),en.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?K.UNKNOWN:H_(c.code);return new fe(u,c.message||"")}(o);n=new q_(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Nu(t,r.document.name),i=ar(r.document.updateTime),o=r.document.createTime?ar(r.document.createTime):Me.min(),a=new hn({mapValue:{fields:r.document.fields}}),l=Qt.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new al(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Nu(t,r.document),i=r.readTime?ar(r.readTime):Me.min(),o=Qt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new al([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Nu(t,r.document),i=r.removedTargetIds||[];n=new al([],i,s,null)}else{if(!("filter"in e))return Se();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new SR(s,i),a=r.targetId;n=new G_(a,o)}}return n}function FR(t,e){let n;if(e instanceof Ea)n={update:Im(t,e.key,e.value)};else if(e instanceof W_)n={delete:Uh(t,e.key)};else if(e instanceof hs)n={update:Im(t,e.key,e.data),updateMask:qR(e.fieldMask)};else{if(!(e instanceof bR))return Se();n={verify:Uh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Dl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Zo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ea)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Vl)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Se()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:OR(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Se()}(t,e.precondition)),n}function $R(t,e){return t&&t.length>0?(ct(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?ar(s.updateTime):ar(i);return o.isEqual(Me.min())&&(o=ar(i)),new wR(o,s.transformResults||[])}(n,e))):[]}function BR(t,e){return{documents:[Y_(t,e.path)]}}function UR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Y_(t,s);const i=function(c){if(c.length!==0)return Z_(hr.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(u=>function(h){return{field:ni(h.field),direction:WR(h.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=$h(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:s}}function jR(t){let e=DR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ct(r===1);const u=n.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];n.where&&(i=function(f){const h=J_(f);return h instanceof hr&&I_(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(h=>function(g){return new Ol(ri(g.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(f){let h;return h=typeof f=="object"?f.value:f,Ac(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(f){const h=!!f.before,m=f.values||[];return new xl(m,h)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const h=!f.before,m=f.values||[];return new xl(m,h)}(n.endAt)),oR(e,s,o,i,a,"F",l,c)}function zR(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function J_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ri(n.unaryFilter.field);return At.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ri(n.unaryFilter.field);return At.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ri(n.unaryFilter.field);return At.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ri(n.unaryFilter.field);return At.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Se()}}(t):t.fieldFilter!==void 0?function(n){return At.create(ri(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Se()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return hr.create(n.compositeFilter.filters.map(r=>J_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Se()}}(n.compositeFilter.op))}(t):Se()}function WR(t){return LR[t]}function HR(t){return NR[t]}function GR(t){return MR[t]}function ni(t){return{fieldPath:t.canonicalString()}}function ri(t){return jt.fromServerFormat(t.fieldPath)}function Z_(t){return t instanceof At?function(n){if(n.op==="=="){if(dm(n.value))return{unaryFilter:{field:ni(n.field),op:"IS_NAN"}};if(fm(n.value))return{unaryFilter:{field:ni(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(dm(n.value))return{unaryFilter:{field:ni(n.field),op:"IS_NOT_NAN"}};if(fm(n.value))return{unaryFilter:{field:ni(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ni(n.field),op:HR(n.op),value:n.value}}}(t):t instanceof hr?function(n){const r=n.getFilters().map(s=>Z_(s));return r.length===1?r[0]:{compositeFilter:{op:GR(n.op),filters:r}}}(t):Se()}function qR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ev(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n,r,s,i=Me.min(),o=Me.min(),a=en.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.ct=e}}function QR(t){const e=jR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Fh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(){this._n=new XR}addToCollectionParentIndex(e,n){return this._n.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(ss.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(ss.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class XR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ht(pt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ht(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Ii(0)}static Ln(){return new Ii(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(){this.changes=new $i(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Qt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&bo(r.mutation,s,En.empty(),Pt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,He()).next(()=>r))}getLocalViewOfDocuments(e,n,r=He()){const s=As();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=io();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=As();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,He()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=kr();const o=Co(),a=function(){return Co()}();return n.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof hs)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),bo(u.mutation,c,u.mutation.getFieldMask(),Pt.now())):o.set(c.key,En.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var f;return a.set(c,new ZR(u,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Co();let s=new vt((o,a)=>o-a),i=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||En.empty();u=a.applyToLocalView(c,u),r.set(l,u);const f=(s.get(a.batchId)||He()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,f=O_();u.forEach(h=>{if(!i.has(h)){const m=j_(n.get(h),r.get(h));m!==null&&f.set(h,m),i=i.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):aR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):q.resolve(As());let a=-1,l=i;return o.next(c=>q.forEach(c,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(u)?q.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,He())).next(u=>({batchId:a,changes:x_(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ee(n)).next(r=>{let s=io();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=io();return this.indexManager.getCollectionParents(e,i).next(a=>q.forEach(a,l=>{const c=function(f,h){return new Rc(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(u=>{u.forEach((f,h)=>{o=o.insert(f,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Qt.newInvalidDocument(u)))});let a=io();return o.forEach((l,c)=>{const u=i.get(l);u!==void 0&&bo(u.mutation,c,En.empty(),Pt.now()),Nc(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return q.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ar(s.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(s){return{name:s.name,query:QR(s.bundledQuery),readTime:ar(s.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(){this.overlays=new vt(Ee.comparator),this.hr=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=As();return q.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const s=As(),i=n.length+1,o=new Ee(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return q.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new vt((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=As(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=As(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return q.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new kR(n,r));let i=this.hr.get(n);i===void 0&&(i=He(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(){this.Pr=new Ht(xt.Ir),this.Tr=new Ht(xt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new xt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new xt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new Ee(new pt([])),r=new xt(n,e),s=new xt(n,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new Ee(new pt([])),r=new xt(n,e),s=new xt(n,e+1);let i=He();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new xt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class xt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return Ee.comparator(e.key,n.key)||Xe(e.pr,n.pr)}static Er(e,n){return Xe(e.pr,n.pr)||Ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ht(xt.Ir)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new TR(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new xt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,n){return q.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.br(r),i=s<0?0:s;return q.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new xt(n,0),s=new xt(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),q.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ht(Xe);return n.forEach(s=>{const i=new xt(s,0),o=new xt(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),q.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Ee.isDocumentKey(i)||(i=i.child(""));const o=new xt(new Ee(i),0);let a=new Ht(Xe);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.pr)),!0)},o),q.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ct(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return q.forEach(n.mutations,s=>{const i=new xt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new xt(n,0),s=this.wr.firstAfterOrEqual(r);return q.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e){this.vr=e,this.docs=function(){return new vt(Ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():Qt.newInvalidDocument(n))}getEntries(e,n){let r=kr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Qt.newInvalidDocument(s))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=kr();const o=n.path,a=new Ee(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||UA(BA(u),r)<=0||(s.has(u.key)||Nc(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return q.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Se()}Fr(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new iP(this)}getSize(e){return q.resolve(this.size)}}class iP extends JR{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e){this.persistence=e,this.Mr=new $i(n=>fd(n),dd),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.Or=0,this.Nr=new _d,this.targetCount=0,this.Lr=Ii.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,s)=>n(s)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),q.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new Ii(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.qn(n),q.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),q.waitFor(i).next(()=>s)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),q.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e,n){this.Br={},this.overlays={},this.kr=new ld(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new oP(this),this.indexManager=new YR,this.remoteDocumentCache=function(s){return new sP(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new KR(n),this.$r=new tP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new nP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new rP(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){ne("MemoryPersistence","Starting transaction:",e);const s=new lP(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,n){return q.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class lP extends zA{constructor(e){super(),this.currentSequenceNumber=e}}class vd{constructor(e){this.persistence=e,this.zr=new _d,this.jr=null}static Hr(e){return new vd(e)}get Jr(){if(this.jr)return this.jr;throw Se()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),q.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Jr,r=>{const s=Ee.fromPath(r);return this.Yr(e,s).next(i=>{i||n.removeEntry(s,Me.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return q.or([()=>q.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(e,n){let r=He(),s=He();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new yd(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return uI()?8:Is.v(Tl())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ji(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Hi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new cP;return this.Ji(e,n,o).next(a=>{if(i.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>i.result)}Yi(e,n,r,s){return r.documentReadCount<this.Wi?(Xi()<=Ye.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",ti(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),q.resolve()):(Xi()<=Ye.DEBUG&&ne("QueryEngine","Query:",ti(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Gi*s?(Xi()<=Ye.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",ti(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ir(n))):q.resolve())}ji(e,n){if(_m(n))return q.resolve(null);let r=ir(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Fh(n,null,"F"),r=ir(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=He(...i);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(e,Fh(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,s){return _m(n)||s.isEqual(Me.min())?q.resolve(null):this.zi.getDocuments(e,r).next(i=>{const o=this.Zi(n,i);return this.Xi(n,o,r,s)?q.resolve(null):(Xi()<=Ye.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ti(n)),this.es(e,o,n,$A(s,-1)).next(a=>a))})}Zi(e,n){let r=new Ht(N_(e));return n.forEach((s,i)=>{Nc(e,i)&&(r=r.add(i))}),r}Xi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ji(e,n,r){return Xi()<=Ye.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",ti(n)),this.zi.getDocumentsMatchingQuery(e,n,ss.min(),r)}es(e,n,r,s){return this.zi.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,n,r,s){this.persistence=e,this.ts=n,this.serializer=s,this.ns=new vt(Xe),this.rs=new $i(i=>fd(i),dd),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eP(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function fP(t,e,n,r){return new hP(t,e,n,r)}async function tv(t,e){const n=De(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=He();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function dP(t,e){const n=De(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const f=c.batch,h=f.keys();let m=q.resolve();return h.forEach(g=>{m=m.next(()=>u.getEntry(l,g)).next(w=>{const y=c.docVersions.get(g);ct(y!==null),w.version.compareTo(y)<0&&(f.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),u.addEntry(w)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=He();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function nv(t){const e=De(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function pP(t,e){const n=De(t),r=e.snapshotVersion;let s=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.os.newChangeBuffer({trackRemovals:!0});s=n.ns;const a=[];e.targetChanges.forEach((u,f)=>{const h=s.get(f);if(!h)return;a.push(n.Qr.removeMatchingKeys(i,u.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(i,u.addedDocuments,f)));let m=h.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(en.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),s=s.insert(f,m),function(w,y,_){return w.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(h,m,u)&&a.push(n.Qr.updateTargetData(i,m))});let l=kr(),c=He();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(mP(i,o,e.documentUpdates).next(u=>{l=u.cs,c=u.ls})),!r.isEqual(Me.min())){const u=n.Qr.getLastRemoteSnapshotVersion(i).next(f=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return q.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.ns=s,i))}function mP(t,e,n){let r=He(),s=He();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=kr();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Me.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ne("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:s}})}function gP(t,e){const n=De(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _P(t,e){const n=De(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,e).next(i=>i?(s=i,q.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new Kr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.ns.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function zh(t,e,n){const r=De(t),s=r.ns.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!wa(o))throw o;ne("LocalStore","Failed to update sequence numbers for target ".concat(e,": ").concat(o))}r.ns=r.ns.remove(e),r.rs.delete(s.target)}function Am(t,e,n){const r=De(t);let s=Me.min(),i=He();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const f=De(l),h=f.rs.get(u);return h!==void 0?q.resolve(f.ns.get(h)):f.Qr.getTargetData(c,u)}(r,o,ir(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?s:Me.min(),n?i:He())).next(a=>(vP(r,cR(e),a),{documents:a,hs:i})))}function vP(t,e,n){let r=t.ss.get(e)||Me.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.ss.set(e,r)}class Rm{constructor(){this.activeTargetIds=mR()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yP{constructor(){this.no=new Rm,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Rm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qa=null;function Mu(){return qa===null?qa=function(){return 268435456+Math.round(2147483648*Math.random())}():qa++,"0x"+qa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt="WebChannelConnection";class bP extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po="projects/".concat(s,"/databases/").concat(i),this.yo=this.databaseId.database==="(default)"?"project_id=".concat(s):"project_id=".concat(s,"&database_id=").concat(i)}get wo(){return!1}So(n,r,s,i,o){const a=Mu(),l=this.bo(n,r.toUriEncodedString());ne("RestConnection","Sending RPC '".concat(n,"' ").concat(a,":"),l,s);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,i,o),this.Co(n,l,c,s).then(u=>(ne("RestConnection","Received RPC '".concat(n,"' ").concat(a,": "),u),u),u=>{throw Ko("RestConnection","RPC '".concat(n,"' ").concat(a," failed with error: "),u,"url: ",l,"request:",s),u})}vo(n,r,s,i,o,a){return this.So(n,r,s,i,o)}Do(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}bo(n,r){const s=EP[n];return"".concat(this.fo,"/v1/").concat(r,":").concat(s)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,s){const i=Mu();return new Promise((o,a)=>{const l=new AA;l.setWithCredentials(!0),l.listenOnce(SA.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Lu.NO_ERROR:const u=l.getResponseJson();ne(Gt,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(u)),o(u);break;case Lu.TIMEOUT:ne(Gt,"RPC '".concat(e,"' ").concat(i," timed out")),a(new fe(K.DEADLINE_EXCEEDED,"Request time out"));break;case Lu.HTTP_ERROR:const f=l.getStatus();if(ne(Gt,"RPC '".concat(e,"' ").concat(i," failed with status:"),f,"response text:",l.getResponseText()),f>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const m=h==null?void 0:h.error;if(m&&m.status&&m.message){const g=function(y){const _=y.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(_)>=0?_:K.UNKNOWN}(m.status);a(new fe(g,m.message))}else a(new fe(K.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new fe(K.UNAVAILABLE,"Connection failed."));break;default:Se()}}finally{ne(Gt,"RPC '".concat(e,"' ").concat(i," completed."))}});const c=JSON.stringify(s);ne(Gt,"RPC '".concat(e,"' ").concat(i," sending request:"),s),l.send(n,"POST",c,r,15)})}Fo(e,n,r){const s=Mu(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=TA(),a=kA(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");ne(Gt,"Creating RPC '".concat(e,"' stream ").concat(s,": ").concat(u),l);const f=o.createWebChannel(u,l);let h=!1,m=!1;const g=new CP({lo:y=>{m?ne(Gt,"Not sending because RPC '".concat(e,"' stream ").concat(s," is closed:"),y):(h||(ne(Gt,"Opening RPC '".concat(e,"' stream ").concat(s," transport.")),f.open(),h=!0),ne(Gt,"RPC '".concat(e,"' stream ").concat(s," sending:"),y),f.send(y))},ho:()=>f.close()}),w=(y,_,E)=>{y.listen(_,b=>{try{E(b)}catch(C){setTimeout(()=>{throw C},0)}})};return w(f,Wa.EventType.OPEN,()=>{m||ne(Gt,"RPC '".concat(e,"' stream ").concat(s," transport opened."))}),w(f,Wa.EventType.CLOSE,()=>{m||(m=!0,ne(Gt,"RPC '".concat(e,"' stream ").concat(s," transport closed")),g.Vo())}),w(f,Wa.EventType.ERROR,y=>{m||(m=!0,Ko(Gt,"RPC '".concat(e,"' stream ").concat(s," transport errored:"),y),g.Vo(new fe(K.UNAVAILABLE,"The operation could not be completed")))}),w(f,Wa.EventType.MESSAGE,y=>{var _;if(!m){const E=y.data[0];ct(!!E);const b=E,C=b.error||((_=b[0])===null||_===void 0?void 0:_.error);if(C){ne(Gt,"RPC '".concat(e,"' stream ").concat(s," received error:"),C);const N=C.status;let k=function(P){const x=Et[P];if(x!==void 0)return H_(x)}(N),z=C.message;k===void 0&&(k=K.INTERNAL,z="Unknown error status: "+N+" with message "+C.message),m=!0,g.Vo(new fe(k,z)),f.close()}else ne(Gt,"RPC '".concat(e,"' stream ").concat(s," received:"),E),g.mo(E)}}),w(a,IA.STAT_EVENT,y=>{y.stat===om.PROXY?ne(Gt,"RPC '".concat(e,"' stream ").concat(s," detected buffering proxy")):y.stat===om.NOPROXY&&ne(Gt,"RPC '".concat(e,"' stream ").concat(s," detected no buffering proxy"))}),setTimeout(()=>{g.Ro()},0),g}}function xu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(t){return new xR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e,n,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=s,this.Oo=i,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),s=Math.max(0,n-r);s>0&&ne("ExponentialBackoff","Backing off for ".concat(s," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Lo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e,n,r,s,i,o,a,l){this.oi=e,this.$o=r,this.Uo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new rv(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(cr(n.toString()),cr("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(n)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Wo===n&&this.o_(r,s)},r=>{e(()=>{const s=new fe(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(s)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(s=>{r(()=>this.__(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return ne("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class TP extends sv{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=VR(this.serializer,e),r=function(i){if(!("targetChange"in i))return Me.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Me.min():o.readTime?ar(o.readTime):Me.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=jh(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Vh(l)?{documents:BR(i,l)}:{query:UR(i,l).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=K_(i,o.resumeToken);const c=$h(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Me.min())>0){a.readTime=Fl(i,o.snapshotVersion.toTimestamp());const c=$h(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=zR(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=jh(this.serializer),n.removeTarget=e,this.t_(n)}}class kP extends sv{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=$R(e.writeResults,e.commitTime),r=ar(e.commitTime);return this.listener.T_(r,n)}return ct(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=jh(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>FR(this.serializer,r))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.A_=!1}R_(){if(this.A_)throw new fe(K.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(e,Bh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new fe(K.UNKNOWN,i.toString())})}vo(e,n,r,s,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,Bh(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new fe(K.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class IP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(cr(n),this.g_=!1):ne("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io(o=>{r.enqueueAndForget(async()=>{Gs(this)&&(ne("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=De(l);c.v_.add(4),await ba(c),c.x_.set("Unknown"),c.v_.delete(4),await Vc(c)}(this))})}),this.x_=new IP(r,s)}}async function Vc(t){if(Gs(t))for(const e of t.F_)await e(!0)}async function ba(t){for(const e of t.F_)await e(!1)}function iv(t,e){const n=De(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),bd(n)?Cd(n):Bi(n).Jo()&&Ed(n,e))}function wd(t,e){const n=De(t),r=Bi(n);n.C_.delete(e),r.Jo()&&ov(n,e),n.C_.size===0&&(r.Jo()?r.Xo():Gs(n)&&n.x_.set("Unknown"))}function Ed(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Bi(t).c_(e)}function ov(t,e){t.O_.Oe(e),Bi(t).l_(e)}function Cd(t){t.O_=new PR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Bi(t).start(),t.x_.p_()}function bd(t){return Gs(t)&&!Bi(t).Ho()&&t.C_.size>0}function Gs(t){return De(t).v_.size===0}function av(t){t.O_=void 0}async function RP(t){t.C_.forEach((e,n)=>{Ed(t,e)})}async function PP(t,e){av(t),bd(t)?(t.x_.S_(e),Cd(t)):t.x_.set("Unknown")}async function LP(t,e,n){if(t.x_.set("Online"),e instanceof q_&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.C_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.C_.delete(a),s.O_.removeTarget(a))}(t,e)}catch(r){ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await $l(t,r)}else if(e instanceof al?t.O_.$e(e):e instanceof G_?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(Me.min()))try{const r=await nv(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.O_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.C_.get(c);u&&i.C_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i.C_.get(l);if(!u)return;i.C_.set(l,u.withResumeToken(en.EMPTY_BYTE_STRING,u.snapshotVersion)),ov(i,l);const f=new Kr(u.target,l,c,u.sequenceNumber);Ed(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ne("RemoteStore","Failed to raise snapshot:",r),await $l(t,r)}}async function $l(t,e,n){if(!wa(e))throw e;t.v_.add(1),await ba(t),t.x_.set("Offline"),n||(n=()=>nv(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ne("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await Vc(t)})}function lv(t,e){return e().catch(n=>$l(t,n,e))}async function Fc(t){const e=De(t),n=os(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;NP(e);)try{const s=await gP(e.localStore,r);if(s===null){e.D_.length===0&&n.Xo();break}r=s.batchId,MP(e,s)}catch(s){await $l(e,s)}cv(e)&&uv(e)}function NP(t){return Gs(t)&&t.D_.length<10}function MP(t,e){t.D_.push(e);const n=os(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function cv(t){return Gs(t)&&!os(t).Ho()&&t.D_.length>0}function uv(t){os(t).start()}async function xP(t){os(t).d_()}async function OP(t){const e=os(t);for(const n of t.D_)e.I_(n.mutations)}async function DP(t,e,n){const r=t.D_.shift(),s=pd.from(r,e,n);await lv(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Fc(t)}async function VP(t,e){e&&os(t).P_&&await async function(r,s){if(function(o){return IR(o)&&o!==K.ABORTED}(s.code)){const i=r.D_.shift();os(r).Zo(),await lv(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Fc(r)}}(t,e),cv(t)&&uv(t)}async function Lm(t,e){const n=De(t);n.asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials");const r=Gs(n);n.v_.add(3),await ba(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await Vc(n)}async function FP(t,e){const n=De(t);e?(n.v_.delete(2),await Vc(n)):e||(n.v_.add(2),await ba(n),n.x_.set("Unknown"))}function Bi(t){return t.N_||(t.N_=function(n,r,s){const i=De(n);return i.R_(),new TP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Po:RP.bind(null,t),To:PP.bind(null,t),u_:LP.bind(null,t)}),t.F_.push(async e=>{e?(t.N_.Zo(),bd(t)?Cd(t):t.x_.set("Unknown")):(await t.N_.stop(),av(t))})),t.N_}function os(t){return t.L_||(t.L_=function(n,r,s){const i=De(n);return i.R_(),new kP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Po:xP.bind(null,t),To:VP.bind(null,t),E_:OP.bind(null,t),T_:DP.bind(null,t)}),t.F_.push(async e=>{e?(t.L_.Zo(),await Fc(t)):(await t.L_.stop(),t.D_.length>0&&(ne("RemoteStore","Stopping write stream with ".concat(t.D_.length," pending writes")),t.D_=[]))})),t.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Td(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kd(t,e){if(cr("AsyncQueue","".concat(e,": ").concat(t)),wa(t))return new fe(K.UNAVAILABLE,"".concat(e,": ").concat(t));throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ee.comparator(n.key,r.key):(n,r)=>Ee.comparator(n.key,r.key),this.keyedMap=io(),this.sortedSet=new vt(this.comparator)}static emptySet(e){return new di(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof di)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new di;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(){this.B_=new vt(Ee.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):Se():this.B_=this.B_.insert(n,e)}k_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ai{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ai(e,n,di.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}}class BP{constructor(){this.queries=new $i(e=>L_(e),Lc),this.onlineState="Unknown",this.W_=new Set}}async function hv(t,e){const n=De(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.K_()&&e.U_()&&(r=2):(i=new $P,r=e.U_()?0:1);try{switch(r){case 0:i.q_=await n.onListen(s,!0);break;case 1:i.q_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=kd(o,"Initialization of query '".concat(ti(e.query),"' failed"));return void e.onError(a)}n.queries.set(s,i),i.Q_.push(e),e.G_(n.onlineState),i.q_&&e.z_(i.q_)&&Sd(n)}async function fv(t,e){const n=De(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Q_.indexOf(e);o>=0&&(i.Q_.splice(o,1),i.Q_.length===0?s=e.U_()?0:1:!i.K_()&&e.U_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function UP(t,e){const n=De(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Q_)a.z_(s)&&(r=!0);o.q_=s}}r&&Sd(n)}function jP(t,e,n){const r=De(t),s=r.queries.get(e);if(s)for(const i of s.Q_)i.onError(n);r.queries.delete(e)}function Sd(t){t.W_.forEach(e=>{e.next()})}var Wh,Mm;(Mm=Wh||(Wh={})).j_="default",Mm.Cache="cache";class dv{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ai(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;const r=n!=="Offline";return(!this.options.ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;const n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=Ai.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==Wh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e){this.key=e}}class mv{constructor(e){this.key=e}}class zP{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=He(),this.mutatedKeys=He(),this.ha=N_(e),this.Pa=new di(this.ha)}get Ia(){return this.ua}Ta(e,n){const r=n?n.Ea:new Nm,s=n?n.Pa:this.Pa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,f)=>{const h=s.get(u),m=Nc(this.query,f)?f:null,g=!!h&&this.mutatedKeys.has(h.key),w=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let y=!1;h&&m?h.data.isEqual(m.data)?g!==w&&(r.track({type:3,doc:m}),y=!0):this.da(h,m)||(r.track({type:2,doc:m}),y=!0,(l&&this.ha(m,l)>0||c&&this.ha(m,c)<0)&&(a=!0)):!h&&m?(r.track({type:0,doc:m}),y=!0):h&&!m&&(r.track({type:1,doc:h}),y=!0,(l||c)&&(a=!0)),y&&(m?(o=o.add(m),i=w?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{Pa:o,Ea:r,Xi:a,mutatedKeys:i}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const o=e.Ea.k_();o.sort((u,f)=>function(m,g){const w=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se()}};return w(m)-w(g)}(u.type,f.type)||this.ha(u.doc,f.doc)),this.Aa(r),s=s!=null&&s;const a=n&&!s?this.Ra():[],l=this.la.size===0&&this.current&&!s?1:0,c=l!==this.ca;return this.ca=l,o.length!==0||c?{snapshot:new Ai(this.query,e.Pa,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new Nm,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=He(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});const n=[];return e.forEach(r=>{this.la.has(r)||n.push(new mv(r))}),this.la.forEach(r=>{e.has(r)||n.push(new pv(r))}),n}fa(e){this.ua=e.hs,this.la=He();const n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return Ai.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}}class WP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class HP{constructor(e){this.key=e,this.pa=!1}}class GP{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new $i(a=>L_(a),Lc),this.Sa=new Map,this.ba=new Set,this.Da=new vt(Ee.comparator),this.Ca=new Map,this.va=new _d,this.Fa={},this.Ma=new Map,this.xa=Ii.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}}async function qP(t,e,n=!0){const r=Ev(t);let s;const i=r.wa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.ga()):s=await gv(r,e,n,!0),s}async function KP(t,e){const n=Ev(t);await gv(n,e,!0,!1)}async function gv(t,e,n,r){const s=await _P(t.localStore,ir(e)),i=s.targetId,o=n?t.sharedClientState.addLocalQueryTarget(i):"not-current";let a;return r&&(a=await QP(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&iv(t.remoteStore,s),a}async function QP(t,e,n,r,s){t.Na=(f,h,m)=>async function(w,y,_,E){let b=y.view.Ta(_);b.Xi&&(b=await Am(w.localStore,y.query,!1).then(({documents:z})=>y.view.Ta(z,b)));const C=E&&E.targetChanges.get(y.targetId),N=E&&E.targetMismatches.get(y.targetId)!=null,k=y.view.applyChanges(b,w.isPrimaryClient,C,N);return Om(w,y.targetId,k.Va),k.snapshot}(t,f,h,m);const i=await Am(t.localStore,e,!0),o=new zP(e,i.hs),a=o.Ta(i.documents),l=Ca.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Om(t,n,c.Va);const u=new WP(e,n,o);return t.wa.set(e,u),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),c.snapshot}async function YP(t,e,n){const r=De(t),s=r.wa.get(e),i=r.Sa.get(s.targetId);if(i.length>1)return r.Sa.set(s.targetId,i.filter(o=>!Lc(o,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await zh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&wd(r.remoteStore,s.targetId),Hh(r,s.targetId)}).catch(ya)):(Hh(r,s.targetId),await zh(r.localStore,s.targetId,!0))}async function XP(t,e){const n=De(t),r=n.wa.get(e),s=n.Sa.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),wd(n.remoteStore,r.targetId))}async function JP(t,e,n){const r=i6(t);try{const s=await function(o,a){const l=De(o),c=Pt.now(),u=a.reduce((m,g)=>m.add(g.key),He());let f,h;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let g=kr(),w=He();return l.os.getEntries(m,u).next(y=>{g=y,g.forEach((_,E)=>{E.isValidDocument()||(w=w.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,g)).next(y=>{f=y;const _=[];for(const E of a){const b=CR(E,f.get(E.key).overlayedDocument);b!=null&&_.push(new hs(E.key,b,T_(b.value.mapValue),or.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,_,a)}).next(y=>{h=y;const _=y.applyToLocalDocumentSet(f,w);return l.documentOverlayCache.saveOverlays(m,y.batchId,_)})}).then(()=>({batchId:h.batchId,changes:x_(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Fa[o.currentUser.toKey()];c||(c=new vt(Xe)),c=c.insert(a,l),o.Fa[o.currentUser.toKey()]=c}(r,s.batchId,n),await Ta(r,s.changes),await Fc(r.remoteStore)}catch(s){const i=kd(s,"Failed to persist write");n.reject(i)}}async function _v(t,e){const n=De(t);try{const r=await pP(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Ca.get(i);o&&(ct(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.pa=!0:s.modifiedDocuments.size>0?ct(o.pa):s.removedDocuments.size>0&&(ct(o.pa),o.pa=!1))}),await Ta(n,r,e)}catch(r){await ya(r)}}function xm(t,e,n){const r=De(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.wa.forEach((i,o)=>{const a=o.view.G_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=De(o);l.onlineState=a;let c=!1;l.queries.forEach((u,f)=>{for(const h of f.Q_)h.G_(a)&&(c=!0)}),c&&Sd(l)}(r.eventManager,e),s.length&&r.ya.u_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ZP(t,e,n){const r=De(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Ca.get(e),i=s&&s.key;if(i){let o=new vt(Ee.comparator);o=o.insert(i,Qt.newNoDocument(i,Me.min()));const a=He().add(i),l=new Oc(Me.min(),new Map,new vt(Xe),o,a);await _v(r,l),r.Da=r.Da.remove(i),r.Ca.delete(e),Id(r)}else await zh(r.localStore,e,!1).then(()=>Hh(r,e,n)).catch(ya)}async function e6(t,e){const n=De(t),r=e.batch.batchId;try{const s=await dP(n.localStore,e);yv(n,r,null),vv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ta(n,s)}catch(s){await ya(s)}}async function t6(t,e,n){const r=De(t);try{const s=await function(o,a){const l=De(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(ct(f!==null),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);yv(r,e,n),vv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ta(r,s)}catch(s){await ya(s)}}function vv(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function yv(t,e,n){const r=De(t);let s=r.Fa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Fa[r.currentUser.toKey()]=s}}function Hh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||wv(t,r)})}function wv(t,e){t.ba.delete(e.path.canonicalString());const n=t.Da.get(e);n!==null&&(wd(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),Id(t))}function Om(t,e,n){for(const r of n)r instanceof pv?(t.va.addReference(r.key,e),n6(t,r)):r instanceof mv?(ne("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||wv(t,r.key)):Se()}function n6(t,e){const n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(ne("SyncEngine","New document in limbo: "+n),t.ba.add(r),Id(t))}function Id(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){const e=t.ba.values().next().value;t.ba.delete(e);const n=new Ee(pt.fromString(e)),r=t.xa.next();t.Ca.set(r,new HP(n)),t.Da=t.Da.insert(n,r),iv(t.remoteStore,new Kr(ir(Pc(n.path)),r,"TargetPurposeLimboResolution",ld._e))}}async function Ta(t,e,n){const r=De(t),s=[],i=[],o=[];r.wa.isEmpty()||(r.wa.forEach((a,l)=>{o.push(r.Na(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const u=yd.Ki(l.targetId,c);i.push(u)}}))}),await Promise.all(o),r.ya.u_(s),await async function(l,c){const u=De(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>q.forEach(c,h=>q.forEach(h.qi,m=>u.persistence.referenceDelegate.addReference(f,h.targetId,m)).next(()=>q.forEach(h.Qi,m=>u.persistence.referenceDelegate.removeReference(f,h.targetId,m)))))}catch(f){if(!wa(f))throw f;ne("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const h=f.targetId;if(!f.fromCache){const m=u.ns.get(h),g=m.snapshotVersion,w=m.withLastLimboFreeSnapshotVersion(g);u.ns=u.ns.insert(h,w)}}}(r.localStore,i))}async function r6(t,e){const n=De(t);if(!n.currentUser.isEqual(e)){ne("SyncEngine","User change. New user:",e.toKey());const r=await tv(n.localStore,e);n.currentUser=e,function(i,o){i.Ma.forEach(a=>{a.forEach(l=>{l.reject(new fe(K.CANCELLED,o))})}),i.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ta(n,r.us)}}function s6(t,e){const n=De(t),r=n.Ca.get(e);if(r&&r.pa)return He().add(r.key);{let s=He();const i=n.Sa.get(e);if(!i)return s;for(const o of i){const a=n.wa.get(o);s=s.unionWith(a.view.Ia)}return s}}function Ev(t){const e=De(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_v.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=s6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZP.bind(null,e),e.ya.u_=UP.bind(null,e.eventManager),e.ya.La=jP.bind(null,e.eventManager),e}function i6(t){const e=De(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=e6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=t6.bind(null,e),e}class Dm{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Dc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return fP(this.persistence,new uP,e.initialUser,this.serializer)}createPersistence(e){return new aP(vd.Hr,this.serializer)}createSharedClientState(e){return new yP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class o6{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>xm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=r6.bind(null,this.syncEngine),await FP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new BP}()}createDatastore(e){const n=Dc(e.databaseInfo.databaseId),r=function(i){return new bP(i)}(e.databaseInfo);return function(i,o,a,l){return new SP(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new AP(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>xm(this.syncEngine,n,0),function(){return Pm.D()?new Pm:new wP}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,u){const f=new GP(s,i,o,a,l,c);return u&&(f.Oa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const s=De(r);ne("RemoteStore","RemoteStore shutting down."),s.v_.add(5),await ba(s),s.M_.shutdown(),s.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):cr("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=un.UNAUTHENTICATED,this.clientId=E_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{ne("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(ne("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new fe(K.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=kd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ou(t,e){t.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await tv(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Vm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await c6(t);ne("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Lm(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Lm(e.remoteStore,s)),t._onlineComponents=e}function l6(t){return t.name==="FirebaseError"?t.code===K.FAILED_PRECONDITION||t.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function c6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ou(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!l6(n))throw n;Ko("Error using user provided cache. Falling back to memory cache: "+n),await Ou(t,new Dm)}}else ne("FirestoreClient","Using default OfflineComponentProvider"),await Ou(t,new Dm);return t._offlineComponents}async function bv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne("FirestoreClient","Using user provided OnlineComponentProvider"),await Vm(t,t._uninitializedComponentsProvider._online)):(ne("FirestoreClient","Using default OnlineComponentProvider"),await Vm(t,new o6))),t._onlineComponents}function u6(t){return bv(t).then(e=>e.syncEngine)}async function Gh(t){const e=await bv(t),n=e.eventManager;return n.onListen=qP.bind(null,e.syncEngine),n.onUnlisten=YP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=KP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=XP.bind(null,e.syncEngine),n}function h6(t,e,n={}){const r=new Er;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new Cv({next:h=>{o.enqueueAndForget(()=>fv(i,f));const m=h.docs.has(a);!m&&h.fromCache?c.reject(new fe(K.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&h.fromCache&&l&&l.source==="server"?c.reject(new fe(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),f=new dv(Pc(a.path),u,{includeMetadataChanges:!0,ta:!0});return hv(i,f)}(await Gh(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(t,e,n){if(!n)throw new fe(K.INVALID_ARGUMENT,"Function ".concat(t,"() cannot be called with an empty ").concat(e,"."))}function f6(t,e,n,r){if(e===!0&&r===!0)throw new fe(K.INVALID_ARGUMENT,"".concat(t," and ").concat(n," cannot be used together."))}function $m(t){if(!Ee.isDocumentKey(t))throw new fe(K.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(t," has ").concat(t.length,"."))}function Bm(t){if(Ee.isDocumentKey(t))throw new fe(K.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(t," has ").concat(t.length,"."))}function Ad(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t="".concat(t.substring(0,20),"...")),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?"a custom ".concat(e," object"):"an object"}}return typeof t=="function"?"a function":Se()}function Jr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new fe(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ad(t);throw new fe(K.INVALID_ARGUMENT,"Expected type '".concat(e.name,"', but it was: ").concat(n))}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new fe(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}f6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Tv((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new fe(K.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(i.timeoutSeconds," (must not be NaN)"));if(i.timeoutSeconds<5)throw new fe(K.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(i.timeoutSeconds," (minimum allowed value is 5)"));if(i.timeoutSeconds>30)throw new fe(K.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(i.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rd{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Um({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new fe(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new fe(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Um(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new LA;switch(r.type){case"firstParty":return new xA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new fe(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Fm.get(n);r&&(ne("ComponentProvider","Removing Datastore"),Fm.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $c(this.firestore,e,this._query)}}class dn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dn(this.firestore,e,this._key)}}class Zr extends $c{constructor(e,n,r){super(e,n,Pc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dn(this.firestore,null,new Ee(e))}withConverter(e){return new Zr(this.firestore,e,this._path)}}function Sv(t,e,...n){if(t=br(t),kv("collection","path",e),t instanceof Rd){const r=pt.fromString(e,...n);return Bm(r),new Zr(t,null,r)}{if(!(t instanceof dn||t instanceof Zr))throw new fe(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pt.fromString(e,...n));return Bm(r),new Zr(t.firestore,null,r)}}function Ui(t,e,...n){if(t=br(t),arguments.length===1&&(e=E_.newId()),kv("doc","path",e),t instanceof Rd){const r=pt.fromString(e,...n);return $m(r),new dn(t,null,new Ee(r))}{if(!(t instanceof dn||t instanceof Zr))throw new fe(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pt.fromString(e,...n));return $m(r),new dn(t.firestore,t instanceof Zr?t.converter:null,new Ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new rv(this,"async_queue_retry"),this.cu=()=>{const n=xu();n&&ne("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=xu();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const n=xu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});const n=new Er;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}async Pu(){if(this.ru.length!==0){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!wa(e))throw e;ne("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}}hu(e){const n=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r);throw cr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);const s=Td.createAndSchedule(this,e,n,r,i=>this.Iu(i));return this.su.push(s),s}lu(){this.ou&&Se()}verifyOperationInProgress(){}async Tu(){let e;do e=this.nu,await e;while(e!==this.nu)}Eu(e){for(const n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){const n=this.su.indexOf(e);this.su.splice(n,1)}}function jm(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Ri extends Rd{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new d6}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Iv(this),this._firestoreClient.terminate()}}function p6(t,e,n){n||(n="(default)");const r=u4(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(kl(i,e))return s;throw new fe(K.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new fe(K.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new fe(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function Pd(t){return t._firestoreClient||Iv(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Iv(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,u){return new KA(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Tv(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new a6(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pi(en.fromBase64String(e))}catch(n){throw new fe(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Pi(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new fe(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new fe(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new fe(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6=/^__.*__$/;class g6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new hs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ea(e,this.data,n,this.fieldTransforms)}}class Av{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new hs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Rv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se()}}class Md{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ru(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new Md(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.mu({path:r,gu:!1});return s.pu(e),s}yu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.mu({path:r,gu:!1});return s.Ru(),s}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return Bl(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(Rv(this.Vu)&&m6.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class _6{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Dc(e)}Cu(e,n,r,s=!1){return new Md({Vu:e,methodName:n,Du:r,path:jt.emptyPath(),gu:!1,bu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pv(t){const e=t._freezeSettings(),n=Dc(t._databaseId);return new _6(t._databaseId,!!e.ignoreUndefinedProperties,n)}function v6(t,e,n,r,s,i={}){const o=t.Cu(i.merge||i.mergeFields?2:0,e,n,s);xd("Data must be an object, but it was:",o,r);const a=Lv(r,o);let l,c;if(i.merge)l=new En(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const f of i.mergeFields){const h=qh(e,f,n);if(!o.contains(h))throw new fe(K.INVALID_ARGUMENT,"Field '".concat(h,"' is specified in your field mask but missing from your input data."));Mv(u,h)||u.push(h)}l=new En(u),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new g6(new hn(a),l,c)}class ka extends Ld{_toFieldTransform(e){if(e.Vu!==2)throw e.Vu===1?e.Su("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Su("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ka}}function y6(t,e,n,r){const s=t.Cu(1,e,n);xd("Data must be an object, but it was:",s,r);const i=[],o=hn.empty();Hs(r,(l,c)=>{const u=Od(e,l,n);c=br(c);const f=s.yu(u);if(c instanceof ka)i.push(u);else{const h=Uc(c,f);h!=null&&(i.push(u),o.set(u,h))}});const a=new En(i);return new Av(o,a,s.fieldTransforms)}function w6(t,e,n,r,s,i){const o=t.Cu(1,e,n),a=[qh(e,r,n)],l=[s];if(i.length%2!=0)throw new fe(K.INVALID_ARGUMENT,"Function ".concat(e,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<i.length;h+=2)a.push(qh(e,i[h])),l.push(i[h+1]);const c=[],u=hn.empty();for(let h=a.length-1;h>=0;--h)if(!Mv(c,a[h])){const m=a[h];let g=l[h];g=br(g);const w=o.yu(m);if(g instanceof ka)c.push(m);else{const y=Uc(g,w);y!=null&&(c.push(m),u.set(m,y))}}const f=new En(c);return new Av(u,f,o.fieldTransforms)}function Uc(t,e){if(Nv(t=br(t)))return xd("Unsupported field value:",e,t),Lv(t,e);if(t instanceof Ld)return function(r,s){if(!Rv(s.Vu))throw s.Su("".concat(r._methodName,"() can only be used with update() and set()"));if(!s.path)throw s.Su("".concat(r._methodName,"() is not currently supported inside arrays"));const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Uc(a,s.wu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=br(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return gR(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Pt.fromDate(r);return{timestampValue:Fl(s.serializer,i)}}if(r instanceof Pt){const i=new Pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fl(s.serializer,i)}}if(r instanceof Nd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pi)return{bytesValue:K_(s.serializer,r._byteString)};if(r instanceof dn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Su("Document reference is for database ".concat(o.projectId,"/").concat(o.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:gd(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Su("Unsupported field value: ".concat(Ad(r)))}(t,e)}function Lv(t,e){const n={};return C_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hs(t,(r,s)=>{const i=Uc(s,e.fu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Nv(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Pt||t instanceof Nd||t instanceof Pi||t instanceof dn||t instanceof Ld)}function xd(t,e,n){if(!Nv(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Ad(n);throw r==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+r)}}function qh(t,e,n){if((e=br(e))instanceof Bc)return e._internalPath;if(typeof e=="string")return Od(t,e);throw Bl("Field path arguments must be of type string or ",t,!1,void 0,n)}const E6=new RegExp("[~\\*/\\[\\]]");function Od(t,e,n){if(e.search(E6)>=0)throw Bl("Invalid field path (".concat(e,"). Paths must not contain '~', '*', '/', '[', or ']'"),t,!1,void 0,n);try{return new Bc(...e.split("."))._internalPath}catch(r){throw Bl("Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),t,!1,void 0,n)}}function Bl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a="Function ".concat(e,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(s)),l+=")"),new fe(K.INVALID_ARGUMENT,a+t+l)}function Mv(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new C6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ov("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class C6 extends xv{data(){return super.data()}}function Ov(t,e){return typeof e=="string"?Od(t,e):e instanceof Bc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b6(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new fe(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class T6{convertValue(e,n="none"){switch($s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Fs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Se()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Hs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new Nd(Ct(e.latitude),Ct(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ud(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Yo(e));default:return null}}convertTimestamp(e){const n=is(e);return new Pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=pt.fromString(e);ct(ev(r));const s=new Xo(r.get(1),r.get(3)),i=new Ee(r.popFirst(5));return s.isEqual(n)||cr("Document ".concat(i," contains a document reference within a different database (").concat(s.projectId,"/").concat(s.database,") which is not supported. It will be treated as a reference in the current database (").concat(n.projectId,"/").concat(n.database,") instead.")),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k6(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dv extends xv{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ll(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ov("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ll extends Dv{data(e={}){return super.data(e)}}class S6{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ao(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ll(this._firestore,this._userDataWriter,r.key,r,new ao(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new fe(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new ll(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ao(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new ll(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ao(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:I6(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function I6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jc(t){t=Jr(t,dn);const e=Jr(t.firestore,Ri);return h6(Pd(e),t._key).then(n=>Bv(e,t,n))}class Vv extends T6{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new dn(this.firestore,null,n)}}function Dd(t,e,n,...r){t=Jr(t,dn);const s=Jr(t.firestore,Ri),i=Pv(s);let o;return o=typeof(e=br(e))=="string"||e instanceof Bc?w6(i,"updateDoc",t._key,e,n,r):y6(i,"updateDoc",t._key,e),$v(s,[o.toMutation(t._key,or.exists(!0))])}function A6(t,e){const n=Jr(t.firestore,Ri),r=Ui(t),s=k6(t.converter,e);return $v(n,[v6(Pv(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,or.exists(!1))]).then(()=>r)}function Fv(t,...e){var n,r,s;t=br(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||jm(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(jm(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let l,c,u;if(t instanceof dn)c=Jr(t.firestore,Ri),u=Pc(t._key.path),l={next:f=>{e[o]&&e[o](Bv(c,t,f))},error:e[o+1],complete:e[o+2]};else{const f=Jr(t,$c);c=Jr(f.firestore,Ri),u=f._query;const h=new Vv(c);l={next:m=>{e[o]&&e[o](new S6(c,h,f,m))},error:e[o+1],complete:e[o+2]},b6(t._query)}return function(h,m,g,w){const y=new Cv(w),_=new dv(m,y,g);return h.asyncQueue.enqueueAndForget(async()=>hv(await Gh(h),_)),()=>{y.Qa(),h.asyncQueue.enqueueAndForget(async()=>fv(await Gh(h),_))}}(Pd(c),u,a,l)}function $v(t,e){return function(r,s){const i=new Er;return r.asyncQueue.enqueueAndForget(async()=>JP(await u6(r),s,i)),i.promise}(Pd(t),e)}function Bv(t,e,n){const r=n.docs.get(e._key),s=new Vv(t);return new Dv(t,s,e._key,r,new ao(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R6(){return new ka("deleteField")}(function(e,n=!0){(function(s){Fi=s})(d4),Sl(new Fo("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Ri(new NA(r.getProvider("auth-internal")),new DA(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new fe(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xo(c.options.projectId,u)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),ui(am,"4.6.0",e),ui(am,"4.6.0","esm2017")})();var P6="firebase",L6="10.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ui(P6,L6,"app");const N6=p4(XS),qs=p6(N6,{ignoreUndefinedProperties:!0});function Kh(t){return sf()?(fg(t),!0):!1}function zc(t){return typeof t=="function"?t():$(t)}const Qh=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const M6=Object.prototype.toString,x6=t=>M6.call(t)==="[object Object]",O6=()=>{};function D6(t,e){function n(...r){return new Promise((s,i)=>{Promise.resolve(t(()=>e.apply(this,r),{fn:e,thisArg:this,args:r})).then(s).catch(i)})}return n}const Uv=t=>t();function V6(t=Uv){const e=X(!0);function n(){e.value=!1}function r(){e.value=!0}const s=(...i)=>{e.value&&t(...i)};return{isActive:hf(e),pause:n,resume:r,eventFilter:s}}function F6(t){return t||Cr()}function $6(t,e,n={}){const{eventFilter:r=Uv,...s}=n;return Mn(t,D6(r,e),s)}function B6(t,e,n={}){const{eventFilter:r,...s}=n,{eventFilter:i,pause:o,resume:a,isActive:l}=V6(r);return{stop:$6(t,e,{...s,eventFilter:i}),pause:o,resume:a,isActive:l}}function U6(t,e=!0,n){F6()?fn(t,n):e?t():Mi(t)}function j6(t,e=1e3,n={}){const{immediate:r=!0,immediateCallback:s=!1}=n;let i=null;const o=X(!1);function a(){i&&(clearInterval(i),i=null)}function l(){o.value=!1,a()}function c(){const u=zc(e);u<=0||(o.value=!0,s&&t(),a(),i=setInterval(t,u))}if(r&&Qh&&c(),_t(e)||typeof e=="function"){const u=Mn(e,()=>{o.value&&Qh&&c()});Kh(u)}return Kh(l),{isActive:o,pause:l,resume:c}}function z6(t){var e;const n=zc(t);return(e=n==null?void 0:n.$el)!=null?e:n}const Ul=Qh?window:void 0;function zm(...t){let e,n,r,s;if(typeof t[0]=="string"||Array.isArray(t[0])?([n,r,s]=t,e=Ul):[e,n,r,s]=t,!e)return O6;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const i=[],o=()=>{i.forEach(u=>u()),i.length=0},a=(u,f,h,m)=>(u.addEventListener(f,h,m),()=>u.removeEventListener(f,h,m)),l=Mn(()=>[z6(e),zc(s)],([u,f])=>{if(o(),!u)return;const h=x6(f)?{...f}:f;i.push(...n.flatMap(m=>r.map(g=>a(u,m,g,h))))},{immediate:!0,flush:"post"}),c=()=>{l(),o()};return Kh(c),c}const Ka=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qa="__vueuse_ssr_handlers__",W6=H6();function H6(){return Qa in Ka||(Ka[Qa]=Ka[Qa]||{}),Ka[Qa]}function G6(t,e){return W6[t]||e}function q6(t){return t==null?"any":t instanceof Set?"set":t instanceof Map?"map":t instanceof Date?"date":typeof t=="boolean"?"boolean":typeof t=="string"?"string":typeof t=="object"?"object":Number.isNaN(t)?"any":"number"}const K6={boolean:{read:t=>t==="true",write:t=>String(t)},object:{read:t=>JSON.parse(t),write:t=>JSON.stringify(t)},number:{read:t=>Number.parseFloat(t),write:t=>String(t)},any:{read:t=>t,write:t=>String(t)},string:{read:t=>t,write:t=>String(t)},map:{read:t=>new Map(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t.entries()))},set:{read:t=>new Set(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t))},date:{read:t=>new Date(t),write:t=>t.toISOString()}},Wm="vueuse-storage";function Q6(t,e,n,r={}){var s;const{flush:i="pre",deep:o=!0,listenToStorageChanges:a=!0,writeDefaults:l=!0,mergeDefaults:c=!1,shallow:u,window:f=Ul,eventFilter:h,onError:m=x=>{console.error(x)},initOnMounted:g}=r,w=(u?oa:X)(typeof e=="function"?e():e);if(!n)try{n=G6("getDefaultStorage",()=>{var x;return(x=Ul)==null?void 0:x.localStorage})()}catch(x){m(x)}if(!n)return w;const y=zc(e),_=q6(y),E=(s=r.serializer)!=null?s:K6[_],{pause:b,resume:C}=B6(w,()=>k(w.value),{flush:i,deep:o,eventFilter:h});f&&a&&U6(()=>{zm(f,"storage",L),zm(f,Wm,P),g&&L()}),g||L();function N(x,D){f&&f.dispatchEvent(new CustomEvent(Wm,{detail:{key:t,oldValue:x,newValue:D,storageArea:n}}))}function k(x){try{const D=n.getItem(t);if(x==null)N(D,null),n.removeItem(t);else{const S=E.write(x);D!==S&&(n.setItem(t,S),N(D,S))}}catch(D){m(D)}}function z(x){const D=x?x.newValue:n.getItem(t);if(D==null)return l&&y!=null&&n.setItem(t,E.write(y)),y;if(!x&&c){const S=E.read(D);return typeof c=="function"?c(S,y):_==="object"&&!Array.isArray(S)?{...y,...S}:S}else return typeof D!="string"?D:E.read(D)}function L(x){if(!(x&&x.storageArea!==n)){if(x&&x.key==null){w.value=y;return}if(!(x&&x.key!==t)){b();try{(x==null?void 0:x.newValue)!==E.write(w.value)&&(w.value=z(x))}catch(D){m(D)}finally{x?Mi(C):C()}}}}function P(x){L(x.detail)}return w}function at(t,e,n={}){const{window:r=Ul}=n;return Q6(t,e,r==null?void 0:r.sessionStorage,n)}const Sa=Nf("RoomStore",{state:()=>({roomId:at("RoomStore$roomId",""),roomOwner:at("RoomStore$roomOwner",!1),gameStarted:at("RoomStore$gameStarted",!1),atLeastAGameStarted:at("RoomStore$atLeastAGameStarted",!1)}),actions:{setRoomId(t){this.roomId||(this.roomId=t)},setRoomOwner(t){this.roomOwner||(this.roomOwner=t)},setGameStartedStatus(t){this.gameStarted=t},setAtLeastAGameStartedStatus(t){this.atLeastAGameStarted=t}},persist:sessionStorage});function Y6(t){return Fv(Sv(qs,"rooms"),e=>{e.forEach(t)})}function X6(t,e){return Fv(Ui(qs,"rooms",t),n=>{e(n)})}async function J6({nickname:t}){const e=t.length===0,n=t.length<4;if(e)return{error:"pages.createRoom.errors.emptyNickname"};if(n)return{error:"pages.createRoom.errors.tooShortNickname"};try{const r=Sv(qs,"rooms");return{result:await A6(r,{origin:JS,hostUser:t})}}catch(r){return console.error(r),{error:"pages.createRoom.errors.failedCreatingRoom",isFatalError:!0}}}async function Z6({nickname:t,roomId:e}){const n=t.length===0,r=t.length<4,s=e.length===0;if(n)return{error:"pages.joinRoom.errors.emptyNickname"};if(r)return{error:"pages.joinRoom.errors.tooShortNickname"};if(s)return{error:"pages.joinRoom.errors.emptyRoomId"};try{const i=Ui(qs,"rooms",e),o=await jc(i);return o.exists()?o.data().guestUser?{error:"pages.joinRoom.errors.alreadyFilledRoom"}:(await Dd(i,{guestUser:t}),Sa().setRoomId(e),{isOk:!0}):{error:"pages.joinRoom.errors.noMatchingRoom"}}catch(i){return console.error(i),{error:"pages.joinRoom.errors.failedJoiningRoom",isFatalError:!0}}}async function Xn({newValues:t,roomId:e}){try{const n=Ui(qs,"rooms",e);return(await jc(n)).exists()?(await Dd(n,t),{isOk:!0}):(console.error("No matching room when trying to update!"),{error:"page.generic.errors.failedUpdatingRoom",isFatalError:!0})}catch(n){return console.error(n),{error:"pages.generic.errors.failedUpdatingRoom",isFatalError:!0}}}async function Hm({roomId:t}){try{const e=Ui(qs,"rooms",t),n=await jc(e);return n.exists()?{isOk:!0,matchingDocument:n.data()}:(console.error("No matching room when trying to update!"),{error:"page.generic.errors.failedUpdatingRoom",isFatalError:!0})}catch(e){return console.error(e),{error:"pages.generic.errors.failedReadingRoom",isFatalError:!0}}}async function e9({roomId:t,fieldsNames:e}){try{const n=Ui(qs,"rooms",t);if(!(await jc(n)).exists())return console.error("No matching room when trying to update!"),{error:"page.generic.errors.failedDeletingFieldsFromRoom",isFatalError:!0};let i={};for(const o of e)i[o]=R6();return await Dd(n,i),{isOk:!0}}catch(n){return console.error(n),{error:"pages.generic.errors.failedDeletingFieldsFromRoom",isFatalError:!0}}}const t9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M15.24%202H11.3458C9.58159%201.99999%208.18418%201.99997%207.09054%202.1476C5.96501%202.29953%205.05402%202.61964%204.33559%203.34096C3.61717%204.06227%203.29833%204.97692%203.14701%206.10697C2.99997%207.205%202.99999%208.60802%203%2010.3793V16.2169C3%2017.725%203.91995%2019.0174%205.22717%2019.5592C5.15989%2018.6498%205.15994%2017.3737%205.16%2016.312L5.16%2011.3976L5.16%2011.3024C5.15993%2010.0207%205.15986%208.91644%205.27828%208.03211C5.40519%207.08438%205.69139%206.17592%206.4253%205.43906C7.15921%204.70219%208.06404%204.41485%209.00798%204.28743C9.88877%204.16854%2010.9887%204.1686%2012.2652%204.16867L12.36%204.16868H15.24L15.3348%204.16867C16.6113%204.1686%2017.7088%204.16854%2018.5896%204.28743C18.0627%202.94779%2016.7616%202%2015.24%202Z'%20fill='%231C274C'/%3e%3cpath%20d='M6.6001%2011.3974C6.6001%208.67119%206.6001%207.3081%207.44363%206.46118C8.28716%205.61426%209.64481%205.61426%2012.3601%205.61426H15.2401C17.9554%205.61426%2019.313%205.61426%2020.1566%206.46118C21.0001%207.3081%2021.0001%208.6712%2021.0001%2011.3974V16.2167C21.0001%2018.9429%2021.0001%2020.306%2020.1566%2021.1529C19.313%2021.9998%2017.9554%2021.9998%2015.2401%2021.9998H12.3601C9.64481%2021.9998%208.28716%2021.9998%207.44363%2021.1529C6.6001%2020.306%206.6001%2018.9429%206.6001%2016.2167V11.3974Z'%20fill='%231C274C'/%3e%3c/svg%3e",fs=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},n9={id:"root"},r9={key:0},s9=["src"],i9={__name:"HomePage",setup(t){const{t:e}=Ir(),n=kf(),r=Sa();function s(){n.push({path:"/create-room",replace:!0})}function i(){n.push({path:"/join-room",replace:!0})}async function o(){await navigator.clipboard.writeText(r.roomId),Mt({text:e("pages.home.roomIdCopied")})}const a=X();function l(f){const h=f.data(),g=r.roomId===f.id,w=![null,void 0].includes(h.guestUser),y=r.roomOwner;g&&w&&y&&n.push({path:"/game",replace:!0})}async function c(){a.value=Y6(l)}function u(){a.value&&a.value()}return fn(c),Po(u),(f,h)=>(M(),H("div",n9,[R("h2",null,pe($(e)("pages.home.title")),1),$(r).roomId&&$(r).roomOwner?(M(),H("div",r9,[po(pe($(e)("pages.home.yourRoom"))+" : #"+pe($(r).roomId)+" ",1),R("button",{onClick:o,class:"copyButton"},[R("img",{src:$(t9),width:"20",height:"20"},null,8,s9)])])):Ot("",!0),$(r).roomId?Ot("",!0):(M(),H("button",{key:1,onClick:s},pe($(e)("pages.home.createRoom")),1)),$(r).roomId?Ot("",!0):(M(),H("button",{key:2,onClick:i},pe($(e)("pages.home.joinRoom")),1))]))}},o9=fs(i9,[["__scopeId","data-v-a6ae8f26"]]),a9={id:"root"},l9=["placeholder"],c9={key:0,id:"button"},u9={__name:"CreateRoomPage",setup(t){const{t:e}=Ir(),n=kf(),r=Sa(),s=X(!0),i=X(),o=X(e("pages.createRoom.placeholders.nickname")),a=async()=>{const c=i.value.value,u=await J6({nickname:c});if(u.hasOwnProperty("error"))alert(e(u.error)),u.isFatalError&&n.push({path:"/",replace:!0});else{s.value=!1;const h=u.result.id;r.setRoomId(h),r.setRoomOwner(!0),n.push({path:"/",replace:!0})}};function l(){n.push({path:"/",replace:!0})}return(c,u)=>(M(),H("div",a9,[R("header",null,[R("h2",null,pe($(e)("pages.createRoom.title")),1)]),R("section",null,[R("table",null,[R("tr",null,[R("td",null,pe($(e)("pages.createRoom.labels.nickname")),1),R("td",null,[R("input",{type:"text",placeholder:o.value,ref_key:"nicknameField",ref:i},null,8,l9)])])]),s.value?(M(),H("div",c9,[R("button",{class:"ok",onClick:a},pe($(e)("pages.createRoom.submit")),1),R("button",{class:"cancel",onClick:l},pe($(e)("pages.createRoom.cancel")),1)])):Ot("",!0)])]))}},h9=fs(u9,[["__scopeId","data-v-a9e5fa03"]]),f9="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9.5%202C8.67157%202%208%202.67157%208%203.5V4.5C8%205.32843%208.67157%206%209.5%206H14.5C15.3284%206%2016%205.32843%2016%204.5V3.5C16%202.67157%2015.3284%202%2014.5%202H9.5Z'%20fill='%231C274C'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M6.5%204.03662C5.24209%204.10719%204.44798%204.30764%203.87868%204.87694C3%205.75562%203%207.16983%203%209.99826V15.9983C3%2018.8267%203%2020.2409%203.87868%2021.1196C4.75736%2021.9983%206.17157%2021.9983%209%2021.9983H15C17.8284%2021.9983%2019.2426%2021.9983%2020.1213%2021.1196C21%2020.2409%2021%2018.8267%2021%2015.9983V9.99826C21%207.16983%2021%205.75562%2020.1213%204.87694C19.552%204.30764%2018.7579%204.10719%2017.5%204.03662V4.5C17.5%206.15685%2016.1569%207.5%2014.5%207.5H9.5C7.84315%207.5%206.5%206.15685%206.5%204.5V4.03662ZM7%2013.75C6.58579%2013.75%206.25%2014.0858%206.25%2014.5C6.25%2014.9142%206.58579%2015.25%207%2015.25H15C15.4142%2015.25%2015.75%2014.9142%2015.75%2014.5C15.75%2014.0858%2015.4142%2013.75%2015%2013.75H7ZM7%2017.25C6.58579%2017.25%206.25%2017.5858%206.25%2018C6.25%2018.4142%206.58579%2018.75%207%2018.75H12.5C12.9142%2018.75%2013.25%2018.4142%2013.25%2018C13.25%2017.5858%2012.9142%2017.25%2012.5%2017.25H7Z'%20fill='%231C274C'/%3e%3c/svg%3e",d9={id:"root"},p9=["placeholder"],m9=["placeholder"],g9=["src"],_9={key:0,id:"button"},v9={__name:"JoinRoomPage",setup(t){const{t:e}=Ir(),n=kf(),r=Sa(),s=X(!0),i=X(),o=X(),a=X(e("pages.joinRoom.placeholders.nickname")),l=X(e("pages.joinRoom.placeholders.roomId"));async function c(){const h=i.value.value,m=o.value.value,g=await Z6({nickname:h,roomId:m});g.hasOwnProperty("error")?(alert(e(g.error)),g.isFatalError&&n.push({path:"/",replace:!0})):(s.value=!1,r.setRoomId(m),r.setRoomOwner(!1),n.push({path:"/game",replace:!0}))}async function u(){const h=await navigator.clipboard.readText();try{o.value.value=h}catch(m){console.error(m)}}function f(){n.push({path:"/",replace:!0})}return(h,m)=>(M(),H("div",d9,[R("header",null,[R("h2",null,pe($(e)("pages.joinRoom.title")),1)]),R("section",null,[R("table",null,[R("tr",null,[R("td",null,pe($(e)("pages.joinRoom.labels.nickname")),1),R("td",null,[R("input",{type:"text",placeholder:a.value,ref_key:"nicknameField",ref:i},null,8,p9)])]),R("tr",null,[R("td",null,pe($(e)("pages.joinRoom.labels.roomId")),1),R("td",null,[R("input",{type:"text",placeholder:l.value,ref_key:"roomIdField",ref:o},null,8,m9),R("button",{onClick:u},[R("img",{src:$(f9),width:"20",height:"20"},null,8,g9)])])])]),s.value?(M(),H("div",_9,[R("button",{class:"ok",onClick:c},pe($(e)("pages.joinRoom.submit")),1),R("button",{class:"cancel",onClick:f},pe($(e)("pages.joinRoom.cancel")),1)])):Ot("",!0)])]))}},y9=fs(v9,[["__scopeId","data-v-ad4314f9"]]);function ys(t){return new Promise(e=>setTimeout(e,t))}/**
 * @license
 * Copyright (c) 2023, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const Kt="w",An="b",Nt="p",Yh="n",cl="b",lo="r",Gr="q",St="k",pi="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",ln=-1,w9={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},Ae={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},$e={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},Du={b:[16,32,17,15],w:[-16,-32,-17,-15]},Gm={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},E9=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],C9=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],b9={p:1,n:2,b:4,r:8,q:16,k:32},T9="pnbrqkPNBRQK",qm=[Yh,cl,lo,Gr],k9=7,S9=6,I9=1,A9=0,Ya={[St]:Ae.KSIDE_CASTLE,[Gr]:Ae.QSIDE_CASTLE},xr={w:[{square:$e.a1,flag:Ae.QSIDE_CASTLE},{square:$e.h1,flag:Ae.KSIDE_CASTLE}],b:[{square:$e.a8,flag:Ae.QSIDE_CASTLE},{square:$e.h8,flag:Ae.KSIDE_CASTLE}]},R9={b:I9,w:S9},P9=["1-0","0-1","1/2-1/2","*"];function Os(t){return t>>4}function ta(t){return t&15}function jv(t){return"0123456789".indexOf(t)!==-1}function yn(t){const e=ta(t),n=Os(t);return"abcdefgh".substring(e,e+1)+"87654321".substring(n,n+1)}function Ji(t){return t===Kt?An:Kt}function L9(t){const e=t.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const n=parseInt(e[5],10);if(isNaN(n)||n<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const r=parseInt(e[4],10);if(isNaN(r)||r<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const s=e[0].split("/");if(s.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let o=0;o<s.length;o++){let a=0,l=!1;for(let c=0;c<s[o].length;c++)if(jv(s[o][c])){if(l)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};a+=parseInt(s[o][c],10),l=!0}else{if(!/^[prnbqkPRNBQK]$/.test(s[o][c]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};a+=1,l=!1}if(a!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const i=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:o,regex:a}of i){if(!a.test(e[0]))return{ok:!1,error:"Invalid FEN: missing ".concat(o," king")};if((e[0].match(a)||[]).length>1)return{ok:!1,error:"Invalid FEN: too many ".concat(o," kings")}}return Array.from(s[0]+s[7]).some(o=>o.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function N9(t,e){const n=t.from,r=t.to,s=t.piece;let i=0,o=0,a=0;for(let l=0,c=e.length;l<c;l++){const u=e[l].from,f=e[l].to,h=e[l].piece;s===h&&n!==u&&r===f&&(i++,Os(n)===Os(u)&&o++,ta(n)===ta(u)&&a++)}return i>0?o>0&&a>0?yn(n):a>0?yn(n).charAt(1):yn(n).charAt(0):""}function Or(t,e,n,r,s,i=void 0,o=Ae.NORMAL){const a=Os(r);if(s===Nt&&(a===k9||a===A9))for(let l=0;l<qm.length;l++){const c=qm[l];t.push({color:e,from:n,to:r,piece:s,captured:i,promotion:c,flags:o|Ae.PROMOTION})}else t.push({color:e,from:n,to:r,piece:s,captured:i,flags:o})}function Km(t){let e=t.charAt(0);return e>="a"&&e<="h"?t.match(/[a-h]\d.*[a-h]\d/)?void 0:Nt:(e=e.toLowerCase(),e==="o"?St:e)}function Vu(t){return t.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function Fu(t){return t.split(" ").slice(0,4).join(" ")}class Xh{constructor(e=pi){kn(this,"_board",new Array(128));kn(this,"_turn",Kt);kn(this,"_header",{});kn(this,"_kings",{w:ln,b:ln});kn(this,"_epSquare",-1);kn(this,"_halfMoves",0);kn(this,"_moveNumber",0);kn(this,"_history",[]);kn(this,"_comments",{});kn(this,"_castling",{w:0,b:0});kn(this,"_positionCount",{});this.load(e)}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:ln,b:ln},this._turn=Kt,this._castling={w:0,b:0},this._epSquare=ln,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{},this._positionCount={},delete this._header.SetUp,delete this._header.FEN}removeHeader(e){e in this._header&&delete this._header[e]}load(e,{skipValidation:n=!1,preserveHeaders:r=!1}={}){let s=e.split(/\s+/);if(s.length>=2&&s.length<6){const a=["-","-","0","1"];e=s.concat(a.slice(-(6-s.length))).join(" ")}if(s=e.split(/\s+/),!n){const{ok:a,error:l}=L9(e);if(!a)throw new Error(l)}const i=s[0];let o=0;this.clear({preserveHeaders:r});for(let a=0;a<i.length;a++){const l=i.charAt(a);if(l==="/")o+=8;else if(jv(l))o+=parseInt(l,10);else{const c=l<"a"?Kt:An;this._put({type:l.toLowerCase(),color:c},yn(o)),o++}}this._turn=s[1],s[2].indexOf("K")>-1&&(this._castling.w|=Ae.KSIDE_CASTLE),s[2].indexOf("Q")>-1&&(this._castling.w|=Ae.QSIDE_CASTLE),s[2].indexOf("k")>-1&&(this._castling.b|=Ae.KSIDE_CASTLE),s[2].indexOf("q")>-1&&(this._castling.b|=Ae.QSIDE_CASTLE),this._epSquare=s[3]==="-"?ln:$e[s[3]],this._halfMoves=parseInt(s[4],10),this._moveNumber=parseInt(s[5],10),this._updateSetup(e),this._incPositionCount(e)}fen(){var i,o;let e=0,n="";for(let a=$e.a8;a<=$e.h1;a++){if(this._board[a]){e>0&&(n+=e,e=0);const{color:l,type:c}=this._board[a];n+=l===Kt?c.toUpperCase():c.toLowerCase()}else e++;a+1&136&&(e>0&&(n+=e),a!==$e.h1&&(n+="/"),e=0,a+=8)}let r="";this._castling[Kt]&Ae.KSIDE_CASTLE&&(r+="K"),this._castling[Kt]&Ae.QSIDE_CASTLE&&(r+="Q"),this._castling[An]&Ae.KSIDE_CASTLE&&(r+="k"),this._castling[An]&Ae.QSIDE_CASTLE&&(r+="q"),r=r||"-";let s="-";if(this._epSquare!==ln){const a=this._epSquare+(this._turn===Kt?16:-16),l=[a+1,a-1];for(const c of l){if(c&136)continue;const u=this._turn;if(((i=this._board[c])==null?void 0:i.color)===u&&((o=this._board[c])==null?void 0:o.type)===Nt){this._makeMove({color:u,from:c,to:this._epSquare,piece:Nt,captured:Nt,flags:Ae.EP_CAPTURE});const f=!this._isKingAttacked(u);if(this._undoMove(),f){s=yn(this._epSquare);break}}}}return[n,this._turn,r,s,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(e){this._history.length>0||(e!==pi?(this._header.SetUp="1",this._header.FEN=e):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(pi)}get(e){return this._board[$e[e]]||!1}put({type:e,color:n},r){return this._put({type:e,color:n},r)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_put({type:e,color:n},r){if(T9.indexOf(e.toLowerCase())===-1||!(r in $e))return!1;const s=$e[r];if(e==St&&!(this._kings[n]==ln||this._kings[n]==s))return!1;const i=this._board[s];return i&&i.type===St&&(this._kings[i.color]=ln),this._board[s]={type:e,color:n},e===St&&(this._kings[n]=s),!0}remove(e){const n=this.get(e);return delete this._board[$e[e]],n&&n.type===St&&(this._kings[n.color]=ln),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),n}_updateCastlingRights(){var r,s,i,o,a,l,c,u,f,h,m,g;const e=((r=this._board[$e.e1])==null?void 0:r.type)===St&&((s=this._board[$e.e1])==null?void 0:s.color)===Kt,n=((i=this._board[$e.e8])==null?void 0:i.type)===St&&((o=this._board[$e.e8])==null?void 0:o.color)===An;(!e||((a=this._board[$e.a1])==null?void 0:a.type)!==lo||((l=this._board[$e.a1])==null?void 0:l.color)!==Kt)&&(this._castling.w&=~Ae.QSIDE_CASTLE),(!e||((c=this._board[$e.h1])==null?void 0:c.type)!==lo||((u=this._board[$e.h1])==null?void 0:u.color)!==Kt)&&(this._castling.w&=~Ae.KSIDE_CASTLE),(!n||((f=this._board[$e.a8])==null?void 0:f.type)!==lo||((h=this._board[$e.a8])==null?void 0:h.color)!==An)&&(this._castling.b&=~Ae.QSIDE_CASTLE),(!n||((m=this._board[$e.h8])==null?void 0:m.type)!==lo||((g=this._board[$e.h8])==null?void 0:g.color)!==An)&&(this._castling.b&=~Ae.KSIDE_CASTLE)}_updateEnPassantSquare(){var i,o;if(this._epSquare===ln)return;const e=this._epSquare+(this._turn===Kt?-16:16),n=this._epSquare+(this._turn===Kt?16:-16),r=[n+1,n-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||((i=this._board[n])==null?void 0:i.color)!==Ji(this._turn)||((o=this._board[n])==null?void 0:o.type)!==Nt){this._epSquare=ln;return}const s=a=>{var l,c;return!(a&136)&&((l=this._board[a])==null?void 0:l.color)===this._turn&&((c=this._board[a])==null?void 0:c.type)===Nt};r.some(s)||(this._epSquare=ln)}_attacked(e,n){for(let r=$e.a8;r<=$e.h1;r++){if(r&136){r+=7;continue}if(this._board[r]===void 0||this._board[r].color!==e)continue;const s=this._board[r],i=r-n;if(i===0)continue;const o=i+119;if(E9[o]&b9[s.type]){if(s.type===Nt){if(i>0){if(s.color===Kt)return!0}else if(s.color===An)return!0;continue}if(s.type==="n"||s.type==="k")return!0;const a=C9[o];let l=r+a,c=!1;for(;l!==n;){if(this._board[l]!=null){c=!0;break}l+=a}if(!c)return!0}}return!1}_isKingAttacked(e){const n=this._kings[e];return n===-1?!1:this._attacked(Ji(e),n)}isAttacked(e,n){return this._attacked(n,$e[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},n=[];let r=0,s=0;for(let i=$e.a8;i<=$e.h1;i++){if(s=(s+1)%2,i&136){i+=7;continue}const o=this._board[i];o&&(e[o.type]=o.type in e?e[o.type]+1:1,o.type===cl&&n.push(s),r++)}if(r===2)return!0;if(r===3&&(e[cl]===1||e[Yh]===1))return!0;if(r===e[cl]+2){let i=0;const o=n.length;for(let a=0;a<o;a++)i+=n[a];if(i===0||i===o)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this.fen())>=3}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:e=!1,square:n=void 0,piece:r=void 0}={}){const s=this._moves({square:n,piece:r});return e?s.map(i=>this._makePretty(i)):s.map(i=>this._moveToSan(i,s))}_moves({legal:e=!0,piece:n=void 0,square:r=void 0}={}){var m;const s=r?r.toLowerCase():void 0,i=n==null?void 0:n.toLowerCase(),o=[],a=this._turn,l=Ji(a);let c=$e.a8,u=$e.h1,f=!1;if(s)if(s in $e)c=u=$e[s],f=!0;else return[];for(let g=c;g<=u;g++){if(g&136){g+=7;continue}if(!this._board[g]||this._board[g].color===l)continue;const{type:w}=this._board[g];let y;if(w===Nt){if(i&&i!==w)continue;y=g+Du[a][0],this._board[y]||(Or(o,a,g,y,Nt),y=g+Du[a][1],R9[a]===Os(g)&&!this._board[y]&&Or(o,a,g,y,Nt,void 0,Ae.BIG_PAWN));for(let _=2;_<4;_++)y=g+Du[a][_],!(y&136)&&(((m=this._board[y])==null?void 0:m.color)===l?Or(o,a,g,y,Nt,this._board[y].type,Ae.CAPTURE):y===this._epSquare&&Or(o,a,g,y,Nt,Nt,Ae.EP_CAPTURE))}else{if(i&&i!==w)continue;for(let _=0,E=Gm[w].length;_<E;_++){const b=Gm[w][_];for(y=g;y+=b,!(y&136);){if(!this._board[y])Or(o,a,g,y,w);else{if(this._board[y].color===a)break;Or(o,a,g,y,w,this._board[y].type,Ae.CAPTURE);break}if(w===Yh||w===St)break}}}}if((i===void 0||i===St)&&(!f||u===this._kings[a])){if(this._castling[a]&Ae.KSIDE_CASTLE){const g=this._kings[a],w=g+2;!this._board[g+1]&&!this._board[w]&&!this._attacked(l,this._kings[a])&&!this._attacked(l,g+1)&&!this._attacked(l,w)&&Or(o,a,this._kings[a],w,St,void 0,Ae.KSIDE_CASTLE)}if(this._castling[a]&Ae.QSIDE_CASTLE){const g=this._kings[a],w=g-2;!this._board[g-1]&&!this._board[g-2]&&!this._board[g-3]&&!this._attacked(l,this._kings[a])&&!this._attacked(l,g-1)&&!this._attacked(l,w)&&Or(o,a,this._kings[a],w,St,void 0,Ae.QSIDE_CASTLE)}}if(!e||this._kings[a]===-1)return o;const h=[];for(let g=0,w=o.length;g<w;g++)this._makeMove(o[g]),this._isKingAttacked(a)||h.push(o[g]),this._undoMove();return h}move(e,{strict:n=!1}={}){let r=null;if(typeof e=="string")r=this._moveFromSan(e,n);else if(typeof e=="object"){const i=this._moves();for(let o=0,a=i.length;o<a;o++)if(e.from===yn(i[o].from)&&e.to===yn(i[o].to)&&(!("promotion"in i[o])||e.promotion===i[o].promotion)){r=i[o];break}}if(!r)throw typeof e=="string"?new Error("Invalid move: ".concat(e)):new Error("Invalid move: ".concat(JSON.stringify(e)));const s=this._makePretty(r);return this._makeMove(r),this._incPositionCount(s.after),s}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(e){const n=this._turn,r=Ji(n);if(this._push(e),this._board[e.to]=this._board[e.from],delete this._board[e.from],e.flags&Ae.EP_CAPTURE&&(this._turn===An?delete this._board[e.to-16]:delete this._board[e.to+16]),e.promotion&&(this._board[e.to]={type:e.promotion,color:n}),this._board[e.to].type===St){if(this._kings[n]=e.to,e.flags&Ae.KSIDE_CASTLE){const s=e.to-1,i=e.to+1;this._board[s]=this._board[i],delete this._board[i]}else if(e.flags&Ae.QSIDE_CASTLE){const s=e.to+1,i=e.to-2;this._board[s]=this._board[i],delete this._board[i]}this._castling[n]=0}if(this._castling[n]){for(let s=0,i=xr[n].length;s<i;s++)if(e.from===xr[n][s].square&&this._castling[n]&xr[n][s].flag){this._castling[n]^=xr[n][s].flag;break}}if(this._castling[r]){for(let s=0,i=xr[r].length;s<i;s++)if(e.to===xr[r][s].square&&this._castling[r]&xr[r][s].flag){this._castling[r]^=xr[r][s].flag;break}}e.flags&Ae.BIG_PAWN?n===An?this._epSquare=e.to-16:this._epSquare=e.to+16:this._epSquare=ln,e.piece===Nt?this._halfMoves=0:e.flags&(Ae.CAPTURE|Ae.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,n===An&&this._moveNumber++,this._turn=r}undo(){const e=this._undoMove();if(e){const n=this._makePretty(e);return this._decPositionCount(n.after),n}return null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;const n=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber;const r=this._turn,s=Ji(r);if(this._board[n.from]=this._board[n.to],this._board[n.from].type=n.piece,delete this._board[n.to],n.captured)if(n.flags&Ae.EP_CAPTURE){let i;r===An?i=n.to-16:i=n.to+16,this._board[i]={type:Nt,color:s}}else this._board[n.to]={type:n.captured,color:s};if(n.flags&(Ae.KSIDE_CASTLE|Ae.QSIDE_CASTLE)){let i,o;n.flags&Ae.KSIDE_CASTLE?(i=n.to+1,o=n.to-1):(i=n.to-2,o=n.to+1),this._board[i]=this._board[o],delete this._board[o]}return n}pgn({newline:e="\n",maxWidth:n=0}={}){const r=[];let s=!1;for(const h in this._header)r.push("["+h+' "'+this._header[h]+'"]'+e),s=!0;s&&this._history.length&&r.push(e);const i=h=>{const m=this._comments[this.fen()];if(typeof m<"u"){const g=h.length>0?" ":"";h="".concat(h).concat(g,"{").concat(m,"}")}return h},o=[];for(;this._history.length>0;)o.push(this._undoMove());const a=[];let l="";for(o.length===0&&a.push(i(""));o.length>0;){l=i(l);const h=o.pop();if(!h)break;if(!this._history.length&&h.color==="b"){const m="".concat(this._moveNumber,". ...");l=l?"".concat(l," ").concat(m):m}else h.color==="w"&&(l.length&&a.push(l),l=this._moveNumber+".");l=l+" "+this._moveToSan(h,this._moves({legal:!0})),this._makeMove(h)}if(l.length&&a.push(i(l)),typeof this._header.Result<"u"&&a.push(this._header.Result),n===0)return r.join("")+a.join(" ");const c=function(){return r.length>0&&r[r.length-1]===" "?(r.pop(),!0):!1},u=function(h,m){for(const g of m.split(" "))if(g){if(h+g.length>n){for(;c();)h--;r.push(e),h=0}r.push(g),h+=g.length,r.push(" "),h++}return c()&&h--,h};let f=0;for(let h=0;h<a.length;h++){if(f+a[h].length>n&&a[h].includes("{")){f=u(f,a[h]);continue}f+a[h].length>n&&h!==0?(r[r.length-1]===" "&&r.pop(),r.push(e),f=0):h!==0&&(r.push(" "),f++),r.push(a[h]),f+=a[h].length}return r.join("")}header(...e){for(let n=0;n<e.length;n+=2)typeof e[n]=="string"&&typeof e[n+1]=="string"&&(this._header[e[n]]=e[n+1]);return this._header}loadPgn(e,{strict:n=!1,newlineChar:r="\r?\n"}={}){function s(b){return b.replace(/\\/g,"\\")}function i(b){const C={},N=b.split(new RegExp(s(r)));let k="",z="";for(let L=0;L<N.length;L++){const P=/^\s*\[\s*([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;k=N[L].replace(P,"$1"),z=N[L].replace(P,"$2"),k.trim().length>0&&(C[k]=z)}return C}e=e.trim();const a=new RegExp("^(\\[((?:"+s(r)+")|.)*\\])((?:\\s*"+s(r)+"){2}|(?:\\s*"+s(r)+")*$)").exec(e),l=a&&a.length>=2?a[1]:"";this.reset();const c=i(l);let u="";for(const b in c)b.toLowerCase()==="fen"&&(u=c[b]),this.header(b,c[b]);if(!n)u&&this.load(u,{preserveHeaders:!0});else if(c.SetUp==="1"){if(!("FEN"in c))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(c.FEN,{preserveHeaders:!0})}function f(b){return Array.from(b).map(function(C){return C.charCodeAt(0)<128?C.charCodeAt(0).toString(16):encodeURIComponent(C).replace(/%/g,"").toLowerCase()}).join("")}function h(b){return b.length==0?"":decodeURIComponent("%"+(b.match(/.{1,2}/g)||[]).join("%"))}const m=function(b){return b=b.replace(new RegExp(s(r),"g")," "),"{".concat(f(b.slice(1,b.length-1)),"}")},g=function(b){if(b.startsWith("{")&&b.endsWith("}"))return h(b.slice(1,b.length-1))};let w=e.replace(l,"").replace(new RegExp("({[^}]*})+?|;([^".concat(s(r),"]*)"),"g"),function(b,C,N){return C!==void 0?m(C):" "+m("{".concat(N.slice(1),"}"))}).replace(new RegExp(s(r),"g")," ");const y=/(\([^()]+\))+?/g;for(;y.test(w);)w=w.replace(y,"");w=w.replace(/\d+\.(\.\.)?/g,""),w=w.replace(/\.\.\./g,""),w=w.replace(/\$\d+/g,"");let _=w.trim().split(new RegExp(/\s+/));_=_.filter(b=>b!=="");let E="";for(let b=0;b<_.length;b++){const C=g(_[b]);if(C!==void 0){this._comments[this.fen()]=C;continue}const N=this._moveFromSan(_[b],n);if(N==null)if(P9.indexOf(_[b])>-1)E=_[b];else throw new Error("Invalid move in PGN: ".concat(_[b]));else E="",this._makeMove(N),this._incPositionCount(this.fen())}E&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",E)}_moveToSan(e,n){let r="";if(e.flags&Ae.KSIDE_CASTLE)r="O-O";else if(e.flags&Ae.QSIDE_CASTLE)r="O-O-O";else{if(e.piece!==Nt){const s=N9(e,n);r+=e.piece.toUpperCase()+s}e.flags&(Ae.CAPTURE|Ae.EP_CAPTURE)&&(e.piece===Nt&&(r+=yn(e.from)[0]),r+="x"),r+=yn(e.to),e.promotion&&(r+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?r+="#":r+="+"),this._undoMove(),r}_moveFromSan(e,n=!1){const r=Vu(e);let s=Km(r),i=this._moves({legal:!0,piece:s});for(let h=0,m=i.length;h<m;h++)if(r===Vu(this._moveToSan(i[h],i)))return i[h];if(n)return null;let o,a,l,c,u,f=!1;if(a=r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),a?(o=a[1],l=a[2],c=a[3],u=a[4],l.length==1&&(f=!0)):(a=r.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),a&&(o=a[1],l=a[2],c=a[3],u=a[4],l.length==1&&(f=!0))),s=Km(r),i=this._moves({legal:!0,piece:o||s}),!c)return null;for(let h=0,m=i.length;h<m;h++)if(l){if((!o||o.toLowerCase()==i[h].piece)&&$e[l]==i[h].from&&$e[c]==i[h].to&&(!u||u.toLowerCase()==i[h].promotion))return i[h];if(f){const g=yn(i[h].from);if((!o||o.toLowerCase()==i[h].piece)&&$e[c]==i[h].to&&(l==g[0]||l==g[1])&&(!u||u.toLowerCase()==i[h].promotion))return i[h]}}else if(r===Vu(this._moveToSan(i[h],i)).replace("x",""))return i[h];return null}ascii(){let e="   +------------------------+\n";for(let n=$e.a8;n<=$e.h1;n++){if(ta(n)===0&&(e+=" "+"87654321"[Os(n)]+" |"),this._board[n]){const r=this._board[n].type,i=this._board[n].color===Kt?r.toUpperCase():r.toLowerCase();e+=" "+i+" "}else e+=" . ";n+1&136&&(e+="|\n",n+=8)}return e+="   +------------------------+\n",e+="     a  b  c  d  e  f  g  h",e}perft(e){const n=this._moves({legal:!1});let r=0;const s=this._turn;for(let i=0,o=n.length;i<o;i++)this._makeMove(n[i]),this._isKingAttacked(s)||(e-1>0?r+=this.perft(e-1):r++),this._undoMove();return r}_makePretty(e){const{color:n,piece:r,from:s,to:i,flags:o,captured:a,promotion:l}=e;let c="";for(const m in Ae)Ae[m]&o&&(c+=w9[m]);const u=yn(s),f=yn(i),h={color:n,piece:r,from:u,to:f,san:this._moveToSan(e,this._moves({legal:!0})),flags:c,lan:u+f,before:this.fen(),after:""};return this._makeMove(e),h.after=this.fen(),this._undoMove(),a&&(h.captured=a),l&&(h.promotion=l,h.lan+=l),h}turn(){return this._turn}board(){const e=[];let n=[];for(let r=$e.a8;r<=$e.h1;r++)this._board[r]==null?n.push(null):n.push({square:yn(r),type:this._board[r].type,color:this._board[r].color}),r+1&136&&(e.push(n),n=[],r+=8);return e}squareColor(e){if(e in $e){const n=$e[e];return(Os(n)+ta(n))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const n=[],r=[];for(;this._history.length>0;)n.push(this._undoMove());for(;;){const s=n.pop();if(!s)break;e?r.push(this._makePretty(s)):r.push(this._moveToSan(s,this._moves())),this._makeMove(s)}return r}_getPositionCount(e){const n=Fu(e);return this._positionCount[n]||0}_incPositionCount(e){const n=Fu(e);this._positionCount[n]===void 0&&(this._positionCount[n]=0),this._positionCount[n]+=1}_decPositionCount(e){const n=Fu(e);this._positionCount[n]===1?delete this._positionCount[n]:this._positionCount[n]-=1}_pruneComments(){const e=[],n={},r=s=>{s in this._comments&&(n[s]=this._comments[s])};for(;this._history.length>0;)e.push(this._undoMove());for(r(this.fen());;){const s=e.pop();if(!s)break;this._makeMove(s),r(this.fen())}this._comments=n}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const n=this._comments[e];return delete this._comments[e],{fen:e,comment:n}})}setCastlingRights(e,n){for(const s of[St,Gr])n[s]!==void 0&&(n[s]?this._castling[e]|=Ya[s]:this._castling[e]&=~Ya[s]);this._updateCastlingRights();const r=this.getCastlingRights(e);return(n[St]===void 0||n[St]===r[St])&&(n[Gr]===void 0||n[Gr]===r[Gr])}getCastlingRights(e){return{[St]:(this._castling[e]&Ya[St])!==0,[Gr]:(this._castling[e]&Ya[Gr])!==0}}moveNumber(){return this._moveNumber}}function bn(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Bs(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const zv=6048e5,M9=864e5;let x9={};function Wc(){return x9}function na(t,e){var a,l,c,u,f,h,m,g;const n=Wc(),r=(g=(m=(u=(c=e==null?void 0:e.weekStartsOn)!=null?c:(l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)!=null?u:n.weekStartsOn)!=null?m:(h=(f=n.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)!=null?g:0,s=bn(t),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function jl(t){return na(t,{weekStartsOn:1})}function Wv(t){const e=bn(t),n=e.getFullYear(),r=Bs(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=jl(r),i=Bs(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=jl(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function Qm(t){const e=bn(t);return e.setHours(0,0,0,0),e}function Ym(t){const e=bn(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function O9(t,e){const n=Qm(t),r=Qm(e),s=+n-Ym(n),i=+r-Ym(r);return Math.round((s-i)/M9)}function D9(t){const e=Wv(t),n=Bs(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),jl(n)}function V9(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function F9(t){if(!V9(t)&&typeof t!="number")return!1;const e=bn(t);return!isNaN(Number(e))}function $9(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function B9(t,e){return+bn(t)-+bn(e)}function U9(t,e,n){const r=B9(t,e)/1e3;return $9(n==null?void 0:n.roundingMethod)(r)}function j9(t){const e=bn(t),n=Bs(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const z9={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},W9=(t,e,n)=>{let r;const s=z9[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function $u(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const H9={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},G9={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},q9={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},K9={date:$u({formats:H9,defaultWidth:"full"}),time:$u({formats:G9,defaultWidth:"full"}),dateTime:$u({formats:q9,defaultWidth:"full"})},Q9={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Y9=(t,e,n,r)=>Q9[t];function Zi(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[a]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const X9={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},J9={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Z9={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},eL={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},tL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},nL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},rL=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},sL={ordinalNumber:rL,era:Zi({values:X9,defaultWidth:"wide"}),quarter:Zi({values:J9,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Zi({values:Z9,defaultWidth:"wide"}),day:Zi({values:eL,defaultWidth:"wide"}),dayPeriod:Zi({values:tL,defaultWidth:"wide",formattingValues:nL,defaultFormattingWidth:"wide"})};function eo(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?oL(a,f=>f.test(o)):iL(a,f=>f.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function iL(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function oL(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function aL(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const lL=/^(\d+)(th|st|nd|rd)?/i,cL=/\d+/i,uL={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},hL={any:[/^b/i,/^(a|c)/i]},fL={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},dL={any:[/1/i,/2/i,/3/i,/4/i]},pL={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},mL={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},gL={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},_L={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},vL={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},yL={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},wL={ordinalNumber:aL({matchPattern:lL,parsePattern:cL,valueCallback:t=>parseInt(t,10)}),era:eo({matchPatterns:uL,defaultMatchWidth:"wide",parsePatterns:hL,defaultParseWidth:"any"}),quarter:eo({matchPatterns:fL,defaultMatchWidth:"wide",parsePatterns:dL,defaultParseWidth:"any",valueCallback:t=>t+1}),month:eo({matchPatterns:pL,defaultMatchWidth:"wide",parsePatterns:mL,defaultParseWidth:"any"}),day:eo({matchPatterns:gL,defaultMatchWidth:"wide",parsePatterns:_L,defaultParseWidth:"any"}),dayPeriod:eo({matchPatterns:vL,defaultMatchWidth:"any",parsePatterns:yL,defaultParseWidth:"any"})},EL={code:"en-US",formatDistance:W9,formatLong:K9,formatRelative:Y9,localize:sL,match:wL,options:{weekStartsOn:0,firstWeekContainsDate:1}};function CL(t){const e=bn(t);return O9(e,j9(e))+1}function bL(t){const e=bn(t),n=+jl(e)-+D9(e);return Math.round(n/zv)+1}function Hv(t,e){var u,f,h,m,g,w,y,_;const n=bn(t),r=n.getFullYear(),s=Wc(),i=(_=(y=(m=(h=e==null?void 0:e.firstWeekContainsDate)!=null?h:(f=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)!=null?m:s.firstWeekContainsDate)!=null?y:(w=(g=s.locale)==null?void 0:g.options)==null?void 0:w.firstWeekContainsDate)!=null?_:1,o=Bs(t,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const a=na(o,e),l=Bs(t,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const c=na(l,e);return n.getTime()>=a.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function TL(t,e){var a,l,c,u,f,h,m,g;const n=Wc(),r=(g=(m=(u=(c=e==null?void 0:e.firstWeekContainsDate)!=null?c:(l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)!=null?u:n.firstWeekContainsDate)!=null?m:(h=(f=n.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)!=null?g:1,s=Hv(t,e),i=Bs(t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),na(i,e)}function kL(t,e){const n=bn(t),r=+na(n,e)-+TL(n,e);return Math.round(r/zv)+1}function tt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Dr={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return tt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):tt(n+1,2)},d(t,e){return tt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return tt(t.getHours()%12||12,e.length)},H(t,e){return tt(t.getHours(),e.length)},m(t,e){return tt(t.getMinutes(),e.length)},s(t,e){return tt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return tt(s,e.length)}},Js={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Xm={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Dr.y(t,e)},Y:function(t,e,n,r){const s=Hv(t,r),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return tt(o,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):tt(i,e.length)},R:function(t,e){const n=Wv(t);return tt(n,e.length)},u:function(t,e){const n=t.getFullYear();return tt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return tt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return tt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Dr.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return tt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=kL(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):tt(s,e.length)},I:function(t,e,n){const r=bL(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):tt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Dr.d(t,e)},D:function(t,e,n){const r=CL(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):tt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return tt(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return tt(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return tt(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Js.noon:r===0?s=Js.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Js.evening:r>=12?s=Js.afternoon:r>=4?s=Js.morning:s=Js.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Dr.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Dr.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):tt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):tt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Dr.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Dr.s(t,e)},S:function(t,e){return Dr.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Zm(r);case"XXXX":case"XX":return ws(r);case"XXXXX":case"XXX":default:return ws(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return Zm(r);case"xxxx":case"xx":return ws(r);case"xxxxx":case"xxx":default:return ws(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Jm(r,":");case"OOOO":default:return"GMT"+ws(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Jm(r,":");case"zzzz":default:return"GMT"+ws(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return tt(r,e.length)},T:function(t,e,n){const r=t.getTime();return tt(r,e.length)}};function Jm(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+tt(i,2)}function Zm(t,e){return t%60===0?(t>0?"-":"+")+tt(Math.abs(t)/60,2):ws(t,e)}function ws(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=tt(Math.trunc(r/60),2),i=tt(r%60,2);return n+s+e+i}const eg=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Gv=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},SL=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return eg(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",eg(r,e)).replace("{{time}}",Gv(s,e))},IL={p:Gv,P:SL},AL=/^D+$/,RL=/^Y+$/,PL=["D","DD","YY","YYYY"];function LL(t){return AL.test(t)}function NL(t){return RL.test(t)}function ML(t,e,n){const r=xL(t,e,n);if(console.warn(r),PL.includes(t))throw new RangeError(r)}function xL(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return"Use `".concat(t.toLowerCase(),"` instead of `").concat(t,"` (in `").concat(e,"`) for formatting ").concat(r," to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}const OL=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,DL=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,VL=/^'([^]*?)'?$/,FL=/''/g,$L=/[a-zA-Z]/;function BL(t,e,n){var u,f,h,m,g,w,y,_,E,b,C,N,k,z,L,P,x,D;const r=Wc(),s=(f=(u=n==null?void 0:n.locale)!=null?u:r.locale)!=null?f:EL,i=(b=(E=(w=(g=n==null?void 0:n.firstWeekContainsDate)!=null?g:(m=(h=n==null?void 0:n.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)!=null?w:r.firstWeekContainsDate)!=null?E:(_=(y=r.locale)==null?void 0:y.options)==null?void 0:_.firstWeekContainsDate)!=null?b:1,o=(D=(x=(z=(k=n==null?void 0:n.weekStartsOn)!=null?k:(N=(C=n==null?void 0:n.locale)==null?void 0:C.options)==null?void 0:N.weekStartsOn)!=null?z:r.weekStartsOn)!=null?x:(P=(L=r.locale)==null?void 0:L.options)==null?void 0:P.weekStartsOn)!=null?D:0,a=bn(t);if(!F9(a))throw new RangeError("Invalid time value");let l=e.match(DL).map(S=>{const G=S[0];if(G==="p"||G==="P"){const ue=IL[G];return ue(S,s.formatLong)}return S}).join("").match(OL).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const G=S[0];if(G==="'")return{isToken:!1,value:UL(S)};if(Xm[G])return{isToken:!0,value:S};if(G.match($L))throw new RangeError("Format string contains an unescaped latin alphabet character `"+G+"`");return{isToken:!1,value:S}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return l.map(S=>{if(!S.isToken)return S.value;const G=S.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&NL(G)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&LL(G))&&ML(G,e,String(t));const ue=Xm[G[0]];return ue(a,G,s.localize,c)}).join("")}function UL(t){const e=t.match(VL);return e?e[1].replace(FL,"'"):t}const jL="X",tg="host",ng="guest",zL="X",Bu="host",Uu="guest",rg="4k3/8/8/8/8/8/8/4K3 w - - 0 1",WL="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23000000'%20width='800px'%20height='800px'%20viewBox='0%200%2056%2056'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M%209.2500%2047.0898%20L%2014.5703%2047.0898%20C%2016.6328%2047.0898%2017.6875%2046.0117%2017.6875%2043.9492%20L%2017.6875%2028.8789%20C%2017.6172%2028.5976%2017.5703%2028.2930%2017.5703%2027.9883%20C%2017.5703%2027.6602%2017.6172%2027.3555%2017.6875%2027.0742%20L%2017.6875%2012.0273%20C%2017.6875%209.8945%2016.6328%208.9102%2014.5703%208.9102%20L%209.2500%208.9102%20C%207.1875%208.9102%206.1094%209.9883%206.1094%2012.0273%20L%206.1094%2043.9492%20C%206.1094%2046.0117%207.1875%2047.0898%209.2500%2047.0898%20Z%20M%2046.5157%2046.3867%20C%2048.3671%2046.3867%2049.8906%2045.0039%2049.8906%2042.3789%20L%2049.8906%2013.5976%20C%2049.8906%2010.9727%2048.3671%209.5664%2046.5157%209.5664%20C%2045.5781%209.5664%2044.7813%209.8711%2043.8203%2010.4336%20L%2019.9375%2024.4961%20C%2018.6719%2025.2461%2017.9688%2026.1133%2017.6875%2027.0742%20L%2017.6875%2028.8789%20C%2017.9688%2029.8633%2018.6719%2030.7071%2019.9375%2031.4805%20L%2043.8203%2045.5195%20C%2044.7813%2046.0820%2045.5781%2046.3867%2046.5157%2046.3867%20Z'/%3e%3c/svg%3e",HL="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23000000'%20width='800px'%20height='800px'%20viewBox='0%200%2056%2056'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M%2025.1218%2044.5009%20C%2026.7084%2044.5009%2028.0509%2043.2804%2028.0509%2041.0225%20L%2028.0509%2029.3058%20C%2028.2747%2030.1601%2028.9053%2030.8924%2030.0037%2031.5434%20L%2050.7318%2043.7483%20C%2051.5454%2044.2365%2052.2369%2044.5009%2053.0709%2044.5009%20C%2054.6577%2044.5009%2056%2043.2804%2056%2041.0225%20L%2056%2016.0228%20C%2056%2013.7649%2054.6577%2012.5444%2053.0709%2012.5444%20C%2052.2369%2012.5444%2051.5658%2012.8088%2050.7318%2013.2970%20L%2030.0037%2025.5020%20C%2028.8849%2026.1529%2028.2747%2026.8852%2028.0509%2027.7395%20L%2028.0509%2016.0228%20C%2028.0509%2013.7649%2026.7084%2012.5444%2025.1218%2012.5444%20C%2024.2877%2012.5444%2023.6165%2012.8088%2022.7825%2013.2970%20L%202.0545%2025.5020%20C%20.6102%2026.3563%200%2027.3530%200%2028.5125%20C%200%2029.6923%20.6102%2030.6890%202.0545%2031.5434%20L%2022.7825%2043.7483%20C%2023.5962%2044.2365%2024.2877%2044.5009%2025.1218%2044.5009%20Z'/%3e%3c/svg%3e",GL="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23000000'%20width='800px'%20height='800px'%20viewBox='0%200%2056%2056'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M%202.9281%2044.4947%20C%203.7618%2044.4947%204.4531%2044.2304%205.2665%2043.7424%20L%2025.9869%2031.5420%20C%2027.1053%2030.8913%2027.7153%2030.1592%2027.9389%2029.3052%20L%2027.9389%2041.0176%20C%2027.9389%2043.2747%2029.2810%2044.4947%2030.8671%2044.4947%20C%2031.7007%2044.4947%2032.3921%2044.2304%2033.2055%2043.7424%20L%2053.9461%2031.5420%20C%2055.3695%2030.6879%2056%2029.6916%2056%2028.5122%20C%2056%2027.3531%2055.3695%2026.3568%2053.9461%2025.5028%20L%2033.2055%2013.3023%20C%2032.3921%2012.8143%2031.7007%2012.5500%2030.8671%2012.5500%20C%2029.2810%2012.5500%2027.9389%2013.7700%2027.9389%2016.0271%20L%2027.9389%2027.7395%20C%2027.7153%2026.8855%2027.1053%2026.1535%2025.9869%2025.5028%20L%205.2665%2013.3023%20C%204.4328%2012.8143%203.7618%2012.5500%202.9281%2012.5500%20C%201.3420%2012.5500%200%2013.7700%200%2016.0271%20L%200%2041.0176%20C%200%2043.2747%201.3420%2044.4947%202.9281%2044.4947%20Z'/%3e%3c/svg%3e",qL="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23000000'%20width='800px'%20height='800px'%20viewBox='0%200%2056%2056'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M%209.4844%2046.3867%20C%2010.4453%2046.3867%2011.2422%2046.0820%2012.1797%2045.5195%20L%2036.0625%2031.4805%20C%2037.3516%2030.7071%2038.0547%2029.8633%2038.3125%2028.8789%20L%2038.3125%2043.9492%20C%2038.3125%2046.0117%2039.3906%2047.0898%2041.4532%2047.0898%20L%2046.7735%2047.0898%20C%2048.8360%2047.0898%2049.8906%2046.0117%2049.8906%2043.9492%20L%2049.8906%2012.0273%20C%2049.8906%209.8945%2048.8360%208.9102%2046.7735%208.9102%20L%2041.4532%208.9102%20C%2039.3906%208.9102%2038.3125%209.9883%2038.3125%2012.0273%20L%2038.3125%2027.0742%20C%2038.0547%2026.1133%2037.3516%2025.2461%2036.0625%2024.4961%20L%2012.1797%2010.4336%20C%2011.2188%209.8711%2010.4453%209.5664%209.4844%209.5664%20C%207.6563%209.5664%206.1094%2010.9727%206.1094%2013.5976%20L%206.1094%2042.3789%20C%206.1094%2045.0039%207.6563%2046.3867%209.4844%2046.3867%20Z'/%3e%3c/svg%3e",KL={class:"root"},QL={key:0,class:"toolbar"},YL=["src"],XL=["src"],JL=["src"],ZL=["src"],e8={key:0},t8=["onClick"],n8={__name:"ChessHistory",props:["size"],emits:["requestNodeSelected","requestStartPosition"],setup(t,{expose:e,emit:n}){ua(x=>({a700bbee:s.value}));const r=t,s=Y(()=>(r.size||100)+"px"),i=n,o=X([]),a=X(),l=X(-1),c=X(!1);function u(x,D){const S="".concat(x,".").concat(D?"":"..");c.value=!1,l.value=-1,o.value=[{number:S}]}function f(x){const{number:D,fan:S,san:G,fen:ue,fromFileIndex:ye,fromRankIndex:de,toFileIndex:be,toRankIndex:we,whiteTurn:Be}=x;if(o.value.length===1&&!o.value[0].fan){const ge={...o.value[0],fan:S,san:G,fen:ue,fromFileIndex:ye,fromRankIndex:de,toFileIndex:be,toRankIndex:we,whiteTurn:Be};o.value[0]=ge}else{const Ke="".concat(D,".").concat(Be===!0?"":"..");o.value=[...o.value,{number:Ke,fan:S,san:G,fen:ue,fromFileIndex:ye,fromRankIndex:de,toFileIndex:be,toRankIndex:we,whiteTurn:Be}]}}function h(){document.querySelector(".main-content *:last-child").scrollIntoView()}async function m(x){if(x<0&&(x=-1),l.value=x,x>0){await ys(50);const D=document.querySelector(".main-content > .selected");D&&D.scrollIntoView()}else document.querySelector(".main-content").scrollTo(0,0)}function g(){c.value&&i("requestStartPosition")}function w(){c.value&&g()}function y(){if(c.value){for(l.value-=1;l.value>=0&&!o.value[l.value].fen;l.value--);if(l.value>=0){const x=o.value[l.value],{fen:D,fromFileIndex:S,fromRankIndex:G,toFileIndex:ue,toRankIndex:ye}=x;i("requestNodeSelected",{nodeIndex:l.value,fen:D,fromFileIndex:S,fromRankIndex:G,toFileIndex:ue,toRankIndex:ye})}else w()}}function _(){if(!c.value)return;for(l.value+=1;l.value<o.value.length;l.value++);const x=o.value[l.value];if(!(x!=null&&x.fen)){y();return}const{fen:D,fromFileIndex:S,fromRankIndex:G,toFileIndex:ue,toRankIndex:ye}=o.value[l.value];i("requestNodeSelected",{nodeIndex:l.value,fen:D,fromFileIndex:S,fromRankIndex:G,toFileIndex:ue,toRankIndex:ye})}function E(){c.value=!0,_()}function b(x){const{fen:D,fromFileIndex:S,fromRankIndex:G,toFileIndex:ue,toRankIndex:ye}=o.value[x];c.value&&D&&i("requestNodeSelected",{nodeIndex:x,fen:D,fromFileIndex:S,fromRankIndex:G,toFileIndex:ue,toRankIndex:ye})}function C(x){return x===l.value}function N(){if(!c.value)return;for(l.value+=1;l.value<o.value.length&&!o.value[l.value].fen;l.value++);const x=o.value[l.value];x!=null&&x.fen||y();const{fen:D,fromFileIndex:S,fromRankIndex:G,toFileIndex:ue,toRankIndex:ye}=x;i("requestNodeSelected",{nodeIndex:l.value,fen:D,fromFileIndex:S,fromRankIndex:G,toFileIndex:ue,toRankIndex:ye})}function k(){return o.value.map(x=>x)}function z(x){o.value=x}function L(){return o.value[o.value.findLastIndex(x=>!0)]}function P(){return o.value.length}return e({reset:u,addNodeOrCompleteFirst:f,getNodes:k,setNodes:z,setSelectedNode:m,scrollToLastElement:h,activateNavigationMode:E,getLastNode:L,getNodesCount:P}),(x,D)=>(M(),H("div",KL,[c.value?(M(),H("div",QL,[R("button",{onClick:w,class:"toolbar__button"},[R("img",{src:$(WL),width:"20",height:"20"},null,8,YL)]),R("button",{onClick:y,class:"toolbar__button"},[R("img",{src:$(HL),width:"20",height:"20"},null,8,XL)]),R("button",{onClick:N,class:"toolbar__button"},[R("img",{src:$(GL),width:"20",height:"20"},null,8,JL)]),R("button",{onClick:_,class:"toolbar__button"},[R("img",{src:$(qL),width:"20",height:"20"},null,8,ZL)])])):Ot("",!0),R("div",{class:"main-content",ref_key:"mainContent",ref:a},[(M(!0),H(We,null,tr(o.value,(S,G)=>{var ue,ye;return M(),H(We,{key:G},[S.whiteTurn||G===0?(M(),H("span",e8,pe("".concat((ue=S.number)!=null?ue:""," ")),1)):Ot("",!0),R("button",{onClick:de=>b(G),class:ut({selected:C(G)})},pe("".concat((ye=S.fan)!=null?ye:""," ")),11,t8)],64)}),128))],512)]))}},r8=fs(n8,[["__scopeId","data-v-aa512618"]]),s8="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20512%20512'%20xml:space='preserve'%3e%3cg%3e%3cg%3e%3cg%3e%3cpath%20style='fill:%23FFCE8B;'%20d='M52.251,26.527v458.946c0,5.687-4.615,10.302-10.302,10.302H29.35%20c-5.697,0-10.302-4.615-10.302-10.302V26.527c0-5.687,4.605-10.302,10.302-10.302h12.599%20C47.636,16.225,52.251,20.841,52.251,26.527z'/%3e%3crect%20x='19.048'%20y='64.644'%20style='fill:%23FFB54E;'%20width='33.203'%20height='133.336'/%3e%3c/g%3e%3cg%3e%3cpath%20style='fill:%23FFCE8B;'%20d='M492.952,26.527v458.946c0,5.687-4.605,10.302-10.302,10.302h-12.599%20c-5.687,0-10.302-4.615-10.302-10.302V26.527c0-5.687,4.615-10.302,10.302-10.302h12.599%20C488.347,16.225,492.952,20.841,492.952,26.527z'/%3e%3cg%3e%3cg%3e%3crect%20x='459.749'%20y='64.644'%20style='fill:%23FFB54E;'%20width='33.203'%20height='133.336'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3cg%3e%3cg%3e%3crect%20x='150.846'%20y='79.064'%20style='fill:%23FFB54E;'%20width='210.308'%20height='104.491'/%3e%3crect%20x='335.163'%20y='79.064'%20style='fill:%23FF9A1B;'%20width='25.991'%20height='104.491'/%3e%3crect%20x='150.846'%20y='79.064'%20style='fill:%23FF9A1B;'%20width='25.991'%20height='104.491'/%3e%3cg%3e%3cg%3e%3cpath%20style='fill:%23FFF5F5;'%20d='M58.427,183.556H10.302C4.612,183.556,0,178.943,0,173.254v-48.125h58.427V183.556z'/%3e%3crect%20x='46.065'%20y='79.064'%20style='fill:%23FFF5F5;'%20width='64.608'%20height='58.427'/%3e%3cpath%20style='fill:%23756F6F;'%20d='M52.246,131.31H0V89.366c0-5.69,4.612-10.302,10.302-10.302h41.944V131.31z'/%3e%3crect%20x='98.31'%20y='125.129'%20style='fill:%23FFF5F5;'%20width='58.427'%20height='58.427'/%3e%3crect%20x='104.491'%20y='79.064'%20style='fill:%23756F6F;'%20width='52.246'%20height='52.246'/%3e%3crect%20x='52.246'%20y='131.31'%20style='fill:%23756F6F;'%20width='52.246'%20height='52.246'/%3e%3c/g%3e%3cg%3e%3crect%20x='401.327'%20y='79.064'%20style='fill:%23FFF5F5;'%20width='64.608'%20height='58.427'/%3e%3crect%20x='355.263'%20y='125.129'%20style='fill:%23FFF5F5;'%20width='58.427'%20height='58.427'/%3e%3crect%20x='355.263'%20y='79.064'%20style='fill:%23756F6F;'%20width='52.246'%20height='52.246'/%3e%3cpath%20style='fill:%23FFF5F5;'%20d='M501.698,183.556h-48.125v-58.427H512v48.125C512,178.943,507.388,183.556,501.698,183.556z'/%3e%3cpath%20style='fill:%23756F6F;'%20d='M512,131.31h-52.246V79.064h41.944c5.69,0,10.302,4.612,10.302,10.302V131.31z'/%3e%3crect%20x='407.509'%20y='131.31'%20style='fill:%23756F6F;'%20width='52.246'%20height='52.246'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3cpath%20style='fill:%23FFF5F5;'%20d='M267.261,144.371h-2.679v-33.849c0-2.678-1.387-5.164-3.665-6.572%20c-2.277-1.407-5.121-1.536-7.517-0.338l-12.115,6.057c-3.817,1.908-5.364,6.549-3.455,10.366%20c1.908,3.816,6.548,5.365,10.366,3.455l0.933-0.466v21.348h-2.679c-4.267,0-7.726,3.459-7.726,7.726%20c0,4.267,3.459,7.726,7.726,7.726h20.811c4.268,0,7.726-3.459,7.726-7.726C274.987,147.83,271.528,144.371,267.261,144.371z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",i8="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20version='1.1'%20id='Uploaded%20to%20svgrepo.com'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='800px'%20height='800px'%20viewBox='0%200%2032%2032'%20xml:space='preserve'%3e%3cstyle%20type='text/css'%3e%20.avocado_zeventien{fill:%23CC4121;}%20.avocado_een{fill:%23231F20;}%20.avocado_zes{fill:%23FFFAEE;}%20.st0{fill:%23A3AEB5;}%20.st1{fill:%23AF9480;}%20.st2{fill:%23DBD2C1;}%20.st3{fill:%23788287;}%20.st4{fill:%23EAD13F;}%20.st5{fill:%23C3CC6A;}%20.st6{fill:%23D1712A;}%20.st7{fill:%23E0A838;}%20.st8{fill:%23716558;}%20.st9{fill:%236F9B45;}%20.st10{fill:%230E608E;}%20.st11{fill:%23E598A3;}%20.st12{fill:%23FFFAEE;}%20.st13{fill:%233D3935;}%20.st14{fill:%23248EBC;}%20.st15{fill:%23BF63C1;}%20%3c/style%3e%3cg%3e%3cpolygon%20class='avocado_zeventien'%20points='10.408,29.5%202.5,21.592%202.5,10.408%2010.408,2.5%2021.592,2.5%2029.5,10.408%2029.5,21.592%2021.592,29.5%20'/%3e%3cpath%20class='avocado_zes'%20d='M21.414,12.707L18.121,16l3.293,3.293l-2.121,2.121L16,18.121l-3.293,3.293l-2.121-2.121%20L13.879,16l-3.293-3.293l2.121-2.121L16,13.879l3.293-3.293L21.414,12.707z%20M21.592,2.5H10.408L2.5,10.408v11.184l7.908,7.908%20h11.184l7.908-7.908V10.408L21.592,2.5z%20M28,20.97L20.97,28H11.03L4,20.97v-9.941L11.03,4h9.941L28,11.029V20.97z'/%3e%3cpath%20class='avocado_een'%20d='M19.293,9.879L16,13.172l-3.293-3.293l-2.828,2.828L13.172,16l-3.293,3.293l2.828,2.828%20L16,18.828l3.293,3.293l2.828-2.828L18.828,16l3.293-3.293L19.293,9.879z%20M17.414,16l3.293,3.293l-1.414,1.414L16,17.414%20l-3.293,3.293l-1.414-1.414L14.586,16l-3.293-3.293l1.414-1.414L16,14.586l3.293-3.293l1.414,1.414L17.414,16z%20M21.799,2H10.201%20L2,10.201v11.598L10.201,30h11.598L30,21.799V10.201L21.799,2z%20M29,21.385L21.385,29h-10.77L3,21.385v-10.77L10.615,3h10.77%20L29,10.615V21.385z'/%3e%3c/g%3e%3c/svg%3e",qv="data:image/svg+xml,%3c?xml%20version='1.0'%20?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%3e%3cdefs%3e%3cstyle%3e.c{stroke:%231237a5;}.c,.d{fill:none;stroke-linecap:round;stroke-linejoin:round;}.d{stroke:%234eb8ff;}%3c/style%3e%3c/defs%3e%3cg%20id='a'/%3e%3cg%20id='b'%3e%3cline%20class='c'%20x1='7.5'%20x2='7.5'%20y1='20.5'%20y2='3.5'/%3e%3cline%20class='c'%20x1='7.48'%20x2='3.5'%20y1='3.54'%20y2='7.99'/%3e%3cline%20class='c'%20x1='7.52'%20x2='11.5'%20y1='3.54'%20y2='7.99'/%3e%3cline%20class='d'%20x1='16.5'%20x2='16.5'%20y1='3.5'%20y2='20.5'/%3e%3cline%20class='d'%20x1='16.48'%20x2='12.5'%20y1='20.46'%20y2='16.01'/%3e%3cline%20class='d'%20x1='16.52'%20x2='20.5'%20y1='20.46'%20y2='16.01'/%3e%3c/g%3e%3c/svg%3e",sg="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='-1%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='user-6'%20transform='translate(-3%20-2)'%3e%3cpath%20id='secondary'%20fill='%232ca9bc'%20d='M11,13h2a7,7,0,0,1,7,7h0a1,1,0,0,1-1,1H5a1,1,0,0,1-1-1H4a7,7,0,0,1,7-7Z'/%3e%3cpath%20id='primary'%20d='M20,20h0a1,1,0,0,1-1,1H5a1,1,0,0,1-1-1H4a7,7,0,0,1,7-7h2A7,7,0,0,1,20,20ZM12,3a5,5,0,1,0,5,5A5,5,0,0,0,12,3Z'%20fill='none'%20stroke='%23000000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='2'/%3e%3c/g%3e%3c/svg%3e",o8="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='-0.01%20-0.008%20100.016%20100.016'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill='%2323475F'%20d='M88.555-.008H83v.016a2%202%200%200%201-2%202H19a2%202%200%200%201-2-2v-.016H4a4%204%200%200%200-4%204v92.016a4%204%200%200%200%204%204h92a4%204%200%200%200%204-4V11.517c.049-.089-11.436-11.454-11.445-11.525z'/%3e%3cpath%20fill='%231C3C50'%20d='M81.04%2053.008H18.96a2%202%200%200%200-2%202v45h66.08v-45c0-1.106-.895-2-2-2zm-61.957-10h61.834a2%202%200%200%200%202-2V.547A1.993%201.993%200%200%201%2081%202.007H19c-.916%200-1.681-.62-1.917-1.46v40.46a2%202%200%200%200%202%202.001z'/%3e%3cpath%20fill='%23EBF0F1'%20d='M22%2055.977h56a2%202%200%200%201%202%202v37.031a2%202%200%200%201-2%202H22c-1.104%200-2-.396-2-1.5V57.977a2%202%200%200%201%202-2z'/%3e%3cpath%20fill='%23BCC4C8'%20d='M25%2077.008h50v1H25v-1zm0%2010h50v1H25v-1z'/%3e%3cpath%20fill='%231C3C50'%20d='M7%2084.008h3a2%202%200%200%201%202%202v3a2%202%200%200%201-2%202H7a2%202%200%200%201-2-2v-3a2%202%200%200%201%202-2zm83%200h3a2%202%200%200%201%202%202v3a2%202%200%200%201-2%202h-3a2%202%200%200%201-2-2v-3a2%202%200%200%201%202-2z'/%3e%3cpath%20fill='%23BCC4C8'%20d='M37%201.981v36.026a2%202%200%200%200%202%202h39a2%202%200%200%200%202-2V1.981c0%20.007-42.982.007-43%200zm37%2029.027a2%202%200%200%201-2%202h-6a2%202%200%200%201-2-2V10.981a2%202%200%200%201%202-2h6a2%202%200%200%201%202%202v20.027z'/%3e%3cpath%20fill='%23FF9D00'%20d='M78%2055.977H22a2%202%200%200%200-2%202v10.031h60V57.977a2%202%200%200%200-2-2z'/%3e%3c/svg%3e",a8=Nf("NewGameStore",{state:()=>({startPosition:at("NewGameStore$startPosition",pi),hostHasWhite:at("NewGameStore$hostHasWhite",!0),useClock:at("NewGameStore$useClock",!0),startTimeMinutes:at("NewGameStore$startTimeMinutes",5),startTimeSeconds:at("NewGameStore$startTimeSeconds",0),increment:at("NewGameStore$increment",0)}),actions:{setStartPosition(t){this.startPosition=t},setHostHasWhiteStatus(t){this.hostHasWhite=t},setUseClockStatus(t){this.useClock=t},setStartTimeMinutes(t){this.startTimeMinutes=t},setStartTimeSeconds(t){this.startTimeSeconds=t},setIncrement(t){this.increment=t}},persist:sessionStorage}),l8="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20height='800px'%20width='800px'%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20512%20512'%20xml:space='preserve'%3e%3cpath%20style='fill:%23FFFFFF;'%20d='M256,504C119.248,504,8,392.752,8,256S119.248,8,256,8s248,111.248,248,248S392.752,504,256,504z'/%3e%3cpath%20style='fill:%23E8E8E8;'%20d='M256,16c132.336,0,240,107.664,240,240S388.336,496,256,496S16,388.336,16,256S123.664,16,256,16%20M256,0C114.608,0,0,114.608,0,256c0,141.376,114.608,256,256,256s256-114.624,256-256C512,114.608,397.392,0,256,0L256,0z'/%3e%3cpolygon%20style='fill:%23DB2B42;'%20points='151.536,306.384%20222.784,233.36%20222.784,409.6%20289.232,409.6%20289.232,233.36%20360.464,306.384%20407.888,259.872%20256,104.16%20104.112,259.872%20'/%3e%3c/svg%3e",c8="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20height='800px'%20width='800px'%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20512%20512'%20xml:space='preserve'%3e%3cpath%20style='fill:%23FFFFFF;'%20d='M256,504C119.248,504,8,392.752,8,256S119.248,8,256,8s248,111.248,248,248S392.752,504,256,504z'/%3e%3cpath%20style='fill:%23E8E8E8;'%20d='M256,16c132.336,0,240,107.664,240,240S388.336,496,256,496S16,388.336,16,256S123.664,16,256,16%20M256,0C114.608,0,0,114.608,0,256c0,141.376,114.608,256,256,256s256-114.624,256-256C512,114.608,397.392,0,256,0L256,0z'/%3e%3cpolygon%20style='fill:%23DB2B42;'%20points='360.464,204.784%20289.216,277.808%20289.216,101.568%20222.768,101.568%20222.768,277.808%20151.536,204.784%20104.112,251.296%20256,407.008%20407.888,251.296%20'/%3e%3c/svg%3e",u8="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20height='800px'%20width='800px'%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20512%20512'%20xml:space='preserve'%3e%3cpath%20style='fill:%23FFFFFF;'%20d='M256,504C119.248,504,8,392.752,8,256S119.248,8,256,8s248,111.248,248,248S392.752,504,256,504z'/%3e%3cpath%20style='fill:%23E8E8E8;'%20d='M256,16c132.336,0,240,107.664,240,240S388.336,496,256,496S16,388.336,16,256S123.664,16,256,16%20M256,0C114.608,0,0,114.608,0,256c0,141.376,114.608,256,256,256s256-114.624,256-256C512,114.608,397.392,0,256,0L256,0z'/%3e%3cpolygon%20style='fill:%23DB2B42;'%20points='306.8,360.048%20233.776,288.8%20410.016,288.8%20410.016,222.352%20233.776,222.352%20306.8,151.12%20260.288,103.696%20104.576,255.584%20260.288,407.472%20'/%3e%3c/svg%3e",h8="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20height='800px'%20width='800px'%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20512%20512'%20xml:space='preserve'%3e%3cpath%20style='fill:%23FFFFFF;'%20d='M256,504C119.248,504,8,392.752,8,256S119.248,8,256,8s248,111.248,248,248S392.752,504,256,504z'/%3e%3cpath%20style='fill:%23E8E8E8;'%20d='M256,16c132.336,0,240,107.664,240,240S388.336,496,256,496S16,388.336,16,256S123.664,16,256,16%20M256,0C114.608,0,0,114.608,0,256c0,141.376,114.608,256,256,256s256-114.624,256-256C512,114.608,397.392,0,256,0L256,0z'/%3e%3cpolygon%20style='fill:%23DB2B42;'%20points='205.2,151.12%20278.224,222.368%20101.984,222.368%20101.984,288.816%20278.224,288.816%20205.2,360.048%20251.712,407.472%20407.424,255.584%20251.712,103.696%20'/%3e%3c/svg%3e",f8="data:image/svg+xml,%3c?xml%20version='1.0'%20?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2064%2064'%20xmlns='http://www.w3.org/2000/svg'%3e%3cdefs%3e%3cstyle%3e.cls-1{fill:none;stroke:%23000000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px;}%3c/style%3e%3c/defs%3e%3ctitle/%3e%3cg%20data-name='Layer%2050'%20id='Layer_50'%3e%3cpath%20class='cls-1'%20d='M15.73,11.53H48.14a4.18,4.18,0,0,1,4.18,4.18v36a11,11,0,0,1-11,11H22.58a11,11,0,0,1-11-11v-36A4.18,4.18,0,0,1,15.73,11.53Z'/%3e%3crect%20class='cls-1'%20height='5.01'%20rx='2.43'%20ry='2.43'%20width='48.84'%20x='7.52'%20y='6.52'/%3e%3cpath%20class='cls-1'%20d='M21.79,6.52h0a5.32,5.32,0,0,1,5.32-5.33h9.81a5.33,5.33,0,0,1,5.33,5.33h0'/%3e%3crect%20class='cls-1'%20height='38.88'%20width='2.88'%20x='30.5'%20y='16.75'/%3e%3crect%20class='cls-1'%20height='38.88'%20width='2.88'%20x='16.13'%20y='16.75'/%3e%3crect%20class='cls-1'%20height='38.88'%20width='2.88'%20x='44.63'%20y='16.75'/%3e%3c/g%3e%3c/svg%3e",d8=["width","height"],p8=R("path",{d:"M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z ",style:{opacity:"1",fill:"#ffffff","fill-opacity":"1","fill-rule":"nonzero",stroke:"#000000","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-opacity":"1"}},null,-1),m8=[p8],g8=ke({__name:"WP",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},m8,8,d8))}}),_8=["width","height"],v8=et('<g style="opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18" style="fill:#ffffff;stroke:#000000;"></path><path d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10" style="fill:#ffffff;stroke:#000000;"></path><path d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z" style="fill:#000000;stroke:#000000;"></path><path d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z" transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)" style="fill:#000000;stroke:#000000;"></path></g>',1),y8=[v8],w8=ke({__name:"WN",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},y8,8,_8))}}),E8=["width","height"],C8=et('<g style="opacity:1;fill:none;fill-rule:evenodd;fill-opacity:1;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><g style="fill:#ffffff;stroke:#000000;stroke-linecap:butt;"><path d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z"></path><path d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"></path><path d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"></path></g><path d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18" style="fill:none;stroke:#000000;stroke-linejoin:miter;"></path></g>',1),b8=[C8],T8=ke({__name:"WB",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},b8,8,E8))}}),k8=["width","height"],S8=et('<g style="opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z " style="stroke-linecap:butt;"></path><path d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z " style="stroke-linecap:butt;"></path><path d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14" style="stroke-linecap:butt;"></path><path d="M 34,14 L 31,17 L 14,17 L 11,14"></path><path d="M 31,17 L 31,29.5 L 14,29.5 L 14,17" style="stroke-linecap:butt;stroke-linejoin:miter;"></path><path d="M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5"></path><path d="M 11,14 L 34,14" style="fill:none;stroke:#000000;stroke-linejoin:miter;"></path></g>',1),I8=[S8],A8=ke({__name:"WR",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},I8,8,k8))}}),R8=["width","height"],P8=et('<g style="opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z" transform="translate(-1,-1)"></path><path d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z" transform="translate(15.5,-5.5)"></path><path d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z" transform="translate(32,-1)"></path><path d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z" transform="translate(7,-4.5)"></path><path d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z" transform="translate(24,-4)"></path><path d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38,14 L 31,25 L 31,11 L 25.5,24.5 L 22.5,9.5 L 19.5,24.5 L 14,10.5 L 14,25 L 7,14 L 9,26 z " style="stroke-linecap:butt;"></path><path d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z " style="stroke-linecap:butt;"></path><path d="M 11.5,30 C 15,29 30,29 33.5,30" style="fill:none;"></path><path d="M 12,33.5 C 18,32.5 27,32.5 33,33.5" style="fill:none;"></path></g>',1),L8=[P8],N8=ke({__name:"WQ",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},L8,8,R8))}}),M8=["width","height"],x8=et('<g style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 22.5,11.63 L 22.5,6" style="fill:none;stroke:#000000;stroke-linejoin:miter;"></path><path d="M 20,8 L 25,8" style="fill:none;stroke:#000000;stroke-linejoin:miter;"></path><path d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25" style="fill:#ffffff;stroke:#000000;stroke-linecap:butt;stroke-linejoin:miter;"></path><path d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z " style="fill:#ffffff;stroke:#000000;"></path><path d="M 11.5,30 C 17,27 27,27 32.5,30" style="fill:none;stroke:#000000;"></path><path d="M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5" style="fill:none;stroke:#000000;"></path><path d="M 11.5,37 C 17,34 27,34 32.5,37" style="fill:none;stroke:#000000;"></path></g>',1),O8=[x8],D8=ke({__name:"WK",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},O8,8,M8))}}),V8=["width","height"],F8=R("path",{d:"M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z ",style:{opacity:"1",fill:"#000000","fill-opacity":"1","fill-rule":"nonzero",stroke:"#000000","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-opacity":"1"}},null,-1),$8=[F8],B8=ke({__name:"BP",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},$8,8,V8))}}),U8=["width","height"],j8=et('<g style="opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18" style="fill:#000000;stroke:#000000;"></path><path d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10" style="fill:#000000;stroke:#000000;"></path><path d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z" style="fill:#ffffff;stroke:#ffffff;"></path><path d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z" transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)" style="fill:#ffffff;stroke:#ffffff;"></path><path d="M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z " style="fill:#ffffff;stroke:none;"></path></g>',1),z8=[j8],W8=ke({__name:"BN",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},z8,8,U8))}}),H8=["width","height"],G8=et('<g style="opacity:1;fill:none;fill-rule:evenodd;fill-opacity:1;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><g style="fill:#000000;stroke:#000000;stroke-linecap:butt;"><path d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z"></path><path d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"></path><path d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"></path></g><path d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18" style="fill:none;stroke:#ffffff;stroke-linejoin:miter;"></path></g>',1),q8=[G8],K8=ke({__name:"BB",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},q8,8,H8))}}),Q8=["width","height"],Y8=et('<g style="opacity:1;fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z " style="stroke-linecap:butt;"></path><path d="M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z " style="stroke-linecap:butt;"></path><path d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z " style="stroke-linecap:butt;"></path><path d="M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z " style="stroke-linecap:butt;stroke-linejoin:miter;"></path><path d="M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z " style="stroke-linecap:butt;"></path><path d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z " style="stroke-linecap:butt;"></path><path d="M 12,35.5 L 33,35.5 L 33,35.5" style="fill:none;stroke:#ffffff;stroke-width:1;stroke-linejoin:miter;"></path><path d="M 13,31.5 L 32,31.5" style="fill:none;stroke:#ffffff;stroke-width:1;stroke-linejoin:miter;"></path><path d="M 14,29.5 L 31,29.5" style="fill:none;stroke:#ffffff;stroke-width:1;stroke-linejoin:miter;"></path><path d="M 14,16.5 L 31,16.5" style="fill:none;stroke:#ffffff;stroke-width:1;stroke-linejoin:miter;"></path><path d="M 11,14 L 34,14" style="fill:none;stroke:#ffffff;stroke-width:1;stroke-linejoin:miter;"></path></g>',1),X8=[Y8],J8=ke({__name:"BR",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},X8,8,Q8))}}),Z8=["width","height"],eN=et('<g style="opacity:1;fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><g style="fill:#000000;stroke:none;"><circle cx="6" cy="12" r="2.75"></circle><circle cx="14" cy="9" r="2.75"></circle><circle cx="22.5" cy="8" r="2.75"></circle><circle cx="31" cy="9" r="2.75"></circle><circle cx="39" cy="12" r="2.75"></circle></g><path d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z" style="stroke-linecap:butt;stroke:#000000;"></path><path d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z" style="stroke-linecap:butt;"></path><path d="M 11,38.5 A 35,35 1 0 0 34,38.5" style="fill:none;stroke:#000000;stroke-linecap:butt;"></path><path d="M 11,29 A 35,35 1 0 1 34,29" style="fill:none;stroke:#ffffff;"></path><path d="M 12.5,31.5 L 32.5,31.5" style="fill:none;stroke:#ffffff;"></path><path d="M 11.5,34.5 A 35,35 1 0 0 33.5,34.5" style="fill:none;stroke:#ffffff;"></path><path d="M 10.5,37.5 A 35,35 1 0 0 34.5,37.5" style="fill:none;stroke:#ffffff;"></path></g>',1),tN=[eN],nN=ke({__name:"BQ",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},tN,8,Z8))}}),rN=["width","height"],sN=et('<g style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 22.5,11.63 L 22.5,6" style="fill:none;stroke:#000000;stroke-linejoin:miter;" id="path6570"></path><path d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25" style="fill:#000000;fill-opacity:1;stroke-linecap:butt;stroke-linejoin:miter;"></path><path d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z " style="fill:#000000;stroke:#000000;"></path><path d="M 20,8 L 25,8" style="fill:none;stroke:#000000;stroke-linejoin:miter;"></path><path d="M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.51,26.6 L 22.5,24.5 C 20,18 9.906,14 6.997,19.85 C 4.5,25.5 11.85,28.85 11.85,28.85" style="fill:none;stroke:#ffffff;"></path><path d="M 11.5,30 C 17,27 27,27 32.5,30 M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5 M 11.5,37 C 17,34 27,34 32.5,37" style="fill:none;stroke:#ffffff;"></path></g>',1),iN=[sN],oN=ke({__name:"BK",props:{size:{default:100}},setup(t){const e=t,n=Y(()=>"".concat(e.size,"px"));return(r,s)=>(M(),H("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},iN,8,rN))}}),Hc=t=>(Jl("data-v-e4d28e91"),t=t(),Zl(),t),aN={class:"_root"},lN=Hc(()=>R("div",null,null,-1)),cN={class:"editedValueButton"},uN=["src"],hN=Hc(()=>R("div",null,null,-1)),fN={class:"editedValueButton"},dN=["src"],pN={class:"_centralZone"},mN=["src"],gN={class:"editedValueButton"},_N=["src"],vN=Hc(()=>R("div",null,null,-1)),yN={class:"editedValueButton"},wN=["src"],EN=Hc(()=>R("div",null,null,-1)),CN={__name:"EditedValue",props:["centralSize"],emits:["change"],setup(t,{expose:e,emit:n}){ua(w=>({"39d64174":a.value,"2e140f5c":u.value}));const r=n,s=t,i=X(""),o=X(!0),a=Y(()=>(s.centralSize||100)+"px"),l=Y(()=>s.centralSize*.98),c=Y(()=>s.centralSize/1.5),u=Y(()=>c.value+"px");function f(){switch(i.value){case"P":i.value="";break;case"N":i.value="P";break;case"B":i.value="N";break;case"R":i.value="B";break;case"Q":i.value="R";break;case"K":i.value="Q";break;case"p":i.value="";break;case"n":i.value="p";break;case"b":i.value="n";break;case"r":i.value="b";break;case"q":i.value="r";break;case"k":i.value="q";break;default:i.value=o.value?"K":"k"}r("change",i.value)}function h(){switch(i.value){case"P":i.value="N";break;case"N":i.value="B";break;case"B":i.value="R";break;case"R":i.value="Q";break;case"Q":i.value="K";break;case"K":i.value="";break;case"p":i.value="n";break;case"n":i.value="b";break;case"b":i.value="r";break;case"r":i.value="q";break;case"q":i.value="k";break;case"k":i.value="";break;default:i.value=o.value?"P":"p"}r("change",i.value)}function m(){switch(i.value!==""&&(o.value=!o.value),i.value){case"P":i.value="p";break;case"N":i.value="n";break;case"B":i.value="b";break;case"R":i.value="r";break;case"Q":i.value="q";break;case"K":i.value="k";break;case"p":i.value="P";break;case"n":i.value="N";break;case"b":i.value="B";break;case"r":i.value="R";break;case"q":i.value="Q";break;case"k":i.value="K";break}r("change",i.value)}function g(){return i.value}return e({getValue:g}),(w,y)=>(M(),H("div",aN,[lN,R("div",cN,[R("img",{src:$(l8),onClick:m},null,8,uN)]),hN,R("div",fN,[R("img",{src:$(u8),onClick:f},null,8,dN)]),R("div",pN,[i.value==="P"?(M(),Ce(g8,{key:0,size:l.value},null,8,["size"])):i.value==="N"?(M(),Ce(w8,{key:1,size:l.value},null,8,["size"])):i.value==="B"?(M(),Ce(T8,{key:2,size:l.value},null,8,["size"])):i.value==="R"?(M(),Ce(A8,{key:3,size:l.value},null,8,["size"])):i.value==="Q"?(M(),Ce(N8,{key:4,size:l.value},null,8,["size"])):i.value==="K"?(M(),Ce(D8,{key:5,size:l.value},null,8,["size"])):i.value==="p"?(M(),Ce(B8,{key:6,size:l.value},null,8,["size"])):i.value==="n"?(M(),Ce(W8,{key:7,size:l.value},null,8,["size"])):i.value==="b"?(M(),Ce(K8,{key:8,size:l.value},null,8,["size"])):i.value==="r"?(M(),Ce(J8,{key:9,size:l.value},null,8,["size"])):i.value==="q"?(M(),Ce(nN,{key:10,size:l.value},null,8,["size"])):i.value==="k"?(M(),Ce(oN,{key:11,size:l.value},null,8,["size"])):(M(),H("img",{key:12,src:$(f8)},null,8,mN))]),R("div",gN,[R("img",{src:$(h8),onClick:h},null,8,_N)]),vN,R("div",yN,[R("img",{src:$(c8),onClick:m},null,8,wN)]),EN]))}},bN=fs(CN,[["__scopeId","data-v-e4d28e91"]]),TN={class:"dialog"},kN={class:"center"},SN={class:"mainZone"},IN={class:"boardZone"},AN=["src"],RN={class:"buttonsLine"},PN={class:"buttonsLine"},LN={class:"field"},NN=["checked"],MN={for:"whiteTurnYes"},xN=["checked"],ON={for:"whiteTurnNo"},DN={class:"field"},VN={for:"whiteOO"},FN={class:"field"},$N={for:"whiteOO"},BN={class:"field"},UN={for:"blackOO"},jN={class:"field"},zN={for:"blackOO"},WN={class:"field"},HN={for:"enPassant"},GN=["value"],qN={class:"field"},KN={for:"nullityHalfMovesCount"},QN={class:"field"},YN={for:"moveNumber"},XN={class:"field"},JN=["checked"],ZN={for:"hasWhiteYes"},eM=["checked"],tM={for:"hasWhiteNo"},nM={class:"field"},rM=["checked"],sM={for:"includeTimeYes"},iM=["checked"],oM={for:"includeTimeNo"},aM={key:0,class:"field"},lM={for:"timeMinutes"},cM={for:"timeSeconds"},uM={for:"incrementSeconds"},hM={id:"buttons"},fM={__name:"NewGameDialog",props:["initialPosition"],setup(t,{expose:e}){const{t:n}=Ir(),r=a8(),{startPosition:s,startTimeMinutes:i,startTimeSeconds:o,increment:a,useClock:l,hostHasWhite:c}=n2(r),u=t,f=X(!1),h=X(),m=X(),g=X(100),w=X(100),y=X(!0),_=X(!0),E=X(!0),b=X(5),C=X(0),N=X(0),k=X(0),z=X(1),L=X(!0),P=X(!0),x=X(!0),D=X(!0),S=X(n("pages.newGame.noEnPassant")),G=X(),ue=[n("pages.newGame.noEnPassant"),"a6","b6","c6","d6","e6","f6","g6","h6"],ye=[n("pages.newGame.noEnPassant"),"a3","b3","c3","d3","e3","f3","g3","h3"],de=Y(()=>y.value?ue:ye);function be(){let p="";return L.value&&(p+="K"),P.value&&(p+="Q"),x.value&&(p+="k"),D.value&&(p+="q"),p.length>0?p:"-"}function we(p){if(p===void 0)return!1;try{return new Xh(p),!0}catch(d){return console.error(d),!1}}function Be(){const p=h.value.getBoardCode(),d=_.value?"w":"b",v=be(),T=S.value===n("pages.newGame.noEnPassant")?"-":S.value,A=k.value.toString(),j=z.value.toString(),Z=p+" "+d+" "+v+" "+T+" "+A+" "+j;return we(Z)?Z:void 0}function Ke(p){L.value=p.includes("K"),P.value=p.includes("Q"),x.value=p.includes("k"),x.value=p.includes("q")}function ge(p){const d=p.split(" ");if(d.length<6)return!1;const v=parseInt(d[4]),T=parseInt(d[5]);return isNaN(v)||isNaN(T)?!1:(h.value.setFromBoardCode(p),_.value=d[1]==="w",Ke(d[2]),S.value=d[3]==="-"?n("pages.newGame.noEnPassant"):d[3],k.value=v,z.value=T,!0)}function Ue(){if(E.value&&b.value===0&&C.value===0){Mt({text:n("pages.newGame.timeSetToZero"),type:"error"});return}const p=Be();if(!we(p)){Mt({text:n("pages.newGame.refusedCopyingPosition"),type:"error"});return}r.setStartPosition(p),r.setUseClockStatus(E.value),r.setStartTimeMinutes(b.value),r.setStartTimeSeconds(C.value),r.setIncrement(N.value),r.setHostHasWhiteStatus(y.value);const v={startPosition:p,withWhiteSide:y.value,withClock:E.value,clockMinutes:b.value,clockSeconds:C.value,incrementSeconds:N.value};bl(v)}function le(){bl()}function st(p){const d=p.target.value;y.value=d==="yes"}function ot(p){const d=p.target.value;_.value=d==="yes",S.value=n("pages.newGame.noEnPassant")}function _e(p){const d=p.target.value;E.value=d==="yes"}function U(){h.value.setCurrentEditingValue(m.value.getValue())}async function te(){const p=Be();p?(await navigator.clipboard.writeText(p),Mt({text:n("pages.newGame.copiedPosition")})):Mt({text:n("pages.newGame.refusedCopyingPosition"),type:"error"})}async function ee(){const p=await navigator.clipboard.readText();p.length===0&&Mt({text:n("pages.newGame.cannotCopyFromClipboard"),type:"error"}),we(p)||Mt({text:n("pages.newGame.illegalPositionFromClipboard"),type:"error"}),ge(p)}function se(){ge(G.value)}fn(()=>{const p=window.innerWidth<window.innerHeight?window.innerWidth:window.innerHeight;g.value=p*.3,w.value=p*.05}),fn(()=>{we(u.initialPosition)?G.value=u.initialPosition:G.value=pi,ge(G.value),y.value=c.value,E.value=l.value,b.value=i.value,C.value=o.value,N.value=a.value}),fn(()=>{ge(s.value),h.value.setCurrentEditingValue(m.value.getValue())});function Ne(){ge(pi)}function ze(){ge("8/8/8/8/8/8/8/8 w - - 0 1")}return e({returnValue:()=>{}}),(p,d)=>{const v=pl("EditableBoardVue");return M(),H("div",TN,[R("div",kN,[R("header",null,[R("h2",null,pe($(n)("pages.newGame.title")),1)]),R("section",SN,[R("div",IN,[R("img",{src:$(qv),onClick:d[0]||(d[0]=T=>f.value=!f.value)},null,8,AN),Re(v,{id:"editableBoard",ref_key:"editableBoard",ref:h,size:g.value,reversed:f.value,"white-turn":_.value},null,8,["size","reversed","white-turn"]),Re(bN,{ref_key:"editedValue",ref:m,onChange:U,centralSize:w.value},null,8,["centralSize"])]),R("aside",null,[R("div",RN,[R("button",{onClick:te},pe($(n)("pages.newGame.copyFen")),1),R("button",{onClick:ee},pe($(n)("pages.newGame.pasteFen")),1)]),R("div",PN,[R("button",{onClick:se},pe($(n)("pages.newGame.resetFen")),1),R("button",{onClick:Ne},pe($(n)("pages.newGame.defaultFen")),1),R("button",{onClick:ze},pe($(n)("pages.newGame.clearFen")),1)])]),R("aside",null,[R("div",LN,[po(pe($(n)("pages.newGame.whiteTurn"))+" ",1),R("input",{type:"radio",name:"whiteTurn",id:"whiteTurnYes",value:"yes",checked:_.value,onChange:ot},null,40,NN),R("label",MN,pe($(n)("pages.newGame.hasWhiteYes")),1),R("input",{type:"radio",name:"whiteTurn",id:"whiteTurnNo",value:"no",checked:!_.value,onChange:ot},null,40,xN),R("label",ON,pe($(n)("pages.newGame.hasWhiteNo")),1)]),R("div",DN,[Kn(R("input",{type:"checkbox",id:"whiteOO","onUpdate:modelValue":d[1]||(d[1]=T=>L.value=T)},null,512),[[Da,L.value]]),R("label",VN,pe($(n)("pages.newGame.whiteOO")),1)]),R("div",FN,[Kn(R("input",{type:"checkbox",id:"whiteOOO","onUpdate:modelValue":d[2]||(d[2]=T=>P.value=T)},null,512),[[Da,P.value]]),R("label",$N,pe($(n)("pages.newGame.whiteOOO")),1)]),R("div",BN,[Kn(R("input",{type:"checkbox",id:"blackOO","onUpdate:modelValue":d[3]||(d[3]=T=>x.value=T)},null,512),[[Da,x.value]]),R("label",UN,pe($(n)("pages.newGame.blackOO")),1)]),R("div",jN,[Kn(R("input",{type:"checkbox",id:"blackOOO","onUpdate:modelValue":d[4]||(d[4]=T=>D.value=T)},null,512),[[Da,D.value]]),R("label",zN,pe($(n)("pages.newGame.blackOOO")),1)]),R("div",WN,[R("label",HN,pe($(n)("pages.newGame.enPassantLabel")),1),Kn(R("select",{id:"enPassant","onUpdate:modelValue":d[5]||(d[5]=T=>S.value=T)},[(M(!0),H(We,null,tr(de.value,T=>(M(),H("option",{key:T,value:T},pe(T),9,GN))),128))],512),[[M3,S.value]])]),R("div",qN,[R("label",KN,pe($(n)("pages.newGame.nullityHalfMovesCount")),1),Kn(R("input",{id:"nullityHalfMovesCount",type:"number","onUpdate:modelValue":d[6]||(d[6]=T=>k.value=T),min:"0"},null,512),[[Hi,k.value]])]),R("div",QN,[R("label",YN,pe($(n)("pages.newGame.moveNumber")),1),Kn(R("input",{id:"moveNumber",type:"number","onUpdate:modelValue":d[7]||(d[7]=T=>z.value=T),min:"1"},null,512),[[Hi,z.value]])])]),R("aside",null,[R("div",XN,[po(pe($(n)("pages.newGame.hasWhite"))+" ",1),R("input",{type:"radio",name:"hasWhite",id:"hasWhiteYes",value:"yes",checked:y.value,onChange:st},null,40,JN),R("label",ZN,pe($(n)("pages.newGame.hasWhiteYes")),1),R("input",{type:"radio",name:"hasWhite",id:"hasWhiteNo",value:"no",checked:!y.value,onChange:st},null,40,eM),R("label",tM,pe($(n)("pages.newGame.hasWhiteNo")),1)]),R("div",nM,[po(pe($(n)("pages.newGame.includeTime"))+" ",1),R("input",{type:"radio",name:"includeTime",id:"includeTimeYes",value:"yes",checked:E.value,onChange:_e},null,40,rM),R("label",sM,pe($(n)("pages.newGame.includeTimeYes")),1),R("input",{type:"radio",name:"includeTime",id:"includeTimeNo",value:"no",checked:!E.value,onChange:_e},null,40,iM),R("label",oM,pe($(n)("pages.newGame.includeTimeNo")),1)]),E.value?(M(),H("div",aM,[Kn(R("input",{type:"number",id:"timeMinutes",name:"timeMinutes",min:"0",max:"59","onUpdate:modelValue":d[8]||(d[8]=T=>b.value=T)},null,512),[[Hi,b.value]]),R("label",lM,pe($(n)("pages.newGame.minutes")),1),Kn(R("input",{type:"number",id:"timeSeconds",name:"timeSeconds",min:"0",max:"59","onUpdate:modelValue":d[9]||(d[9]=T=>C.value=T)},null,512),[[Hi,C.value]]),R("label",cM,pe($(n)("pages.newGame.seconds")),1),Kn(R("input",{type:"number",id:"incrementSeconds",name:"incrementSeconds",min:"0",max:"59","onUpdate:modelValue":d[10]||(d[10]=T=>N.value=T)},null,512),[[Hi,N.value]]),R("label",uM,pe($(n)("pages.newGame.increment")),1)])):Ot("",!0)])]),R("div",hM,[R("button",{class:"ok",onClick:Ue},pe($(n)("pages.newGame.submit")),1),R("button",{class:"cancel",onClick:le},pe($(n)("pages.newGame.cancel")),1)])])])}}},dM=fs(fM,[["__scopeId","data-v-6ffec5a7"]]),pM={class:"dialog"},mM={class:"center"},gM={id:"button"},_M={__name:"GiveUpGameDialog",setup(t,{expose:e}){const{t:n}=Ir();async function r(){bl(!0)}function s(){bl(!1)}return e({returnValue:()=>{}}),(i,o)=>(M(),H("div",pM,[R("div",mM,[R("header",null,[R("h2",null,pe($(n)("pages.giveUp.title")),1)]),R("section",null,[R("div",gM,[R("button",{class:"ok",onClick:r},pe($(n)("pages.giveUp.submit")),1),R("button",{class:"cancel",onClick:s},pe($(n)("pages.giveUp.cancel")),1)])])])]))}},vM=fs(_M,[["__scopeId","data-v-f77ae50c"]]),yM=Nf("GameStore",{state:()=>({startPosition:at("GameStore$startPosition",rg),currentPosition:at("GameStore$currentPosition",rg),whitePlayerIsHuman:at("GameStore$whitePlayerIsHuman",!1),blackPlayerIsHuman:at("GameStore$blackPlayerIsHuman",!1),weHaveWhite:at("GameStore$weHaveWhite",!0),whiteNickname:at("GameStore$whiteNickname",""),blackNickname:at("GameStore$blackNickname",""),boardReversed:at("GameStore$boardReversed",!1),historyNodes:at("GameStore$historyNodes",[]),lastMoveArrow:at("GameStore$lastMoveArrow",{start:{file:-100,rank:-100},end:{file:-100,rank:-100}}),withClock:at("GameStore$withClock",!1),turnStartDate:at("GameStore$turnStartDate",new Date().toISOString()),remainingWhiteSecondsSinceLastMove:at("GameStore$remainingWhiteSecondsSinceLastMove",0),remainingBlackSecondsSinceLastMove:at("GameStore$remainingBlackSecondsSinceLastMove",0),remainingWhiteSeconds:at("GameStore$remainingWhiteSeconds",0),remainingBlackSeconds:at("GameStore$remainingBlackSeconds",0),increment:at("GameStore$increment",0)}),actions:{setCurrentPosition(t){this.currentPosition=t},setWhitePlayerIsHuman(t){this.whitePlayerIsHuman=t},setBlackPlayerIsHuman(t){this.blackPlayerIsHuman=t},setWeHaveWhiteStatus(t){this.weHaveWhite=t},setWhiteNickname(t){this.whiteNickname=t},setBlackNickname(t){this.blackNickname=t},setBoardReversedStatus(t){this.boardReversed=t},setHistoryNodes(t){this.historyNodes=t.map(e=>e)},addHistoryNode(t){this.historyNodes.push(t)},setLastMoveArrow(t){this.lastMoveArrow=t},setStartPosition(t){this.startPosition=t},setWithClock(t){this.withClock=t},setTurnStartDate(t){this.turnStartDate=t},setRemainingWhiteSecondsSinceLastMove(t){this.remainingWhiteSecondsSinceLastMove=t},setRemainingBlackSecondsSinceLastMove(t){this.remainingBlackSecondsSinceLastMove=t},setRemainingWhiteSeconds(t){this.remainingWhiteSeconds=t},setRemainingBlackSeconds(t){this.remainingBlackSeconds=t},setIncrement(t){this.increment=t}},persist:sessionStorage}),Kv=t=>(Jl("data-v-48c3085f"),t=t(),Zl(),t),wM={id:"pageRoot"},EM={id:"gameZone"},CM={id:"miscZone"},bM={key:0,class:"clock"},TM={class:"side white"},kM={class:"side black"},SM={id:"buttons"},IM=["src"],AM=["src"],RM=["src"],PM=["src"],LM={key:1,id:"nicknames"},NM=Kv(()=>R("td",null,[R("div",{class:"color white"})],-1)),MM=["src"],xM=Kv(()=>R("td",null,[R("div",{class:"color black"})],-1)),OM=["src"],DM={__name:"GamePage",setup(t){ua(O=>({"1083bc0c":f.value}));const{t:e}=Ir(),n=Sa(),r=yM();let s=new Xh;const i=X(),o=X(100),a=X(),l=X(),c=X(!1),u=X(!1),f=Y(()=>o.value+"px"),h=Y(()=>n.roomOwner===!0),m=Y(()=>n.gameStarted===!0),{startPosition:g,currentPosition:w,whitePlayerIsHuman:y,blackPlayerIsHuman:_,whiteNickname:E,blackNickname:b,weHaveWhite:C,withClock:N,turnStartDate:k,remainingWhiteSecondsSinceLastMove:z,remainingBlackSecondsSinceLastMove:L,remainingWhiteSeconds:P,remainingBlackSeconds:x,increment:D}=n2(r),S=X(),G=X(),ue=Y(()=>w.value.split(" ")[1]==="w");function ye(O){O<0&&(O=0);const V=Math.floor(O/60),F=O%60;let W=""+V;W.length<2&&(W="0"+W);let J=""+F;return J.length<2&&(J="0"+J),W+":"+J}const de=Y(()=>ye(P.value)),be=Y(()=>ye(x.value));function we(){const O=new Date().toISOString();return U9(O,k.value)}function Be(){s=new Xh(g.value);const O=l.value.getNodes(),V=BL(new Date,"yyyy.MM.dd");for(let F of O)try{s.move(F.san)}catch(W){console.log("Failed to play ".concat(F.san," in pgn history"))}s.header("White",E.value,"Black",b.value,"Date",V)}async function Ke(){if(!m.value||!N.value)return;const O=n.roomId;if(P.value<=0&&C.value){S.value(),Mt({text:e("pages.game.outcomes.userLostOnTime")});const V={gameStarted:!1,lostOnTimeoutSide:h.value?Bu:Uu};let F=await Xn({roomId:O,newValues:V});if(F.hasOwnProperty("error")){alert(e(F.error));return}n.setGameStartedStatus(!1),a.value.stop(),r.setWhitePlayerIsHuman(!1),r.setBlackPlayerIsHuman(!1),Be(),l.value.activateNavigationMode();return}if(x.value<=0&&!C.value){S.value(),Mt({text:e("pages.game.outcomes.userLostOnTime")});const V={gameStarted:!1,lostOnTimeoutSide:h.value?Bu:Uu};let F=await Xn({roomId:O,newValues:V});if(F.hasOwnProperty("error")){alert(e(F.error));return}n.setGameStartedStatus(!1),a.value.stop(),r.setWhitePlayerIsHuman(!1),r.setBlackPlayerIsHuman(!1),Be(),l.value.activateNavigationMode();return}}function ge(){if(!m.value||!N.value)return;const O=we();r.setRemainingWhiteSeconds(z.value-(ue.value?O:0)),r.setRemainingBlackSeconds(L.value-(ue.value?0:O)),Ke()}fn(async()=>{const O=n.roomId,V=await Hm({roomId:O});if(V.hasOwnProperty("error")){alert(e(V.error));return}const{turnStartDate:W,remainingWhiteSecondsSinceLastMove:J,remainingBlackSecondsSinceLastMove:Q}=V.matchingDocument;r.setTurnStartDate(W),r.setRemainingWhiteSecondsSinceLastMove(J),r.setRemainingBlackSecondsSinceLastMove(Q);const{pause:I,resume:B}=j6(ge,30,{immediate:!0});S.value=I,G.value=B});const Ue=X();function le(){const O=window.innerWidth<window.innerHeight?window.innerWidth:window.innerHeight,V=O<1e3?.4:.8;o.value="".concat(O*V)}async function st(){const O=n.roomId,V=await Hm({roomId:O});if(V.hasOwnProperty("error")){alert(e(V.error));return}const{startPosition:W,hostHasWhite:J,hostUser:Q,guestUser:I,withClock:B,clockMinutes:ae,clockSeconds:me,incrementSeconds:Ve}=V.matchingDocument,Je=W.split(" "),mt=parseInt(Je[5]),Dn=Je[1]==="w";l.value.reset(mt,Dn),r.setHistoryNodes(l.value.getNodes()),r.setStartPosition(W),r.setWithClock(B);const gt=ae*60+me;r.setRemainingWhiteSecondsSinceLastMove(gt),r.setRemainingBlackSecondsSinceLastMove(gt),r.setRemainingWhiteSeconds(gt),r.setRemainingBlackSeconds(gt),r.setIncrement(Ve),G.value(),a.value.newGame(W),r.setCurrentPosition(W);const Vn=[!0,"true"].includes(J),Tt=Vn&&h.value||!Vn&&!h.value;r.setWeHaveWhiteStatus(Tt),r.setWhitePlayerIsHuman(Tt),r.setBlackPlayerIsHuman(!Tt),r.setWhiteNickname(J?Q:I),r.setBlackNickname(J?I:Q),u.value=!0,n.setAtLeastAGameStartedStatus(!0),r.setLastMoveArrow({start:{file:-100,rank:-100},end:{file:-100,rank:-100}})}async function ot(){const O=await Dp(dM,{}),{startPosition:V,withWhiteSide:F,withClock:W,clockMinutes:J,clockSeconds:Q,incrementSeconds:I}=O,B=J*60+Q;if(O){const ae=new Date().toISOString(),me={gameStarted:!0,giveUpSide:jL,lostOnTimeoutSide:zL,startPosition:V,hostHasWhite:F,withClock:W,clockMinutes:J,clockSeconds:Q,incrementSeconds:I,turnStartDate:ae,remainingWhiteSecondsSinceLastMove:B,remainingBlackSecondsSinceLastMove:B};r.setTurnStartDate(ae);const Ve=n.roomId;let Je=await Xn({roomId:Ve,newValues:me}),mt=Je.hasOwnProperty("error");if(mt){alert(e(Je.error));return}if(Je=await e9({roomId:Ve,fieldsNames:["lastMoveSan","lastMoveFan","lastMoveStartFile","lastMoveStartRank","lastMoveEndFile","lastMoveEndRank"]}),mt=Je.hasOwnProperty("error"),mt){alert(e(Je.error));return}n.setGameStartedStatus(!0),r.setStartPosition(V),r.setWithClock(W);const gt=n.roomOwner,Vn=F&&!gt||!F&&gt;r.setBoardReversedStatus(Vn),c.value=Vn,st()}}async function _e(){const O=await Dp(vM,{}),V=[!0,"true"].includes(n.roomOwner);if(O){S.value&&S.value();const F={gameStarted:!1,giveUpSide:V?tg:ng},W=n.roomId,J=await Xn({roomId:W,newValues:F});if(J.hasOwnProperty("error")){alert(e(J.error));return}n.setGameStartedStatus(!1),a.value.stop(),r.setWhitePlayerIsHuman(!1),r.setBlackPlayerIsHuman(!1),Be(),l.value.activateNavigationMode()}}function U(O){const V=String.fromCharCode(97+O.startFile),F=String.fromCharCode(49+O.startRank),W=String.fromCharCode(97+O.endFile),J=String.fromCharCode(49+O.endRank),Q=O.promotion;return Q?"".concat(V).concat(F).concat(W).concat(J).concat(Q):"".concat(V).concat(F).concat(W).concat(J)}function te(O){const V=O.data(),F=O.id,W=["true",!0].includes(V.gameStarted),Q=n.roomId==F,I=!h.value;if(Q)if(W){const B=n.gameStarted;if(I&&!B){const Ve=V.hostHasWhite&&!V.roomOwner||!V.hostHasWhite&&V.roomOwner;n.setGameStartedStatus(!0),r.setBoardReversedStatus(Ve),r.setTurnStartDate(V.turnStartDate),r.setRemainingWhiteSecondsSinceLastMove(V.remainingWhiteSecondsSinceLastMove),r.setRemainingBlackSecondsSinceLastMove(V.remainingBlackSecondsSinceLastMove),r.setRemainingWhiteSeconds(V.remainingWhiteSecondsSinceLastMove),r.setRemainingBlackSeconds(V.remainingBlackSecondsSinceLastMove),r.setIncrement(V.incrementSeconds),c.value=Ve,st()}if(!a.value.playManualMove(U({startFile:V.lastMoveStartFile,startRank:V.lastMoveStartRank,endFile:V.lastMoveEndFile,endRank:V.lastMoveEndRank,promotion:V.lastMovePromotion})))return;r.setLastMoveArrow({start:{file:V.lastMoveStartFile,rank:V.lastMoveStartRank},end:{file:V.lastMoveEndFile,rank:V.lastMoveEndRank}});const me=a.value.getCurrentPosition();w.value=me}else{const B=V.giveUpSide,ae=V.lostOnTimeoutSide,me=h.value?B===ng:B===tg,Ve=h.value?ae===Uu:ae===Bu;me?(n.setGameStartedStatus(!1),r.setWhitePlayerIsHuman(!1),r.setBlackPlayerIsHuman(!1),Be(),l.value.activateNavigationMode(),Mt({text:e("pages.game.outcomes.gaveUp")})):Ve&&(n.setGameStartedStatus(!1),r.setWhitePlayerIsHuman(!1),r.setBlackPlayerIsHuman(!1),Be(),l.value.activateNavigationMode(),Mt({text:e("pages.game.outcomes.opponentLostOnTime")}))}}function ee(){c.value=!c.value}async function se(O,V,F,W,J,Q,I){const B=new Date().toISOString();r.setRemainingWhiteSecondsSinceLastMove(P.value+(V?D.value:0)),r.setRemainingBlackSecondsSinceLastMove(x.value+(V?0:D.value)),r.setTurnStartDate(B),l.value.addNodeOrCompleteFirst({number:O,whiteTurn:V,san:F,fan:W,fen:J,fromFileIndex:Q.start.file,fromRankIndex:Q.start.rank,toFileIndex:Q.end.file,toRankIndex:Q.end.rank}),await ys(10);const ae={lastMoveSan:F,lastMoveFan:W,lastMoveStartFile:Q.start.file,lastMoveStartRank:Q.start.rank,lastMoveEndFile:Q.end.file,lastMoveEndRank:Q.end.rank,lastMovePromotion:I,turnStartDate:B,remainingWhiteSecondsSinceLastMove:V?P.value+D.value:z.value,remainingBlackSecondsSinceLastMove:V?L.value:x.value+D.value},me=n.roomId,Ve=await Xn({roomId:me,newValues:ae});if(Ve.hasOwnProperty("error")){alert(e(Ve.error));return}l.value.scrollToLastElement();const mt=l.value.getNodesCount(),Dn=l.value.getLastNode;mt>1&&Dn.fan?r.addHistoryNode(l.value.getLastNode()):r.setHistoryNodes(l.value.getNodes()),r.setLastMoveArrow(Q),w.value=J}async function Ne(){if(!m.value)return;S.value&&S.value(),await ys(50);const O={gameStarted:!1},V=n.roomId,F=await Xn({roomId:V,newValues:O});F.hasOwnProperty("error")&&console.error(F.error),Be(),l.value.activateNavigationMode(),n.setGameStartedStatus(!1);const J=e("pages.game.outcomes.checkmate");Mt({text:J})}async function ze(){if(!m.value)return;S.value&&S.value(),await ys(50);const O={gameStarted:!1},V=n.roomId,F=await Xn({roomId:V,newValues:O});F.hasOwnProperty("error")&&console.error(F.error),Be(),l.value.activateNavigationMode(),n.setGameStartedStatus(!1);const J=e("pages.game.outcomes.stalemate");Mt({text:J})}async function p(){if(!m.value)return;S.value&&S.value(),await ys(50);const O={gameStarted:!1},V=n.roomId,F=await Xn({roomId:V,newValues:O});F.hasOwnProperty("error")&&console.error(F.error),Be(),l.value.activateNavigationMode(),n.setGameStartedStatus(!1);const J=e("pages.game.outcomes.perpetualDraw");Mt({text:J})}async function d(){if(!m.value)return;S.value&&S.value(),await ys(50);const O={gameStarted:!1},V=n.roomId,F=await Xn({roomId:V,newValues:O});F.hasOwnProperty("error")&&console.error(F.error),Be(),l.value.activateNavigationMode(),n.setGameStartedStatus(!1);const J=e("pages.game.outcomes.missingMaterial");Mt({text:J})}async function v(){if(!m.value)return;S.value&&S.value(),await ys(50);const O={gameStarted:!1},V=n.roomId,F=await Xn({roomId:V,newValues:O});F.hasOwnProperty("error")&&console.error(F.error),Be(),l.value.activateNavigationMode(),n.setGameStartedStatus(!1);const J=e("pages.game.outcomes.fiftyMovesDraw");Mt({text:J})}async function T(){if(confirm(e("pages.pgn.confirmationMessage"))){const V=s.pgn({newline:"\n",maxWidth:80}),F=document.createElement("a"),W=new Blob([V],{type:"text/plain"});F.href=URL.createObjectURL(W),F.download="game.pgn",F.click(),URL.revokeObjectURL(F.href)}}function A(){m.value||a.value.setPositionAndLastMove(g.value,{start:{file:-100,rank:-100},end:{file:-100,rank:-100}})&&l.value.setSelectedNode(-1)}function j({nodeIndex:O,fen:V,fromFileIndex:F,fromRankIndex:W,toFileIndex:J,toRankIndex:Q}){m.value||a.value.setPositionAndLastMove(V,{start:{file:F,rank:W},end:{file:J,rank:Q}})&&l.value.setSelectedNode(O)}function Z(O){te(O)}return fn(async()=>{const O=n.roomId;O&&(i.value=await X6(O,Z))}),Po(()=>{S.value&&S.value(),i.value&&i.value(),Ue.value&&Ue.value()}),fn(()=>{window.addEventListener("resize",le),le()}),Po(()=>{window.removeEventListener("resize",le)}),fn(()=>{a.value.newGame(w.value),m.value||a.value.stop(),u.value=n.atLeastAGameStarted,c.value=r.boardReversed,l.value.setNodes(r.historyNodes),a.value.setLastMoveArrow(r.lastMoveArrow),m.value||(Be(),l.value.activateNavigationMode())}),(O,V)=>{const F=pl("ChessboardVue");return M(),H("div",wM,[R("div",EM,[Re(r8,{ref_key:"history",ref:l,onRequestStartPosition:A,onRequestNodeSelected:j},null,512),Re(F,{id:"board",ref_key:"board",ref:a,size:o.value,"white-player-human":$(y),"black-player-human":$(_),reversed:c.value,onMoveDone:se,onCheckmate:Ne,onStalemate:ze,onPerpetualDraw:p,onMissingMaterialDraw:d,onFiftyMovesDraw:v},null,8,["size","white-player-human","black-player-human","reversed"])]),R("div",CM,[$(N)?(M(),H("div",bM,[R("div",TM,pe(de.value),1),R("div",kM,pe(be.value),1)])):Ot("",!0),R("div",SM,[R("button",{onClick:ee},[R("img",{src:$(qv)},null,8,IM)]),h.value&&!m.value?(M(),H("button",{key:0,onClick:ot},[R("img",{src:$(s8)},null,8,AM)])):Ot("",!0),m.value?(M(),H("button",{key:1,onClick:_e},[R("img",{src:$(i8)},null,8,RM)])):Ot("",!0),u.value&&!m.value?(M(),H("button",{key:2,onClick:T},[R("img",{src:$(o8)},null,8,PM)])):Ot("",!0)]),u.value?(M(),H("table",LM,[R("tr",{class:ut(["nickname",[ue.value?"highlight":""]])},[NM,R("td",null,[R("p",null,pe($(E)),1)]),R("td",null,[$(C)===!0?(M(),H("img",{key:0,src:$(sg)},null,8,MM)):Ot("",!0)])],2),R("tr",{class:ut(["nickname",[ue.value?"":"highlight"]])},[xM,R("td",null,[R("p",null,pe($(b)),1)]),R("td",null,[$(C)===!1?(M(),H("img",{key:0,src:$(sg)},null,8,OM)):Ot("",!0)])],2)])):Ot("",!0)])])}}},VM=fs(DM,[["__scopeId","data-v-48c3085f"]]),FM=[{path:"/",component:o9},{path:"/create-room",component:h9},{path:"/join-room",component:y9},{path:"/game",component:VM}],$M=Uw({history:gw(),routes:FM}),BM=()=>navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.userLanguage||navigator.language||navigator.browserLanguage||"en",UM=BM().substring(0,2),jM=IC({fallbackLocale:"en",legacy:!1,locale:UM,messages:YS}),zM=$C();D3(GS).use(dk).use(US).use(zM).use($M).use(jM).use(sb).mount("#app");export{HM as __vite_legacy_guard};
