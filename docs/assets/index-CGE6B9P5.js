var Fy=Object.defineProperty;var $y=(t,e,n)=>e in t?Fy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var wn=(t,e,n)=>($y(t,typeof e!="symbol"?e+"":e,n),n);function $L(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Rh(t,e){const n=new Set(t.split(","));return e?r=>n.has(r.toLowerCase()):r=>n.has(r)}const lt={},Js=[],Sn=()=>{},Uy=()=>!1,Sl=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ph=t=>t.startsWith("onUpdate:"),vt=Object.assign,kh=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},By=Object.prototype.hasOwnProperty,We=(t,e)=>By.call(t,e),Ee=Array.isArray,Zs=t=>Rl(t)==="[object Map]",Np=t=>Rl(t)==="[object Set]",Oe=t=>typeof t=="function",dt=t=>typeof t=="string",bi=t=>typeof t=="symbol",st=t=>t!==null&&typeof t=="object",Lp=t=>(st(t)||Oe(t))&&Oe(t.then)&&Oe(t.catch),Dp=Object.prototype.toString,Rl=t=>Dp.call(t),jy=t=>Rl(t).slice(8,-1),xp=t=>Rl(t)==="[object Object]",Nh=t=>dt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,eo=Rh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Pl=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Wy=/-(\w)/g,er=Pl(t=>t.replace(Wy,(e,n)=>n?n.toUpperCase():"")),Hy=/\B([A-Z])/g,Ti=Pl(t=>t.replace(Hy,"-$1").toLowerCase()),kl=Pl(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ac=Pl(t=>t?"on".concat(kl(t)):""),Kr=(t,e)=>!Object.is(t,e),Sc=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},za=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},qy=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Gy=t=>{const e=dt(t)?Number(t):NaN;return isNaN(e)?t:e};let md;const Mp=()=>md||(md=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Nl(t){if(Ee(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=dt(r)?Yy(r):Nl(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(dt(t)||st(t))return t}const Ky=/;(?![^(]*\))/g,zy=/:([^]+)/,Qy=/\/\*[^]*?\*\//g;function Yy(t){const e={};return t.replace(Qy,"").split(Ky).forEach(n=>{if(n){const r=n.split(zy);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function ut(t){let e="";if(dt(t))e=t;else if(Ee(t))for(let n=0;n<t.length;n++){const r=ut(t[n]);r&&(e+=r+" ")}else if(st(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Xy(t){if(!t)return null;let{class:e,style:n}=t;return e&&!dt(e)&&(t.class=ut(e)),n&&(t.style=Nl(n)),t}const Jy="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Zy=Rh(Jy);function Op(t){return!!t||t===""}const Ge=t=>dt(t)?t:t==null?"":Ee(t)||st(t)&&(t.toString===Dp||!Oe(t.toString))?JSON.stringify(t,Vp,2):String(t),Vp=(t,e)=>e&&e.__v_isRef?Vp(t,e.value):Zs(e)?{["Map(".concat(e.size,")")]:[...e.entries()].reduce((n,[r,s],i)=>(n[Rc(r,i)+" =>"]=s,n),{})}:Np(e)?{["Set(".concat(e.size,")")]:[...e.values()].map(n=>Rc(n))}:bi(e)?Rc(e):st(e)&&!Ee(e)&&!xp(e)?String(e):e,Rc=(t,e="")=>{var n;return bi(t)?"Symbol(".concat((n=t.description)!=null?n:e,")"):t};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let gn;class Fp{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=gn,!e&&gn&&(this.index=(gn.scopes||(gn.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=gn;try{return gn=this,e()}finally{gn=n}}}on(){gn=this}off(){gn=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Lh(t){return new Fp(t)}function ev(t,e=gn){e&&e.active&&e.effects.push(t)}function Dh(){return gn}function $p(t){gn&&gn.cleanups.push(t)}let vs;class xh{constructor(e,n,r,s){this.fn=e,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,ev(this,s)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Ns();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(tv(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),Ls()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=jr,n=vs;try{return jr=!0,vs=this,this._runnings++,pd(this),this.fn()}finally{gd(this),this._runnings--,vs=n,jr=e}}stop(){var e;this.active&&(pd(this),gd(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function tv(t){return t.value}function pd(t){t._trackId++,t._depsLength=0}function gd(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)Up(t.deps[e],t);t.deps.length=t._depsLength}}function Up(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let jr=!0,wu=0;const Bp=[];function Ns(){Bp.push(jr),jr=!1}function Ls(){const t=Bp.pop();jr=t===void 0?!0:t}function Mh(){wu++}function Oh(){for(wu--;!wu&&bu.length;)bu.shift()()}function jp(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const r=t.deps[t._depsLength];r!==e?(r&&Up(r,t),t.deps[t._depsLength++]=e):t._depsLength++}}const bu=[];function Wp(t,e,n){Mh();for(const r of t.keys()){let s;r._dirtyLevel<e&&(s!=null?s:s=t.get(r)===r._trackId)&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=e),r._shouldSchedule&&(s!=null?s:s=t.get(r)===r._trackId)&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&bu.push(r.scheduler)))}Oh()}const Hp=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},Qa=new WeakMap,Es=Symbol(""),Tu=Symbol("");function un(t,e,n){if(jr&&vs){let r=Qa.get(t);r||Qa.set(t,r=new Map);let s=r.get(n);s||r.set(n,s=Hp(()=>r.delete(n))),jp(vs,s)}}function fr(t,e,n,r,s,i){const o=Qa.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&Ee(t)){const l=Number(r);o.forEach((c,u)=>{(u==="length"||!bi(u)&&u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":Ee(t)?Nh(n)&&a.push(o.get("length")):(a.push(o.get(Es)),Zs(t)&&a.push(o.get(Tu)));break;case"delete":Ee(t)||(a.push(o.get(Es)),Zs(t)&&a.push(o.get(Tu)));break;case"set":Zs(t)&&a.push(o.get(Es));break}Mh();for(const l of a)l&&Wp(l,4);Oh()}function nv(t,e){var n;return(n=Qa.get(t))==null?void 0:n.get(e)}const rv=Rh("__proto__,__v_isRef,__isVue"),qp=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(bi)),_d=sv();function sv(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Be(this);for(let i=0,o=this.length;i<o;i++)un(r,"get",i+"");const s=r[e](...n);return s===-1||s===!1?r[e](...n.map(Be)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Ns(),Mh();const r=Be(this)[e].apply(this,n);return Oh(),Ls(),r}}),t}function iv(t){const e=Be(this);return un(e,"has",t),e.hasOwnProperty(t)}class Gp{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?yv:Yp:i?Qp:zp).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=Ee(e);if(!s){if(o&&We(_d,n))return Reflect.get(_d,n,r);if(n==="hasOwnProperty")return iv}const a=Reflect.get(e,n,r);return(bi(n)?qp.has(n):rv(n))||(s||un(e,"get",n),i)?a:mt(a)?o&&Nh(n)?a:a.value:st(a)?s?$h(a):Ho(a):a}}class Kp extends Gp{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const l=ai(i);if(!Ya(r)&&!ai(r)&&(i=Be(i),r=Be(r)),!Ee(e)&&mt(i)&&!mt(r))return l?!1:(i.value=r,!0)}const o=Ee(e)&&Nh(n)?Number(n)<e.length:We(e,n),a=Reflect.set(e,n,r,s);return e===Be(s)&&(o?Kr(r,i)&&fr(e,"set",n,r):fr(e,"add",n,r)),a}deleteProperty(e,n){const r=We(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&fr(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!bi(n)||!qp.has(n))&&un(e,"has",n),r}ownKeys(e){return un(e,"iterate",Ee(e)?"length":Es),Reflect.ownKeys(e)}}class ov extends Gp{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const av=new Kp,lv=new ov,cv=new Kp(!0),Vh=t=>t,Ll=t=>Reflect.getPrototypeOf(t);function ma(t,e,n=!1,r=!1){t=t.__v_raw;const s=Be(t),i=Be(e);n||(Kr(e,i)&&un(s,"get",e),un(s,"get",i));const{has:o}=Ll(s),a=r?Vh:n?Bh:mo;if(o.call(s,e))return a(t.get(e));if(o.call(s,i))return a(t.get(i));t!==s&&t.get(e)}function pa(t,e=!1){const n=this.__v_raw,r=Be(n),s=Be(t);return e||(Kr(t,s)&&un(r,"has",t),un(r,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function ga(t,e=!1){return t=t.__v_raw,!e&&un(Be(t),"iterate",Es),Reflect.get(t,"size",t)}function yd(t){t=Be(t);const e=Be(this);return Ll(e).has.call(e,t)||(e.add(t),fr(e,"add",t,t)),this}function vd(t,e){e=Be(e);const n=Be(this),{has:r,get:s}=Ll(n);let i=r.call(n,t);i||(t=Be(t),i=r.call(n,t));const o=s.call(n,t);return n.set(t,e),i?Kr(e,o)&&fr(n,"set",t,e):fr(n,"add",t,e),this}function Ed(t){const e=Be(this),{has:n,get:r}=Ll(e);let s=n.call(e,t);s||(t=Be(t),s=n.call(e,t)),r&&r.call(e,t);const i=e.delete(t);return s&&fr(e,"delete",t,void 0),i}function wd(){const t=Be(this),e=t.size!==0,n=t.clear();return e&&fr(t,"clear",void 0,void 0),n}function _a(t,e){return function(r,s){const i=this,o=i.__v_raw,a=Be(o),l=e?Vh:t?Bh:mo;return!t&&un(a,"iterate",Es),o.forEach((c,u)=>r.call(s,l(c),l(u),i))}}function ya(t,e,n){return function(...r){const s=this.__v_raw,i=Be(s),o=Zs(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=s[t](...r),u=n?Vh:e?Bh:mo;return!e&&un(i,"iterate",l?Tu:Es),{next(){const{value:f,done:h}=c.next();return h?{value:f,done:h}:{value:a?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function wr(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function uv(){const t={get(i){return ma(this,i)},get size(){return ga(this)},has:pa,add:yd,set:vd,delete:Ed,clear:wd,forEach:_a(!1,!1)},e={get(i){return ma(this,i,!1,!0)},get size(){return ga(this)},has:pa,add:yd,set:vd,delete:Ed,clear:wd,forEach:_a(!1,!0)},n={get(i){return ma(this,i,!0)},get size(){return ga(this,!0)},has(i){return pa.call(this,i,!0)},add:wr("add"),set:wr("set"),delete:wr("delete"),clear:wr("clear"),forEach:_a(!0,!1)},r={get(i){return ma(this,i,!0,!0)},get size(){return ga(this,!0)},has(i){return pa.call(this,i,!0)},add:wr("add"),set:wr("set"),delete:wr("delete"),clear:wr("clear"),forEach:_a(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=ya(i,!1,!1),n[i]=ya(i,!0,!1),e[i]=ya(i,!1,!0),r[i]=ya(i,!0,!0)}),[t,n,e,r]}const[hv,fv,dv,mv]=uv();function Fh(t,e){const n=e?t?mv:dv:t?fv:hv;return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(We(n,s)&&s in r?n:r,s,i)}const pv={get:Fh(!1,!1)},gv={get:Fh(!1,!0)},_v={get:Fh(!0,!1)},zp=new WeakMap,Qp=new WeakMap,Yp=new WeakMap,yv=new WeakMap;function vv(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ev(t){return t.__v_skip||!Object.isExtensible(t)?0:vv(jy(t))}function Ho(t){return ai(t)?t:Uh(t,!1,av,pv,zp)}function Xp(t){return Uh(t,!1,cv,gv,Qp)}function $h(t){return Uh(t,!0,lv,_v,Yp)}function Uh(t,e,n,r,s){if(!st(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=s.get(t);if(i)return i;const o=Ev(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return s.set(t,a),a}function dr(t){return ai(t)?dr(t.__v_raw):!!(t&&t.__v_isReactive)}function ai(t){return!!(t&&t.__v_isReadonly)}function Ya(t){return!!(t&&t.__v_isShallow)}function Jp(t){return dr(t)||ai(t)}function Be(t){const e=t&&t.__v_raw;return e?Be(e):t}function Dl(t){return Object.isExtensible(t)&&za(t,"__v_skip",!0),t}const mo=t=>st(t)?Ho(t):t,Bh=t=>st(t)?$h(t):t;class Zp{constructor(e,n,r,s){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new xh(()=>e(this._value),()=>Ma(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const e=Be(this);return(!e._cacheable||e.effect.dirty)&&Kr(e._value,e._value=e.effect.run())&&Ma(e,4),eg(e),e.effect._dirtyLevel>=2&&Ma(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function wv(t,e,n=!1){let r,s;const i=Oe(t);return i?(r=t,s=Sn):(r=t.get,s=t.set),new Zp(r,s,i||!s,n)}function eg(t){var e;jr&&vs&&(t=Be(t),jp(vs,(e=t.dep)!=null?e:t.dep=Hp(()=>t.dep=void 0,t instanceof Zp?t:void 0)))}function Ma(t,e=4,n){t=Be(t);const r=t.dep;r&&Wp(r,e)}function mt(t){return!!(t&&t.__v_isRef===!0)}function Z(t){return tg(t,!1)}function qo(t){return tg(t,!0)}function tg(t,e){return mt(t)?t:new bv(t,e)}class bv{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Be(e),this._value=n?e:mo(e)}get value(){return eg(this),this._value}set value(e){const n=this.__v_isShallow||Ya(e)||ai(e);e=n?e:Be(e),Kr(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:mo(e),Ma(this,4))}}function $(t){return mt(t)?t.value:t}const Tv={get:(t,e,n)=>$(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return mt(s)&&!mt(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function ng(t){return dr(t)?t:new Proxy(t,Tv)}function Iv(t){const e=Ee(t)?new Array(t.length):{};for(const n in t)e[n]=rg(t,n);return e}class Cv{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return nv(Be(this._object),this._key)}}class Av{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function Sv(t,e,n){return mt(t)?t:Oe(t)?new Av(t):st(t)&&arguments.length>1?rg(t,e,n):Z(t)}function rg(t,e,n){const r=t[e];return mt(r)?r:new Cv(t,e,n)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Wr(t,e,n,r){try{return r?t(...r):t()}catch(s){xl(s,e,n)}}function Rn(t,e,n,r){if(Oe(t)){const i=Wr(t,e,n,r);return i&&Lp(i)&&i.catch(o=>{xl(o,e,n)}),i}const s=[];for(let i=0;i<t.length;i++)s.push(Rn(t[i],e,n,r));return s}function xl(t,e,n,r=!0){const s=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a="https://vuejs.org/error-reference/#runtime-".concat(n);for(;i;){const c=i.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,o,a)===!1)return}i=i.parent}const l=e.appContext.config.errorHandler;if(l){Wr(l,null,10,[t,o,a]);return}}Rv(t,n,s,r)}function Rv(t,e,n,r=!0){console.error(t)}let po=!1,Iu=!1;const Ht=[];let Gn=0;const ei=[];let Dr=null,fs=0;const sg=Promise.resolve();let jh=null;function Go(t){const e=jh||sg;return t?e.then(this?t.bind(this):t):e}function Pv(t){let e=Gn+1,n=Ht.length;for(;e<n;){const r=e+n>>>1,s=Ht[r],i=go(s);i<t||i===t&&s.pre?e=r+1:n=r}return e}function Wh(t){(!Ht.length||!Ht.includes(t,po&&t.allowRecurse?Gn+1:Gn))&&(t.id==null?Ht.push(t):Ht.splice(Pv(t.id),0,t),ig())}function ig(){!po&&!Iu&&(Iu=!0,jh=sg.then(ag))}function kv(t){const e=Ht.indexOf(t);e>Gn&&Ht.splice(e,1)}function Nv(t){Ee(t)?ei.push(...t):(!Dr||!Dr.includes(t,t.allowRecurse?fs+1:fs))&&ei.push(t),ig()}function bd(t,e,n=po?Gn+1:0){for(;n<Ht.length;n++){const r=Ht[n];if(r&&r.pre){if(t&&r.id!==t.uid)continue;Ht.splice(n,1),n--,r()}}}function og(t){if(ei.length){const e=[...new Set(ei)].sort((n,r)=>go(n)-go(r));if(ei.length=0,Dr){Dr.push(...e);return}for(Dr=e,fs=0;fs<Dr.length;fs++)Dr[fs]();Dr=null,fs=0}}const go=t=>t.id==null?1/0:t.id,Lv=(t,e)=>{const n=go(t)-go(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function ag(t){Iu=!1,po=!0,Ht.sort(Lv);try{for(Gn=0;Gn<Ht.length;Gn++){const e=Ht[Gn];e&&e.active!==!1&&Wr(e,null,14)}}finally{Gn=0,Ht.length=0,og(),po=!1,jh=null,(Ht.length||ei.length)&&ag()}}function Dv(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||lt;let s=n;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in r){const u="".concat(o==="modelValue"?"model":o,"Modifiers"),{number:f,trim:h}=r[u]||lt;h&&(s=n.map(p=>dt(p)?p.trim():p)),f&&(s=n.map(qy))}let a,l=r[a=Ac(e)]||r[a=Ac(er(e))];!l&&i&&(l=r[a=Ac(Ti(e))]),l&&Rn(l,t,6,s);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Rn(c,t,6,s)}}function lg(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!Oe(t)){const l=c=>{const u=lg(c,e,!0);u&&(a=!0,vt(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(st(t)&&r.set(t,null),null):(Ee(i)?i.forEach(l=>o[l]=null):vt(o,i),st(t)&&r.set(t,o),o)}function Ml(t,e){return!t||!Sl(e)?!1:(e=e.slice(2).replace(/Once$/,""),We(t,e[0].toLowerCase()+e.slice(1))||We(t,Ti(e))||We(t,e))}let _n=null,Ol=null;function Xa(t){const e=_n;return _n=t,Ol=t&&t.type.__scopeId||null,e}function cg(t){Ol=t}function ug(){Ol=null}function hg(t,e=_n,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&xd(-1);const i=Xa(e);let o;try{o=t(...s)}finally{Xa(i),r._d&&xd(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Pc(t){const{type:e,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:f,data:h,setupState:p,ctx:g,inheritAttrs:E}=t;let v,_;const w=Xa(t);try{if(n.shapeFlag&4){const b=s||r,N=b;v=qn(u.call(N,b,f,i,p,h,g)),_=l}else{const b=e;v=qn(b.length>1?b(i,{attrs:l,slots:a,emit:c}):b(i,null)),_=e.props?l:xv(l)}}catch(b){ro.length=0,xl(b,t,1),v=ke(On)}let T=v;if(_&&E!==!1){const b=Object.keys(_),{shapeFlag:N}=T;b.length&&N&7&&(o&&b.some(Ph)&&(_=Mv(_,o)),T=zr(T,_))}return n.dirs&&(T=zr(T),T.dirs=T.dirs?T.dirs.concat(n.dirs):n.dirs),n.transition&&(T.transition=n.transition),v=T,Xa(w),v}const xv=t=>{let e;for(const n in t)(n==="class"||n==="style"||Sl(n))&&((e||(e={}))[n]=t[n]);return e},Mv=(t,e)=>{const n={};for(const r in t)(!Ph(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function Ov(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Td(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const h=u[f];if(o[h]!==r[h]&&!Ml(c,h))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Td(r,o,c):!0:!!o;return!1}function Td(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!Ml(n,i))return!0}return!1}function Vv({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Hh="components";function Ja(t,e){return dg(Hh,t,!0,e)||t}const fg=Symbol.for("v-ndc");function Fv(t){return dt(t)?dg(Hh,t,!1)||t:t||fg}function dg(t,e,n=!0,r=!1){const s=_n||Pt;if(s){const i=s.type;if(t===Hh){const a=PE(i,!1);if(a&&(a===e||a===er(e)||a===kl(er(e))))return i}const o=Id(s[t]||i[t],e)||Id(s.appContext[t],e);return!o&&r?i:o}}function Id(t,e){return t&&(t[e]||t[er(e)]||t[kl(er(e))])}const $v=t=>t.__isSuspense;function Uv(t,e){e&&e.pendingBranch?Ee(t)?e.effects.push(...t):e.effects.push(t):Nv(t)}const Bv=Symbol.for("v-scx"),jv=()=>Pn(Bv);function Wv(t,e){return qh(t,null,{flush:"post"})}const va={};function xn(t,e,n){return qh(t,e,n)}function qh(t,e,{immediate:n,deep:r,flush:s,once:i,onTrack:o,onTrigger:a}=lt){if(e&&i){const S=e;e=(...V)=>{S(...V),N()}}const l=Pt,c=S=>r===!0?S:Qs(S,r===!1?1:void 0);let u,f=!1,h=!1;if(mt(t)?(u=()=>t.value,f=Ya(t)):dr(t)?(u=()=>c(t),f=!0):Ee(t)?(h=!0,f=t.some(S=>dr(S)||Ya(S)),u=()=>t.map(S=>{if(mt(S))return S.value;if(dr(S))return c(S);if(Oe(S))return Wr(S,l,2)})):Oe(t)?e?u=()=>Wr(t,l,2):u=()=>(p&&p(),Rn(t,l,3,[g])):u=Sn,e&&r){const S=u;u=()=>Qs(S())}let p,g=S=>{p=T.onStop=()=>{Wr(S,l,4),p=T.onStop=void 0}},E;if(Bl)if(g=Sn,e?n&&Rn(e,l,3,[u(),h?[]:void 0,g]):u(),s==="sync"){const S=jv();E=S.__watcherHandles||(S.__watcherHandles=[])}else return Sn;let v=h?new Array(t.length).fill(va):va;const _=()=>{if(!(!T.active||!T.dirty))if(e){const S=T.run();(r||f||(h?S.some((V,P)=>Kr(V,v[P])):Kr(S,v)))&&(p&&p(),Rn(e,l,3,[S,v===va?void 0:h&&v[0]===va?[]:v,g]),v=S)}else T.run()};_.allowRecurse=!!e;let w;s==="sync"?w=_:s==="post"?w=()=>sn(_,l&&l.suspense):(_.pre=!0,l&&(_.id=l.uid),w=()=>Wh(_));const T=new xh(u,Sn,w),b=Dh(),N=()=>{T.stop(),b&&kh(b.effects,T)};return e?n?_():v=T.run():s==="post"?sn(T.run.bind(T),l&&l.suspense):T.run(),E&&E.push(N),N}function Hv(t,e,n){const r=this.proxy,s=dt(t)?t.includes(".")?mg(r,t):()=>r[t]:t.bind(r,r);let i;Oe(e)?i=e:(i=e.handler,n=e);const o=zo(this),a=qh(s,i.bind(r),n);return o(),a}function mg(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function Qs(t,e,n=0,r){if(!st(t)||t.__v_skip)return t;if(e&&e>0){if(n>=e)return t;n++}if(r=r||new Set,r.has(t))return t;if(r.add(t),mt(t))Qs(t.value,e,n,r);else if(Ee(t))for(let s=0;s<t.length;s++)Qs(t[s],e,n,r);else if(Np(t)||Zs(t))t.forEach(s=>{Qs(s,e,n,r)});else if(xp(t))for(const s in t)Qs(t[s],e,n,r);return t}function is(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(Ns(),Rn(l,n,8,[t.el,a,t,e]),Ls())}}const xr=Symbol("_leaveCb"),Ea=Symbol("_enterCb");function pg(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Mn(()=>{t.isMounted=!0}),ti(()=>{t.isUnmounting=!0}),t}const bn=[Function,Array],gg={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:bn,onEnter:bn,onAfterEnter:bn,onEnterCancelled:bn,onBeforeLeave:bn,onLeave:bn,onAfterLeave:bn,onLeaveCancelled:bn,onBeforeAppear:bn,onAppear:bn,onAfterAppear:bn,onAppearCancelled:bn},qv={name:"BaseTransition",props:gg,setup(t,{slots:e}){const n=pr(),r=pg();return()=>{const s=e.default&&Gh(e.default(),!0);if(!s||!s.length)return;let i=s[0];if(s.length>1){for(const h of s)if(h.type!==On){i=h;break}}const o=Be(t),{mode:a}=o;if(r.isLeaving)return kc(i);const l=Cd(i);if(!l)return kc(i);const c=_o(l,o,r,n);yo(l,c);const u=n.subTree,f=u&&Cd(u);if(f&&f.type!==On&&!ds(l,f)){const h=_o(f,o,r,n);if(yo(f,h),a==="out-in")return r.isLeaving=!0,h.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},kc(i);a==="in-out"&&l.type!==On&&(h.delayLeave=(p,g,E)=>{const v=_g(r,f);v[String(f.key)]=f,p[xr]=()=>{g(),p[xr]=void 0,delete c.delayedLeave},c.delayedLeave=E})}return i}}},Gv=qv;function _g(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function _o(t,e,n,r){const{appear:s,mode:i,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:f,onLeave:h,onAfterLeave:p,onLeaveCancelled:g,onBeforeAppear:E,onAppear:v,onAfterAppear:_,onAppearCancelled:w}=e,T=String(t.key),b=_g(n,t),N=(P,k)=>{P&&Rn(P,r,9,k)},S=(P,k)=>{const M=k[1];N(P,k),Ee(P)?P.every(D=>D.length<=1)&&M():P.length<=1&&M()},V={mode:i,persisted:o,beforeEnter(P){let k=a;if(!n.isMounted)if(s)k=E||a;else return;P[xr]&&P[xr](!0);const M=b[T];M&&ds(t,M)&&M.el[xr]&&M.el[xr](),N(k,[P])},enter(P){let k=l,M=c,D=u;if(!n.isMounted)if(s)k=v||l,M=_||c,D=w||u;else return;let L=!1;const G=P[Ea]=ge=>{L||(L=!0,ge?N(D,[P]):N(M,[P]),V.delayedLeave&&V.delayedLeave(),P[Ea]=void 0)};k?S(k,[P,G]):G()},leave(P,k){const M=String(t.key);if(P[Ea]&&P[Ea](!0),n.isUnmounting)return k();N(f,[P]);let D=!1;const L=P[xr]=G=>{D||(D=!0,k(),G?N(g,[P]):N(p,[P]),P[xr]=void 0,b[M]===t&&delete b[M])};b[M]=t,h?S(h,[P,L]):L()},clone(P){return _o(P,e,n,r)}};return V}function kc(t){if(Vl(t))return t=zr(t),t.children=null,t}function Cd(t){return Vl(t)?t.children?t.children[0]:void 0:t}function yo(t,e){t.shapeFlag&6&&t.component?yo(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Gh(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Ze?(o.patchFlag&128&&s++,r=r.concat(Gh(o.children,e,a))):(e||o.type!==On)&&r.push(a!=null?zr(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function ft(t,e){return Oe(t)?vt({name:t.name},e,{setup:t}):t}const Oa=t=>!!t.type.__asyncLoader,Vl=t=>t.type.__isKeepAlive;function Kv(t,e){yg(t,"a",e)}function zv(t,e){yg(t,"da",e)}function yg(t,e,n=Pt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Fl(e,r,n),n){let s=n.parent;for(;s&&s.parent;)Vl(s.parent.vnode)&&Qv(r,e,n,s),s=s.parent}}function Qv(t,e,n,r){const s=Fl(e,t,r,!0);$l(()=>{kh(r[e],s)},n)}function Fl(t,e,n=Pt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;Ns();const a=zo(n),l=Rn(e,n,t,o);return a(),Ls(),l});return r?s.unshift(i):s.push(i),i}}const vr=t=>(e,n=Pt)=>(!Bl||t==="sp")&&Fl(t,(...r)=>e(...r),n),vg=vr("bm"),Mn=vr("m"),Yv=vr("bu"),Kh=vr("u"),ti=vr("bum"),$l=vr("um"),Xv=vr("sp"),Jv=vr("rtg"),Zv=vr("rtc");function eE(t,e=Pt){Fl("ec",t,e)}function qi(t,e,n,r){let s;const i=n&&n[r];if(Ee(t)||dt(t)){s=new Array(t.length);for(let o=0,a=t.length;o<a;o++)s[o]=e(t[o],o,void 0,i&&i[o])}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,i&&i[o])}else if(st(t))if(t[Symbol.iterator])s=Array.from(t,(o,a)=>e(o,a,void 0,i&&i[a]));else{const o=Object.keys(t);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];s[a]=e(t[c],c,a,i&&i[a])}}else s=[];return n&&(n[r]=s),s}const Cu=t=>t?Dg(t)?Jh(t)||t.proxy:Cu(t.parent):null,to=vt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Cu(t.parent),$root:t=>Cu(t.root),$emit:t=>t.emit,$options:t=>zh(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,Wh(t.update)}),$nextTick:t=>t.n||(t.n=Go.bind(t.proxy)),$watch:t=>Hv.bind(t)}),Nc=(t,e)=>t!==lt&&!t.__isScriptSetup&&We(t,e),tE={get({_:t},e){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(Nc(r,e))return o[e]=1,r[e];if(s!==lt&&We(s,e))return o[e]=2,s[e];if((c=t.propsOptions[0])&&We(c,e))return o[e]=3,i[e];if(n!==lt&&We(n,e))return o[e]=4,n[e];Au&&(o[e]=0)}}const u=to[e];let f,h;if(u)return e==="$attrs"&&un(t,"get",e),u(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(n!==lt&&We(n,e))return o[e]=4,n[e];if(h=l.config.globalProperties,We(h,e))return h[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return Nc(s,e)?(s[e]=n,!0):r!==lt&&We(r,e)?(r[e]=n,!0):We(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||t!==lt&&We(t,o)||Nc(e,o)||(a=i[0])&&We(a,o)||We(r,o)||We(to,o)||We(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:We(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Ad(t){return Ee(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Au=!0;function nE(t){const e=zh(t),n=t.proxy,r=t.ctx;Au=!1,e.beforeCreate&&Sd(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:f,mounted:h,beforeUpdate:p,updated:g,activated:E,deactivated:v,beforeDestroy:_,beforeUnmount:w,destroyed:T,unmounted:b,render:N,renderTracked:S,renderTriggered:V,errorCaptured:P,serverPrefetch:k,expose:M,inheritAttrs:D,components:L,directives:G,filters:ge}=e;if(c&&rE(c,r,null),o)for(const we in o){const be=o[we];Oe(be)&&(r[we]=be.bind(n))}if(s){const we=s.call(n,n);st(we)&&(t.data=Ho(we))}if(Au=!0,i)for(const we in i){const be=i[we],tt=Oe(be)?be.bind(n,n):Oe(be.get)?be.get.bind(n,n):Sn,Je=!Oe(be)&&Oe(be.set)?be.set.bind(n):Sn,Te=ue({get:tt,set:Je});Object.defineProperty(r,we,{enumerable:!0,configurable:!0,get:()=>Te.value,set:$e=>Te.value=$e})}if(a)for(const we in a)Eg(a[we],r,n,we);if(l){const we=Oe(l)?l.call(n):l;Reflect.ownKeys(we).forEach(be=>{Va(be,we[be])})}u&&Sd(u,t,"c");function me(we,be){Ee(be)?be.forEach(tt=>we(tt.bind(n))):be&&we(be.bind(n))}if(me(vg,f),me(Mn,h),me(Yv,p),me(Kh,g),me(Kv,E),me(zv,v),me(eE,P),me(Zv,S),me(Jv,V),me(ti,w),me($l,b),me(Xv,k),Ee(M))if(M.length){const we=t.exposed||(t.exposed={});M.forEach(be=>{Object.defineProperty(we,be,{get:()=>n[be],set:tt=>n[be]=tt})})}else t.exposed||(t.exposed={});N&&t.render===Sn&&(t.render=N),D!=null&&(t.inheritAttrs=D),L&&(t.components=L),G&&(t.directives=G)}function rE(t,e,n=Sn){Ee(t)&&(t=Su(t));for(const r in t){const s=t[r];let i;st(s)?"default"in s?i=Pn(s.from||r,s.default,!0):i=Pn(s.from||r):i=Pn(s),mt(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function Sd(t,e,n){Rn(Ee(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Eg(t,e,n,r){const s=r.includes(".")?mg(n,r):()=>n[r];if(dt(t)){const i=e[t];Oe(i)&&xn(s,i)}else if(Oe(t))xn(s,t.bind(n));else if(st(t))if(Ee(t))t.forEach(i=>Eg(i,e,n,r));else{const i=Oe(t.handler)?t.handler.bind(n):e[t.handler];Oe(i)&&xn(s,i,t)}}function zh(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(c=>Za(l,c,o,!0)),Za(l,e,o)),st(e)&&i.set(e,l),l}function Za(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&Za(t,i,n,!0),s&&s.forEach(o=>Za(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=sE[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const sE={data:Rd,props:Pd,emits:Pd,methods:Gi,computed:Gi,beforeCreate:Xt,created:Xt,beforeMount:Xt,mounted:Xt,beforeUpdate:Xt,updated:Xt,beforeDestroy:Xt,beforeUnmount:Xt,destroyed:Xt,unmounted:Xt,activated:Xt,deactivated:Xt,errorCaptured:Xt,serverPrefetch:Xt,components:Gi,directives:Gi,watch:oE,provide:Rd,inject:iE};function Rd(t,e){return e?t?function(){return vt(Oe(t)?t.call(this,this):t,Oe(e)?e.call(this,this):e)}:e:t}function iE(t,e){return Gi(Su(t),Su(e))}function Su(t){if(Ee(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Xt(t,e){return t?[...new Set([].concat(t,e))]:e}function Gi(t,e){return t?vt(Object.create(null),t,e):e}function Pd(t,e){return t?Ee(t)&&Ee(e)?[...new Set([...t,...e])]:vt(Object.create(null),Ad(t),Ad(e!=null?e:{})):e}function oE(t,e){if(!t)return e;if(!e)return t;const n=vt(Object.create(null),t);for(const r in e)n[r]=Xt(t[r],e[r]);return n}function wg(){return{app:null,config:{isNativeTag:Uy,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let aE=0;function lE(t,e){return function(r,s=null){Oe(r)||(r=vt({},r)),s!=null&&!st(s)&&(s=null);const i=wg(),o=new WeakSet;let a=!1;const l=i.app={_uid:aE++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:NE,get config(){return i.config},set config(c){},use(c,...u){return o.has(c)||(c&&Oe(c.install)?(o.add(c),c.install(l,...u)):Oe(c)&&(o.add(c),c(l,...u))),l},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),l},component(c,u){return u?(i.components[c]=u,l):i.components[c]},directive(c,u){return u?(i.directives[c]=u,l):i.directives[c]},mount(c,u,f){if(!a){const h=ke(r,s);return h.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),u&&e?e(h,c):t(h,c,f),a=!0,l._container=c,c.__vue_app__=l,Jh(h.component)||h.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return i.provides[c]=u,l},runWithContext(c){const u=ni;ni=l;try{return c()}finally{ni=u}}};return l}}let ni=null;function Va(t,e){if(Pt){let n=Pt.provides;const r=Pt.parent&&Pt.parent.provides;r===n&&(n=Pt.provides=Object.create(r)),n[t]=e}}function Pn(t,e,n=!1){const r=Pt||_n;if(r||ni){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:ni._context.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Oe(e)?e.call(r&&r.proxy):e}}function cE(){return!!(Pt||_n||ni)}function uE(t,e,n,r=!1){const s={},i={};za(i,Ul,1),t.propsDefaults=Object.create(null),bg(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:Xp(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function hE(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=Be(s),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let f=0;f<u.length;f++){let h=u[f];if(Ml(t.emitsOptions,h))continue;const p=e[h];if(l)if(We(i,h))p!==i[h]&&(i[h]=p,c=!0);else{const g=er(h);s[g]=Ru(l,a,g,p,t,!1)}else p!==i[h]&&(i[h]=p,c=!0)}}}else{bg(t,e,s,i)&&(c=!0);let u;for(const f in a)(!e||!We(e,f)&&((u=Ti(f))===f||!We(e,u)))&&(l?n&&(n[f]!==void 0||n[u]!==void 0)&&(s[f]=Ru(l,a,f,void 0,t,!0)):delete s[f]);if(i!==a)for(const f in i)(!e||!We(e,f))&&(delete i[f],c=!0)}c&&fr(t,"set","$attrs")}function bg(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(eo(l))continue;const c=e[l];let u;s&&We(s,u=er(l))?!i||!i.includes(u)?n[u]=c:(a||(a={}))[u]=c:Ml(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(i){const l=Be(n),c=a||lt;for(let u=0;u<i.length;u++){const f=i[u];n[f]=Ru(s,l,f,c[f],t,!We(c,f))}}return o}function Ru(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=We(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Oe(l)){const{propsDefaults:c}=s;if(n in c)r=c[n];else{const u=zo(s);r=c[n]=l.call(null,e),u()}}else r=l}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Ti(n))&&(r=!0))}return r}function Tg(t,e,n=!1){const r=e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let l=!1;if(!Oe(t)){const u=f=>{l=!0;const[h,p]=Tg(f,e,!0);vt(o,h),p&&a.push(...p)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return st(t)&&r.set(t,Js),Js;if(Ee(i))for(let u=0;u<i.length;u++){const f=er(i[u]);kd(f)&&(o[f]=lt)}else if(i)for(const u in i){const f=er(u);if(kd(f)){const h=i[u],p=o[f]=Ee(h)||Oe(h)?{type:h}:vt({},h);if(p){const g=Dd(Boolean,p.type),E=Dd(String,p.type);p[0]=g>-1,p[1]=E<0||g<E,(g>-1||We(p,"default"))&&a.push(f)}}}const c=[o,a];return st(t)&&r.set(t,c),c}function kd(t){return t[0]!=="$"&&!eo(t)}function Nd(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function Ld(t,e){return Nd(t)===Nd(e)}function Dd(t,e){return Ee(e)?e.findIndex(n=>Ld(n,t)):Oe(e)&&Ld(e,t)?0:-1}const Ig=t=>t[0]==="_"||t==="$stable",Qh=t=>Ee(t)?t.map(qn):[qn(t)],fE=(t,e,n)=>{if(e._n)return e;const r=hg((...s)=>Qh(e(...s)),n);return r._c=!1,r},Cg=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Ig(s))continue;const i=t[s];if(Oe(i))e[s]=fE(s,i,r);else if(i!=null){const o=Qh(i);e[s]=()=>o}}},Ag=(t,e)=>{const n=Qh(e);t.slots.default=()=>n},dE=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Be(e),za(e,"_",n)):Cg(e,t.slots={})}else t.slots={},e&&Ag(t,e);za(t.slots,Ul,1)},mE=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=lt;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:(vt(s,e),!n&&a===1&&delete s._):(i=!e.$stable,Cg(e,s)),o=e}else e&&(Ag(t,e),o={default:1});if(i)for(const a in s)!Ig(a)&&o[a]==null&&delete s[a]};function Pu(t,e,n,r,s=!1){if(Ee(t)){t.forEach((h,p)=>Pu(h,e&&(Ee(e)?e[p]:e),n,r,s));return}if(Oa(r)&&!s)return;const i=r.shapeFlag&4?Jh(r.component)||r.component.proxy:r.el,o=s?null:i,{i:a,r:l}=t,c=e&&e.r,u=a.refs===lt?a.refs={}:a.refs,f=a.setupState;if(c!=null&&c!==l&&(dt(c)?(u[c]=null,We(f,c)&&(f[c]=null)):mt(c)&&(c.value=null)),Oe(l))Wr(l,a,12,[o,u]);else{const h=dt(l),p=mt(l);if(h||p){const g=()=>{if(t.f){const E=h?We(f,l)?f[l]:u[l]:l.value;s?Ee(E)&&kh(E,i):Ee(E)?E.includes(i)||E.push(i):h?(u[l]=[i],We(f,l)&&(f[l]=u[l])):(l.value=[i],t.k&&(u[t.k]=l.value))}else h?(u[l]=o,We(f,l)&&(f[l]=o)):p&&(l.value=o,t.k&&(u[t.k]=o))};o?(g.id=-1,sn(g,n)):g()}}}const sn=Uv;function pE(t){return gE(t)}function gE(t,e){const n=Mp();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:h,setScopeId:p=Sn,insertStaticContent:g}=t,E=(m,d,y,I=null,C=null,O=null,Y=void 0,q=null,X=!!d.dynamicChildren)=>{if(m===d)return;m&&!ds(m,d)&&(I=R(m),$e(m,C,O,!0),m=null),d.patchFlag===-2&&(X=!1,d.dynamicChildren=null);const{type:H,ref:ne,shapeFlag:fe}=d;switch(H){case Ko:v(m,d,y,I);break;case On:_(m,d,y,I);break;case no:m==null&&w(d,y,I,Y);break;case Ze:L(m,d,y,I,C,O,Y,q,X);break;default:fe&1?N(m,d,y,I,C,O,Y,q,X):fe&6?G(m,d,y,I,C,O,Y,q,X):(fe&64||fe&128)&&H.process(m,d,y,I,C,O,Y,q,X,z)}ne!=null&&C&&Pu(ne,m&&m.ref,O,d||m,!d)},v=(m,d,y,I)=>{if(m==null)r(d.el=a(d.children),y,I);else{const C=d.el=m.el;d.children!==m.children&&c(C,d.children)}},_=(m,d,y,I)=>{m==null?r(d.el=l(d.children||""),y,I):d.el=m.el},w=(m,d,y,I)=>{[m.el,m.anchor]=g(m.children,d,y,I,m.el,m.anchor)},T=({el:m,anchor:d},y,I)=>{let C;for(;m&&m!==d;)C=h(m),r(m,y,I),m=C;r(d,y,I)},b=({el:m,anchor:d})=>{let y;for(;m&&m!==d;)y=h(m),s(m),m=y;s(d)},N=(m,d,y,I,C,O,Y,q,X)=>{d.type==="svg"?Y="svg":d.type==="math"&&(Y="mathml"),m==null?S(d,y,I,C,O,Y,q,X):k(m,d,C,O,Y,q,X)},S=(m,d,y,I,C,O,Y,q)=>{let X,H;const{props:ne,shapeFlag:fe,transition:J,dirs:A}=m;if(X=m.el=o(m.type,O,ne&&ne.is,ne),fe&8?u(X,m.children):fe&16&&P(m.children,X,null,I,C,Lc(m,O),Y,q),A&&is(m,null,I,"created"),V(X,m,m.scopeId,Y,I),ne){for(const de in ne)de!=="value"&&!eo(de)&&i(X,de,null,ne[de],O,m.children,I,C,K);"value"in ne&&i(X,"value",null,ne.value,O),(H=ne.onVnodeBeforeMount)&&Wn(H,I,m)}A&&is(m,null,I,"beforeMount");const x=_E(C,J);x&&J.beforeEnter(X),r(X,d,y),((H=ne&&ne.onVnodeMounted)||x||A)&&sn(()=>{H&&Wn(H,I,m),x&&J.enter(X),A&&is(m,null,I,"mounted")},C)},V=(m,d,y,I,C)=>{if(y&&p(m,y),I)for(let O=0;O<I.length;O++)p(m,I[O]);if(C){let O=C.subTree;if(d===O){const Y=C.vnode;V(m,Y,Y.scopeId,Y.slotScopeIds,C.parent)}}},P=(m,d,y,I,C,O,Y,q,X=0)=>{for(let H=X;H<m.length;H++){const ne=m[H]=q?Mr(m[H]):qn(m[H]);E(null,ne,d,y,I,C,O,Y,q)}},k=(m,d,y,I,C,O,Y)=>{const q=d.el=m.el;let{patchFlag:X,dynamicChildren:H,dirs:ne}=d;X|=m.patchFlag&16;const fe=m.props||lt,J=d.props||lt;let A;if(y&&os(y,!1),(A=J.onVnodeBeforeUpdate)&&Wn(A,y,d,m),ne&&is(d,m,y,"beforeUpdate"),y&&os(y,!0),H?M(m.dynamicChildren,H,q,y,I,Lc(d,C),O):Y||be(m,d,q,null,y,I,Lc(d,C),O,!1),X>0){if(X&16)D(q,d,fe,J,y,I,C);else if(X&2&&fe.class!==J.class&&i(q,"class",null,J.class,C),X&4&&i(q,"style",fe.style,J.style,C),X&8){const x=d.dynamicProps;for(let de=0;de<x.length;de++){const ve=x[de],ze=fe[ve],gt=J[ve];(gt!==ze||ve==="value")&&i(q,ve,ze,gt,C,m.children,y,I,K)}}X&1&&m.children!==d.children&&u(q,d.children)}else!Y&&H==null&&D(q,d,fe,J,y,I,C);((A=J.onVnodeUpdated)||ne)&&sn(()=>{A&&Wn(A,y,d,m),ne&&is(d,m,y,"updated")},I)},M=(m,d,y,I,C,O,Y)=>{for(let q=0;q<d.length;q++){const X=m[q],H=d[q],ne=X.el&&(X.type===Ze||!ds(X,H)||X.shapeFlag&70)?f(X.el):y;E(X,H,ne,null,I,C,O,Y,!0)}},D=(m,d,y,I,C,O,Y)=>{if(y!==I){if(y!==lt)for(const q in y)!eo(q)&&!(q in I)&&i(m,q,y[q],null,Y,d.children,C,O,K);for(const q in I){if(eo(q))continue;const X=I[q],H=y[q];X!==H&&q!=="value"&&i(m,q,H,X,Y,d.children,C,O,K)}"value"in I&&i(m,"value",y.value,I.value,Y)}},L=(m,d,y,I,C,O,Y,q,X)=>{const H=d.el=m?m.el:a(""),ne=d.anchor=m?m.anchor:a("");let{patchFlag:fe,dynamicChildren:J,slotScopeIds:A}=d;A&&(q=q?q.concat(A):A),m==null?(r(H,y,I),r(ne,y,I),P(d.children||[],y,ne,C,O,Y,q,X)):fe>0&&fe&64&&J&&m.dynamicChildren?(M(m.dynamicChildren,J,y,C,O,Y,q),(d.key!=null||C&&d===C.subTree)&&Sg(m,d,!0)):be(m,d,y,ne,C,O,Y,q,X)},G=(m,d,y,I,C,O,Y,q,X)=>{d.slotScopeIds=q,m==null?d.shapeFlag&512?C.ctx.activate(d,y,I,Y,X):ge(d,y,I,C,O,Y,X):Ve(m,d,X)},ge=(m,d,y,I,C,O,Y)=>{const q=m.component=IE(m,I,C);if(Vl(m)&&(q.ctx.renderer=z),CE(q),q.asyncDep){if(C&&C.registerDep(q,me),!m.el){const X=q.subTree=ke(On);_(null,X,d,y)}}else me(q,m,d,y,C,O,Y)},Ve=(m,d,y)=>{const I=d.component=m.component;if(Ov(m,d,y))if(I.asyncDep&&!I.asyncResolved){we(I,d,y);return}else I.next=d,kv(I.update),I.effect.dirty=!0,I.update();else d.el=m.el,I.vnode=d},me=(m,d,y,I,C,O,Y)=>{const q=()=>{if(m.isMounted){let{next:ne,bu:fe,u:J,parent:A,vnode:x}=m;{const zt=Rg(m);if(zt){ne&&(ne.el=x.el,we(m,ne,Y)),zt.asyncDep.then(()=>{m.isUnmounted||q()});return}}let de=ne,ve;os(m,!1),ne?(ne.el=x.el,we(m,ne,Y)):ne=x,fe&&Sc(fe),(ve=ne.props&&ne.props.onVnodeBeforeUpdate)&&Wn(ve,A,ne,x),os(m,!0);const ze=Pc(m),gt=m.subTree;m.subTree=ze,E(gt,ze,f(gt.el),R(gt),m,C,O),ne.el=ze.el,de===null&&Vv(m,ze.el),J&&sn(J,C),(ve=ne.props&&ne.props.onVnodeUpdated)&&sn(()=>Wn(ve,A,ne,x),C)}else{let ne;const{el:fe,props:J}=d,{bm:A,m:x,parent:de}=m,ve=Oa(d);if(os(m,!1),A&&Sc(A),!ve&&(ne=J&&J.onVnodeBeforeMount)&&Wn(ne,de,d),os(m,!0),fe&&Ce){const ze=()=>{m.subTree=Pc(m),Ce(fe,m.subTree,m,C,null)};ve?d.type.__asyncLoader().then(()=>!m.isUnmounted&&ze()):ze()}else{const ze=m.subTree=Pc(m);E(null,ze,y,I,m,C,O),d.el=ze.el}if(x&&sn(x,C),!ve&&(ne=J&&J.onVnodeMounted)){const ze=d;sn(()=>Wn(ne,de,ze),C)}(d.shapeFlag&256||de&&Oa(de.vnode)&&de.vnode.shapeFlag&256)&&m.a&&sn(m.a,C),m.isMounted=!0,d=y=I=null}},X=m.effect=new xh(q,Sn,()=>Wh(H),m.scope),H=m.update=()=>{X.dirty&&X.run()};H.id=m.uid,os(m,!0),H()},we=(m,d,y)=>{d.component=m;const I=m.vnode.props;m.vnode=d,m.next=null,hE(m,d.props,I,y),mE(m,d.children,y),Ns(),bd(m),Ls()},be=(m,d,y,I,C,O,Y,q,X=!1)=>{const H=m&&m.children,ne=m?m.shapeFlag:0,fe=d.children,{patchFlag:J,shapeFlag:A}=d;if(J>0){if(J&128){Je(H,fe,y,I,C,O,Y,q,X);return}else if(J&256){tt(H,fe,y,I,C,O,Y,q,X);return}}A&8?(ne&16&&K(H,C,O),fe!==H&&u(y,fe)):ne&16?A&16?Je(H,fe,y,I,C,O,Y,q,X):K(H,C,O,!0):(ne&8&&u(y,""),A&16&&P(fe,y,I,C,O,Y,q,X))},tt=(m,d,y,I,C,O,Y,q,X)=>{m=m||Js,d=d||Js;const H=m.length,ne=d.length,fe=Math.min(H,ne);let J;for(J=0;J<fe;J++){const A=d[J]=X?Mr(d[J]):qn(d[J]);E(m[J],A,y,null,C,O,Y,q,X)}H>ne?K(m,C,O,!0,!1,fe):P(d,y,I,C,O,Y,q,X,fe)},Je=(m,d,y,I,C,O,Y,q,X)=>{let H=0;const ne=d.length;let fe=m.length-1,J=ne-1;for(;H<=fe&&H<=J;){const A=m[H],x=d[H]=X?Mr(d[H]):qn(d[H]);if(ds(A,x))E(A,x,y,null,C,O,Y,q,X);else break;H++}for(;H<=fe&&H<=J;){const A=m[fe],x=d[J]=X?Mr(d[J]):qn(d[J]);if(ds(A,x))E(A,x,y,null,C,O,Y,q,X);else break;fe--,J--}if(H>fe){if(H<=J){const A=J+1,x=A<ne?d[A].el:I;for(;H<=J;)E(null,d[H]=X?Mr(d[H]):qn(d[H]),y,x,C,O,Y,q,X),H++}}else if(H>J)for(;H<=fe;)$e(m[H],C,O,!0),H++;else{const A=H,x=H,de=new Map;for(H=x;H<=J;H++){const Yt=d[H]=X?Mr(d[H]):qn(d[H]);Yt.key!=null&&de.set(Yt.key,H)}let ve,ze=0;const gt=J-x+1;let zt=!1,Fs=0;const Qt=new Array(gt);for(H=0;H<gt;H++)Qt[H]=0;for(H=A;H<=fe;H++){const Yt=m[H];if(ze>=gt){$e(Yt,C,O,!0);continue}let En;if(Yt.key!=null)En=de.get(Yt.key);else for(ve=x;ve<=J;ve++)if(Qt[ve-x]===0&&ds(Yt,d[ve])){En=ve;break}En===void 0?$e(Yt,C,O,!0):(Qt[En-x]=H+1,En>=Fs?Fs=En:zt=!0,E(Yt,d[En],y,null,C,O,Y,q,X),ze++)}const Li=zt?yE(Qt):Js;for(ve=Li.length-1,H=gt-1;H>=0;H--){const Yt=x+H,En=d[Yt],fa=Yt+1<ne?d[Yt+1].el:I;Qt[H]===0?E(null,En,y,fa,C,O,Y,q,X):zt&&(ve<0||H!==Li[ve]?Te(En,y,fa,2):ve--)}}},Te=(m,d,y,I,C=null)=>{const{el:O,type:Y,transition:q,children:X,shapeFlag:H}=m;if(H&6){Te(m.component.subTree,d,y,I);return}if(H&128){m.suspense.move(d,y,I);return}if(H&64){Y.move(m,d,y,z);return}if(Y===Ze){r(O,d,y);for(let fe=0;fe<X.length;fe++)Te(X[fe],d,y,I);r(m.anchor,d,y);return}if(Y===no){T(m,d,y);return}if(I!==2&&H&1&&q)if(I===0)q.beforeEnter(O),r(O,d,y),sn(()=>q.enter(O),C);else{const{leave:fe,delayLeave:J,afterLeave:A}=q,x=()=>r(O,d,y),de=()=>{fe(O,()=>{x(),A&&A()})};J?J(O,x,de):de()}else r(O,d,y)},$e=(m,d,y,I=!1,C=!1)=>{const{type:O,props:Y,ref:q,children:X,dynamicChildren:H,shapeFlag:ne,patchFlag:fe,dirs:J}=m;if(q!=null&&Pu(q,null,y,m,!0),ne&256){d.ctx.deactivate(m);return}const A=ne&1&&J,x=!Oa(m);let de;if(x&&(de=Y&&Y.onVnodeBeforeUnmount)&&Wn(de,d,m),ne&6)ae(m.component,y,I);else{if(ne&128){m.suspense.unmount(y,I);return}A&&is(m,null,d,"beforeUnmount"),ne&64?m.type.remove(m,d,y,C,z,I):H&&(O!==Ze||fe>0&&fe&64)?K(H,d,y,!1,!0):(O===Ze&&fe&384||!C&&ne&16)&&K(X,d,y),I&&oe(m)}(x&&(de=Y&&Y.onVnodeUnmounted)||A)&&sn(()=>{de&&Wn(de,d,m),A&&is(m,null,d,"unmounted")},y)},oe=m=>{const{type:d,el:y,anchor:I,transition:C}=m;if(d===Ze){at(y,I);return}if(d===no){b(m);return}const O=()=>{s(y),C&&!C.persisted&&C.afterLeave&&C.afterLeave()};if(m.shapeFlag&1&&C&&!C.persisted){const{leave:Y,delayLeave:q}=C,X=()=>Y(y,O);q?q(m.el,O,X):X()}else O()},at=(m,d)=>{let y;for(;m!==d;)y=h(m),s(m),m=y;s(d)},ae=(m,d,y)=>{const{bum:I,scope:C,update:O,subTree:Y,um:q}=m;I&&Sc(I),C.stop(),O&&(O.active=!1,$e(Y,m,d,y)),q&&sn(q,d),sn(()=>{m.isUnmounted=!0},d),d&&d.pendingBranch&&!d.isUnmounted&&m.asyncDep&&!m.asyncResolved&&m.suspenseId===d.pendingId&&(d.deps--,d.deps===0&&d.resolve())},K=(m,d,y,I=!1,C=!1,O=0)=>{for(let Y=O;Y<m.length;Y++)$e(m[Y],d,y,I,C)},R=m=>m.shapeFlag&6?R(m.component.subTree):m.shapeFlag&128?m.suspense.next():h(m.anchor||m.el);let B=!1;const F=(m,d,y)=>{m==null?d._vnode&&$e(d._vnode,null,null,!0):E(d._vnode||null,m,d,null,null,null,y),B||(B=!0,bd(),og(),B=!1),d._vnode=m},z={p:E,um:$e,m:Te,r:oe,mt:ge,mc:P,pc:be,pbc:M,n:R,o:t};let _e,Ce;return e&&([_e,Ce]=e(z)),{render:F,hydrate:_e,createApp:lE(F,_e)}}function Lc({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function os({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function _E(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Sg(t,e,n=!1){const r=t.children,s=e.children;if(Ee(r)&&Ee(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Mr(s[i]),a.el=o.el),n||Sg(o,a)),a.type===Ko&&(a.el=o.el)}}function yE(t){const e=t.slice(),n=[0];let r,s,i,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(s=n[n.length-1],t[s]<c){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<c?i=a+1:o=a;c<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Rg(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Rg(e)}const vE=t=>t.__isTeleport,Ze=Symbol.for("v-fgt"),Ko=Symbol.for("v-txt"),On=Symbol.for("v-cmt"),no=Symbol.for("v-stc"),ro=[];let Ln=null;function Q(t=!1){ro.push(Ln=t?null:[])}function EE(){ro.pop(),Ln=ro[ro.length-1]||null}let vo=1;function xd(t){vo+=t}function Pg(t){return t.dynamicChildren=vo>0?Ln||Js:null,EE(),vo>0&&Ln&&Ln.push(t),t}function ce(t,e,n,r,s,i){return Pg(W(t,e,n,r,s,i,!0))}function et(t,e,n,r,s){return Pg(ke(t,e,n,r,s,!0))}function el(t){return t?t.__v_isVNode===!0:!1}function ds(t,e){return t.type===e.type&&t.key===e.key}const Ul="__vInternal",kg=({key:t})=>t!=null?t:null,Fa=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?dt(t)||mt(t)||Oe(t)?{i:_n,r:t,k:e,f:!!n}:t:null);function W(t,e=null,n=null,r=0,s=null,i=t===Ze?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&kg(e),ref:e&&Fa(e),scopeId:Ol,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:_n};return a?(Xh(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=dt(n)?8:16),vo>0&&!o&&Ln&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Ln.push(l),l}const ke=wE;function wE(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===fg)&&(t=On),el(t)){const a=zr(t,e,!0);return n&&Xh(a,n),vo>0&&!i&&Ln&&(a.shapeFlag&6?Ln[Ln.indexOf(t)]=a:Ln.push(a)),a.patchFlag|=-2,a}if(kE(t)&&(t=t.__vccOpts),e){e=Ng(e);let{class:a,style:l}=e;a&&!dt(a)&&(e.class=ut(a)),st(l)&&(Jp(l)&&!Ee(l)&&(l=vt({},l)),e.style=Nl(l))}const o=dt(t)?1:$v(t)?128:vE(t)?64:st(t)?4:Oe(t)?2:0;return W(t,e,n,r,s,o,i,!0)}function Ng(t){return t?Jp(t)||Ul in t?vt({},t):t:null}function zr(t,e,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=t,a=e?Lg(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&kg(a),ref:e&&e.ref?n&&s?Ee(s)?s.concat(Fa(e)):[s,Fa(e)]:Fa(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ze?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&zr(t.ssContent),ssFallback:t.ssFallback&&zr(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Yh(t=" ",e=0){return ke(Ko,null,t,e)}function sr(t,e){const n=ke(no,null,t);return n.staticCount=e,n}function jt(t="",e=!1){return e?(Q(),et(On,null,t)):ke(On,null,t)}function qn(t){return t==null||typeof t=="boolean"?ke(On):Ee(t)?ke(Ze,null,t.slice()):typeof t=="object"?Mr(t):ke(Ko,null,String(t))}function Mr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:zr(t)}function Xh(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Ee(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Xh(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!(Ul in e)?e._ctx=_n:s===3&&_n&&(_n.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Oe(e)?(e={default:e,_ctx:_n},n=32):(e=String(e),r&64?(n=16,e=[Yh(e)]):n=8);t.children=e,t.shapeFlag|=n}function Lg(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=ut([e.class,r.class]));else if(s==="style")e.style=Nl([e.style,r.style]);else if(Sl(s)){const i=e[s],o=r[s];o&&i!==o&&!(Ee(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function Wn(t,e,n,r=null){Rn(t,e,7,[n,r])}const bE=wg();let TE=0;function IE(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||bE,i={uid:TE++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Fp(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Tg(r,s),emitsOptions:lg(r,s),emit:null,emitted:null,propsDefaults:lt,inheritAttrs:r.inheritAttrs,ctx:lt,data:lt,props:lt,attrs:lt,slots:lt,refs:lt,setupState:lt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Dv.bind(null,i),t.ce&&t.ce(i),i}let Pt=null;const pr=()=>Pt||_n;let tl,ku;{const t=Mp(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};tl=e("__VUE_INSTANCE_SETTERS__",n=>Pt=n),ku=e("__VUE_SSR_SETTERS__",n=>Bl=n)}const zo=t=>{const e=Pt;return tl(t),t.scope.on(),()=>{t.scope.off(),tl(e)}},Md=()=>{Pt&&Pt.scope.off(),tl(null)};function Dg(t){return t.vnode.shapeFlag&4}let Bl=!1;function CE(t,e=!1){e&&ku(e);const{props:n,children:r}=t.vnode,s=Dg(t);uE(t,n,s,e),dE(t,r);const i=s?AE(t,e):void 0;return e&&ku(!1),i}function AE(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Dl(new Proxy(t.ctx,tE));const{setup:r}=n;if(r){const s=t.setupContext=r.length>1?RE(t):null,i=zo(t);Ns();const o=Wr(r,t,0,[t.props,s]);if(Ls(),i(),Lp(o)){if(o.then(Md,Md),e)return o.then(a=>{Od(t,a,e)}).catch(a=>{xl(a,t,0)});t.asyncDep=o}else Od(t,o,e)}else xg(t,e)}function Od(t,e,n){Oe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:st(e)&&(t.setupState=ng(e)),xg(t,n)}let Vd;function xg(t,e,n){const r=t.type;if(!t.render){if(!e&&Vd&&!r.render){const s=r.template||zh(t).template;if(s){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=vt(vt({isCustomElement:i,delimiters:a},o),l);r.render=Vd(s,c)}}t.render=r.render||Sn}{const s=zo(t);Ns();try{nE(t)}finally{Ls(),s()}}}function SE(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return un(t,"get","$attrs"),e[n]}}))}function RE(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return SE(t)},slots:t.slots,emit:t.emit,expose:e}}function Jh(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(ng(Dl(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in to)return to[n](t)},has(e,n){return n in e||n in to}}))}function PE(t,e=!0){return Oe(t)?t.displayName||t.name:t.name||e&&t.__name}function kE(t){return Oe(t)&&"__vccOpts"in t}const ue=(t,e)=>wv(t,e,Bl);function Qo(t,e,n){const r=arguments.length;return r===2?st(e)&&!Ee(e)?el(e)?ke(t,null,[e]):ke(t,e):ke(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&el(n)&&(n=[n]),ke(t,e,n))}const NE="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const LE="http://www.w3.org/2000/svg",DE="http://www.w3.org/1998/Math/MathML",Or=typeof document<"u"?document:null,Fd=Or&&Or.createElement("template"),xE={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?Or.createElementNS(LE,t):e==="mathml"?Or.createElementNS(DE,t):Or.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Or.createTextNode(t),createComment:t=>Or.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Or.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Fd.innerHTML=r==="svg"?"<svg>".concat(t,"</svg>"):r==="mathml"?"<math>".concat(t,"</math>"):t;const a=Fd.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},br="transition",Mi="animation",li=Symbol("_vtc"),Zh=(t,{slots:e})=>Qo(Gv,Og(t),e);Zh.displayName="Transition";const Mg={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ME=Zh.props=vt({},gg,Mg),as=(t,e=[])=>{Ee(t)?t.forEach(n=>n(...e)):t&&t(...e)},$d=t=>t?Ee(t)?t.some(e=>e.length>1):t.length>1:!1;function Og(t){const e={};for(const L in t)L in Mg||(e[L]=t[L]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i="".concat(n,"-enter-from"),enterActiveClass:o="".concat(n,"-enter-active"),enterToClass:a="".concat(n,"-enter-to"),appearFromClass:l=i,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:f="".concat(n,"-leave-from"),leaveActiveClass:h="".concat(n,"-leave-active"),leaveToClass:p="".concat(n,"-leave-to")}=t,g=OE(s),E=g&&g[0],v=g&&g[1],{onBeforeEnter:_,onEnter:w,onEnterCancelled:T,onLeave:b,onLeaveCancelled:N,onBeforeAppear:S=_,onAppear:V=w,onAppearCancelled:P=T}=e,k=(L,G,ge)=>{Nr(L,G?u:a),Nr(L,G?c:o),ge&&ge()},M=(L,G)=>{L._isLeaving=!1,Nr(L,f),Nr(L,p),Nr(L,h),G&&G()},D=L=>(G,ge)=>{const Ve=L?V:w,me=()=>k(G,L,ge);as(Ve,[G,me]),Ud(()=>{Nr(G,L?l:i),lr(G,L?u:a),$d(Ve)||Bd(G,r,E,me)})};return vt(e,{onBeforeEnter(L){as(_,[L]),lr(L,i),lr(L,o)},onBeforeAppear(L){as(S,[L]),lr(L,l),lr(L,c)},onEnter:D(!1),onAppear:D(!0),onLeave(L,G){L._isLeaving=!0;const ge=()=>M(L,G);lr(L,f),Fg(),lr(L,h),Ud(()=>{L._isLeaving&&(Nr(L,f),lr(L,p),$d(b)||Bd(L,r,v,ge))}),as(b,[L,ge])},onEnterCancelled(L){k(L,!1),as(T,[L])},onAppearCancelled(L){k(L,!0),as(P,[L])},onLeaveCancelled(L){M(L),as(N,[L])}})}function OE(t){if(t==null)return null;if(st(t))return[Dc(t.enter),Dc(t.leave)];{const e=Dc(t);return[e,e]}}function Dc(t){return Gy(t)}function lr(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[li]||(t[li]=new Set)).add(e)}function Nr(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[li];n&&(n.delete(e),n.size||(t[li]=void 0))}function Ud(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let VE=0;function Bd(t,e,n,r){const s=t._endId=++VE,i=()=>{s===t._endId&&r()};if(n)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=Vg(t,e);if(!o)return r();const c=o+"end";let u=0;const f=()=>{t.removeEventListener(c,h),i()},h=p=>{p.target===t&&++u>=l&&f()};setTimeout(()=>{u<l&&f()},a+1),t.addEventListener(c,h)}function Vg(t,e){const n=window.getComputedStyle(t),r=g=>(n[g]||"").split(", "),s=r("".concat(br,"Delay")),i=r("".concat(br,"Duration")),o=jd(s,i),a=r("".concat(Mi,"Delay")),l=r("".concat(Mi,"Duration")),c=jd(a,l);let u=null,f=0,h=0;e===br?o>0&&(u=br,f=o,h=i.length):e===Mi?c>0&&(u=Mi,f=c,h=l.length):(f=Math.max(o,c),u=f>0?o>c?br:Mi:null,h=u?u===br?i.length:l.length:0);const p=u===br&&/\b(transform|all)(,|$)/.test(r("".concat(br,"Property")).toString());return{type:u,timeout:f,propCount:h,hasTransform:p}}function jd(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Wd(n)+Wd(t[r])))}function Wd(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Fg(){return document.body.offsetHeight}function FE(t,e,n){const r=t[li];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Hd=Symbol("_vod"),$E=Symbol("_vsh"),$g=Symbol("");function Ug(t){const e=pr();if(!e)return;const n=e.ut=(s=t(e.proxy))=>{Array.from(document.querySelectorAll('[data-v-owner="'.concat(e.uid,'"]'))).forEach(i=>Lu(i,s))},r=()=>{const s=t(e.proxy);Nu(e.subTree,s),n(s)};Wv(r),Mn(()=>{const s=new MutationObserver(r);s.observe(e.subTree.el.parentNode,{childList:!0}),$l(()=>s.disconnect())})}function Nu(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{Nu(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)Lu(t.el,e);else if(t.type===Ze)t.children.forEach(n=>Nu(n,e));else if(t.type===no){let{el:n,anchor:r}=t;for(;n&&(Lu(n,e),n!==r);)n=n.nextSibling}}function Lu(t,e){if(t.nodeType===1){const n=t.style;let r="";for(const s in e)n.setProperty("--".concat(s),e[s]),r+="--".concat(s,": ").concat(e[s],";");n[$g]=r}}const UE=/(^|;)\s*display\s*:/;function BE(t,e,n){const r=t.style,s=dt(n);let i=!1;if(n&&!s){if(e)if(dt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&$a(r,a,"")}else for(const o in e)n[o]==null&&$a(r,o,"");for(const o in n)o==="display"&&(i=!0),$a(r,o,n[o])}else if(s){if(e!==n){const o=r[$g];o&&(n+=";"+o),r.cssText=n,i=UE.test(n)}}else e&&t.removeAttribute("style");Hd in t&&(t[Hd]=i?r.display:"",t[$E]&&(r.display="none"))}const qd=/\s*!important$/;function $a(t,e,n){if(Ee(n))n.forEach(r=>$a(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=jE(t,e);qd.test(n)?t.setProperty(Ti(r),n.replace(qd,""),"important"):t[r]=n}}const Gd=["Webkit","Moz","ms"],xc={};function jE(t,e){const n=xc[e];if(n)return n;let r=er(e);if(r!=="filter"&&r in t)return xc[e]=r;r=kl(r);for(let s=0;s<Gd.length;s++){const i=Gd[s]+r;if(i in t)return xc[e]=i}return e}const Kd="http://www.w3.org/1999/xlink";function WE(t,e,n,r,s){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(Kd,e.slice(6,e.length)):t.setAttributeNS(Kd,e,n);else{const i=Zy(e);n==null||i&&!Op(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function HE(t,e,n,r,s,i,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,s,i),t[e]=n==null?"":n;return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const c=a==="OPTION"?t.getAttribute("value")||"":t.value,u=n==null?"":n;(c!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(e),t._value=n;return}let l=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=Op(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{t[e]=n}catch(c){}l&&t.removeAttribute(e)}function qE(t,e,n,r){t.addEventListener(e,n,r)}function GE(t,e,n,r){t.removeEventListener(e,n,r)}const zd=Symbol("_vei");function KE(t,e,n,r,s=null){const i=t[zd]||(t[zd]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=zE(e);if(r){const c=i[e]=XE(r,s);qE(t,a,c,l)}else o&&(GE(t,a,o,l),i[e]=void 0)}}const Qd=/(?:Once|Passive|Capture)$/;function zE(t){let e;if(Qd.test(t)){e={};let r;for(;r=t.match(Qd);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ti(t.slice(2)),e]}let Mc=0;const QE=Promise.resolve(),YE=()=>Mc||(QE.then(()=>Mc=0),Mc=Date.now());function XE(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Rn(JE(r,n.value),e,5,[r])};return n.value=t,n.attached=YE(),n}function JE(t,e){if(Ee(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Yd=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,ZE=(t,e,n,r,s,i,o,a,l)=>{const c=s==="svg";e==="class"?FE(t,r,c):e==="style"?BE(t,n,r):Sl(e)?Ph(e)||KE(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):ew(t,e,r,c))?HE(t,e,r,i,o,a,l):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),WE(t,e,r,c))};function ew(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Yd(e)&&Oe(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Yd(e)&&dt(n)?!1:e in t}const Bg=new WeakMap,jg=new WeakMap,nl=Symbol("_moveCb"),Xd=Symbol("_enterCb"),Wg={name:"TransitionGroup",props:vt({},ME,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=pr(),r=pg();let s,i;return Kh(()=>{if(!s.length)return;const o=t.moveClass||"".concat(t.name||"v","-move");if(!iw(s[0].el,n.vnode.el,o))return;s.forEach(nw),s.forEach(rw);const a=s.filter(sw);Fg(),a.forEach(l=>{const c=l.el,u=c.style;lr(c,o),u.transform=u.webkitTransform=u.transitionDuration="";const f=c[nl]=h=>{h&&h.target!==c||(!h||/transform$/.test(h.propertyName))&&(c.removeEventListener("transitionend",f),c[nl]=null,Nr(c,o))};c.addEventListener("transitionend",f)})}),()=>{const o=Be(t),a=Og(o);let l=o.tag||Ze;s=i,i=e.default?Gh(e.default()):[];for(let c=0;c<i.length;c++){const u=i[c];u.key!=null&&yo(u,_o(u,a,r,n))}if(s)for(let c=0;c<s.length;c++){const u=s[c];yo(u,_o(u,a,r,n)),Bg.set(u,u.el.getBoundingClientRect())}return ke(l,null,i)}}},tw=t=>delete t.mode;Wg.props;const Hg=Wg;function nw(t){const e=t.el;e[nl]&&e[nl](),e[Xd]&&e[Xd]()}function rw(t){jg.set(t,t.el.getBoundingClientRect())}function sw(t){const e=Bg.get(t),n=jg.get(t),r=e.left-n.left,s=e.top-n.top;if(r||s){const i=t.el.style;return i.transform=i.webkitTransform="translate(".concat(r,"px,").concat(s,"px)"),i.transitionDuration="0s",t}}function iw(t,e,n){const r=t.cloneNode(),s=t[li];s&&s.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(r);const{hasTransform:o}=Vg(r);return i.removeChild(r),o}const ow=vt({patchProp:ZE},xE);let Jd;function aw(){return Jd||(Jd=pE(ow))}const lw=(...t)=>{const e=aw().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=uw(r);if(!s)return;const i=e._component;!Oe(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,cw(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function cw(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function uw(t){return dt(t)?document.querySelector(t):t}/*!
  * vue-router v4.3.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Hs=typeof document<"u";function hw(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const Ye=Object.assign;function Oc(t,e){const n={};for(const r in e){const s=e[r];n[r]=Vn(s)?s.map(t):t(s)}return n}const so=()=>{},Vn=Array.isArray,qg=/#/g,fw=/&/g,dw=/\//g,mw=/=/g,pw=/\?/g,Gg=/\+/g,gw=/%5B/g,_w=/%5D/g,Kg=/%5E/g,yw=/%60/g,zg=/%7B/g,vw=/%7C/g,Qg=/%7D/g,Ew=/%20/g;function ef(t){return encodeURI(""+t).replace(vw,"|").replace(gw,"[").replace(_w,"]")}function ww(t){return ef(t).replace(zg,"{").replace(Qg,"}").replace(Kg,"^")}function Du(t){return ef(t).replace(Gg,"%2B").replace(Ew,"+").replace(qg,"%23").replace(fw,"%26").replace(yw,"`").replace(zg,"{").replace(Qg,"}").replace(Kg,"^")}function bw(t){return Du(t).replace(mw,"%3D")}function Tw(t){return ef(t).replace(qg,"%23").replace(pw,"%3F")}function Iw(t){return t==null?"":Tw(t).replace(dw,"%2F")}function Eo(t){try{return decodeURIComponent(""+t)}catch(e){}return""+t}const Cw=/\/$/,Aw=t=>t.replace(Cw,"");function Vc(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),s=t(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=kw(r!=null?r:e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:Eo(o)}}function Sw(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Zd(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Rw(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&ci(e.matched[r],n.matched[s])&&Yg(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function ci(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Yg(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!Pw(t[n],e[n]))return!1;return!0}function Pw(t,e){return Vn(t)?em(t,e):Vn(e)?em(e,t):t===e}function em(t,e){return Vn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function kw(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}var wo;(function(t){t.pop="pop",t.push="push"})(wo||(wo={}));var io;(function(t){t.back="back",t.forward="forward",t.unknown=""})(io||(io={}));function Nw(t){if(!t)if(Hs){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Aw(t)}const Lw=/^[^#]+#/;function Dw(t,e){return t.replace(Lw,"#")+e}function xw(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const jl=()=>({left:window.scrollX,top:window.scrollY});function Mw(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=xw(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function tm(t,e){return(history.state?history.state.position-e:-1)+t}const xu=new Map;function Ow(t,e){xu.set(t,e)}function Vw(t){const e=xu.get(t);return xu.delete(t),e}let Fw=()=>location.protocol+"//"+location.host;function Xg(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),Zd(l,"")}return Zd(n,t)+r+s}function $w(t,e,n,r){let s=[],i=[],o=null;const a=({state:h})=>{const p=Xg(t,location),g=n.value,E=e.value;let v=0;if(h){if(n.value=p,e.value=h,o&&o===g){o=null;return}v=E?h.position-E.position:0}else r(p);s.forEach(_=>{_(n.value,g,{delta:v,type:wo.pop,direction:v?v>0?io.forward:io.back:io.unknown})})};function l(){o=n.value}function c(h){s.push(h);const p=()=>{const g=s.indexOf(h);g>-1&&s.splice(g,1)};return i.push(p),p}function u(){const{history:h}=window;h.state&&h.replaceState(Ye({},h.state,{scroll:jl()}),"")}function f(){for(const h of i)h();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:f}}function nm(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?jl():null}}function Uw(t){const{history:e,location:n}=window,r={value:Xg(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const f=t.indexOf("#"),h=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+l:Fw()+t+l;try{e[u?"replaceState":"pushState"](c,"",h),s.value=c}catch(p){console.error(p),n[u?"replace":"assign"](h)}}function o(l,c){const u=Ye({},e.state,nm(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});i(l,u,!0),r.value=l}function a(l,c){const u=Ye({},s.value,e.state,{forward:l,scroll:jl()});i(u.current,u,!0);const f=Ye({},nm(r.value,l,null),{position:u.position+1},c);i(l,f,!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function Bw(t){t=Nw(t);const e=Uw(t),n=$w(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Ye({location:"",base:t,go:r,createHref:Dw.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function jw(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),Bw(t)}function Ww(t){return typeof t=="string"||t&&typeof t=="object"}function Jg(t){return typeof t=="string"||typeof t=="symbol"}const Tr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Zg=Symbol("");var rm;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(rm||(rm={}));function ui(t,e){return Ye(new Error,{type:t,[Zg]:!0},e)}function ir(t,e){return t instanceof Error&&Zg in t&&(e==null||!!(t.type&e))}const sm="[^/]+?",Hw={sensitive:!1,strict:!1,start:!0,end:!0},qw=/[.+*?^${}()[\]/\\]/g;function Gw(t,e){const n=Ye({},Hw,e),r=[];let s=n.start?"^":"";const i=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(s+="/");for(let f=0;f<c.length;f++){const h=c[f];let p=40+(n.sensitive?.25:0);if(h.type===0)f||(s+="/"),s+=h.value.replace(qw,"\\$&"),p+=40;else if(h.type===1){const{value:g,repeatable:E,optional:v,regexp:_}=h;i.push({name:g,repeatable:E,optional:v});const w=_||sm;if(w!==sm){p+=10;try{new RegExp("(".concat(w,")"))}catch(b){throw new Error('Invalid custom RegExp for param "'.concat(g,'" (').concat(w,"): ")+b.message)}}let T=E?"((?:".concat(w,")(?:/(?:").concat(w,"))*)"):"(".concat(w,")");f||(T=v&&c.length<2?"(?:/".concat(T,")"):"/"+T),v&&(T+="?"),s+=T,p+=20,v&&(p+=-8),E&&(p+=-20),w===".*"&&(p+=-50)}u.push(p)}r.push(u)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(c){const u=c.match(o),f={};if(!u)return null;for(let h=1;h<u.length;h++){const p=u[h]||"",g=i[h-1];f[g.name]=p&&g.repeatable?p.split("/"):p}return f}function l(c){let u="",f=!1;for(const h of t){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const p of h)if(p.type===0)u+=p.value;else if(p.type===1){const{value:g,repeatable:E,optional:v}=p,_=g in c?c[g]:"";if(Vn(_)&&!E)throw new Error('Provided param "'.concat(g,'" is an array but it is not repeatable (* or + modifiers)'));const w=Vn(_)?_.join("/"):_;if(!w)if(v)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error('Missing required param "'.concat(g,'"'));u+=w}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function Kw(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function zw(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=Kw(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(im(r))return 1;if(im(s))return-1}return s.length-r.length}function im(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Qw={type:0,value:""},Yw=/[a-zA-Z0-9_]/;function Xw(t){if(!t)return[[]];if(t==="/")return[[Qw]];if(!t.startsWith("/"))throw new Error('Invalid path "'.concat(t,'"'));function e(p){throw new Error("ERR (".concat(n,')/"').concat(c,'": ').concat(p))}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,c="",u="";function f(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e("A repeatable param (".concat(c,") must be alone in its segment. eg: '/:ids+.")),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&f(),o()):l===":"?(f(),n=1):h();break;case 4:h(),n=r;break;case 1:l==="("?n=2:Yw.test(l)?h():(f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e('Unfinished custom RegExp for param "'.concat(c,'"')),f(),o(),s}function Jw(t,e,n){const r=Gw(Xw(t.path),n),s=Ye(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function Zw(t,e){const n=[],r=new Map;e=lm({strict:!1,end:!0,sensitive:!1},e);function s(u){return r.get(u)}function i(u,f,h){const p=!h,g=eb(u);g.aliasOf=h&&h.record;const E=lm(e,u),v=[g];if("alias"in u){const T=typeof u.alias=="string"?[u.alias]:u.alias;for(const b of T)v.push(Ye({},g,{components:h?h.record.components:g.components,path:b,aliasOf:h?h.record:g}))}let _,w;for(const T of v){const{path:b}=T;if(f&&b[0]!=="/"){const N=f.record.path,S=N[N.length-1]==="/"?"":"/";T.path=f.record.path+(b&&S+b)}if(_=Jw(T,f,E),h?h.alias.push(_):(w=w||_,w!==_&&w.alias.push(_),p&&u.name&&!am(_)&&o(u.name)),g.children){const N=g.children;for(let S=0;S<N.length;S++)i(N[S],_,h&&h.children[S])}h=h||_,(_.record.components&&Object.keys(_.record.components).length||_.record.name||_.record.redirect)&&l(_)}return w?()=>{o(w)}:so}function o(u){if(Jg(u)){const f=r.get(u);f&&(r.delete(u),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(u);f>-1&&(n.splice(f,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let f=0;for(;f<n.length&&zw(u,n[f])>=0&&(u.record.path!==n[f].record.path||!e_(u,n[f]));)f++;n.splice(f,0,u),u.record.name&&!am(u)&&r.set(u.record.name,u)}function c(u,f){let h,p={},g,E;if("name"in u&&u.name){if(h=r.get(u.name),!h)throw ui(1,{location:u});E=h.record.name,p=Ye(om(f.params,h.keys.filter(w=>!w.optional).concat(h.parent?h.parent.keys.filter(w=>w.optional):[]).map(w=>w.name)),u.params&&om(u.params,h.keys.map(w=>w.name))),g=h.stringify(p)}else if(u.path!=null)g=u.path,h=n.find(w=>w.re.test(g)),h&&(p=h.parse(g),E=h.record.name);else{if(h=f.name?r.get(f.name):n.find(w=>w.re.test(f.path)),!h)throw ui(1,{location:u,currentLocation:f});E=h.record.name,p=Ye({},f.params,u.params),g=h.stringify(p)}const v=[];let _=h;for(;_;)v.unshift(_.record),_=_.parent;return{name:E,path:g,params:p,matched:v,meta:nb(v)}}return t.forEach(u=>i(u)),{addRoute:i,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function om(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function eb(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:tb(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function tb(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function am(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function nb(t){return t.reduce((e,n)=>Ye(e,n.meta),{})}function lm(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function e_(t,e){return e.children.some(n=>n===t||e_(t,n))}function rb(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(Gg," "),o=i.indexOf("="),a=Eo(o<0?i:i.slice(0,o)),l=o<0?null:Eo(i.slice(o+1));if(a in e){let c=e[a];Vn(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function cm(t){let e="";for(let n in t){const r=t[n];if(n=bw(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Vn(r)?r.map(i=>i&&Du(i)):[r&&Du(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function sb(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Vn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const ib=Symbol(""),um=Symbol(""),Wl=Symbol(""),t_=Symbol(""),Mu=Symbol("");function Oi(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Vr(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const c=h=>{h===!1?l(ui(4,{from:n,to:e})):h instanceof Error?l(h):Ww(h)?l(ui(2,{from:e,to:h})):(o&&r.enterCallbacks[s]===o&&typeof h=="function"&&o.push(h),a())},u=i(()=>t.call(r&&r.instances[s],e,n,c));let f=Promise.resolve(u);t.length<3&&(f=f.then(c)),f.catch(h=>l(h))})}function Fc(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(ob(l)){const u=(l.__vccOpts||l)[e];u&&i.push(Vr(u,n,r,o,a,s))}else{let c=l();i.push(()=>c.then(u=>{if(!u)return Promise.reject(new Error("Couldn't resolve component \"".concat(a,'" at "').concat(o.path,'"')));const f=hw(u)?u.default:u;o.components[a]=f;const p=(f.__vccOpts||f)[e];return p&&Vr(p,n,r,o,a,s)()}))}}return i}function ob(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function hm(t){const e=Pn(Wl),n=Pn(t_),r=ue(()=>e.resolve($(t.to))),s=ue(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],f=n.matched;if(!u||!f.length)return-1;const h=f.findIndex(ci.bind(null,u));if(h>-1)return h;const p=fm(l[c-2]);return c>1&&fm(u)===p&&f[f.length-1].path!==p?f.findIndex(ci.bind(null,l[c-2])):h}),i=ue(()=>s.value>-1&&ub(n.params,r.value.params)),o=ue(()=>s.value>-1&&s.value===n.matched.length-1&&Yg(n.params,r.value.params));function a(l={}){return cb(l)?e[$(t.replace)?"replace":"push"]($(t.to)).catch(so):Promise.resolve()}return{route:r,href:ue(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const ab=ft({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:hm,setup(t,{slots:e}){const n=Ho(hm(t)),{options:r}=Pn(Wl),s=ue(()=>({[dm(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[dm(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&e.default(n);return t.custom?i:Qo("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),lb=ab;function cb(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function ub(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Vn(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function fm(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const dm=(t,e,n)=>t!=null?t:e!=null?e:n,hb=ft({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Pn(Mu),s=ue(()=>t.route||r.value),i=Pn(um,0),o=ue(()=>{let c=$(i);const{matched:u}=s.value;let f;for(;(f=u[c])&&!f.components;)c++;return c}),a=ue(()=>s.value.matched[o.value]);Va(um,ue(()=>o.value+1)),Va(ib,a),Va(Mu,s);const l=Z();return xn(()=>[l.value,a.value,t.name],([c,u,f],[h,p,g])=>{u&&(u.instances[f]=c,p&&p!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),c&&u&&(!p||!ci(u,p)||!h)&&(u.enterCallbacks[f]||[]).forEach(E=>E(c))},{flush:"post"}),()=>{const c=s.value,u=t.name,f=a.value,h=f&&f.components[u];if(!h)return mm(n.default,{Component:h,route:c});const p=f.props[u],g=p?p===!0?c.params:typeof p=="function"?p(c):p:null,v=Qo(h,Ye({},g,e,{onVnodeUnmounted:_=>{_.component.isUnmounted&&(f.instances[u]=null)},ref:l}));return mm(n.default,{Component:v,route:c})||v}}});function mm(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const fb=hb;function db(t){const e=Zw(t.routes,t),n=t.parseQuery||rb,r=t.stringifyQuery||cm,s=t.history,i=Oi(),o=Oi(),a=Oi(),l=qo(Tr);let c=Tr;Hs&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Oc.bind(null,R=>""+R),f=Oc.bind(null,Iw),h=Oc.bind(null,Eo);function p(R,B){let F,z;return Jg(R)?(F=e.getRecordMatcher(R),z=B):z=R,e.addRoute(z,F)}function g(R){const B=e.getRecordMatcher(R);B&&e.removeRoute(B)}function E(){return e.getRoutes().map(R=>R.record)}function v(R){return!!e.getRecordMatcher(R)}function _(R,B){if(B=Ye({},B||l.value),typeof R=="string"){const d=Vc(n,R,B.path),y=e.resolve({path:d.path},B),I=s.createHref(d.fullPath);return Ye(d,y,{params:h(y.params),hash:Eo(d.hash),redirectedFrom:void 0,href:I})}let F;if(R.path!=null)F=Ye({},R,{path:Vc(n,R.path,B.path).path});else{const d=Ye({},R.params);for(const y in d)d[y]==null&&delete d[y];F=Ye({},R,{params:f(d)}),B.params=f(B.params)}const z=e.resolve(F,B),_e=R.hash||"";z.params=u(h(z.params));const Ce=Sw(r,Ye({},R,{hash:ww(_e),path:z.path})),m=s.createHref(Ce);return Ye({fullPath:Ce,hash:_e,query:r===cm?sb(R.query):R.query||{}},z,{redirectedFrom:void 0,href:m})}function w(R){return typeof R=="string"?Vc(n,R,l.value.path):Ye({},R)}function T(R,B){if(c!==R)return ui(8,{from:B,to:R})}function b(R){return V(R)}function N(R){return b(Ye(w(R),{replace:!0}))}function S(R){const B=R.matched[R.matched.length-1];if(B&&B.redirect){const{redirect:F}=B;let z=typeof F=="function"?F(R):F;return typeof z=="string"&&(z=z.includes("?")||z.includes("#")?z=w(z):{path:z},z.params={}),Ye({query:R.query,hash:R.hash,params:z.path!=null?{}:R.params},z)}}function V(R,B){const F=c=_(R),z=l.value,_e=R.state,Ce=R.force,m=R.replace===!0,d=S(F);if(d)return V(Ye(w(d),{state:typeof d=="object"?Ye({},_e,d.state):_e,force:Ce,replace:m}),B||F);const y=F;y.redirectedFrom=B;let I;return!Ce&&Rw(r,z,F)&&(I=ui(16,{to:y,from:z}),Te(z,z,!0,!1)),(I?Promise.resolve(I):M(y,z)).catch(C=>ir(C)?ir(C,2)?C:Je(C):be(C,y,z)).then(C=>{if(C){if(ir(C,2))return V(Ye({replace:m},w(C.to),{state:typeof C.to=="object"?Ye({},_e,C.to.state):_e,force:Ce}),B||y)}else C=L(y,z,!0,m,_e);return D(y,z,C),C})}function P(R,B){const F=T(R,B);return F?Promise.reject(F):Promise.resolve()}function k(R){const B=at.values().next().value;return B&&typeof B.runWithContext=="function"?B.runWithContext(R):R()}function M(R,B){let F;const[z,_e,Ce]=mb(R,B);F=Fc(z.reverse(),"beforeRouteLeave",R,B);for(const d of z)d.leaveGuards.forEach(y=>{F.push(Vr(y,R,B))});const m=P.bind(null,R,B);return F.push(m),K(F).then(()=>{F=[];for(const d of i.list())F.push(Vr(d,R,B));return F.push(m),K(F)}).then(()=>{F=Fc(_e,"beforeRouteUpdate",R,B);for(const d of _e)d.updateGuards.forEach(y=>{F.push(Vr(y,R,B))});return F.push(m),K(F)}).then(()=>{F=[];for(const d of Ce)if(d.beforeEnter)if(Vn(d.beforeEnter))for(const y of d.beforeEnter)F.push(Vr(y,R,B));else F.push(Vr(d.beforeEnter,R,B));return F.push(m),K(F)}).then(()=>(R.matched.forEach(d=>d.enterCallbacks={}),F=Fc(Ce,"beforeRouteEnter",R,B,k),F.push(m),K(F))).then(()=>{F=[];for(const d of o.list())F.push(Vr(d,R,B));return F.push(m),K(F)}).catch(d=>ir(d,8)?d:Promise.reject(d))}function D(R,B,F){a.list().forEach(z=>k(()=>z(R,B,F)))}function L(R,B,F,z,_e){const Ce=T(R,B);if(Ce)return Ce;const m=B===Tr,d=Hs?history.state:{};F&&(z||m?s.replace(R.fullPath,Ye({scroll:m&&d&&d.scroll},_e)):s.push(R.fullPath,_e)),l.value=R,Te(R,B,F,m),Je()}let G;function ge(){G||(G=s.listen((R,B,F)=>{if(!ae.listening)return;const z=_(R),_e=S(z);if(_e){V(Ye(_e,{replace:!0}),z).catch(so);return}c=z;const Ce=l.value;Hs&&Ow(tm(Ce.fullPath,F.delta),jl()),M(z,Ce).catch(m=>ir(m,12)?m:ir(m,2)?(V(m.to,z).then(d=>{ir(d,20)&&!F.delta&&F.type===wo.pop&&s.go(-1,!1)}).catch(so),Promise.reject()):(F.delta&&s.go(-F.delta,!1),be(m,z,Ce))).then(m=>{m=m||L(z,Ce,!1),m&&(F.delta&&!ir(m,8)?s.go(-F.delta,!1):F.type===wo.pop&&ir(m,20)&&s.go(-1,!1)),D(z,Ce,m)}).catch(so)}))}let Ve=Oi(),me=Oi(),we;function be(R,B,F){Je(R);const z=me.list();return z.length?z.forEach(_e=>_e(R,B,F)):console.error(R),Promise.reject(R)}function tt(){return we&&l.value!==Tr?Promise.resolve():new Promise((R,B)=>{Ve.add([R,B])})}function Je(R){return we||(we=!R,ge(),Ve.list().forEach(([B,F])=>R?F(R):B()),Ve.reset()),R}function Te(R,B,F,z){const{scrollBehavior:_e}=t;if(!Hs||!_e)return Promise.resolve();const Ce=!F&&Vw(tm(R.fullPath,0))||(z||!F)&&history.state&&history.state.scroll||null;return Go().then(()=>_e(R,B,Ce)).then(m=>m&&Mw(m)).catch(m=>be(m,R,B))}const $e=R=>s.go(R);let oe;const at=new Set,ae={currentRoute:l,listening:!0,addRoute:p,removeRoute:g,hasRoute:v,getRoutes:E,resolve:_,options:t,push:b,replace:N,go:$e,back:()=>$e(-1),forward:()=>$e(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:me.add,isReady:tt,install(R){const B=this;R.component("RouterLink",lb),R.component("RouterView",fb),R.config.globalProperties.$router=B,Object.defineProperty(R.config.globalProperties,"$route",{enumerable:!0,get:()=>$(l)}),Hs&&!oe&&l.value===Tr&&(oe=!0,b(s.location).catch(_e=>{}));const F={};for(const _e in Tr)Object.defineProperty(F,_e,{get:()=>l.value[_e],enumerable:!0});R.provide(Wl,B),R.provide(t_,Xp(F)),R.provide(Mu,l);const z=R.unmount;at.add(R),R.unmount=function(){at.delete(R),at.size<1&&(c=Tr,G&&G(),G=null,l.value=Tr,oe=!1,we=!1),z()}}};function K(R){return R.reduce((B,F)=>B.then(()=>k(F)),Promise.resolve())}return ae}function mb(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(c=>ci(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>ci(c,l))||s.push(l))}return[n,r,s]}function tf(){return Pn(Wl)}/*!
  * shared v9.10.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const rl=typeof window<"u",Zr=(t,e=!1)=>e?Symbol.for(t):Symbol(t),pb=(t,e,n)=>gb({l:t,k:e,s:n}),gb=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),bt=t=>typeof t=="number"&&isFinite(t),_b=t=>r_(t)==="[object Date]",Qr=t=>r_(t)==="[object RegExp]",Hl=t=>Re(t)&&Object.keys(t).length===0,Ot=Object.assign;let pm;const ur=()=>pm||(pm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function gm(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const yb=Object.prototype.hasOwnProperty;function sl(t,e){return yb.call(t,e)}const ot=Array.isArray,nt=t=>typeof t=="function",re=t=>typeof t=="string",Fe=t=>typeof t=="boolean",Ke=t=>t!==null&&typeof t=="object",vb=t=>Ke(t)&&nt(t.then)&&nt(t.catch),n_=Object.prototype.toString,r_=t=>n_.call(t),Re=t=>{if(!Ke(t))return!1;const e=Object.getPrototypeOf(t);return e===null||e.constructor===Object},Eb=t=>t==null?"":ot(t)||Re(t)&&t.toString===n_?JSON.stringify(t,null,2):String(t);function wb(t,e=""){return t.reduce((n,r,s)=>s===0?n+r:n+e+r,"")}function nf(t){let e=t;return()=>++e}function bb(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const wa=t=>!Ke(t)||ot(t);function Ua(t,e){if(wa(t)||wa(e))throw new Error("Invalid value");const n=[{src:t,des:e}];for(;n.length;){const{src:r,des:s}=n.pop();Object.keys(r).forEach(i=>{wa(r[i])||wa(s[i])?s[i]=r[i]:n.push({src:r[i],des:s[i]})})}}/*!
  * message-compiler v9.10.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function Tb(t,e,n){return{line:t,column:e,offset:n}}function Ou(t,e,n){const r={start:t,end:e};return n!=null&&(r.source=n),r}const Ib=/\{([0-9a-zA-Z]+)\}/g;function Cb(t,...e){return e.length===1&&Ab(e[0])&&(e=e[0]),(!e||!e.hasOwnProperty)&&(e={}),t.replace(Ib,(n,r)=>e.hasOwnProperty(r)?e[r]:"")}const s_=Object.assign,_m=t=>typeof t=="string",Ab=t=>t!==null&&typeof t=="object";function i_(t,e=""){return t.reduce((n,r,s)=>s===0?n+r:n+e+r,"")}const ye={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},Sb={[ye.EXPECTED_TOKEN]:"Expected token: '{0}'",[ye.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[ye.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[ye.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[ye.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[ye.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[ye.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[ye.EMPTY_PLACEHOLDER]:"Empty placeholder",[ye.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[ye.INVALID_LINKED_FORMAT]:"Invalid linked format",[ye.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[ye.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[ye.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[ye.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[ye.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[ye.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function Ii(t,e,n={}){const{domain:r,messages:s,args:i}=n,o=Cb((s||Sb)[t]||"",...i||[]),a=new SyntaxError(String(o));return a.code=t,e&&(a.location=e),a.domain=r,a}function Rb(t){throw t}const or=" ",Pb="\r",Jt="\n",kb="\u2028",Nb="\u2029";function Lb(t){const e=t;let n=0,r=1,s=1,i=0;const o=V=>e[V]===Pb&&e[V+1]===Jt,a=V=>e[V]===Jt,l=V=>e[V]===Nb,c=V=>e[V]===kb,u=V=>o(V)||a(V)||l(V)||c(V),f=()=>n,h=()=>r,p=()=>s,g=()=>i,E=V=>o(V)||l(V)||c(V)?Jt:e[V],v=()=>E(n),_=()=>E(n+i);function w(){return i=0,u(n)&&(r++,s=0),o(n)&&n++,n++,s++,e[n]}function T(){return o(n+i)&&i++,i++,e[n+i]}function b(){n=0,r=1,s=1,i=0}function N(V=0){i=V}function S(){const V=n+i;for(;V!==n;)w();i=0}return{index:f,line:h,column:p,peekOffset:g,charAt:E,currentChar:v,currentPeek:_,next:w,peek:T,reset:b,resetPeek:N,skipToPeek:S}}const Ir=void 0,Db=".",ym="'",xb="tokenizer";function Mb(t,e={}){const n=e.location!==!1,r=Lb(t),s=()=>r.index(),i=()=>Tb(r.line(),r.column(),r.index()),o=i(),a=s(),l={currentType:14,offset:a,startLoc:o,endLoc:o,lastType:14,lastOffset:a,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},c=()=>l,{onError:u}=e;function f(m,d,y,...I){const C=c();if(d.column+=y,d.offset+=y,u){const O=n?Ou(C.startLoc,d):null,Y=Ii(m,O,{domain:xb,args:I});u(Y)}}function h(m,d,y){m.endLoc=i(),m.currentType=d;const I={type:d};return n&&(I.loc=Ou(m.startLoc,m.endLoc)),y!=null&&(I.value=y),I}const p=m=>h(m,14);function g(m,d){return m.currentChar()===d?(m.next(),d):(f(ye.EXPECTED_TOKEN,i(),0,d),"")}function E(m){let d="";for(;m.currentPeek()===or||m.currentPeek()===Jt;)d+=m.currentPeek(),m.peek();return d}function v(m){const d=E(m);return m.skipToPeek(),d}function _(m){if(m===Ir)return!1;const d=m.charCodeAt(0);return d>=97&&d<=122||d>=65&&d<=90||d===95}function w(m){if(m===Ir)return!1;const d=m.charCodeAt(0);return d>=48&&d<=57}function T(m,d){const{currentType:y}=d;if(y!==2)return!1;E(m);const I=_(m.currentPeek());return m.resetPeek(),I}function b(m,d){const{currentType:y}=d;if(y!==2)return!1;E(m);const I=m.currentPeek()==="-"?m.peek():m.currentPeek(),C=w(I);return m.resetPeek(),C}function N(m,d){const{currentType:y}=d;if(y!==2)return!1;E(m);const I=m.currentPeek()===ym;return m.resetPeek(),I}function S(m,d){const{currentType:y}=d;if(y!==8)return!1;E(m);const I=m.currentPeek()===".";return m.resetPeek(),I}function V(m,d){const{currentType:y}=d;if(y!==9)return!1;E(m);const I=_(m.currentPeek());return m.resetPeek(),I}function P(m,d){const{currentType:y}=d;if(!(y===8||y===12))return!1;E(m);const I=m.currentPeek()===":";return m.resetPeek(),I}function k(m,d){const{currentType:y}=d;if(y!==10)return!1;const I=()=>{const O=m.currentPeek();return O==="{"?_(m.peek()):O==="@"||O==="%"||O==="|"||O===":"||O==="."||O===or||!O?!1:O===Jt?(m.peek(),I()):_(O)},C=I();return m.resetPeek(),C}function M(m){E(m);const d=m.currentPeek()==="|";return m.resetPeek(),d}function D(m){const d=E(m),y=m.currentPeek()==="%"&&m.peek()==="{";return m.resetPeek(),{isModulo:y,hasSpace:d.length>0}}function L(m,d=!0){const y=(C=!1,O="",Y=!1)=>{const q=m.currentPeek();return q==="{"?O==="%"?!1:C:q==="@"||!q?O==="%"?!0:C:q==="%"?(m.peek(),y(C,"%",!0)):q==="|"?O==="%"||Y?!0:!(O===or||O===Jt):q===or?(m.peek(),y(!0,or,Y)):q===Jt?(m.peek(),y(!0,Jt,Y)):!0},I=y();return d&&m.resetPeek(),I}function G(m,d){const y=m.currentChar();return y===Ir?Ir:d(y)?(m.next(),y):null}function ge(m){return G(m,y=>{const I=y.charCodeAt(0);return I>=97&&I<=122||I>=65&&I<=90||I>=48&&I<=57||I===95||I===36})}function Ve(m){return G(m,y=>{const I=y.charCodeAt(0);return I>=48&&I<=57})}function me(m){return G(m,y=>{const I=y.charCodeAt(0);return I>=48&&I<=57||I>=65&&I<=70||I>=97&&I<=102})}function we(m){let d="",y="";for(;d=Ve(m);)y+=d;return y}function be(m){v(m);const d=m.currentChar();return d!=="%"&&f(ye.EXPECTED_TOKEN,i(),0,d),m.next(),"%"}function tt(m){let d="";for(;;){const y=m.currentChar();if(y==="{"||y==="}"||y==="@"||y==="|"||!y)break;if(y==="%")if(L(m))d+=y,m.next();else break;else if(y===or||y===Jt)if(L(m))d+=y,m.next();else{if(M(m))break;d+=y,m.next()}else d+=y,m.next()}return d}function Je(m){v(m);let d="",y="";for(;d=ge(m);)y+=d;return m.currentChar()===Ir&&f(ye.UNTERMINATED_CLOSING_BRACE,i(),0),y}function Te(m){v(m);let d="";return m.currentChar()==="-"?(m.next(),d+="-".concat(we(m))):d+=we(m),m.currentChar()===Ir&&f(ye.UNTERMINATED_CLOSING_BRACE,i(),0),d}function $e(m){v(m),g(m,"'");let d="",y="";const I=O=>O!==ym&&O!==Jt;for(;d=G(m,I);)d==="\\"?y+=oe(m):y+=d;const C=m.currentChar();return C===Jt||C===Ir?(f(ye.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,i(),0),C===Jt&&(m.next(),g(m,"'")),y):(g(m,"'"),y)}function oe(m){const d=m.currentChar();switch(d){case"\\":case"'":return m.next(),"\\".concat(d);case"u":return at(m,d,4);case"U":return at(m,d,6);default:return f(ye.UNKNOWN_ESCAPE_SEQUENCE,i(),0,d),""}}function at(m,d,y){g(m,d);let I="";for(let C=0;C<y;C++){const O=me(m);if(!O){f(ye.INVALID_UNICODE_ESCAPE_SEQUENCE,i(),0,"\\".concat(d).concat(I).concat(m.currentChar()));break}I+=O}return"\\".concat(d).concat(I)}function ae(m){v(m);let d="",y="";const I=C=>C!=="{"&&C!=="}"&&C!==or&&C!==Jt;for(;d=G(m,I);)y+=d;return y}function K(m){let d="",y="";for(;d=ge(m);)y+=d;return y}function R(m){const d=(y=!1,I)=>{const C=m.currentChar();return C==="{"||C==="%"||C==="@"||C==="|"||C==="("||C===")"||!C||C===or?I:C===Jt||C===Db?(I+=C,m.next(),d(y,I)):(I+=C,m.next(),d(!0,I))};return d(!1,"")}function B(m){v(m);const d=g(m,"|");return v(m),d}function F(m,d){let y=null;switch(m.currentChar()){case"{":return d.braceNest>=1&&f(ye.NOT_ALLOW_NEST_PLACEHOLDER,i(),0),m.next(),y=h(d,2,"{"),v(m),d.braceNest++,y;case"}":return d.braceNest>0&&d.currentType===2&&f(ye.EMPTY_PLACEHOLDER,i(),0),m.next(),y=h(d,3,"}"),d.braceNest--,d.braceNest>0&&v(m),d.inLinked&&d.braceNest===0&&(d.inLinked=!1),y;case"@":return d.braceNest>0&&f(ye.UNTERMINATED_CLOSING_BRACE,i(),0),y=z(m,d)||p(d),d.braceNest=0,y;default:{let C=!0,O=!0,Y=!0;if(M(m))return d.braceNest>0&&f(ye.UNTERMINATED_CLOSING_BRACE,i(),0),y=h(d,1,B(m)),d.braceNest=0,d.inLinked=!1,y;if(d.braceNest>0&&(d.currentType===5||d.currentType===6||d.currentType===7))return f(ye.UNTERMINATED_CLOSING_BRACE,i(),0),d.braceNest=0,_e(m,d);if(C=T(m,d))return y=h(d,5,Je(m)),v(m),y;if(O=b(m,d))return y=h(d,6,Te(m)),v(m),y;if(Y=N(m,d))return y=h(d,7,$e(m)),v(m),y;if(!C&&!O&&!Y)return y=h(d,13,ae(m)),f(ye.INVALID_TOKEN_IN_PLACEHOLDER,i(),0,y.value),v(m),y;break}}return y}function z(m,d){const{currentType:y}=d;let I=null;const C=m.currentChar();switch((y===8||y===9||y===12||y===10)&&(C===Jt||C===or)&&f(ye.INVALID_LINKED_FORMAT,i(),0),C){case"@":return m.next(),I=h(d,8,"@"),d.inLinked=!0,I;case".":return v(m),m.next(),h(d,9,".");case":":return v(m),m.next(),h(d,10,":");default:return M(m)?(I=h(d,1,B(m)),d.braceNest=0,d.inLinked=!1,I):S(m,d)||P(m,d)?(v(m),z(m,d)):V(m,d)?(v(m),h(d,12,K(m))):k(m,d)?(v(m),C==="{"?F(m,d)||I:h(d,11,R(m))):(y===8&&f(ye.INVALID_LINKED_FORMAT,i(),0),d.braceNest=0,d.inLinked=!1,_e(m,d))}}function _e(m,d){let y={type:14};if(d.braceNest>0)return F(m,d)||p(d);if(d.inLinked)return z(m,d)||p(d);switch(m.currentChar()){case"{":return F(m,d)||p(d);case"}":return f(ye.UNBALANCED_CLOSING_BRACE,i(),0),m.next(),h(d,3,"}");case"@":return z(m,d)||p(d);default:{if(M(m))return y=h(d,1,B(m)),d.braceNest=0,d.inLinked=!1,y;const{isModulo:C,hasSpace:O}=D(m);if(C)return O?h(d,0,tt(m)):h(d,4,be(m));if(L(m))return h(d,0,tt(m));break}}return y}function Ce(){const{currentType:m,offset:d,startLoc:y,endLoc:I}=l;return l.lastType=m,l.lastOffset=d,l.lastStartLoc=y,l.lastEndLoc=I,l.offset=s(),l.startLoc=i(),r.currentChar()===Ir?h(l,14):_e(r,l)}return{nextToken:Ce,currentOffset:s,currentPosition:i,context:c}}const Ob="parser",Vb=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function Fb(t,e,n){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const r=parseInt(e||n,16);return r<=55295||r>=57344?String.fromCodePoint(r):""}}}function $b(t={}){const e=t.location!==!1,{onError:n}=t;function r(_,w,T,b,...N){const S=_.currentPosition();if(S.offset+=b,S.column+=b,n){const V=e?Ou(T,S):null,P=Ii(w,V,{domain:Ob,args:N});n(P)}}function s(_,w,T){const b={type:_};return e&&(b.start=w,b.end=w,b.loc={start:T,end:T}),b}function i(_,w,T,b){b&&(_.type=b),e&&(_.end=w,_.loc&&(_.loc.end=T))}function o(_,w){const T=_.context(),b=s(3,T.offset,T.startLoc);return b.value=w,i(b,_.currentOffset(),_.currentPosition()),b}function a(_,w){const T=_.context(),{lastOffset:b,lastStartLoc:N}=T,S=s(5,b,N);return S.index=parseInt(w,10),_.nextToken(),i(S,_.currentOffset(),_.currentPosition()),S}function l(_,w){const T=_.context(),{lastOffset:b,lastStartLoc:N}=T,S=s(4,b,N);return S.key=w,_.nextToken(),i(S,_.currentOffset(),_.currentPosition()),S}function c(_,w){const T=_.context(),{lastOffset:b,lastStartLoc:N}=T,S=s(9,b,N);return S.value=w.replace(Vb,Fb),_.nextToken(),i(S,_.currentOffset(),_.currentPosition()),S}function u(_){const w=_.nextToken(),T=_.context(),{lastOffset:b,lastStartLoc:N}=T,S=s(8,b,N);return w.type!==12?(r(_,ye.UNEXPECTED_EMPTY_LINKED_MODIFIER,T.lastStartLoc,0),S.value="",i(S,b,N),{nextConsumeToken:w,node:S}):(w.value==null&&r(_,ye.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,Hn(w)),S.value=w.value||"",i(S,_.currentOffset(),_.currentPosition()),{node:S})}function f(_,w){const T=_.context(),b=s(7,T.offset,T.startLoc);return b.value=w,i(b,_.currentOffset(),_.currentPosition()),b}function h(_){const w=_.context(),T=s(6,w.offset,w.startLoc);let b=_.nextToken();if(b.type===9){const N=u(_);T.modifier=N.node,b=N.nextConsumeToken||_.nextToken()}switch(b.type!==10&&r(_,ye.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,Hn(b)),b=_.nextToken(),b.type===2&&(b=_.nextToken()),b.type){case 11:b.value==null&&r(_,ye.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,Hn(b)),T.key=f(_,b.value||"");break;case 5:b.value==null&&r(_,ye.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,Hn(b)),T.key=l(_,b.value||"");break;case 6:b.value==null&&r(_,ye.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,Hn(b)),T.key=a(_,b.value||"");break;case 7:b.value==null&&r(_,ye.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,Hn(b)),T.key=c(_,b.value||"");break;default:{r(_,ye.UNEXPECTED_EMPTY_LINKED_KEY,w.lastStartLoc,0);const N=_.context(),S=s(7,N.offset,N.startLoc);return S.value="",i(S,N.offset,N.startLoc),T.key=S,i(T,N.offset,N.startLoc),{nextConsumeToken:b,node:T}}}return i(T,_.currentOffset(),_.currentPosition()),{node:T}}function p(_){const w=_.context(),T=w.currentType===1?_.currentOffset():w.offset,b=w.currentType===1?w.endLoc:w.startLoc,N=s(2,T,b);N.items=[];let S=null;do{const k=S||_.nextToken();switch(S=null,k.type){case 0:k.value==null&&r(_,ye.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,Hn(k)),N.items.push(o(_,k.value||""));break;case 6:k.value==null&&r(_,ye.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,Hn(k)),N.items.push(a(_,k.value||""));break;case 5:k.value==null&&r(_,ye.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,Hn(k)),N.items.push(l(_,k.value||""));break;case 7:k.value==null&&r(_,ye.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,Hn(k)),N.items.push(c(_,k.value||""));break;case 8:{const M=h(_);N.items.push(M.node),S=M.nextConsumeToken||null;break}}}while(w.currentType!==14&&w.currentType!==1);const V=w.currentType===1?w.lastOffset:_.currentOffset(),P=w.currentType===1?w.lastEndLoc:_.currentPosition();return i(N,V,P),N}function g(_,w,T,b){const N=_.context();let S=b.items.length===0;const V=s(1,w,T);V.cases=[],V.cases.push(b);do{const P=p(_);S||(S=P.items.length===0),V.cases.push(P)}while(N.currentType!==14);return S&&r(_,ye.MUST_HAVE_MESSAGES_IN_PLURAL,T,0),i(V,_.currentOffset(),_.currentPosition()),V}function E(_){const w=_.context(),{offset:T,startLoc:b}=w,N=p(_);return w.currentType===14?N:g(_,T,b,N)}function v(_){const w=Mb(_,s_({},t)),T=w.context(),b=s(0,T.offset,T.startLoc);return e&&b.loc&&(b.loc.source=_),b.body=E(w),t.onCacheKey&&(b.cacheKey=t.onCacheKey(_)),T.currentType!==14&&r(w,ye.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,_[T.offset]||""),i(b,w.currentOffset(),w.currentPosition()),b}return{parse:v}}function Hn(t){if(t.type===14)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"":e}function Ub(t,e={}){const n={ast:t,helpers:new Set};return{context:()=>n,helper:i=>(n.helpers.add(i),i)}}function vm(t,e){for(let n=0;n<t.length;n++)rf(t[n],e)}function rf(t,e){switch(t.type){case 1:vm(t.cases,e),e.helper("plural");break;case 2:vm(t.items,e);break;case 6:{rf(t.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function Bb(t,e={}){const n=Ub(t);n.helper("normalize"),t.body&&rf(t.body,n);const r=n.context();t.helpers=Array.from(r.helpers)}function jb(t){const e=t.body;return e.type===2?Em(e):e.cases.forEach(n=>Em(n)),t}function Em(t){if(t.items.length===1){const e=t.items[0];(e.type===3||e.type===9)&&(t.static=e.value,delete e.value)}else{const e=[];for(let n=0;n<t.items.length;n++){const r=t.items[n];if(!(r.type===3||r.type===9)||r.value==null)break;e.push(r.value)}if(e.length===t.items.length){t.static=i_(e);for(let n=0;n<t.items.length;n++){const r=t.items[n];(r.type===3||r.type===9)&&delete r.value}}}}const Wb="minifier";function qs(t){switch(t.t=t.type,t.type){case 0:{const e=t;qs(e.body),e.b=e.body,delete e.body;break}case 1:{const e=t,n=e.cases;for(let r=0;r<n.length;r++)qs(n[r]);e.c=n,delete e.cases;break}case 2:{const e=t,n=e.items;for(let r=0;r<n.length;r++)qs(n[r]);e.i=n,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=t;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=t;qs(e.key),e.k=e.key,delete e.key,e.modifier&&(qs(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=t;e.i=e.index,delete e.index;break}case 4:{const e=t;e.k=e.key,delete e.key;break}default:throw Ii(ye.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:Wb,args:[t.type]})}delete t.type}const Hb="parser";function qb(t,e){const{sourceMap:n,filename:r,breakLineCode:s,needIndent:i}=e,o=e.location!==!1,a={filename:r,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:s,needIndent:i,indentLevel:0};o&&t.loc&&(a.source=t.loc.source);const l=()=>a;function c(v,_){a.code+=v}function u(v,_=!0){const w=_?s:"";c(i?w+"  ".repeat(v):w)}function f(v=!0){const _=++a.indentLevel;v&&u(_)}function h(v=!0){const _=--a.indentLevel;v&&u(_)}function p(){u(a.indentLevel)}return{context:l,push:c,indent:f,deindent:h,newline:p,helper:v=>"_".concat(v),needIndent:()=>a.needIndent}}function Gb(t,e){const{helper:n}=t;t.push("".concat(n("linked"),"(")),hi(t,e.key),e.modifier?(t.push(", "),hi(t,e.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function Kb(t,e){const{helper:n,needIndent:r}=t;t.push("".concat(n("normalize"),"([")),t.indent(r());const s=e.items.length;for(let i=0;i<s&&(hi(t,e.items[i]),i!==s-1);i++)t.push(", ");t.deindent(r()),t.push("])")}function zb(t,e){const{helper:n,needIndent:r}=t;if(e.cases.length>1){t.push("".concat(n("plural"),"([")),t.indent(r());const s=e.cases.length;for(let i=0;i<s&&(hi(t,e.cases[i]),i!==s-1);i++)t.push(", ");t.deindent(r()),t.push("])")}}function Qb(t,e){e.body?hi(t,e.body):t.push("null")}function hi(t,e){const{helper:n}=t;switch(e.type){case 0:Qb(t,e);break;case 1:zb(t,e);break;case 2:Kb(t,e);break;case 6:Gb(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push("".concat(n("interpolate"),"(").concat(n("list"),"(").concat(e.index,"))"),e);break;case 4:t.push("".concat(n("interpolate"),"(").concat(n("named"),"(").concat(JSON.stringify(e.key),"))"),e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break;default:throw Ii(ye.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:Hb,args:[e.type]})}}const Yb=(t,e={})=>{const n=_m(e.mode)?e.mode:"normal",r=_m(e.filename)?e.filename:"message.intl",s=!!e.sourceMap,i=e.breakLineCode!=null?e.breakLineCode:n==="arrow"?";":"\n",o=e.needIndent?e.needIndent:n!=="arrow",a=t.helpers||[],l=qb(t,{mode:n,filename:r,sourceMap:s,breakLineCode:i,needIndent:o});l.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(o),a.length>0&&(l.push("const { ".concat(i_(a.map(f=>"".concat(f,": _").concat(f)),", ")," } = ctx")),l.newline()),l.push("return "),hi(l,t),l.deindent(o),l.push("}"),delete t.helpers;const{code:c,map:u}=l.context();return{ast:t,code:c,map:u?u.toJSON():void 0}};function Xb(t,e={}){const n=s_({},e),r=!!n.jit,s=!!n.minify,i=n.optimize==null?!0:n.optimize,a=$b(n).parse(t);return r?(i&&jb(a),s&&qs(a),{ast:a,code:""}):(Bb(a,n),Yb(a,n))}/*!
  * core-base v9.10.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function Jb(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(ur().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(ur().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(ur().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}const es=[];es[0]={w:[0],i:[3,0],"[":[4],o:[7]};es[1]={w:[1],".":[2],"[":[4],o:[7]};es[2]={w:[2],i:[3,0],0:[3,0]};es[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};es[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};es[5]={"'":[4,0],o:8,l:[5,0]};es[6]={'"':[4,0],o:8,l:[6,0]};const Zb=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function eT(t){return Zb.test(t)}function tT(t){const e=t.charCodeAt(0),n=t.charCodeAt(t.length-1);return e===n&&(e===34||e===39)?t.slice(1,-1):t}function nT(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function rT(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:eT(e)?tT(e):"*"+e}function sT(t){const e=[];let n=-1,r=0,s=0,i,o,a,l,c,u,f;const h=[];h[0]=()=>{o===void 0?o=a:o+=a},h[1]=()=>{o!==void 0&&(e.push(o),o=void 0)},h[2]=()=>{h[0](),s++},h[3]=()=>{if(s>0)s--,r=4,h[0]();else{if(s=0,o===void 0||(o=rT(o),o===!1))return!1;h[1]()}};function p(){const g=t[n+1];if(r===5&&g==="'"||r===6&&g==='"')return n++,a="\\"+g,h[0](),!0}for(;r!==null;)if(n++,i=t[n],!(i==="\\"&&p())){if(l=nT(i),f=es[r],c=f[l]||f.l||8,c===8||(r=c[0],c[1]!==void 0&&(u=h[c[1]],u&&(a=i,u()===!1))))return;if(r===7)return e}}const wm=new Map;function iT(t,e){return Ke(t)?t[e]:null}function oT(t,e){if(!Ke(t))return null;let n=wm.get(e);if(n||(n=sT(e),n&&wm.set(e,n)),!n)return null;const r=n.length;let s=t,i=0;for(;i<r;){const o=s[n[i]];if(o===void 0||nt(s))return null;s=o,i++}return s}const aT=t=>t,lT=t=>"",cT="text",uT=t=>t.length===0?"":wb(t),hT=Eb;function bm(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function fT(t){const e=bt(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(bt(t.named.count)||bt(t.named.n))?bt(t.named.count)?t.named.count:bt(t.named.n)?t.named.n:e:e}function dT(t,e){e.count||(e.count=t),e.n||(e.n=t)}function mT(t={}){const e=t.locale,n=fT(t),r=Ke(t.pluralRules)&&re(e)&&nt(t.pluralRules[e])?t.pluralRules[e]:bm,s=Ke(t.pluralRules)&&re(e)&&nt(t.pluralRules[e])?bm:void 0,i=_=>_[r(n,_.length,s)],o=t.list||[],a=_=>o[_],l=t.named||{};bt(t.pluralIndex)&&dT(n,l);const c=_=>l[_];function u(_){const w=nt(t.messages)?t.messages(_):Ke(t.messages)?t.messages[_]:!1;return w||(t.parent?t.parent.message(_):lT)}const f=_=>t.modifiers?t.modifiers[_]:aT,h=Re(t.processor)&&nt(t.processor.normalize)?t.processor.normalize:uT,p=Re(t.processor)&&nt(t.processor.interpolate)?t.processor.interpolate:hT,g=Re(t.processor)&&re(t.processor.type)?t.processor.type:cT,v={list:a,named:c,plural:i,linked:(_,...w)=>{const[T,b]=w;let N="text",S="";w.length===1?Ke(T)?(S=T.modifier||S,N=T.type||N):re(T)&&(S=T||S):w.length===2&&(re(T)&&(S=T||S),re(b)&&(N=b||N));const V=u(_)(v),P=N==="vnode"&&ot(V)&&S?V[0]:V;return S?f(S)(P,N):P},message:u,type:g,interpolate:p,normalize:h,values:Ot({},o,l)};return v}let bo=null;function pT(t){bo=t}function gT(t,e,n){bo&&bo.emit("i18n:init",{timestamp:Date.now(),i18n:t,version:e,meta:n})}const _T=yT("function:translate");function yT(t){return e=>bo&&bo.emit(t,e)}const vT={NOT_FOUND_KEY:1,FALLBACK_TO_TRANSLATE:2,CANNOT_FORMAT_NUMBER:3,FALLBACK_TO_NUMBER_FORMAT:4,CANNOT_FORMAT_DATE:5,FALLBACK_TO_DATE_FORMAT:6,EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:7,__EXTEND_POINT__:8},o_=ye.__EXTEND_POINT__,ls=nf(o_),Dn={INVALID_ARGUMENT:o_,INVALID_DATE_ARGUMENT:ls(),INVALID_ISO_DATE_ARGUMENT:ls(),NOT_SUPPORT_NON_STRING_MESSAGE:ls(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:ls(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:ls(),NOT_SUPPORT_LOCALE_TYPE:ls(),__EXTEND_POINT__:ls()};function zn(t){return Ii(t,null,void 0)}function sf(t,e){return e.locale!=null?Tm(e.locale):Tm(t.locale)}let $c;function Tm(t){if(re(t))return t;if(nt(t)){if(t.resolvedOnce&&$c!=null)return $c;if(t.constructor.name==="Function"){const e=t();if(vb(e))throw zn(Dn.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return $c=e}else throw zn(Dn.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw zn(Dn.NOT_SUPPORT_LOCALE_TYPE)}function ET(t,e,n){return[...new Set([n,...ot(e)?e:Ke(e)?Object.keys(e):re(e)?[e]:[n]])]}function a_(t,e,n){const r=re(n)?n:fi,s=t;s.__localeChainCache||(s.__localeChainCache=new Map);let i=s.__localeChainCache.get(r);if(!i){i=[];let o=[n];for(;ot(o);)o=Im(i,o,e);const a=ot(e)||!Re(e)?e:e.default?e.default:null;o=re(a)?[a]:a,ot(o)&&Im(i,o,!1),s.__localeChainCache.set(r,i)}return i}function Im(t,e,n){let r=!0;for(let s=0;s<e.length&&Fe(r);s++){const i=e[s];re(i)&&(r=wT(t,e[s],n))}return r}function wT(t,e,n){let r;const s=e.split("-");do{const i=s.join("-");r=bT(t,i,n),s.splice(-1,1)}while(s.length&&r===!0);return r}function bT(t,e,n){let r=!1;if(!t.includes(e)&&(r=!0,e)){r=e[e.length-1]!=="!";const s=e.replace(/!/g,"");t.push(s),(ot(n)||Re(n))&&n[s]&&(r=n[s])}return r}const TT="9.10.2",ql=-1,fi="en-US",Cm="",Am=t=>"".concat(t.charAt(0).toLocaleUpperCase()).concat(t.substr(1));function IT(){return{upper:(t,e)=>e==="text"&&re(t)?t.toUpperCase():e==="vnode"&&Ke(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&re(t)?t.toLowerCase():e==="vnode"&&Ke(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&re(t)?Am(t):e==="vnode"&&Ke(t)&&"__v_isVNode"in t?Am(t.children):t}}let l_;function Sm(t){l_=t}let c_;function CT(t){c_=t}let u_;function AT(t){u_=t}let h_=null;const ST=t=>{h_=t},RT=()=>h_;let f_=null;const Rm=t=>{f_=t},PT=()=>f_;let Pm=0;function kT(t={}){const e=nt(t.onWarn)?t.onWarn:bb,n=re(t.version)?t.version:TT,r=re(t.locale)||nt(t.locale)?t.locale:fi,s=nt(r)?fi:r,i=ot(t.fallbackLocale)||Re(t.fallbackLocale)||re(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:s,o=Re(t.messages)?t.messages:{[s]:{}},a=Re(t.datetimeFormats)?t.datetimeFormats:{[s]:{}},l=Re(t.numberFormats)?t.numberFormats:{[s]:{}},c=Ot({},t.modifiers||{},IT()),u=t.pluralRules||{},f=nt(t.missing)?t.missing:null,h=Fe(t.missingWarn)||Qr(t.missingWarn)?t.missingWarn:!0,p=Fe(t.fallbackWarn)||Qr(t.fallbackWarn)?t.fallbackWarn:!0,g=!!t.fallbackFormat,E=!!t.unresolving,v=nt(t.postTranslation)?t.postTranslation:null,_=Re(t.processor)?t.processor:null,w=Fe(t.warnHtmlMessage)?t.warnHtmlMessage:!0,T=!!t.escapeParameter,b=nt(t.messageCompiler)?t.messageCompiler:l_,N=nt(t.messageResolver)?t.messageResolver:c_||iT,S=nt(t.localeFallbacker)?t.localeFallbacker:u_||ET,V=Ke(t.fallbackContext)?t.fallbackContext:void 0,P=t,k=Ke(P.__datetimeFormatters)?P.__datetimeFormatters:new Map,M=Ke(P.__numberFormatters)?P.__numberFormatters:new Map,D=Ke(P.__meta)?P.__meta:{};Pm++;const L={version:n,cid:Pm,locale:r,fallbackLocale:i,messages:o,modifiers:c,pluralRules:u,missing:f,missingWarn:h,fallbackWarn:p,fallbackFormat:g,unresolving:E,postTranslation:v,processor:_,warnHtmlMessage:w,escapeParameter:T,messageCompiler:b,messageResolver:N,localeFallbacker:S,fallbackContext:V,onWarn:e,__meta:D};return L.datetimeFormats=a,L.numberFormats=l,L.__datetimeFormatters=k,L.__numberFormatters=M,__INTLIFY_PROD_DEVTOOLS__&&gT(L,n,D),L}function of(t,e,n,r,s){const{missing:i,onWarn:o}=t;if(i!==null){const a=i(t,n,e,s);return re(a)?a:e}else return e}function Vi(t,e,n){const r=t;r.__localeChainCache=new Map,t.localeFallbacker(t,n,e)}function Uc(t){return n=>NT(n,t)}function NT(t,e){const n=e.b||e.body;if((n.t||n.type)===1){const r=n,s=r.c||r.cases;return t.plural(s.reduce((i,o)=>[...i,km(t,o)],[]))}else return km(t,n)}function km(t,e){const n=e.s||e.static;if(n)return t.type==="text"?n:t.normalize([n]);{const r=(e.i||e.items).reduce((s,i)=>[...s,Vu(t,i)],[]);return t.normalize(r)}}function Vu(t,e){const n=e.t||e.type;switch(n){case 3:{const r=e;return r.v||r.value}case 9:{const r=e;return r.v||r.value}case 4:{const r=e;return t.interpolate(t.named(r.k||r.key))}case 5:{const r=e;return t.interpolate(t.list(r.i!=null?r.i:r.index))}case 6:{const r=e,s=r.m||r.modifier;return t.linked(Vu(t,r.k||r.key),s?Vu(t,s):void 0,t.type)}case 7:{const r=e;return r.v||r.value}case 8:{const r=e;return r.v||r.value}default:throw new Error("unhandled node type on format message part: ".concat(n))}}const d_=t=>t;let Ys=Object.create(null);const di=t=>Ke(t)&&(t.t===0||t.type===0)&&("b"in t||"body"in t);function m_(t,e={}){let n=!1;const r=e.onError||Rb;return e.onError=s=>{n=!0,r(s)},{...Xb(t,e),detectError:n}}const LT=(t,e)=>{if(!re(t))throw zn(Dn.NOT_SUPPORT_NON_STRING_MESSAGE);{Fe(e.warnHtmlMessage)&&e.warnHtmlMessage;const r=(e.onCacheKey||d_)(t),s=Ys[r];if(s)return s;const{code:i,detectError:o}=m_(t,e),a=new Function("return ".concat(i))();return o?a:Ys[r]=a}};function DT(t,e){if(__INTLIFY_JIT_COMPILATION__&&!__INTLIFY_DROP_MESSAGE_COMPILER__&&re(t)){Fe(e.warnHtmlMessage)&&e.warnHtmlMessage;const r=(e.onCacheKey||d_)(t),s=Ys[r];if(s)return s;const{ast:i,detectError:o}=m_(t,{...e,location:!1,jit:!0}),a=Uc(i);return o?a:Ys[r]=a}else{const n=t.cacheKey;if(n){const r=Ys[n];return r||(Ys[n]=Uc(t))}else return Uc(t)}}const Nm=()=>"",Cn=t=>nt(t);function Lm(t,...e){const{fallbackFormat:n,postTranslation:r,unresolving:s,messageCompiler:i,fallbackLocale:o,messages:a}=t,[l,c]=Fu(...e),u=Fe(c.missingWarn)?c.missingWarn:t.missingWarn,f=Fe(c.fallbackWarn)?c.fallbackWarn:t.fallbackWarn,h=Fe(c.escapeParameter)?c.escapeParameter:t.escapeParameter,p=!!c.resolvedMessage,g=re(c.default)||Fe(c.default)?Fe(c.default)?i?l:()=>l:c.default:n?i?l:()=>l:"",E=n||g!=="",v=sf(t,c);h&&xT(c);let[_,w,T]=p?[l,v,a[v]||{}]:p_(t,l,v,o,f,u),b=_,N=l;if(!p&&!(re(b)||di(b)||Cn(b))&&E&&(b=g,N=b),!p&&(!(re(b)||di(b)||Cn(b))||!re(w)))return s?ql:l;let S=!1;const V=()=>{S=!0},P=Cn(b)?b:g_(t,l,w,b,N,V);if(S)return b;const k=VT(t,w,T,c),M=mT(k),D=MT(t,P,M),L=r?r(D,l):D;if(__INTLIFY_PROD_DEVTOOLS__){const G={timestamp:Date.now(),key:re(l)?l:Cn(b)?b.key:"",locale:w||(Cn(b)?b.locale:""),format:re(b)?b:Cn(b)?b.source:"",message:L};G.meta=Ot({},t.__meta,RT()||{}),_T(G)}return L}function xT(t){ot(t.list)?t.list=t.list.map(e=>re(e)?gm(e):e):Ke(t.named)&&Object.keys(t.named).forEach(e=>{re(t.named[e])&&(t.named[e]=gm(t.named[e]))})}function p_(t,e,n,r,s,i){const{messages:o,onWarn:a,messageResolver:l,localeFallbacker:c}=t,u=c(t,r,n);let f={},h,p=null;const g="translate";for(let E=0;E<u.length&&(h=u[E],f=o[h]||{},(p=l(f,e))===null&&(p=f[e]),!(re(p)||di(p)||Cn(p)));E++){const v=of(t,e,h,i,g);v!==e&&(p=v)}return[p,h,f]}function g_(t,e,n,r,s,i){const{messageCompiler:o,warnHtmlMessage:a}=t;if(Cn(r)){const c=r;return c.locale=c.locale||n,c.key=c.key||e,c}if(o==null){const c=()=>r;return c.locale=n,c.key=e,c}const l=o(r,OT(t,n,s,r,a,i));return l.locale=n,l.key=e,l.source=r,l}function MT(t,e,n){return e(n)}function Fu(...t){const[e,n,r]=t,s={};if(!re(e)&&!bt(e)&&!Cn(e)&&!di(e))throw zn(Dn.INVALID_ARGUMENT);const i=bt(e)?String(e):(Cn(e),e);return bt(n)?s.plural=n:re(n)?s.default=n:Re(n)&&!Hl(n)?s.named=n:ot(n)&&(s.list=n),bt(r)?s.plural=r:re(r)?s.default=r:Re(r)&&Ot(s,r),[i,s]}function OT(t,e,n,r,s,i){return{locale:e,key:n,warnHtmlMessage:s,onError:o=>{throw i&&i(o),o},onCacheKey:o=>pb(e,n,o)}}function VT(t,e,n,r){const{modifiers:s,pluralRules:i,messageResolver:o,fallbackLocale:a,fallbackWarn:l,missingWarn:c,fallbackContext:u}=t,h={locale:e,modifiers:s,pluralRules:i,messages:p=>{let g=o(n,p);if(g==null&&u){const[,,E]=p_(u,p,e,a,l,c);g=o(E,p)}if(re(g)||di(g)){let E=!1;const _=g_(t,p,e,g,p,()=>{E=!0});return E?Nm:_}else return Cn(g)?g:Nm}};return t.processor&&(h.processor=t.processor),r.list&&(h.list=r.list),r.named&&(h.named=r.named),bt(r.plural)&&(h.pluralIndex=r.plural),h}function Dm(t,...e){const{datetimeFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=t,{__datetimeFormatters:a}=t,[l,c,u,f]=$u(...e),h=Fe(u.missingWarn)?u.missingWarn:t.missingWarn;Fe(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn;const p=!!u.part,g=sf(t,u),E=o(t,s,g);if(!re(l)||l==="")return new Intl.DateTimeFormat(g,f).format(c);let v={},_,w=null;const T="datetime format";for(let S=0;S<E.length&&(_=E[S],v=n[_]||{},w=v[l],!Re(w));S++)of(t,l,_,h,T);if(!Re(w)||!re(_))return r?ql:l;let b="".concat(_,"__").concat(l);Hl(f)||(b="".concat(b,"__").concat(JSON.stringify(f)));let N=a.get(b);return N||(N=new Intl.DateTimeFormat(_,Ot({},w,f)),a.set(b,N)),p?N.formatToParts(c):N.format(c)}const __=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function $u(...t){const[e,n,r,s]=t,i={};let o={},a;if(re(e)){const l=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!l)throw zn(Dn.INVALID_ISO_DATE_ARGUMENT);const c=l[3]?l[3].trim().startsWith("T")?"".concat(l[1].trim()).concat(l[3].trim()):"".concat(l[1].trim(),"T").concat(l[3].trim()):l[1].trim();a=new Date(c);try{a.toISOString()}catch(u){throw zn(Dn.INVALID_ISO_DATE_ARGUMENT)}}else if(_b(e)){if(isNaN(e.getTime()))throw zn(Dn.INVALID_DATE_ARGUMENT);a=e}else if(bt(e))a=e;else throw zn(Dn.INVALID_ARGUMENT);return re(n)?i.key=n:Re(n)&&Object.keys(n).forEach(l=>{__.includes(l)?o[l]=n[l]:i[l]=n[l]}),re(r)?i.locale=r:Re(r)&&(o=r),Re(s)&&(o=s),[i.key||"",a,i,o]}function xm(t,e,n){const r=t;for(const s in n){const i="".concat(e,"__").concat(s);r.__datetimeFormatters.has(i)&&r.__datetimeFormatters.delete(i)}}function Mm(t,...e){const{numberFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=t,{__numberFormatters:a}=t,[l,c,u,f]=Uu(...e),h=Fe(u.missingWarn)?u.missingWarn:t.missingWarn;Fe(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn;const p=!!u.part,g=sf(t,u),E=o(t,s,g);if(!re(l)||l==="")return new Intl.NumberFormat(g,f).format(c);let v={},_,w=null;const T="number format";for(let S=0;S<E.length&&(_=E[S],v=n[_]||{},w=v[l],!Re(w));S++)of(t,l,_,h,T);if(!Re(w)||!re(_))return r?ql:l;let b="".concat(_,"__").concat(l);Hl(f)||(b="".concat(b,"__").concat(JSON.stringify(f)));let N=a.get(b);return N||(N=new Intl.NumberFormat(_,Ot({},w,f)),a.set(b,N)),p?N.formatToParts(c):N.format(c)}const y_=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function Uu(...t){const[e,n,r,s]=t,i={};let o={};if(!bt(e))throw zn(Dn.INVALID_ARGUMENT);const a=e;return re(n)?i.key=n:Re(n)&&Object.keys(n).forEach(l=>{y_.includes(l)?o[l]=n[l]:i[l]=n[l]}),re(r)?i.locale=r:Re(r)&&(o=r),Re(s)&&(o=s),[i.key||"",a,i,o]}function Om(t,e,n){const r=t;for(const s in n){const i="".concat(e,"__").concat(s);r.__numberFormatters.has(i)&&r.__numberFormatters.delete(i)}}Jb();/*!
  * vue-i18n v9.10.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const FT="9.10.2";function $T(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(ur().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(ur().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(ur().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(ur().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(ur().__INTLIFY_PROD_DEVTOOLS__=!1)}const v_=vT.__EXTEND_POINT__,ar=nf(v_);ar(),ar(),ar(),ar(),ar(),ar(),ar(),ar(),ar();const E_=Dn.__EXTEND_POINT__,en=nf(E_),It={UNEXPECTED_RETURN_TYPE:E_,INVALID_ARGUMENT:en(),MUST_BE_CALL_SETUP_TOP:en(),NOT_INSTALLED:en(),NOT_AVAILABLE_IN_LEGACY_MODE:en(),REQUIRED_VALUE:en(),INVALID_VALUE:en(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:en(),NOT_INSTALLED_WITH_PROVIDE:en(),UNEXPECTED_ERROR:en(),NOT_COMPATIBLE_LEGACY_VUE_I18N:en(),BRIDGE_SUPPORT_VUE_2_ONLY:en(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:en(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:en(),__EXTEND_POINT__:en()};function kt(t,...e){return Ii(t,null,void 0)}const Bu=Zr("__translateVNode"),ju=Zr("__datetimeParts"),Wu=Zr("__numberParts"),w_=Zr("__setPluralRules"),b_=Zr("__injectWithOption"),Hu=Zr("__dispose");function To(t){if(!Ke(t))return t;for(const e in t)if(sl(t,e))if(!e.includes("."))Ke(t[e])&&To(t[e]);else{const n=e.split("."),r=n.length-1;let s=t,i=!1;for(let o=0;o<r;o++){if(n[o]in s||(s[n[o]]={}),!Ke(s[n[o]])){i=!0;break}s=s[n[o]]}i||(s[n[r]]=t[e],delete t[e]),Ke(s[n[r]])&&To(s[n[r]])}return t}function Gl(t,e){const{messages:n,__i18n:r,messageResolver:s,flatJson:i}=e,o=Re(n)?n:ot(r)?{}:{[t]:{}};if(ot(r)&&r.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:l,resource:c}=a;l?(o[l]=o[l]||{},Ua(c,o[l])):Ua(c,o)}else re(a)&&Ua(JSON.parse(a),o)}),s==null&&i)for(const a in o)sl(o,a)&&To(o[a]);return o}function T_(t){return t.type}function I_(t,e,n){let r=Ke(e.messages)?e.messages:{};"__i18nGlobal"in n&&(r=Gl(t.locale.value,{messages:r,__i18n:n.__i18nGlobal}));const s=Object.keys(r);s.length&&s.forEach(i=>{t.mergeLocaleMessage(i,r[i])});{if(Ke(e.datetimeFormats)){const i=Object.keys(e.datetimeFormats);i.length&&i.forEach(o=>{t.mergeDateTimeFormat(o,e.datetimeFormats[o])})}if(Ke(e.numberFormats)){const i=Object.keys(e.numberFormats);i.length&&i.forEach(o=>{t.mergeNumberFormat(o,e.numberFormats[o])})}}}function Vm(t){return ke(Ko,null,t,0)}const Fm="__INTLIFY_META__",$m=()=>[],UT=()=>!1;let Um=0;function Bm(t){return(e,n,r,s)=>t(n,r,pr()||void 0,s)}const BT=()=>{const t=pr();let e=null;return t&&(e=T_(t)[Fm])?{[Fm]:e}:null};function af(t={},e){const{__root:n,__injectWithOption:r}=t,s=n===void 0,i=t.flatJson,o=rl?Z:qo,a=!!t.translateExistCompatible;let l=Fe(t.inheritLocale)?t.inheritLocale:!0;const c=o(n&&l?n.locale.value:re(t.locale)?t.locale:fi),u=o(n&&l?n.fallbackLocale.value:re(t.fallbackLocale)||ot(t.fallbackLocale)||Re(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:c.value),f=o(Gl(c.value,t)),h=o(Re(t.datetimeFormats)?t.datetimeFormats:{[c.value]:{}}),p=o(Re(t.numberFormats)?t.numberFormats:{[c.value]:{}});let g=n?n.missingWarn:Fe(t.missingWarn)||Qr(t.missingWarn)?t.missingWarn:!0,E=n?n.fallbackWarn:Fe(t.fallbackWarn)||Qr(t.fallbackWarn)?t.fallbackWarn:!0,v=n?n.fallbackRoot:Fe(t.fallbackRoot)?t.fallbackRoot:!0,_=!!t.fallbackFormat,w=nt(t.missing)?t.missing:null,T=nt(t.missing)?Bm(t.missing):null,b=nt(t.postTranslation)?t.postTranslation:null,N=n?n.warnHtmlMessage:Fe(t.warnHtmlMessage)?t.warnHtmlMessage:!0,S=!!t.escapeParameter;const V=n?n.modifiers:Re(t.modifiers)?t.modifiers:{};let P=t.pluralRules||n&&n.pluralRules,k;k=(()=>{s&&Rm(null);const A={version:FT,locale:c.value,fallbackLocale:u.value,messages:f.value,modifiers:V,pluralRules:P,missing:T===null?void 0:T,missingWarn:g,fallbackWarn:E,fallbackFormat:_,unresolving:!0,postTranslation:b===null?void 0:b,warnHtmlMessage:N,escapeParameter:S,messageResolver:t.messageResolver,messageCompiler:t.messageCompiler,__meta:{framework:"vue"}};A.datetimeFormats=h.value,A.numberFormats=p.value,A.__datetimeFormatters=Re(k)?k.__datetimeFormatters:void 0,A.__numberFormatters=Re(k)?k.__numberFormatters:void 0;const x=kT(A);return s&&Rm(x),x})(),Vi(k,c.value,u.value);function D(){return[c.value,u.value,f.value,h.value,p.value]}const L=ue({get:()=>c.value,set:A=>{c.value=A,k.locale=c.value}}),G=ue({get:()=>u.value,set:A=>{u.value=A,k.fallbackLocale=u.value,Vi(k,c.value,A)}}),ge=ue(()=>f.value),Ve=ue(()=>h.value),me=ue(()=>p.value);function we(){return nt(b)?b:null}function be(A){b=A,k.postTranslation=A}function tt(){return w}function Je(A){A!==null&&(T=Bm(A)),w=A,k.missing=T}const Te=(A,x,de,ve,ze,gt)=>{D();let zt;try{__INTLIFY_PROD_DEVTOOLS__,s||(k.fallbackContext=n?PT():void 0),zt=A(k)}finally{__INTLIFY_PROD_DEVTOOLS__,s||(k.fallbackContext=void 0)}if(de!=="translate exists"&&bt(zt)&&zt===ql||de==="translate exists"&&!zt){const[Fs,Qt]=x();return n&&v?ve(n):ze(Fs)}else{if(gt(zt))return zt;throw kt(It.UNEXPECTED_RETURN_TYPE)}};function $e(...A){return Te(x=>Reflect.apply(Lm,null,[x,...A]),()=>Fu(...A),"translate",x=>Reflect.apply(x.t,x,[...A]),x=>x,x=>re(x))}function oe(...A){const[x,de,ve]=A;if(ve&&!Ke(ve))throw kt(It.INVALID_ARGUMENT);return $e(x,de,Ot({resolvedMessage:!0},ve||{}))}function at(...A){return Te(x=>Reflect.apply(Dm,null,[x,...A]),()=>$u(...A),"datetime format",x=>Reflect.apply(x.d,x,[...A]),()=>Cm,x=>re(x))}function ae(...A){return Te(x=>Reflect.apply(Mm,null,[x,...A]),()=>Uu(...A),"number format",x=>Reflect.apply(x.n,x,[...A]),()=>Cm,x=>re(x))}function K(A){return A.map(x=>re(x)||bt(x)||Fe(x)?Vm(String(x)):x)}const B={normalize:K,interpolate:A=>A,type:"vnode"};function F(...A){return Te(x=>{let de;const ve=x;try{ve.processor=B,de=Reflect.apply(Lm,null,[ve,...A])}finally{ve.processor=null}return de},()=>Fu(...A),"translate",x=>x[Bu](...A),x=>[Vm(x)],x=>ot(x))}function z(...A){return Te(x=>Reflect.apply(Mm,null,[x,...A]),()=>Uu(...A),"number format",x=>x[Wu](...A),$m,x=>re(x)||ot(x))}function _e(...A){return Te(x=>Reflect.apply(Dm,null,[x,...A]),()=>$u(...A),"datetime format",x=>x[ju](...A),$m,x=>re(x)||ot(x))}function Ce(A){P=A,k.pluralRules=P}function m(A,x){return Te(()=>{if(!A)return!1;const de=re(x)?x:c.value,ve=I(de),ze=k.messageResolver(ve,A);return a?ze!=null:di(ze)||Cn(ze)||re(ze)},()=>[A],"translate exists",de=>Reflect.apply(de.te,de,[A,x]),UT,de=>Fe(de))}function d(A){let x=null;const de=a_(k,u.value,c.value);for(let ve=0;ve<de.length;ve++){const ze=f.value[de[ve]]||{},gt=k.messageResolver(ze,A);if(gt!=null){x=gt;break}}return x}function y(A){const x=d(A);return x!=null?x:n?n.tm(A)||{}:{}}function I(A){return f.value[A]||{}}function C(A,x){if(i){const de={[A]:x};for(const ve in de)sl(de,ve)&&To(de[ve]);x=de[A]}f.value[A]=x,k.messages=f.value}function O(A,x){f.value[A]=f.value[A]||{};const de={[A]:x};if(i)for(const ve in de)sl(de,ve)&&To(de[ve]);x=de[A],Ua(x,f.value[A]),k.messages=f.value}function Y(A){return h.value[A]||{}}function q(A,x){h.value[A]=x,k.datetimeFormats=h.value,xm(k,A,x)}function X(A,x){h.value[A]=Ot(h.value[A]||{},x),k.datetimeFormats=h.value,xm(k,A,x)}function H(A){return p.value[A]||{}}function ne(A,x){p.value[A]=x,k.numberFormats=p.value,Om(k,A,x)}function fe(A,x){p.value[A]=Ot(p.value[A]||{},x),k.numberFormats=p.value,Om(k,A,x)}Um++,n&&rl&&(xn(n.locale,A=>{l&&(c.value=A,k.locale=A,Vi(k,c.value,u.value))}),xn(n.fallbackLocale,A=>{l&&(u.value=A,k.fallbackLocale=A,Vi(k,c.value,u.value))}));const J={id:Um,locale:L,fallbackLocale:G,get inheritLocale(){return l},set inheritLocale(A){l=A,A&&n&&(c.value=n.locale.value,u.value=n.fallbackLocale.value,Vi(k,c.value,u.value))},get availableLocales(){return Object.keys(f.value).sort()},messages:ge,get modifiers(){return V},get pluralRules(){return P||{}},get isGlobal(){return s},get missingWarn(){return g},set missingWarn(A){g=A,k.missingWarn=g},get fallbackWarn(){return E},set fallbackWarn(A){E=A,k.fallbackWarn=E},get fallbackRoot(){return v},set fallbackRoot(A){v=A},get fallbackFormat(){return _},set fallbackFormat(A){_=A,k.fallbackFormat=_},get warnHtmlMessage(){return N},set warnHtmlMessage(A){N=A,k.warnHtmlMessage=A},get escapeParameter(){return S},set escapeParameter(A){S=A,k.escapeParameter=A},t:$e,getLocaleMessage:I,setLocaleMessage:C,mergeLocaleMessage:O,getPostTranslationHandler:we,setPostTranslationHandler:be,getMissingHandler:tt,setMissingHandler:Je,[w_]:Ce};return J.datetimeFormats=Ve,J.numberFormats=me,J.rt=oe,J.te=m,J.tm=y,J.d=at,J.n=ae,J.getDateTimeFormat=Y,J.setDateTimeFormat=q,J.mergeDateTimeFormat=X,J.getNumberFormat=H,J.setNumberFormat=ne,J.mergeNumberFormat=fe,J[b_]=r,J[Bu]=F,J[ju]=_e,J[Wu]=z,J}function jT(t){const e=re(t.locale)?t.locale:fi,n=re(t.fallbackLocale)||ot(t.fallbackLocale)||Re(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:e,r=nt(t.missing)?t.missing:void 0,s=Fe(t.silentTranslationWarn)||Qr(t.silentTranslationWarn)?!t.silentTranslationWarn:!0,i=Fe(t.silentFallbackWarn)||Qr(t.silentFallbackWarn)?!t.silentFallbackWarn:!0,o=Fe(t.fallbackRoot)?t.fallbackRoot:!0,a=!!t.formatFallbackMessages,l=Re(t.modifiers)?t.modifiers:{},c=t.pluralizationRules,u=nt(t.postTranslation)?t.postTranslation:void 0,f=re(t.warnHtmlInMessage)?t.warnHtmlInMessage!=="off":!0,h=!!t.escapeParameterHtml,p=Fe(t.sync)?t.sync:!0;let g=t.messages;if(Re(t.sharedMessages)){const S=t.sharedMessages;g=Object.keys(S).reduce((P,k)=>{const M=P[k]||(P[k]={});return Ot(M,S[k]),P},g||{})}const{__i18n:E,__root:v,__injectWithOption:_}=t,w=t.datetimeFormats,T=t.numberFormats,b=t.flatJson,N=t.translateExistCompatible;return{locale:e,fallbackLocale:n,messages:g,flatJson:b,datetimeFormats:w,numberFormats:T,missing:r,missingWarn:s,fallbackWarn:i,fallbackRoot:o,fallbackFormat:a,modifiers:l,pluralRules:c,postTranslation:u,warnHtmlMessage:f,escapeParameter:h,messageResolver:t.messageResolver,inheritLocale:p,translateExistCompatible:N,__i18n:E,__root:v,__injectWithOption:_}}function qu(t={},e){{const n=af(jT(t)),{__extender:r}=t,s={id:n.id,get locale(){return n.locale.value},set locale(i){n.locale.value=i},get fallbackLocale(){return n.fallbackLocale.value},set fallbackLocale(i){n.fallbackLocale.value=i},get messages(){return n.messages.value},get datetimeFormats(){return n.datetimeFormats.value},get numberFormats(){return n.numberFormats.value},get availableLocales(){return n.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(i){},get missing(){return n.getMissingHandler()},set missing(i){n.setMissingHandler(i)},get silentTranslationWarn(){return Fe(n.missingWarn)?!n.missingWarn:n.missingWarn},set silentTranslationWarn(i){n.missingWarn=Fe(i)?!i:i},get silentFallbackWarn(){return Fe(n.fallbackWarn)?!n.fallbackWarn:n.fallbackWarn},set silentFallbackWarn(i){n.fallbackWarn=Fe(i)?!i:i},get modifiers(){return n.modifiers},get formatFallbackMessages(){return n.fallbackFormat},set formatFallbackMessages(i){n.fallbackFormat=i},get postTranslation(){return n.getPostTranslationHandler()},set postTranslation(i){n.setPostTranslationHandler(i)},get sync(){return n.inheritLocale},set sync(i){n.inheritLocale=i},get warnHtmlInMessage(){return n.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(i){n.warnHtmlMessage=i!=="off"},get escapeParameterHtml(){return n.escapeParameter},set escapeParameterHtml(i){n.escapeParameter=i},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(i){},get pluralizationRules(){return n.pluralRules||{}},__composer:n,t(...i){const[o,a,l]=i,c={};let u=null,f=null;if(!re(o))throw kt(It.INVALID_ARGUMENT);const h=o;return re(a)?c.locale=a:ot(a)?u=a:Re(a)&&(f=a),ot(l)?u=l:Re(l)&&(f=l),Reflect.apply(n.t,n,[h,u||f||{},c])},rt(...i){return Reflect.apply(n.rt,n,[...i])},tc(...i){const[o,a,l]=i,c={plural:1};let u=null,f=null;if(!re(o))throw kt(It.INVALID_ARGUMENT);const h=o;return re(a)?c.locale=a:bt(a)?c.plural=a:ot(a)?u=a:Re(a)&&(f=a),re(l)?c.locale=l:ot(l)?u=l:Re(l)&&(f=l),Reflect.apply(n.t,n,[h,u||f||{},c])},te(i,o){return n.te(i,o)},tm(i){return n.tm(i)},getLocaleMessage(i){return n.getLocaleMessage(i)},setLocaleMessage(i,o){n.setLocaleMessage(i,o)},mergeLocaleMessage(i,o){n.mergeLocaleMessage(i,o)},d(...i){return Reflect.apply(n.d,n,[...i])},getDateTimeFormat(i){return n.getDateTimeFormat(i)},setDateTimeFormat(i,o){n.setDateTimeFormat(i,o)},mergeDateTimeFormat(i,o){n.mergeDateTimeFormat(i,o)},n(...i){return Reflect.apply(n.n,n,[...i])},getNumberFormat(i){return n.getNumberFormat(i)},setNumberFormat(i,o){n.setNumberFormat(i,o)},mergeNumberFormat(i,o){n.mergeNumberFormat(i,o)},getChoiceIndex(i,o){return-1}};return s.__extender=r,s}}const lf={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function WT({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((r,s)=>[...r,...s.type===Ze?s.children:[s]],[]):e.reduce((n,r)=>{const s=t[r];return s&&(n[r]=s()),n},{})}function C_(t){return Ze}const HT=ft({name:"i18n-t",props:Ot({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>bt(t)||!isNaN(t)}},lf),setup(t,e){const{slots:n,attrs:r}=e,s=t.i18n||Er({useScope:t.scope,__useComponent:!0});return()=>{const i=Object.keys(n).filter(f=>f!=="_"),o={};t.locale&&(o.locale=t.locale),t.plural!==void 0&&(o.plural=re(t.plural)?+t.plural:t.plural);const a=WT(e,i),l=s[Bu](t.keypath,a,o),c=Ot({},r),u=re(t.tag)||Ke(t.tag)?t.tag:C_();return Qo(u,c,l)}}}),jm=HT;function qT(t){return ot(t)&&!re(t[0])}function A_(t,e,n,r){const{slots:s,attrs:i}=e;return()=>{const o={part:!0};let a={};t.locale&&(o.locale=t.locale),re(t.format)?o.key=t.format:Ke(t.format)&&(re(t.format.key)&&(o.key=t.format.key),a=Object.keys(t.format).reduce((h,p)=>n.includes(p)?Ot({},h,{[p]:t.format[p]}):h,{}));const l=r(t.value,o,a);let c=[o.key];ot(l)?c=l.map((h,p)=>{const g=s[h.type],E=g?g({[h.type]:h.value,index:p,parts:l}):[h.value];return qT(E)&&(E[0].key="".concat(h.type,"-").concat(p)),E}):re(l)&&(c=[l]);const u=Ot({},i),f=re(t.tag)||Ke(t.tag)?t.tag:C_();return Qo(f,u,c)}}const GT=ft({name:"i18n-n",props:Ot({value:{type:Number,required:!0},format:{type:[String,Object]}},lf),setup(t,e){const n=t.i18n||Er({useScope:"parent",__useComponent:!0});return A_(t,e,y_,(...r)=>n[Wu](...r))}}),Wm=GT,KT=ft({name:"i18n-d",props:Ot({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},lf),setup(t,e){const n=t.i18n||Er({useScope:"parent",__useComponent:!0});return A_(t,e,__,(...r)=>n[ju](...r))}}),Hm=KT;function zT(t,e){const n=t;if(t.mode==="composition")return n.__getInstance(e)||t.global;{const r=n.__getInstance(e);return r!=null?r.__composer:t.global.__composer}}function QT(t){const e=o=>{const{instance:a,modifiers:l,value:c}=o;if(!a||!a.$)throw kt(It.UNEXPECTED_ERROR);const u=zT(t,a.$),f=qm(c);return[Reflect.apply(u.t,u,[...Gm(f)]),u]};return{created:(o,a)=>{const[l,c]=e(a);rl&&t.global===c&&(o.__i18nWatcher=xn(c.locale,()=>{a.instance&&a.instance.$forceUpdate()})),o.__composer=c,o.textContent=l},unmounted:o=>{rl&&o.__i18nWatcher&&(o.__i18nWatcher(),o.__i18nWatcher=void 0,delete o.__i18nWatcher),o.__composer&&(o.__composer=void 0,delete o.__composer)},beforeUpdate:(o,{value:a})=>{if(o.__composer){const l=o.__composer,c=qm(a);o.textContent=Reflect.apply(l.t,l,[...Gm(c)])}},getSSRProps:o=>{const[a]=e(o);return{textContent:a}}}}function qm(t){if(re(t))return{path:t};if(Re(t)){if(!("path"in t))throw kt(It.REQUIRED_VALUE,"path");return t}else throw kt(It.INVALID_VALUE)}function Gm(t){const{path:e,locale:n,args:r,choice:s,plural:i}=t,o={},a=r||{};return re(n)&&(o.locale=n),bt(s)&&(o.plural=s),bt(i)&&(o.plural=i),[e,a,o]}function YT(t,e,...n){const r=Re(n[0])?n[0]:{},s=!!r.useI18nComponentName;(Fe(r.globalInstall)?r.globalInstall:!0)&&([s?"i18n":jm.name,"I18nT"].forEach(o=>t.component(o,jm)),[Wm.name,"I18nN"].forEach(o=>t.component(o,Wm)),[Hm.name,"I18nD"].forEach(o=>t.component(o,Hm))),t.directive("t",QT(e))}function XT(t,e,n){return{beforeCreate(){const r=pr();if(!r)throw kt(It.UNEXPECTED_ERROR);const s=this.$options;if(s.i18n){const i=s.i18n;if(s.__i18n&&(i.__i18n=s.__i18n),i.__root=e,this===this.$root)this.$i18n=Km(t,i);else{i.__injectWithOption=!0,i.__extender=n.__vueI18nExtend,this.$i18n=qu(i);const o=this.$i18n;o.__extender&&(o.__disposer=o.__extender(this.$i18n))}}else if(s.__i18n)if(this===this.$root)this.$i18n=Km(t,s);else{this.$i18n=qu({__i18n:s.__i18n,__injectWithOption:!0,__extender:n.__vueI18nExtend,__root:e});const i=this.$i18n;i.__extender&&(i.__disposer=i.__extender(this.$i18n))}else this.$i18n=t;s.__i18nGlobal&&I_(e,s,s),this.$t=(...i)=>this.$i18n.t(...i),this.$rt=(...i)=>this.$i18n.rt(...i),this.$tc=(...i)=>this.$i18n.tc(...i),this.$te=(i,o)=>this.$i18n.te(i,o),this.$d=(...i)=>this.$i18n.d(...i),this.$n=(...i)=>this.$i18n.n(...i),this.$tm=i=>this.$i18n.tm(i),n.__setInstance(r,this.$i18n)},mounted(){},unmounted(){const r=pr();if(!r)throw kt(It.UNEXPECTED_ERROR);const s=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,s.__disposer&&(s.__disposer(),delete s.__disposer,delete s.__extender),n.__deleteInstance(r),delete this.$i18n}}}function Km(t,e){t.locale=e.locale||t.locale,t.fallbackLocale=e.fallbackLocale||t.fallbackLocale,t.missing=e.missing||t.missing,t.silentTranslationWarn=e.silentTranslationWarn||t.silentFallbackWarn,t.silentFallbackWarn=e.silentFallbackWarn||t.silentFallbackWarn,t.formatFallbackMessages=e.formatFallbackMessages||t.formatFallbackMessages,t.postTranslation=e.postTranslation||t.postTranslation,t.warnHtmlInMessage=e.warnHtmlInMessage||t.warnHtmlInMessage,t.escapeParameterHtml=e.escapeParameterHtml||t.escapeParameterHtml,t.sync=e.sync||t.sync,t.__composer[w_](e.pluralizationRules||t.pluralizationRules);const n=Gl(t.locale,{messages:e.messages,__i18n:e.__i18n});return Object.keys(n).forEach(r=>t.mergeLocaleMessage(r,n[r])),e.datetimeFormats&&Object.keys(e.datetimeFormats).forEach(r=>t.mergeDateTimeFormat(r,e.datetimeFormats[r])),e.numberFormats&&Object.keys(e.numberFormats).forEach(r=>t.mergeNumberFormat(r,e.numberFormats[r])),t}const JT=Zr("global-vue-i18n");function ZT(t={},e){const n=__VUE_I18N_LEGACY_API__&&Fe(t.legacy)?t.legacy:__VUE_I18N_LEGACY_API__,r=Fe(t.globalInjection)?t.globalInjection:!0,s=__VUE_I18N_LEGACY_API__&&n?!!t.allowComposition:!0,i=new Map,[o,a]=eI(t,n),l=Zr("");function c(h){return i.get(h)||null}function u(h,p){i.set(h,p)}function f(h){i.delete(h)}{const h={get mode(){return __VUE_I18N_LEGACY_API__&&n?"legacy":"composition"},get allowComposition(){return s},async install(p,...g){if(p.__VUE_I18N_SYMBOL__=l,p.provide(p.__VUE_I18N_SYMBOL__,h),Re(g[0])){const _=g[0];h.__composerExtend=_.__composerExtend,h.__vueI18nExtend=_.__vueI18nExtend}let E=null;!n&&r&&(E=cI(p,h.global)),__VUE_I18N_FULL_INSTALL__&&YT(p,h,...g),__VUE_I18N_LEGACY_API__&&n&&p.mixin(XT(a,a.__composer,h));const v=p.unmount;p.unmount=()=>{E&&E(),h.dispose(),v()}},get global(){return a},dispose(){o.stop()},__instances:i,__getInstance:c,__setInstance:u,__deleteInstance:f};return h}}function Er(t={}){const e=pr();if(e==null)throw kt(It.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw kt(It.NOT_INSTALLED);const n=tI(e),r=rI(n),s=T_(e),i=nI(t,s);if(__VUE_I18N_LEGACY_API__&&n.mode==="legacy"&&!t.__useComponent){if(!n.allowComposition)throw kt(It.NOT_AVAILABLE_IN_LEGACY_MODE);return aI(e,i,r,t)}if(i==="global")return I_(r,t,s),r;if(i==="parent"){let l=sI(n,e,t.__useComponent);return l==null&&(l=r),l}const o=n;let a=o.__getInstance(e);if(a==null){const l=Ot({},t);"__i18n"in s&&(l.__i18n=s.__i18n),r&&(l.__root=r),a=af(l),o.__composerExtend&&(a[Hu]=o.__composerExtend(a)),oI(o,e,a),o.__setInstance(e,a)}return a}function eI(t,e,n){const r=Lh();{const s=__VUE_I18N_LEGACY_API__&&e?r.run(()=>qu(t)):r.run(()=>af(t));if(s==null)throw kt(It.UNEXPECTED_ERROR);return[r,s]}}function tI(t){{const e=Pn(t.isCE?JT:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw kt(t.isCE?It.NOT_INSTALLED_WITH_PROVIDE:It.UNEXPECTED_ERROR);return e}}function nI(t,e){return Hl(t)?"__i18n"in e?"local":"global":t.useScope?t.useScope:"local"}function rI(t){return t.mode==="composition"?t.global:t.global.__composer}function sI(t,e,n=!1){let r=null;const s=e.root;let i=iI(e,n);for(;i!=null;){const o=t;if(t.mode==="composition")r=o.__getInstance(i);else if(__VUE_I18N_LEGACY_API__){const a=o.__getInstance(i);a!=null&&(r=a.__composer,n&&r&&!r[b_]&&(r=null))}if(r!=null||s===i)break;i=i.parent}return r}function iI(t,e=!1){return t==null?null:e&&t.vnode.ctx||t.parent}function oI(t,e,n){Mn(()=>{},e),$l(()=>{const r=n;t.__deleteInstance(e);const s=r[Hu];s&&(s(),delete r[Hu])},e)}function aI(t,e,n,r={}){const s=e==="local",i=qo(null);if(s&&t.proxy&&!(t.proxy.$options.i18n||t.proxy.$options.__i18n))throw kt(It.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const o=Fe(r.inheritLocale)?r.inheritLocale:!re(r.locale),a=Z(!s||o?n.locale.value:re(r.locale)?r.locale:fi),l=Z(!s||o?n.fallbackLocale.value:re(r.fallbackLocale)||ot(r.fallbackLocale)||Re(r.fallbackLocale)||r.fallbackLocale===!1?r.fallbackLocale:a.value),c=Z(Gl(a.value,r)),u=Z(Re(r.datetimeFormats)?r.datetimeFormats:{[a.value]:{}}),f=Z(Re(r.numberFormats)?r.numberFormats:{[a.value]:{}}),h=s?n.missingWarn:Fe(r.missingWarn)||Qr(r.missingWarn)?r.missingWarn:!0,p=s?n.fallbackWarn:Fe(r.fallbackWarn)||Qr(r.fallbackWarn)?r.fallbackWarn:!0,g=s?n.fallbackRoot:Fe(r.fallbackRoot)?r.fallbackRoot:!0,E=!!r.fallbackFormat,v=nt(r.missing)?r.missing:null,_=nt(r.postTranslation)?r.postTranslation:null,w=s?n.warnHtmlMessage:Fe(r.warnHtmlMessage)?r.warnHtmlMessage:!0,T=!!r.escapeParameter,b=s?n.modifiers:Re(r.modifiers)?r.modifiers:{},N=r.pluralRules||s&&n.pluralRules;function S(){return[a.value,l.value,c.value,u.value,f.value]}const V=ue({get:()=>i.value?i.value.locale.value:a.value,set:d=>{i.value&&(i.value.locale.value=d),a.value=d}}),P=ue({get:()=>i.value?i.value.fallbackLocale.value:l.value,set:d=>{i.value&&(i.value.fallbackLocale.value=d),l.value=d}}),k=ue(()=>i.value?i.value.messages.value:c.value),M=ue(()=>u.value),D=ue(()=>f.value);function L(){return i.value?i.value.getPostTranslationHandler():_}function G(d){i.value&&i.value.setPostTranslationHandler(d)}function ge(){return i.value?i.value.getMissingHandler():v}function Ve(d){i.value&&i.value.setMissingHandler(d)}function me(d){return S(),d()}function we(...d){return i.value?me(()=>Reflect.apply(i.value.t,null,[...d])):me(()=>"")}function be(...d){return i.value?Reflect.apply(i.value.rt,null,[...d]):""}function tt(...d){return i.value?me(()=>Reflect.apply(i.value.d,null,[...d])):me(()=>"")}function Je(...d){return i.value?me(()=>Reflect.apply(i.value.n,null,[...d])):me(()=>"")}function Te(d){return i.value?i.value.tm(d):{}}function $e(d,y){return i.value?i.value.te(d,y):!1}function oe(d){return i.value?i.value.getLocaleMessage(d):{}}function at(d,y){i.value&&(i.value.setLocaleMessage(d,y),c.value[d]=y)}function ae(d,y){i.value&&i.value.mergeLocaleMessage(d,y)}function K(d){return i.value?i.value.getDateTimeFormat(d):{}}function R(d,y){i.value&&(i.value.setDateTimeFormat(d,y),u.value[d]=y)}function B(d,y){i.value&&i.value.mergeDateTimeFormat(d,y)}function F(d){return i.value?i.value.getNumberFormat(d):{}}function z(d,y){i.value&&(i.value.setNumberFormat(d,y),f.value[d]=y)}function _e(d,y){i.value&&i.value.mergeNumberFormat(d,y)}const Ce={get id(){return i.value?i.value.id:-1},locale:V,fallbackLocale:P,messages:k,datetimeFormats:M,numberFormats:D,get inheritLocale(){return i.value?i.value.inheritLocale:o},set inheritLocale(d){i.value&&(i.value.inheritLocale=d)},get availableLocales(){return i.value?i.value.availableLocales:Object.keys(c.value)},get modifiers(){return i.value?i.value.modifiers:b},get pluralRules(){return i.value?i.value.pluralRules:N},get isGlobal(){return i.value?i.value.isGlobal:!1},get missingWarn(){return i.value?i.value.missingWarn:h},set missingWarn(d){i.value&&(i.value.missingWarn=d)},get fallbackWarn(){return i.value?i.value.fallbackWarn:p},set fallbackWarn(d){i.value&&(i.value.missingWarn=d)},get fallbackRoot(){return i.value?i.value.fallbackRoot:g},set fallbackRoot(d){i.value&&(i.value.fallbackRoot=d)},get fallbackFormat(){return i.value?i.value.fallbackFormat:E},set fallbackFormat(d){i.value&&(i.value.fallbackFormat=d)},get warnHtmlMessage(){return i.value?i.value.warnHtmlMessage:w},set warnHtmlMessage(d){i.value&&(i.value.warnHtmlMessage=d)},get escapeParameter(){return i.value?i.value.escapeParameter:T},set escapeParameter(d){i.value&&(i.value.escapeParameter=d)},t:we,getPostTranslationHandler:L,setPostTranslationHandler:G,getMissingHandler:ge,setMissingHandler:Ve,rt:be,d:tt,n:Je,tm:Te,te:$e,getLocaleMessage:oe,setLocaleMessage:at,mergeLocaleMessage:ae,getDateTimeFormat:K,setDateTimeFormat:R,mergeDateTimeFormat:B,getNumberFormat:F,setNumberFormat:z,mergeNumberFormat:_e};function m(d){d.locale.value=a.value,d.fallbackLocale.value=l.value,Object.keys(c.value).forEach(y=>{d.mergeLocaleMessage(y,c.value[y])}),Object.keys(u.value).forEach(y=>{d.mergeDateTimeFormat(y,u.value[y])}),Object.keys(f.value).forEach(y=>{d.mergeNumberFormat(y,f.value[y])}),d.escapeParameter=T,d.fallbackFormat=E,d.fallbackRoot=g,d.fallbackWarn=p,d.missingWarn=h,d.warnHtmlMessage=w}return vg(()=>{if(t.proxy==null||t.proxy.$i18n==null)throw kt(It.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const d=i.value=t.proxy.$i18n.__composer;e==="global"?(a.value=d.locale.value,l.value=d.fallbackLocale.value,c.value=d.messages.value,u.value=d.datetimeFormats.value,f.value=d.numberFormats.value):s&&m(d)}),Ce}const lI=["locale","fallbackLocale","availableLocales"],zm=["t","rt","d","n","tm","te"];function cI(t,e){const n=Object.create(null);return lI.forEach(s=>{const i=Object.getOwnPropertyDescriptor(e,s);if(!i)throw kt(It.UNEXPECTED_ERROR);const o=mt(i.value)?{get(){return i.value.value},set(a){i.value.value=a}}:{get(){return i.get&&i.get()}};Object.defineProperty(n,s,o)}),t.config.globalProperties.$i18n=n,zm.forEach(s=>{const i=Object.getOwnPropertyDescriptor(e,s);if(!i||!i.value)throw kt(It.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,"$".concat(s),i)}),()=>{delete t.config.globalProperties.$i18n,zm.forEach(s=>{delete t.config.globalProperties["$".concat(s)]})}}$T();__INTLIFY_JIT_COMPILATION__?Sm(DT):Sm(LT);CT(oT);AT(a_);if(__INTLIFY_PROD_DEVTOOLS__){const t=ur();t.__INTLIFY__=!0,pT(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}var uI=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let S_;const Kl=t=>S_=t,R_=Symbol();function Gu(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var oo;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(oo||(oo={}));function hI(){const t=Lh(!0),e=t.run(()=>Z({}));let n=[],r=[];const s=Dl({install(i){Kl(s),s._a=i,i.provide(R_,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return!this._a&&!uI?r.push(i):n.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const P_=()=>{};function Qm(t,e,n,r=P_){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),r())};return!n&&Dh()&&$p(s),s}function Bs(t,...e){t.slice().forEach(n=>{n(...e)})}const fI=t=>t();function Ku(t,e){t instanceof Map&&e instanceof Map&&e.forEach((n,r)=>t.set(r,n)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];Gu(s)&&Gu(r)&&t.hasOwnProperty(n)&&!mt(r)&&!dr(r)?t[n]=Ku(s,r):t[n]=r}return t}const dI=Symbol();function mI(t){return!Gu(t)||!t.hasOwnProperty(dI)}const{assign:Lr}=Object;function pI(t){return!!(mt(t)&&t.effect)}function gI(t,e,n,r){const{state:s,actions:i,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=s?s():{});const u=Iv(n.state.value[t]);return Lr(u,i,Object.keys(o||{}).reduce((f,h)=>(f[h]=Dl(ue(()=>{Kl(n);const p=n._s.get(t);return o[h].call(p,p)})),f),{}))}return l=k_(t,c,e,n,r,!0),l}function k_(t,e,n={},r,s,i){let o;const a=Lr({actions:{}},n),l={deep:!0};let c,u,f=[],h=[],p;const g=r.state.value[t];!i&&!g&&(r.state.value[t]={}),Z({});let E;function v(P){let k;c=u=!1,typeof P=="function"?(P(r.state.value[t]),k={type:oo.patchFunction,storeId:t,events:p}):(Ku(r.state.value[t],P),k={type:oo.patchObject,payload:P,storeId:t,events:p});const M=E=Symbol();Go().then(()=>{E===M&&(c=!0)}),u=!0,Bs(f,k,r.state.value[t])}const _=i?function(){const{state:k}=n,M=k?k():{};this.$patch(D=>{Lr(D,M)})}:P_;function w(){o.stop(),f=[],h=[],r._s.delete(t)}function T(P,k){return function(){Kl(r);const M=Array.from(arguments),D=[],L=[];function G(me){D.push(me)}function ge(me){L.push(me)}Bs(h,{args:M,name:P,store:N,after:G,onError:ge});let Ve;try{Ve=k.apply(this&&this.$id===t?this:N,M)}catch(me){throw Bs(L,me),me}return Ve instanceof Promise?Ve.then(me=>(Bs(D,me),me)).catch(me=>(Bs(L,me),Promise.reject(me))):(Bs(D,Ve),Ve)}}const b={_p:r,$id:t,$onAction:Qm.bind(null,h),$patch:v,$reset:_,$subscribe(P,k={}){const M=Qm(f,P,k.detached,()=>D()),D=o.run(()=>xn(()=>r.state.value[t],L=>{(k.flush==="sync"?u:c)&&P({storeId:t,type:oo.direct,events:p},L)},Lr({},l,k)));return M},$dispose:w},N=Ho(b);r._s.set(t,N);const V=(r._a&&r._a.runWithContext||fI)(()=>r._e.run(()=>(o=Lh()).run(e)));for(const P in V){const k=V[P];if(mt(k)&&!pI(k)||dr(k))i||(g&&mI(k)&&(mt(k)?k.value=g[P]:Ku(k,g[P])),r.state.value[t][P]=k);else if(typeof k=="function"){const M=T(P,k);V[P]=M,a.actions[P]=k}}return Lr(N,V),Lr(Be(N),V),Object.defineProperty(N,"$state",{get:()=>r.state.value[t],set:P=>{v(k=>{Lr(k,P)})}}),r._p.forEach(P=>{Lr(N,o.run(()=>P({store:N,app:r._a,pinia:r,options:a})))}),g&&i&&n.hydrate&&n.hydrate(N.$state,g),c=!0,u=!0,N}function N_(t,e,n){let r,s;const i=typeof e=="function";typeof t=="string"?(r=t,s=i?n:e):(s=t,r=t.id);function o(a,l){const c=cE();return a=a||(c?Pn(R_,null):null),a&&Kl(a),a=S_,a._s.has(r)||(i?k_(r,e,s,a):gI(r,s,a)),a._s.get(r)}return o.$id=r,o}function _I(t){{t=Be(t);const e={};for(const n in t){const r=t[n];(mt(r)||dr(r))&&(e[n]=Sv(t,n))}return e}}(function(){var t;try{if(typeof document<"u"){var e=document.createElement("style");e.nonce=(t=document.head.querySelector("meta[property=csp-nonce]"))==null?void 0:t.content,e.appendChild(document.createTextNode(".vue-notification-group{display:block;position:fixed;z-index:5000}.vue-notification-wrapper{display:block;overflow:hidden;width:100%;margin:0;padding:0}.notification-title{font-weight:600}.vue-notification-template{display:block;box-sizing:border-box;background:white;text-align:left}.vue-notification{display:block;box-sizing:border-box;text-align:left;font-size:12px;padding:10px;margin:0 5px 5px;color:#fff;background:#44A4FC;border-left:5px solid #187FE7}.vue-notification.warn{background:#ffb648;border-left-color:#f48a06}.vue-notification.error{background:#E54D42;border-left-color:#b82e24}.vue-notification.success{background:#68CD86;border-left-color:#42a85f}.vn-fade-enter-active,.vn-fade-leave-active,.vn-fade-move{transition:all .5s}.vn-fade-enter-from,.vn-fade-leave-to{opacity:0}")),document.head.appendChild(e)}}catch(n){console.error("vite-plugin-css-injected-by-js",n)}})();const L_=new Map;let yI=class{constructor(e,n,r){this.remaining=n,this.callback=e,this.notifyItem=r,this.resume()}pause(){clearTimeout(this.notifyItem.timer),this.remaining-=Date.now()-this.start}resume(){this.start=Date.now(),clearTimeout(this.notifyItem.timer),this.notifyItem.timer=setTimeout(this.callback,this.remaining)}};function vI(t){return{all:t=t||new Map,on:function(e,n){var r=t.get(e);r?r.push(n):t.set(e,[n])},off:function(e,n){var r=t.get(e);r&&(n?r.splice(r.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var r=t.get(e);r&&r.slice().map(function(s){s(n)}),(r=t.get("*"))&&r.slice().map(function(s){s(e,n)})}}}const il=vI(),Bc="[-+]?[0-9]*.?[0-9]+",Ym=[{name:"px",regexp:new RegExp("^".concat(Bc,"px$"))},{name:"%",regexp:new RegExp("^".concat(Bc,"%$"))},{name:"px",regexp:new RegExp("^".concat(Bc,"$"))}],EI=t=>{if(t==="auto")return{type:t,value:0};for(let e=0;e<Ym.length;e++){const n=Ym[e];if(n.regexp.test(t))return{type:n.name,value:parseFloat(t)}}return{type:"",value:t}},wI=t=>{switch(typeof t){case"number":return{type:"px",value:t};case"string":return EI(t);default:return{type:"",value:t}}},Xm={x:new Set(["left","center","right"]),y:new Set(["top","bottom"])},bI=(t=>()=>t++)(0),TI=t=>typeof t!="string"?[]:t.split(/\s+/gi).filter(Boolean),II=t=>{typeof t=="string"&&(t=TI(t));let e=null,n=null;return t.forEach(r=>{Xm.y.has(r)&&(n=r),Xm.x.has(r)&&(e=r)}),{x:e,y:n}},jc={position:["top","right"],cssAnimation:"vn-fade",velocityAnimation:{enter:t=>({height:[t.clientHeight,0],opacity:[1,0]}),leave:{height:0,opacity:[0,1]}}},CI=ft({name:"velocity-group",inheritAttrs:!1,props:{name:{type:String,default:""}},emits:{enter:(t,e)=>!0,leave:(t,e)=>!0,afterLeave:()=>!0},setup:(t,{slots:e,emit:n})=>{const r=(o,a)=>{n("enter",o,a)},s=(o,a)=>{n("leave",o,a)},i=()=>{n("afterLeave")};return()=>ke(Hg,{tag:"div",css:!1,name:t.name,onEnter:r,onLeave:s,onAfterLeave:i},{default:()=>{var o;return[(o=e.default)==null?void 0:o.call(e)]}})}}),AI=ft({name:"css-group",inheritAttrs:!1,props:{name:{type:String,default:""}},setup:(t,{slots:e})=>()=>ke(Hg,{tag:"div",name:t.name},{default:()=>{var n;return[(n=e.default)==null?void 0:n.call(e)]}})});function SI(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!el(t)}const ba={IDLE:0,DESTROYED:2},RI=ft({name:"notifications",props:{group:{type:String,default:""},width:{type:[Number,String],default:300},reverse:{type:Boolean,default:!1},position:{type:[String,Array],default:()=>jc.position},classes:{type:[String,Array],default:"vue-notification"},animationType:{type:String,default:"css",validator(t){return t==="css"||t==="velocity"}},animation:{type:Object,default(){return jc.velocityAnimation}},animationName:{type:String,default:jc.cssAnimation},speed:{type:Number,default:300},duration:{type:Number,default:3e3},delay:{type:Number,default:0},max:{type:Number,default:1/0},ignoreDuplicates:{type:Boolean,default:!1},closeOnClick:{type:Boolean,default:!0},pauseOnHover:{type:Boolean,default:!1},dangerouslySetInnerHtml:{type:Boolean,default:!1}},emits:{click:t=>!0,destroy:t=>!0,start:t=>!0},slots:Object,setup:(t,{emit:e,slots:n,expose:r})=>{const s=Z([]),i=Z(null),o=L_.get("velocity"),a=ue(()=>t.animationType==="velocity"),l=ue(()=>a.value?CI:AI),c=ue(()=>s.value.filter(D=>D.state!==ba.DESTROYED)),u=ue(()=>wI(t.width)),f=ue(()=>{const{x:D,y:L}=II(t.position),G=u.value.value,ge=u.value.type,Ve={width:G+ge};return L&&(Ve[L]="0px"),D&&(D==="center"?Ve.left="calc(50% - ".concat(+G/2).concat(ge,")"):Ve[D]="0px"),Ve}),h=ue(()=>"bottom"in f.value),p=D=>{e("click",D),t.closeOnClick&&b(D)},g=()=>{var D;t.pauseOnHover&&((D=i.value)==null||D.pause())},E=()=>{var D;t.pauseOnHover&&((D=i.value)==null||D.resume())},v=(D={})=>{if(D.group||(D.group=""),D.data||(D.data={}),t.group!==D.group)return;if(D.clean||D.clear){S();return}const L=typeof D.duration=="number"?D.duration:t.duration,G=typeof D.speed=="number"?D.speed:t.speed,ge=typeof D.ignoreDuplicates=="boolean"?D.ignoreDuplicates:t.ignoreDuplicates,{title:Ve,text:me,type:we,data:be,id:tt}=D,Je={id:tt||bI(),title:Ve,text:me,type:we,state:ba.IDLE,speed:G,length:L+2*G,data:be,duplicates:0};L>=0&&(i.value=new yI(()=>b(Je),Je.length,Je));const Te=t.reverse?!h.value:h.value;let $e=-1;const oe=c.value.find(at=>at.title===D.title&&at.text===D.text);if(ge&&oe){oe.duplicates++;return}Te?(s.value.push(Je),e("start",Je),c.value.length>t.max&&($e=0)):(s.value.unshift(Je),e("start",Je),c.value.length>t.max&&($e=c.value.length-1)),$e!==-1&&b(c.value[$e])},_=D=>{N(D)},w=D=>["vue-notification-template",t.classes,D.type||""],T=D=>a.value?void 0:{transition:"all ".concat(D.speed,"ms")},b=D=>{clearTimeout(D.timer),D.state=ba.DESTROYED,M(),e("destroy",D)},N=D=>{const L=s.value.find(G=>G.id===D);L&&b(L)},S=()=>{c.value.forEach(b)},V=(D,L)=>{var G;const ge=(G=t.animation)==null?void 0:G[D];return typeof ge=="function"?ge(L):ge},P=(D,L)=>{if(!a.value)return;const G=V("enter",D);o(D,G,{duration:t.speed,complete:L})},k=(D,L)=>{if(!a.value)return;const G=V("leave",D);o(D,G,{duration:t.speed,complete:L})};function M(){s.value=s.value.filter(D=>D.state!==ba.DESTROYED)}return Mn(()=>{il.on("add",v),il.on("close",_)}),()=>{let D;return ke("div",{class:"vue-notification-group",style:f.value},[ke(l.value,{name:t.animationName,onEnter:P,onLeave:k,onAfterLeave:M},SI(D=c.value.map(L=>ke("div",{key:L.id,class:"vue-notification-wrapper",style:T(L),"data-id":L.id,onMouseenter:g,onMouseleave:E},[n.body?n.body({item:L,class:[t.classes,L.type],close:()=>b(L)}):ke("div",{class:w(L),onClick:()=>p(L)},[t.dangerouslySetInnerHtml?ke(Ze,null,[L.title?ke("div",{class:"notification-title",innerHTML:L.title},null):null,ke("div",{class:"notification-content",innerHTML:L.text},null)]):ke(Ze,null,[L.title?ke("div",{class:"notification-title"},[L.title]):null,ke("div",{class:"notification-content"},[L.text])])])])))?D:{default:()=>[D]})])}}}),cr=t=>{typeof t=="string"&&(t={title:"",text:t}),typeof t=="object"&&il.emit("add",t)};cr.close=t=>{il.emit("close",t)};const PI="Notifications";function kI(t,e={}){Object.entries(e).forEach(r=>L_.set(...r));const n=e.name||"notify";t.config.globalProperties["$"+n]=cr,t.component(e.componentName||PI,RI)}const NI={install:kI};var LI=Object.defineProperty,DI=(t,e,n)=>e in t?LI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Nn=(t,e,n)=>(DI(t,typeof e!="symbol"?e+"":e,n),n);/**
 * @license
 * Copyright (c) 2023, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const Ut="w",Tn="b",At="p",zu="n",Ba="b",Ki="r",Fr="q",Et="k",Wc="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",tn=-1,xI={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},Ae={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},xe={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},Hc={b:[16,32,17,15],w:[-16,-32,-17,-15]},Jm={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},MI=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],OI=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],VI={p:1,n:2,b:4,r:8,q:16,k:32},FI="pnbrqkPNBRQK",Zm=[zu,Ba,Ki,Fr],$I=7,UI=6,BI=1,jI=0,Ta={[Et]:Ae.KSIDE_CASTLE,[Fr]:Ae.QSIDE_CASTLE},Cr={w:[{square:xe.a1,flag:Ae.QSIDE_CASTLE},{square:xe.h1,flag:Ae.KSIDE_CASTLE}],b:[{square:xe.a8,flag:Ae.QSIDE_CASTLE},{square:xe.h8,flag:Ae.KSIDE_CASTLE}]},WI={b:BI,w:UI},HI=["1-0","0-1","1/2-1/2","*"];function ws(t){return t>>4}function Io(t){return t&15}function D_(t){return"0123456789".indexOf(t)!==-1}function mn(t){const e=Io(t),n=ws(t);return"abcdefgh".substring(e,e+1)+"87654321".substring(n,n+1)}function Fi(t){return t===Ut?Tn:Ut}function qI(t){const e=t.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const n=parseInt(e[5],10);if(isNaN(n)||n<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const r=parseInt(e[4],10);if(isNaN(r)||r<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const s=e[0].split("/");if(s.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let o=0;o<s.length;o++){let a=0,l=!1;for(let c=0;c<s[o].length;c++)if(D_(s[o][c])){if(l)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};a+=parseInt(s[o][c],10),l=!0}else{if(!/^[prnbqkPRNBQK]$/.test(s[o][c]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};a+=1,l=!1}if(a!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const i=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:o,regex:a}of i){if(!a.test(e[0]))return{ok:!1,error:"Invalid FEN: missing ".concat(o," king")};if((e[0].match(a)||[]).length>1)return{ok:!1,error:"Invalid FEN: too many ".concat(o," kings")}}return Array.from(s[0]+s[7]).some(o=>o.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function GI(t,e){const n=t.from,r=t.to,s=t.piece;let i=0,o=0,a=0;for(let l=0,c=e.length;l<c;l++){const u=e[l].from,f=e[l].to,h=e[l].piece;s===h&&n!==u&&r===f&&(i++,ws(n)===ws(u)&&o++,Io(n)===Io(u)&&a++)}return i>0?o>0&&a>0?mn(n):a>0?mn(n).charAt(1):mn(n).charAt(0):""}function Ar(t,e,n,r,s,i=void 0,o=Ae.NORMAL){const a=ws(r);if(s===At&&(a===$I||a===jI))for(let l=0;l<Zm.length;l++){const c=Zm[l];t.push({color:e,from:n,to:r,piece:s,captured:i,promotion:c,flags:o|Ae.PROMOTION})}else t.push({color:e,from:n,to:r,piece:s,captured:i,flags:o})}function e0(t){let e=t.charAt(0);return e>="a"&&e<="h"?t.match(/[a-h]\d.*[a-h]\d/)?void 0:At:(e=e.toLowerCase(),e==="o"?Et:e)}function qc(t){return t.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function Gc(t){return t.split(" ").slice(0,4).join(" ")}let $r=class{constructor(e=Wc){Nn(this,"_board",new Array(128)),Nn(this,"_turn",Ut),Nn(this,"_header",{}),Nn(this,"_kings",{w:tn,b:tn}),Nn(this,"_epSquare",-1),Nn(this,"_halfMoves",0),Nn(this,"_moveNumber",0),Nn(this,"_history",[]),Nn(this,"_comments",{}),Nn(this,"_castling",{w:0,b:0}),Nn(this,"_positionCount",{}),this.load(e)}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:tn,b:tn},this._turn=Ut,this._castling={w:0,b:0},this._epSquare=tn,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{},this._positionCount={},delete this._header.SetUp,delete this._header.FEN}removeHeader(e){e in this._header&&delete this._header[e]}load(e,{skipValidation:n=!1,preserveHeaders:r=!1}={}){let s=e.split(/\s+/);if(s.length>=2&&s.length<6){const a=["-","-","0","1"];e=s.concat(a.slice(-(6-s.length))).join(" ")}if(s=e.split(/\s+/),!n){const{ok:a,error:l}=qI(e);if(!a)throw new Error(l)}const i=s[0];let o=0;this.clear({preserveHeaders:r});for(let a=0;a<i.length;a++){const l=i.charAt(a);if(l==="/")o+=8;else if(D_(l))o+=parseInt(l,10);else{const c=l<"a"?Ut:Tn;this._put({type:l.toLowerCase(),color:c},mn(o)),o++}}this._turn=s[1],s[2].indexOf("K")>-1&&(this._castling.w|=Ae.KSIDE_CASTLE),s[2].indexOf("Q")>-1&&(this._castling.w|=Ae.QSIDE_CASTLE),s[2].indexOf("k")>-1&&(this._castling.b|=Ae.KSIDE_CASTLE),s[2].indexOf("q")>-1&&(this._castling.b|=Ae.QSIDE_CASTLE),this._epSquare=s[3]==="-"?tn:xe[s[3]],this._halfMoves=parseInt(s[4],10),this._moveNumber=parseInt(s[5],10),this._updateSetup(e),this._incPositionCount(e)}fen(){var e,n;let r=0,s="";for(let a=xe.a8;a<=xe.h1;a++){if(this._board[a]){r>0&&(s+=r,r=0);const{color:l,type:c}=this._board[a];s+=l===Ut?c.toUpperCase():c.toLowerCase()}else r++;a+1&136&&(r>0&&(s+=r),a!==xe.h1&&(s+="/"),r=0,a+=8)}let i="";this._castling[Ut]&Ae.KSIDE_CASTLE&&(i+="K"),this._castling[Ut]&Ae.QSIDE_CASTLE&&(i+="Q"),this._castling[Tn]&Ae.KSIDE_CASTLE&&(i+="k"),this._castling[Tn]&Ae.QSIDE_CASTLE&&(i+="q"),i=i||"-";let o="-";if(this._epSquare!==tn){const a=this._epSquare+(this._turn===Ut?16:-16),l=[a+1,a-1];for(const c of l){if(c&136)continue;const u=this._turn;if(((e=this._board[c])==null?void 0:e.color)===u&&((n=this._board[c])==null?void 0:n.type)===At){this._makeMove({color:u,from:c,to:this._epSquare,piece:At,captured:At,flags:Ae.EP_CAPTURE});const f=!this._isKingAttacked(u);if(this._undoMove(),f){o=mn(this._epSquare);break}}}}return[s,this._turn,i,o,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(e){this._history.length>0||(e!==Wc?(this._header.SetUp="1",this._header.FEN=e):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(Wc)}get(e){return this._board[xe[e]]||!1}put({type:e,color:n},r){return this._put({type:e,color:n},r)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_put({type:e,color:n},r){if(FI.indexOf(e.toLowerCase())===-1||!(r in xe))return!1;const s=xe[r];if(e==Et&&!(this._kings[n]==tn||this._kings[n]==s))return!1;const i=this._board[s];return i&&i.type===Et&&(this._kings[i.color]=tn),this._board[s]={type:e,color:n},e===Et&&(this._kings[n]=s),!0}remove(e){const n=this.get(e);return delete this._board[xe[e]],n&&n.type===Et&&(this._kings[n.color]=tn),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),n}_updateCastlingRights(){var e,n,r,s,i,o,a,l,c,u,f,h;const p=((e=this._board[xe.e1])==null?void 0:e.type)===Et&&((n=this._board[xe.e1])==null?void 0:n.color)===Ut,g=((r=this._board[xe.e8])==null?void 0:r.type)===Et&&((s=this._board[xe.e8])==null?void 0:s.color)===Tn;(!p||((i=this._board[xe.a1])==null?void 0:i.type)!==Ki||((o=this._board[xe.a1])==null?void 0:o.color)!==Ut)&&(this._castling.w&=~Ae.QSIDE_CASTLE),(!p||((a=this._board[xe.h1])==null?void 0:a.type)!==Ki||((l=this._board[xe.h1])==null?void 0:l.color)!==Ut)&&(this._castling.w&=~Ae.KSIDE_CASTLE),(!g||((c=this._board[xe.a8])==null?void 0:c.type)!==Ki||((u=this._board[xe.a8])==null?void 0:u.color)!==Tn)&&(this._castling.b&=~Ae.QSIDE_CASTLE),(!g||((f=this._board[xe.h8])==null?void 0:f.type)!==Ki||((h=this._board[xe.h8])==null?void 0:h.color)!==Tn)&&(this._castling.b&=~Ae.KSIDE_CASTLE)}_updateEnPassantSquare(){var e,n;if(this._epSquare===tn)return;const r=this._epSquare+(this._turn===Ut?-16:16),s=this._epSquare+(this._turn===Ut?16:-16),i=[s+1,s-1];if(this._board[r]!==null||this._board[this._epSquare]!==null||((e=this._board[s])==null?void 0:e.color)!==Fi(this._turn)||((n=this._board[s])==null?void 0:n.type)!==At){this._epSquare=tn;return}const o=a=>{var l,c;return!(a&136)&&((l=this._board[a])==null?void 0:l.color)===this._turn&&((c=this._board[a])==null?void 0:c.type)===At};i.some(o)||(this._epSquare=tn)}_attacked(e,n){for(let r=xe.a8;r<=xe.h1;r++){if(r&136){r+=7;continue}if(this._board[r]===void 0||this._board[r].color!==e)continue;const s=this._board[r],i=r-n;if(i===0)continue;const o=i+119;if(MI[o]&VI[s.type]){if(s.type===At){if(i>0){if(s.color===Ut)return!0}else if(s.color===Tn)return!0;continue}if(s.type==="n"||s.type==="k")return!0;const a=OI[o];let l=r+a,c=!1;for(;l!==n;){if(this._board[l]!=null){c=!0;break}l+=a}if(!c)return!0}}return!1}_isKingAttacked(e){const n=this._kings[e];return n===-1?!1:this._attacked(Fi(e),n)}isAttacked(e,n){return this._attacked(n,xe[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},n=[];let r=0,s=0;for(let i=xe.a8;i<=xe.h1;i++){if(s=(s+1)%2,i&136){i+=7;continue}const o=this._board[i];o&&(e[o.type]=o.type in e?e[o.type]+1:1,o.type===Ba&&n.push(s),r++)}if(r===2||r===3&&(e[Ba]===1||e[zu]===1))return!0;if(r===e[Ba]+2){let i=0;const o=n.length;for(let a=0;a<o;a++)i+=n[a];if(i===0||i===o)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this.fen())>=3}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:e=!1,square:n=void 0,piece:r=void 0}={}){const s=this._moves({square:n,piece:r});return e?s.map(i=>this._makePretty(i)):s.map(i=>this._moveToSan(i,s))}_moves({legal:e=!0,piece:n=void 0,square:r=void 0}={}){var s;const i=r?r.toLowerCase():void 0,o=n==null?void 0:n.toLowerCase(),a=[],l=this._turn,c=Fi(l);let u=xe.a8,f=xe.h1,h=!1;if(i)if(i in xe)u=f=xe[i],h=!0;else return[];for(let g=u;g<=f;g++){if(g&136){g+=7;continue}if(!this._board[g]||this._board[g].color===c)continue;const{type:E}=this._board[g];let v;if(E===At){if(o&&o!==E)continue;v=g+Hc[l][0],this._board[v]||(Ar(a,l,g,v,At),v=g+Hc[l][1],WI[l]===ws(g)&&!this._board[v]&&Ar(a,l,g,v,At,void 0,Ae.BIG_PAWN));for(let _=2;_<4;_++)v=g+Hc[l][_],!(v&136)&&(((s=this._board[v])==null?void 0:s.color)===c?Ar(a,l,g,v,At,this._board[v].type,Ae.CAPTURE):v===this._epSquare&&Ar(a,l,g,v,At,At,Ae.EP_CAPTURE))}else{if(o&&o!==E)continue;for(let _=0,w=Jm[E].length;_<w;_++){const T=Jm[E][_];for(v=g;v+=T,!(v&136);){if(!this._board[v])Ar(a,l,g,v,E);else{if(this._board[v].color===l)break;Ar(a,l,g,v,E,this._board[v].type,Ae.CAPTURE);break}if(E===zu||E===Et)break}}}}if((o===void 0||o===Et)&&(!h||f===this._kings[l])){if(this._castling[l]&Ae.KSIDE_CASTLE){const g=this._kings[l],E=g+2;!this._board[g+1]&&!this._board[E]&&!this._attacked(c,this._kings[l])&&!this._attacked(c,g+1)&&!this._attacked(c,E)&&Ar(a,l,this._kings[l],E,Et,void 0,Ae.KSIDE_CASTLE)}if(this._castling[l]&Ae.QSIDE_CASTLE){const g=this._kings[l],E=g-2;!this._board[g-1]&&!this._board[g-2]&&!this._board[g-3]&&!this._attacked(c,this._kings[l])&&!this._attacked(c,g-1)&&!this._attacked(c,E)&&Ar(a,l,this._kings[l],E,Et,void 0,Ae.QSIDE_CASTLE)}}if(!e||this._kings[l]===-1)return a;const p=[];for(let g=0,E=a.length;g<E;g++)this._makeMove(a[g]),this._isKingAttacked(l)||p.push(a[g]),this._undoMove();return p}move(e,{strict:n=!1}={}){let r=null;if(typeof e=="string")r=this._moveFromSan(e,n);else if(typeof e=="object"){const i=this._moves();for(let o=0,a=i.length;o<a;o++)if(e.from===mn(i[o].from)&&e.to===mn(i[o].to)&&(!("promotion"in i[o])||e.promotion===i[o].promotion)){r=i[o];break}}if(!r)throw typeof e=="string"?new Error("Invalid move: ".concat(e)):new Error("Invalid move: ".concat(JSON.stringify(e)));const s=this._makePretty(r);return this._makeMove(r),this._incPositionCount(s.after),s}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(e){const n=this._turn,r=Fi(n);if(this._push(e),this._board[e.to]=this._board[e.from],delete this._board[e.from],e.flags&Ae.EP_CAPTURE&&(this._turn===Tn?delete this._board[e.to-16]:delete this._board[e.to+16]),e.promotion&&(this._board[e.to]={type:e.promotion,color:n}),this._board[e.to].type===Et){if(this._kings[n]=e.to,e.flags&Ae.KSIDE_CASTLE){const s=e.to-1,i=e.to+1;this._board[s]=this._board[i],delete this._board[i]}else if(e.flags&Ae.QSIDE_CASTLE){const s=e.to+1,i=e.to-2;this._board[s]=this._board[i],delete this._board[i]}this._castling[n]=0}if(this._castling[n]){for(let s=0,i=Cr[n].length;s<i;s++)if(e.from===Cr[n][s].square&&this._castling[n]&Cr[n][s].flag){this._castling[n]^=Cr[n][s].flag;break}}if(this._castling[r]){for(let s=0,i=Cr[r].length;s<i;s++)if(e.to===Cr[r][s].square&&this._castling[r]&Cr[r][s].flag){this._castling[r]^=Cr[r][s].flag;break}}e.flags&Ae.BIG_PAWN?n===Tn?this._epSquare=e.to-16:this._epSquare=e.to+16:this._epSquare=tn,e.piece===At?this._halfMoves=0:e.flags&(Ae.CAPTURE|Ae.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,n===Tn&&this._moveNumber++,this._turn=r}undo(){const e=this._undoMove();if(e){const n=this._makePretty(e);return this._decPositionCount(n.after),n}return null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;const n=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber;const r=this._turn,s=Fi(r);if(this._board[n.from]=this._board[n.to],this._board[n.from].type=n.piece,delete this._board[n.to],n.captured)if(n.flags&Ae.EP_CAPTURE){let i;r===Tn?i=n.to-16:i=n.to+16,this._board[i]={type:At,color:s}}else this._board[n.to]={type:n.captured,color:s};if(n.flags&(Ae.KSIDE_CASTLE|Ae.QSIDE_CASTLE)){let i,o;n.flags&Ae.KSIDE_CASTLE?(i=n.to+1,o=n.to-1):(i=n.to-2,o=n.to+1),this._board[i]=this._board[o],delete this._board[o]}return n}pgn({newline:e="\n",maxWidth:n=0}={}){const r=[];let s=!1;for(const h in this._header)r.push("["+h+' "'+this._header[h]+'"]'+e),s=!0;s&&this._history.length&&r.push(e);const i=h=>{const p=this._comments[this.fen()];if(typeof p<"u"){const g=h.length>0?" ":"";h="".concat(h).concat(g,"{").concat(p,"}")}return h},o=[];for(;this._history.length>0;)o.push(this._undoMove());const a=[];let l="";for(o.length===0&&a.push(i(""));o.length>0;){l=i(l);const h=o.pop();if(!h)break;if(!this._history.length&&h.color==="b"){const p="".concat(this._moveNumber,". ...");l=l?"".concat(l," ").concat(p):p}else h.color==="w"&&(l.length&&a.push(l),l=this._moveNumber+".");l=l+" "+this._moveToSan(h,this._moves({legal:!0})),this._makeMove(h)}if(l.length&&a.push(i(l)),typeof this._header.Result<"u"&&a.push(this._header.Result),n===0)return r.join("")+a.join(" ");const c=function(){return r.length>0&&r[r.length-1]===" "?(r.pop(),!0):!1},u=function(h,p){for(const g of p.split(" "))if(g){if(h+g.length>n){for(;c();)h--;r.push(e),h=0}r.push(g),h+=g.length,r.push(" "),h++}return c()&&h--,h};let f=0;for(let h=0;h<a.length;h++){if(f+a[h].length>n&&a[h].includes("{")){f=u(f,a[h]);continue}f+a[h].length>n&&h!==0?(r[r.length-1]===" "&&r.pop(),r.push(e),f=0):h!==0&&(r.push(" "),f++),r.push(a[h]),f+=a[h].length}return r.join("")}header(...e){for(let n=0;n<e.length;n+=2)typeof e[n]=="string"&&typeof e[n+1]=="string"&&(this._header[e[n]]=e[n+1]);return this._header}loadPgn(e,{strict:n=!1,newlineChar:r="\r?\n"}={}){function s(w){return w.replace(/\\/g,"\\")}function i(w){const T={},b=w.split(new RegExp(s(r)));let N="",S="";for(let V=0;V<b.length;V++){const P=/^\s*\[\s*([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;N=b[V].replace(P,"$1"),S=b[V].replace(P,"$2"),N.trim().length>0&&(T[N]=S)}return T}e=e.trim();const o=new RegExp("^(\\[((?:"+s(r)+")|.)*\\])((?:\\s*"+s(r)+"){2}|(?:\\s*"+s(r)+")*$)").exec(e),a=o&&o.length>=2?o[1]:"";this.reset();const l=i(a);let c="";for(const w in l)w.toLowerCase()==="fen"&&(c=l[w]),this.header(w,l[w]);if(!n)c&&this.load(c,{preserveHeaders:!0});else if(l.SetUp==="1"){if(!("FEN"in l))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(l.FEN,{preserveHeaders:!0})}function u(w){return Array.from(w).map(function(T){return T.charCodeAt(0)<128?T.charCodeAt(0).toString(16):encodeURIComponent(T).replace(/%/g,"").toLowerCase()}).join("")}function f(w){return w.length==0?"":decodeURIComponent("%"+(w.match(/.{1,2}/g)||[]).join("%"))}const h=function(w){return w=w.replace(new RegExp(s(r),"g")," "),"{".concat(u(w.slice(1,w.length-1)),"}")},p=function(w){if(w.startsWith("{")&&w.endsWith("}"))return f(w.slice(1,w.length-1))};let g=e.replace(a,"").replace(new RegExp("({[^}]*})+?|;([^".concat(s(r),"]*)"),"g"),function(w,T,b){return T!==void 0?h(T):" "+h("{".concat(b.slice(1),"}"))}).replace(new RegExp(s(r),"g")," ");const E=/(\([^()]+\))+?/g;for(;E.test(g);)g=g.replace(E,"");g=g.replace(/\d+\.(\.\.)?/g,""),g=g.replace(/\.\.\./g,""),g=g.replace(/\$\d+/g,"");let v=g.trim().split(new RegExp(/\s+/));v=v.filter(w=>w!=="");let _="";for(let w=0;w<v.length;w++){const T=p(v[w]);if(T!==void 0){this._comments[this.fen()]=T;continue}const b=this._moveFromSan(v[w],n);if(b==null)if(HI.indexOf(v[w])>-1)_=v[w];else throw new Error("Invalid move in PGN: ".concat(v[w]));else _="",this._makeMove(b),this._incPositionCount(this.fen())}_&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",_)}_moveToSan(e,n){let r="";if(e.flags&Ae.KSIDE_CASTLE)r="O-O";else if(e.flags&Ae.QSIDE_CASTLE)r="O-O-O";else{if(e.piece!==At){const s=GI(e,n);r+=e.piece.toUpperCase()+s}e.flags&(Ae.CAPTURE|Ae.EP_CAPTURE)&&(e.piece===At&&(r+=mn(e.from)[0]),r+="x"),r+=mn(e.to),e.promotion&&(r+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?r+="#":r+="+"),this._undoMove(),r}_moveFromSan(e,n=!1){const r=qc(e);let s=e0(r),i=this._moves({legal:!0,piece:s});for(let h=0,p=i.length;h<p;h++)if(r===qc(this._moveToSan(i[h],i)))return i[h];if(n)return null;let o,a,l,c,u,f=!1;if(a=r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),a?(o=a[1],l=a[2],c=a[3],u=a[4],l.length==1&&(f=!0)):(a=r.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),a&&(o=a[1],l=a[2],c=a[3],u=a[4],l.length==1&&(f=!0))),s=e0(r),i=this._moves({legal:!0,piece:o||s}),!c)return null;for(let h=0,p=i.length;h<p;h++)if(l){if((!o||o.toLowerCase()==i[h].piece)&&xe[l]==i[h].from&&xe[c]==i[h].to&&(!u||u.toLowerCase()==i[h].promotion))return i[h];if(f){const g=mn(i[h].from);if((!o||o.toLowerCase()==i[h].piece)&&xe[c]==i[h].to&&(l==g[0]||l==g[1])&&(!u||u.toLowerCase()==i[h].promotion))return i[h]}}else if(r===qc(this._moveToSan(i[h],i)).replace("x",""))return i[h];return null}ascii(){let e="   +------------------------+\n";for(let n=xe.a8;n<=xe.h1;n++){if(Io(n)===0&&(e+=" "+"87654321"[ws(n)]+" |"),this._board[n]){const r=this._board[n].type,s=this._board[n].color===Ut?r.toUpperCase():r.toLowerCase();e+=" "+s+" "}else e+=" . ";n+1&136&&(e+="|\n",n+=8)}return e+="   +------------------------+\n",e+="     a  b  c  d  e  f  g  h",e}perft(e){const n=this._moves({legal:!1});let r=0;const s=this._turn;for(let i=0,o=n.length;i<o;i++)this._makeMove(n[i]),this._isKingAttacked(s)||(e-1>0?r+=this.perft(e-1):r++),this._undoMove();return r}_makePretty(e){const{color:n,piece:r,from:s,to:i,flags:o,captured:a,promotion:l}=e;let c="";for(const p in Ae)Ae[p]&o&&(c+=xI[p]);const u=mn(s),f=mn(i),h={color:n,piece:r,from:u,to:f,san:this._moveToSan(e,this._moves({legal:!0})),flags:c,lan:u+f,before:this.fen(),after:""};return this._makeMove(e),h.after=this.fen(),this._undoMove(),a&&(h.captured=a),l&&(h.promotion=l,h.lan+=l),h}turn(){return this._turn}board(){const e=[];let n=[];for(let r=xe.a8;r<=xe.h1;r++)this._board[r]==null?n.push(null):n.push({square:mn(r),type:this._board[r].type,color:this._board[r].color}),r+1&136&&(e.push(n),n=[],r+=8);return e}squareColor(e){if(e in xe){const n=xe[e];return(ws(n)+Io(n))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const n=[],r=[];for(;this._history.length>0;)n.push(this._undoMove());for(;;){const s=n.pop();if(!s)break;e?r.push(this._makePretty(s)):r.push(this._moveToSan(s,this._moves())),this._makeMove(s)}return r}_getPositionCount(e){const n=Gc(e);return this._positionCount[n]||0}_incPositionCount(e){const n=Gc(e);this._positionCount[n]===void 0&&(this._positionCount[n]=0),this._positionCount[n]+=1}_decPositionCount(e){const n=Gc(e);this._positionCount[n]===1?delete this._positionCount[n]:this._positionCount[n]-=1}_pruneComments(){const e=[],n={},r=s=>{s in this._comments&&(n[s]=this._comments[s])};for(;this._history.length>0;)e.push(this._undoMove());for(r(this.fen());;){const s=e.pop();if(!s)break;this._makeMove(s),r(this.fen())}this._comments=n}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const n=this._comments[e];return delete this._comments[e],{fen:e,comment:n}})}setCastlingRights(e,n){for(const s of[Et,Fr])n[s]!==void 0&&(n[s]?this._castling[e]|=Ta[s]:this._castling[e]&=~Ta[s]);this._updateCastlingRights();const r=this.getCastlingRights(e);return(n[Et]===void 0||n[Et]===r[Et])&&(n[Fr]===void 0||n[Fr]===r[Fr])}getCastlingRights(e){return{[Et]:(this._castling[e]&Ta[Et])!==0,[Fr]:(this._castling[e]&Ta[Fr])!==0}}moveNumber(){return this._moveNumber}};const KI=["width","height"],zI=W("path",{d:"M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z ",style:{opacity:"1",fill:"#000000","fill-opacity":"1","fill-rule":"nonzero",stroke:"#000000","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-opacity":"1"}},null,-1),QI=[zI],t0=ft({__name:"BP",props:{size:{default:100}},setup(t){const e=t,n=ue(()=>"".concat(e.size,"px"));return(r,s)=>(Q(),ce("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},QI,8,KI))}}),YI=["width","height"],XI=sr('<g style="opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18" style="fill:#000000;stroke:#000000;"></path><path d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10" style="fill:#000000;stroke:#000000;"></path><path d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z" style="fill:#ffffff;stroke:#ffffff;"></path><path d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z" transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)" style="fill:#ffffff;stroke:#ffffff;"></path><path d="M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z " style="fill:#ffffff;stroke:none;"></path></g>',1),JI=[XI],Kc=ft({__name:"BN",props:{size:{default:100}},setup(t){const e=t,n=ue(()=>"".concat(e.size,"px"));return(r,s)=>(Q(),ce("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},JI,8,YI))}}),ZI=["width","height"],eC=sr('<g style="opacity:1;fill:none;fill-rule:evenodd;fill-opacity:1;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><g style="fill:#000000;stroke:#000000;stroke-linecap:butt;"><path d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z"></path><path d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"></path><path d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"></path></g><path d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18" style="fill:none;stroke:#ffffff;stroke-linejoin:miter;"></path></g>',1),tC=[eC],zc=ft({__name:"BB",props:{size:{default:100}},setup(t){const e=t,n=ue(()=>"".concat(e.size,"px"));return(r,s)=>(Q(),ce("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},tC,8,ZI))}}),nC=["width","height"],rC=sr('<g style="opacity:1;fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z " style="stroke-linecap:butt;"></path><path d="M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z " style="stroke-linecap:butt;"></path><path d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z " style="stroke-linecap:butt;"></path><path d="M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z " style="stroke-linecap:butt;stroke-linejoin:miter;"></path><path d="M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z " style="stroke-linecap:butt;"></path><path d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z " style="stroke-linecap:butt;"></path><path d="M 12,35.5 L 33,35.5 L 33,35.5" style="fill:none;stroke:#ffffff;stroke-width:1;stroke-linejoin:miter;"></path><path d="M 13,31.5 L 32,31.5" style="fill:none;stroke:#ffffff;stroke-width:1;stroke-linejoin:miter;"></path><path d="M 14,29.5 L 31,29.5" style="fill:none;stroke:#ffffff;stroke-width:1;stroke-linejoin:miter;"></path><path d="M 14,16.5 L 31,16.5" style="fill:none;stroke:#ffffff;stroke-width:1;stroke-linejoin:miter;"></path><path d="M 11,14 L 34,14" style="fill:none;stroke:#ffffff;stroke-width:1;stroke-linejoin:miter;"></path></g>',1),sC=[rC],Qc=ft({__name:"BR",props:{size:{default:100}},setup(t){const e=t,n=ue(()=>"".concat(e.size,"px"));return(r,s)=>(Q(),ce("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},sC,8,nC))}}),iC=["width","height"],oC=sr('<g style="opacity:1;fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><g style="fill:#000000;stroke:none;"><circle cx="6" cy="12" r="2.75"></circle><circle cx="14" cy="9" r="2.75"></circle><circle cx="22.5" cy="8" r="2.75"></circle><circle cx="31" cy="9" r="2.75"></circle><circle cx="39" cy="12" r="2.75"></circle></g><path d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z" style="stroke-linecap:butt;stroke:#000000;"></path><path d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z" style="stroke-linecap:butt;"></path><path d="M 11,38.5 A 35,35 1 0 0 34,38.5" style="fill:none;stroke:#000000;stroke-linecap:butt;"></path><path d="M 11,29 A 35,35 1 0 1 34,29" style="fill:none;stroke:#ffffff;"></path><path d="M 12.5,31.5 L 32.5,31.5" style="fill:none;stroke:#ffffff;"></path><path d="M 11.5,34.5 A 35,35 1 0 0 33.5,34.5" style="fill:none;stroke:#ffffff;"></path><path d="M 10.5,37.5 A 35,35 1 0 0 34.5,37.5" style="fill:none;stroke:#ffffff;"></path></g>',1),aC=[oC],Yc=ft({__name:"BQ",props:{size:{default:100}},setup(t){const e=t,n=ue(()=>"".concat(e.size,"px"));return(r,s)=>(Q(),ce("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},aC,8,iC))}}),lC=["width","height"],cC=sr('<g style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 22.5,11.63 L 22.5,6" style="fill:none;stroke:#000000;stroke-linejoin:miter;" id="path6570"></path><path d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25" style="fill:#000000;fill-opacity:1;stroke-linecap:butt;stroke-linejoin:miter;"></path><path d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z " style="fill:#000000;stroke:#000000;"></path><path d="M 20,8 L 25,8" style="fill:none;stroke:#000000;stroke-linejoin:miter;"></path><path d="M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.51,26.6 L 22.5,24.5 C 20,18 9.906,14 6.997,19.85 C 4.5,25.5 11.85,28.85 11.85,28.85" style="fill:none;stroke:#ffffff;"></path><path d="M 11.5,30 C 17,27 27,27 32.5,30 M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5 M 11.5,37 C 17,34 27,34 32.5,37" style="fill:none;stroke:#ffffff;"></path></g>',1),uC=[cC],n0=ft({__name:"BK",props:{size:{default:100}},setup(t){const e=t,n=ue(()=>"".concat(e.size,"px"));return(r,s)=>(Q(),ce("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},uC,8,lC))}}),hC=["width","height"],fC=W("path",{d:"M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z ",style:{opacity:"1",fill:"#ffffff","fill-opacity":"1","fill-rule":"nonzero",stroke:"#000000","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-opacity":"1"}},null,-1),dC=[fC],r0=ft({__name:"WP",props:{size:{default:100}},setup(t){const e=t,n=ue(()=>"".concat(e.size,"px"));return(r,s)=>(Q(),ce("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},dC,8,hC))}}),mC=["width","height"],pC=sr('<g style="opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18" style="fill:#ffffff;stroke:#000000;"></path><path d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10" style="fill:#ffffff;stroke:#000000;"></path><path d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z" style="fill:#000000;stroke:#000000;"></path><path d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z" transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)" style="fill:#000000;stroke:#000000;"></path></g>',1),gC=[pC],Xc=ft({__name:"WN",props:{size:{default:100}},setup(t){const e=t,n=ue(()=>"".concat(e.size,"px"));return(r,s)=>(Q(),ce("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},gC,8,mC))}}),_C=["width","height"],yC=sr('<g style="opacity:1;fill:none;fill-rule:evenodd;fill-opacity:1;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><g style="fill:#ffffff;stroke:#000000;stroke-linecap:butt;"><path d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z"></path><path d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"></path><path d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"></path></g><path d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18" style="fill:none;stroke:#000000;stroke-linejoin:miter;"></path></g>',1),vC=[yC],Jc=ft({__name:"WB",props:{size:{default:100}},setup(t){const e=t,n=ue(()=>"".concat(e.size,"px"));return(r,s)=>(Q(),ce("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},vC,8,_C))}}),EC=["width","height"],wC=sr('<g style="opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z " style="stroke-linecap:butt;"></path><path d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z " style="stroke-linecap:butt;"></path><path d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14" style="stroke-linecap:butt;"></path><path d="M 34,14 L 31,17 L 14,17 L 11,14"></path><path d="M 31,17 L 31,29.5 L 14,29.5 L 14,17" style="stroke-linecap:butt;stroke-linejoin:miter;"></path><path d="M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5"></path><path d="M 11,14 L 34,14" style="fill:none;stroke:#000000;stroke-linejoin:miter;"></path></g>',1),bC=[wC],Zc=ft({__name:"WR",props:{size:{default:100}},setup(t){const e=t,n=ue(()=>"".concat(e.size,"px"));return(r,s)=>(Q(),ce("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},bC,8,EC))}}),TC=["width","height"],IC=sr('<g style="opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z" transform="translate(-1,-1)"></path><path d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z" transform="translate(15.5,-5.5)"></path><path d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z" transform="translate(32,-1)"></path><path d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z" transform="translate(7,-4.5)"></path><path d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z" transform="translate(24,-4)"></path><path d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38,14 L 31,25 L 31,11 L 25.5,24.5 L 22.5,9.5 L 19.5,24.5 L 14,10.5 L 14,25 L 7,14 L 9,26 z " style="stroke-linecap:butt;"></path><path d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z " style="stroke-linecap:butt;"></path><path d="M 11.5,30 C 15,29 30,29 33.5,30" style="fill:none;"></path><path d="M 12,33.5 C 18,32.5 27,32.5 33,33.5" style="fill:none;"></path></g>',1),CC=[IC],eu=ft({__name:"WQ",props:{size:{default:100}},setup(t){const e=t,n=ue(()=>"".concat(e.size,"px"));return(r,s)=>(Q(),ce("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},CC,8,TC))}}),AC=["width","height"],SC=sr('<g style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 22.5,11.63 L 22.5,6" style="fill:none;stroke:#000000;stroke-linejoin:miter;"></path><path d="M 20,8 L 25,8" style="fill:none;stroke:#000000;stroke-linejoin:miter;"></path><path d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25" style="fill:#ffffff;stroke:#000000;stroke-linecap:butt;stroke-linejoin:miter;"></path><path d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z " style="fill:#ffffff;stroke:#000000;"></path><path d="M 11.5,30 C 17,27 27,27 32.5,30" style="fill:none;stroke:#000000;"></path><path d="M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5" style="fill:none;stroke:#000000;"></path><path d="M 11.5,37 C 17,34 27,34 32.5,37" style="fill:none;stroke:#000000;"></path></g>',1),RC=[SC],s0=ft({__name:"WK",props:{size:{default:100}},setup(t){const e=t,n=ue(()=>"".concat(e.size,"px"));return(r,s)=>(Q(),ce("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},RC,8,AC))}}),PC=["width","height"],kC=W("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"},null,-1),NC=W("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),LC=W("g",{id:"SVGRepo_iconCarrier"},[W("polygon",{points:"456.851,0 245,212.564 33.149,0 0.708,32.337 212.669,245.004 0.708,457.678 33.149,490 245,277.443 456.851,490 489.292,457.678 277.331,245.004 489.292,32.337 "})],-1),DC=[kC,NC,LC],i0=ft({__name:"Cross",props:{size:{default:100}},setup(t){const e=t,n=ue(()=>"".concat(e.size,"px"));return(r,s)=>(Q(),ce("svg",{fill:"#d01616",width:n.value,height:n.value,version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 490 490","xml:space":"preserve",stroke:"#d01616"},DC,8,PC))}});function ol(t,e){return"".concat(String.fromCharCode(97+t)).concat(String.fromCharCode(49+e))}function hn(t,e,n){return t.split(" ")[0].split("/").map(OC).toReversed()[n][e]}function xC(t){const e=t.charCodeAt(0);return e>=48&&e<=57}function MC(t){const e=parseInt(t);let n=[];for(let r=0;r<e;r++)n.push("");return n}function OC(t){return t.split("").flatMap(e=>xC(e)?MC(e):e)}function VC(t,e,n){const r=hn(t,e,n);return r===void 0?!1:r==="P"}function FC(t,e,n){const r=hn(t,e,n);return r===void 0?!1:r==="N"}function $C(t,e,n){const r=hn(t,e,n);return r===void 0?!1:r==="B"}function UC(t,e,n){const r=hn(t,e,n);return r===void 0?!1:r==="R"}function BC(t,e,n){const r=hn(t,e,n);return r===void 0?!1:r==="Q"}function jC(t,e,n){const r=hn(t,e,n);return r===void 0?!1:r==="K"}function WC(t,e,n){const r=hn(t,e,n);return r===void 0?!1:r==="p"}function HC(t,e,n){const r=hn(t,e,n);return r===void 0?!1:r==="n"}function qC(t,e,n){const r=hn(t,e,n);return r===void 0?!1:r==="b"}function GC(t,e,n){const r=hn(t,e,n);return r===void 0?!1:r==="r"}function KC(t,e,n){const r=hn(t,e,n);return r===void 0?!1:r==="q"}function zC(t,e,n){const r=hn(t,e,n);return r===void 0?!1:r==="k"}function cf(t,e,n,r){const s=Math.floor((t-n*.5)/n),i=Math.floor((e-n*.5)/n),o=[!0,"true"].includes(r)?7-s:s,a=[!0,"true"].includes(r)?i:7-i;return[o,a]}function uf(t,e){if(!e)return[];const n=e.getBoundingClientRect(),r=t.clientX-n.x,s=t.clientY-n.y;return[r,s]}function QC(t,e,n,r,s,i,o,a,l){if(!r||!o||a||!l)return;const[c,u]=uf(t,r),[f,h]=cf(c,u,e,n),p=hn(s,f,h);if(p===void 0)return;const g=s.split(" ")[1]==="w",E="PNRBQK".includes(p);g===E&&i(c,u,f,h,p)}function YC(t,e,n,r,s,i,o,a,l,c,u){if(!r||!l||c||!e||a||!u)return;const[f,h]=uf(t,r),[p,g]=cf(f,h,i,o),E=r.getBoundingClientRect();if(!(f>=0&&f<=E.width&&h>=0&&h<=E.height)){s();return}n(f,h,p,g)}function XC(t,e,n,r,s,i,o,a,l,c,u,f,h,p,g,E,v,_){if(!r||!h||E||!i||u||!v)return;const[w,T]=uf(t,r),[b,N]=cf(w,T,e,n),S=o.originCell;if(!(S.file>=0&&S.file<=7&&S.rank>=0&&S.rank<=7&&b>=0&&b<=7&&N>=0&&N<=7)){a();return}const V=hn(s.fen(),o.originCell.file,o.originCell.rank),P=["P","p"].includes(V),k=N===0||N===7;let M;const D=new $r(s.fen()),L=Qu(S.file,S.rank,b,N,"q");try{D.move(L),M=!0}catch(Ve){M=!1}if(M&&P&&k){f(S.file,S.rank,b,N);return}const G=Qu(S.file,S.rank,b,N),ge=new $r(s.fen());try{s.move(G)}catch(Ve){a();return}l(),a(),p(),c(S.file,S.rank,b,N,ge,s),_(),g()}function JC(t,e,n,r,s,i){r&&(s||n||i&&e())}function Qu(t,e,n,r,s){const i=ol(t,e),o=ol(n,r);return{from:i,to:o,promotion:s}}function o0(t,e,n){const r=n.originCell;return r.file===t&&r.rank===e}function nn(t,e,n){const r=n.targetCell;return r.file===t&&r.rank===e}function dn(t,e,n){const r=n.targetCell;return r.file===t||r.rank===e}function ZC(t){return t.piece==="P"}function eA(t){return t.piece==="N"}function tA(t){return t.piece==="B"}function nA(t){return t.piece==="R"}function rA(t){return t.piece==="Q"}function sA(t){return t.piece==="K"}function iA(t){return t.piece==="p"}function oA(t){return t.piece==="n"}function aA(t){return t.piece==="b"}function lA(t){return t.piece==="r"}function cA(t){return t.piece==="q"}function uA(t){return t.piece==="k"}const Ds=t=>(cg("data-v-c00eddd7"),t=t(),ug(),t),hA={class:"lowest-layer"},fA=Ds(()=>W("div",null,null,-1)),dA={key:0,class:"coordinate"},mA={key:1},pA=Ds(()=>W("div",null,null,-1)),gA={key:0,class:"coordinate"},_A={key:1},yA={key:0,class:"dnd-orig"},vA={key:2,class:"coordinate"},EA={key:3},wA=Ds(()=>W("div",null,null,-1)),bA={key:0,class:"coordinate"},TA={key:1},IA={class:"player-turn-cell"},CA={key:0,class:"last-move-layer"},AA=Ds(()=>W("div",{class:"last-move-line last-move-base-line"},null,-1)),SA=Ds(()=>W("div",{class:"last-move-line last-move-arrow-1"},null,-1)),RA=Ds(()=>W("div",{class:"last-move-line last-move-arrow-2"},null,-1)),PA=Ds(()=>W("div",{class:"last-move-line last-move-arrow-point"},null,-1)),kA=[AA,SA,RA,PA],NA={class:"dnd-layer"},LA={key:12},DA={key:0,class:"promotion-overlay-layer"},xA={class:"promotion-layer"},MA={class:"promotion-buttons"},a0="4k3/8/8/8/8/8/8/4K3 w - - 0 1",OA="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",VA=ft({__name:"ChessboardVue",props:{size:{default:100},reversed:{type:Boolean,default:!1},background:{default:"#124589"},coordinatesVisible:{type:Boolean,default:!0},coordinatesColor:{default:"yellow"},whiteCellsColor:{default:"navajowhite"},blackCellsColor:{default:"peru"},originCellColor:{default:"crimson"},targetCellColor:{default:"ForestGreen"},dndCrossCellColor:{default:"DimGrey"},moveHighlightColor:{default:"CadetBlue"},whitePlayerHuman:{type:Boolean,default:!0},blackPlayerHuman:{type:Boolean,default:!0},lastMoveVisible:{type:Boolean,default:!0}},emits:["checkmate","stalemate","perpetualDraw","missingMaterialDraw","fiftyMovesDraw","waitingManualMove","moveDone"],setup(t,{expose:e,emit:n}){Ug(se=>({23365052:F.value,"7b12f459":se.background,"4e90964b":I.value,"0ccafbb5":_e.value,aac90db0:Ce.value,edbfd394:m.value,"66d0db47":d.value,c9bfb090:y.value,"3dba7350":se.whiteCellsColor,"26ac38b4":se.blackCellsColor,"7e290edb":B.value,"9d9f45da":se.coordinatesColor,"33a18c2e":X.value,"33a18c2c":H.value,"313142cf":z.value,b588fb60:se.originCellColor,"2f8b4845":se.targetCellColor,"4eea78f0":se.dndCrossCellColor,14110304:p.value,"397bb7fe":g.value,"6cd5c3a2":E.value,"4f3fadde":v.value,"3b360156":_.value,"0bbbf24a":w.value,"13014d6b":se.moveHighlightColor,"5487e881":T.value,"2c04819b":b.value,"3d11f48c":N.value,"4b5da321":S.value,"04a55f32":V.value,f1bf6610:P.value,54960002:k.value,"2c04f5fa":M.value,"3ec6cd2b":D.value,ff78433c:L.value,"0e225f5e":G.value,"68b22ad7":ge.value,"730e6736":Ve.value,40359137:me.value,"093d8d28":we.value,"04a51e05":be.value,"29db49ce":tt.value,"41ea5ad8":Je.value}));const r=n;let s=new $r(a0);const i=Z(s.fen()),o=Z(a0),a=Z(!1),l=Z(!1),c=Z(!1),u=Z(!1),f=Z({start:{file:-100,rank:-100},end:{file:-100,rank:-100}}),h=Z({start:{file:-100,rank:-100},end:{file:-100,rank:-100}}),p=Z("0px"),g=Z("0px"),E=Z("0px"),v=Z("0px"),_=Z(""),w=Z("center"),T=Z("0px"),b=Z("0px"),N=Z("0px"),S=Z("0px"),V=Z(""),P=Z("center"),k=Z("0px"),M=Z("0px"),D=Z("0px"),L=Z("0px"),G=Z(""),ge=Z("center"),Ve=Z("0px"),me=Z("0px"),we=Z("0px"),be=Z("0px"),tt=Z(""),Je=Z("center"),Te=t;function $e(){i.value=s.fen()}const oe=Z({piece:"",originCell:{file:-100,rank:-100},targetCell:{file:-100,rank:-100}}),at=Z({x:-100,y:-100}),ae=Z(!1),K=ue(()=>Te.size/9),R=ue(()=>K.value*.5),B=ue(()=>"".concat(K.value*.3,"px")),F=ue(()=>"".concat(Te.size,"px")),z=ue(()=>"".concat(K.value,"px")),_e=ue(()=>"".concat(Te.size*.8,"px")),Ce=ue(()=>"".concat(Te.size*.6,"px")),m=ue(()=>"".concat(K.value*.08,"px solid black")),d=ue(()=>"".concat(K.value*.01,"px")),y=ue(()=>"".concat(K.value*.02,"px")),I=ue(()=>"".concat(R.value,"px repeat(8, ").concat(K.value,"px) ").concat(R.value,"px / ").concat(R.value,"px repeat(8, ").concat(K.value,"px) ").concat(R.value,"px")),C=ue(()=>K.value*.08),O=Z(),Y=ue(()=>Te.reversed?[7,6,5,4,3,2,1,0]:[0,1,2,3,4,5,6,7]),q=ue(()=>Te.reversed?[0,1,2,3,4,5,6,7]:[7,6,5,4,3,2,1,0]),X=ue(()=>at.value.x+"px"),H=ue(()=>at.value.y+"px");function ne(){a.value&&(c.value=!l.value,c.value&&r("waitingManualMove"))}function fe(){s.isCheckmate()?(A(),a.value=!1,r("checkmate",s.turn()!=="w")):s.isStalemate()?(A(),a.value=!1,r("stalemate")):s.isThreefoldRepetition()?(A(),a.value=!1,r("perpetualDraw")):s.isDraw()&&(s.isInsufficientMaterial()?(A(),a.value=!1,r("missingMaterialDraw")):(A(),a.value=!1,r("fiftyMovesDraw")))}function J(se,Le,ie,le,fn){at.value={x:se,y:Le},oe.value={piece:fn,originCell:{file:ie,rank:le},targetCell:{file:ie,rank:le}},u.value=!0}function A(){u.value=!1,oe.value={piece:"",originCell:{file:-100,rank:-100},targetCell:{file:-100,rank:-100}},at.value={x:-100,y:-100}}function x(){if(!a.value){l.value=!1;return}const se=s.turn()==="w";l.value=se&&Te.whitePlayerHuman||!se&&Te.blackPlayerHuman}function de(se=OA){s=new $r(se),$e(),dd(),o.value=se,ae.value=!1,A(),a.value=!0,fe(),x(),ne()}function ve(){A(),c.value=!1,ae.value=!1,a.value=!1}function ze(se,Le){return se=se.replace(/K/g,Le?"":"").normalize("NFKC"),se=se.replace(/Q/g,Le?"":"").normalize("NFKC"),se=se.replace(/R/g,Le?"":"").normalize("NFKC"),se=se.replace(/B/g,Le?"":"").normalize("NFKC"),se=se.replace(/N/g,Le?"":"").normalize("NFKC"),se}function gt(se,Le,ie,le,fn,kn,Un){f.value={start:{file:se,rank:Le},end:{file:ie,rank:le}},da();const Di=parseInt(fn.fen().split(" ")[5]),$s=kn.history(),xi=fn.turn()==="w",ss=$s[$s.length-1],Us=ze(ss,xi);r("moveDone",Di,xi,ss,Us,kn.fen(),{start:{file:se,rank:Le},end:{file:ie,rank:le}},Un)}function zt(se,Le,ie,le){at.value={x:se,y:Le},oe.value.targetCell.file=ie,oe.value.targetCell.rank=le}function Fs(se,Le,ie,le){ae.value=!0,h.value={start:{file:se,rank:Le},end:{file:ie,rank:le}}}function Qt(se){const Le={from:ol(h.value.start.file,h.value.start.rank),to:ol(h.value.end.file,h.value.end.rank),promotion:se},ie=new $r(s.fen());s.move(Le),$e(),A();const{start:{file:le,rank:fn},end:{file:kn,rank:Un}}=h.value;h.value={start:{file:-100,rank:-100},end:{file:-100,rank:-100}},ae.value=!1,fe(),gt(le,fn,kn,Un,ie,s,se),x(),ne()}function Li(){ae.value=!1,h.value={start:{file:-100,rank:-100},end:{file:-100,rank:-100}},A()}function Yt(se){if(!a.value||!c.value)return!1;const Le=new $r(s.fen());let ie,le,fn,kn,Un;typeof se=="string"?(ie=se.charCodeAt(0)-97,le=se.charCodeAt(1)-49,fn=se.charCodeAt(2)-97,kn=se.charCodeAt(3)-49,Un=se.length>=5?se.charAt(4):void 0):(ie=se.from.charCodeAt(0)-97,le=se.from.charCodeAt(1)-49,fn=se.to.charCodeAt(0)-97,kn=se.to.charCodeAt(1)-49,Un=se.promotion);const Di=Qu(ie,le,fn,kn,Un);try{s.move(Di)}catch($s){return!1}return $e(),gt(ie,le,fn,kn,Le,s,Un),fe(),x(),ne(),!0}function En(se){se.preventDefault(),QC(se,K.value,Te.reversed,O.value,i.value,J,a.value,c.value,l.value)}function fa(se){se.preventDefault(),YC(se,u.value,zt,O.value,A,K.value,Te.reversed,ae.value,a.value,c.value,l.value)}function by(se){se.preventDefault(),XC(se,K.value,Te.reversed,O.value,s,u.value,oe.value,A,$e,gt,ae.value,Fs,a.value,fe,ne,c.value,l.value,x)}function Ty(se){se.preventDefault(),JC(se,A,ae.value,a.value,c.value,l.value)}function Iy(){return s.turn()==="w"}function dd(){f.value={start:{file:-100,rank:-100},end:{file:-100,rank:-100}},p.value="0px",g.value="0px",E.value="0px",v.value="0px",_.value="",w.value="0px 0px",T.value="0px",b.value="0px",N.value="0px",S.value="0px",V.value="",P.value="0px 0px",k.value="0px",M.value="0px",D.value="0px",L.value="0px",G.value=")",ge.value="0px 0px",Ve.value="0px",me.value="0px",we.value="0px",be.value="0px",tt.value="",Je.value="center"}function da(){const se=Te.reversed?7-f.value.start.file:f.value.start.file,Le=Te.reversed?f.value.start.rank:7-f.value.start.rank,ie=Te.reversed?7-f.value.end.file:f.value.end.file,le=Te.reversed?f.value.end.rank:7-f.value.end.rank,fn=K.value*(se+1),kn=K.value*(Le+1),Un=K.value*(ie+1),Di=K.value*(le+1),$s=fn-C.value,xi=kn,ss=Un-C.value,Us=Di,Bn=ss-$s,jn=Us-xi,ky=Math.atan2(jn,Bn)-Math.PI/2,Ny=Math.sqrt(Bn*Bn+jn*jn);p.value="".concat($s,"px"),g.value="".concat(xi,"px"),E.value="".concat(2*C.value,"px"),v.value="".concat(Ny,"px"),_.value="rotate(".concat(ky,"rad)"),w.value="".concat(C.value,"px 0px");const Ly=Math.atan2(jn,Bn)-Math.PI/2-3*Math.PI/4,Dy=Math.sqrt(Bn*Bn+jn*jn)*.4;T.value="".concat(ss,"px"),b.value="".concat(Us,"px"),N.value="".concat(2*C.value,"px"),S.value="".concat(Dy,"px"),V.value="rotate(".concat(Ly,"rad)"),P.value="".concat(C.value,"px 0px");const xy=Math.atan2(jn,Bn)-Math.PI/2+3*Math.PI/4,My=Math.sqrt(Bn*Bn+jn*jn)*.4;k.value="".concat(ss,"px"),M.value="".concat(Us,"px"),D.value="".concat(2*C.value,"px"),L.value="".concat(My,"px"),G.value="rotate(".concat(xy,"rad)"),ge.value="".concat(C.value,"px 0px");const Oy=Math.atan2(jn,Bn)+Math.PI/4,Vy=2*C.value;Ve.value="".concat(ss,"px"),me.value="".concat(Us,"px"),we.value="".concat(2*C.value,"px"),be.value="".concat(Vy,"px"),tt.value="rotate(".concat(Oy,"rad)"),Je.value="center"}function Cy(){return a.value}function Ay(){return a.value?!1:(s=new $r(o.value),dd(),$e(),!0)}function Sy(se,Le){return a.value?!1:(s=new $r(se),f.value=Le,da(),$e(),!0)}function Ry(){return s.fen()}function Py(se){f.value=se,da(),$e()}return Kh(()=>{da(),x(),ne()}),e({newGame:de,stop:ve,isWhiteTurn:Iy,playManualMove:Yt,gameIsInProgress:Cy,setStartPosition:Ay,setPositionAndLastMove:Sy,getCurrentPosition:Ry,setLastMoveArrow:Py}),(se,Le)=>(Q(),ce("div",{class:"root",ref_key:"rootElement",ref:O},[W("div",{class:"inner-layer",onMousedown:En,onMousemove:fa,onMouseup:by,onMouseleave:Ty},[W("div",hA,[fA,(Q(!0),ce(Ze,null,qi(Y.value,ie=>(Q(),ce(Ze,null,[Te.coordinatesVisible?(Q(),ce("p",dA,Ge(String.fromCharCode(65+ie)),1)):(Q(),ce("div",mA))],64))),256)),pA,(Q(!0),ce(Ze,null,qi(q.value,ie=>(Q(),ce(Ze,null,[Te.coordinatesVisible?(Q(),ce("p",gA,Ge(String.fromCharCode(49+ie)),1)):(Q(),ce("div",_A)),(Q(!0),ce(Ze,null,qi(Y.value,le=>(Q(),ce("div",{class:ut(["cell",(ie+le)%2!==0?"white":"black"])},[$(o0)(le,ie,oe.value)?(Q(),ce("div",yA)):$(VC)(i.value,le,ie)?(Q(),et(r0,{key:1,class:ut($(nn)(le,ie,oe.value)?"dnd-target":$(dn)(le,ie,oe.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):$(FC)(i.value,le,ie)?(Q(),et(Xc,{key:2,class:ut($(nn)(le,ie,oe.value)?"dnd-target":$(dn)(le,ie,oe.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):$($C)(i.value,le,ie)?(Q(),et(Jc,{key:3,class:ut($(nn)(le,ie,oe.value)?"dnd-target":$(dn)(le,ie,oe.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):$(UC)(i.value,le,ie)?(Q(),et(Zc,{key:4,class:ut($(nn)(le,ie,oe.value)?"dnd-target":$(dn)(le,ie,oe.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):$(BC)(i.value,le,ie)?(Q(),et(eu,{key:5,class:ut($(nn)(le,ie,oe.value)?"dnd-target":$(dn)(le,ie,oe.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):$(jC)(i.value,le,ie)?(Q(),et(s0,{key:6,class:ut($(nn)(le,ie,oe.value)?"dnd-target":$(dn)(le,ie,oe.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):$(WC)(i.value,le,ie)?(Q(),et(t0,{key:7,class:ut($(nn)(le,ie,oe.value)?"dnd-target":$(dn)(le,ie,oe.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):$(HC)(i.value,le,ie)?(Q(),et(Kc,{key:8,class:ut($(nn)(le,ie,oe.value)?"dnd-target":$(dn)(le,ie,oe.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):$(qC)(i.value,le,ie)?(Q(),et(zc,{key:9,class:ut($(nn)(le,ie,oe.value)?"dnd-target":$(dn)(le,ie,oe.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):$(GC)(i.value,le,ie)?(Q(),et(Qc,{key:10,class:ut($(nn)(le,ie,oe.value)?"dnd-target":$(dn)(le,ie,oe.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):$(KC)(i.value,le,ie)?(Q(),et(Yc,{key:11,class:ut($(nn)(le,ie,oe.value)?"dnd-target":$(dn)(le,ie,oe.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):$(zC)(i.value,le,ie)?(Q(),et(n0,{key:12,class:ut($(nn)(le,ie,oe.value)?"dnd-target":$(dn)(le,ie,oe.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):$(o0)(le,ie,oe.value)?(Q(),ce("div",{key:13,class:ut($(nn)(le,ie,oe.value)?"dnd-origin":"dnd-target")},null,2)):(Q(),ce("div",{key:14,class:ut($(nn)(le,ie,oe.value)?"dnd-target":$(dn)(le,ie,oe.value)?"dnd-cross-cell":"no-highlight-cell")},null,2))],2))),256)),Te.coordinatesVisible?(Q(),ce("p",vA,Ge(String.fromCharCode(49+ie)),1)):(Q(),ce("div",EA))],64))),256)),wA,(Q(!0),ce(Ze,null,qi(Y.value,ie=>(Q(),ce(Ze,null,[Te.coordinatesVisible?(Q(),ce("p",bA,Ge(String.fromCharCode(65+ie)),1)):(Q(),ce("div",TA))],64))),256)),W("div",IA,[W("div",{class:ut(["player-turn",$(s).turn()==="w"?"white-turn":"black-turn"])},null,2)])]),se.lastMoveVisible?(Q(),ce("div",CA,kA)):jt("",!0),W("div",NA,[$(ZC)(oe.value)&&!ae.value?(Q(),et(r0,{key:0,class:"dndPiece"})):$(eA)(oe.value)?(Q(),et(Xc,{key:1,class:"dndPiece"})):$(tA)(oe.value)?(Q(),et(Jc,{key:2,class:"dndPiece"})):$(nA)(oe.value)?(Q(),et(Zc,{key:3,class:"dndPiece"})):$(rA)(oe.value)?(Q(),et(eu,{key:4,class:"dndPiece"})):$(sA)(oe.value)?(Q(),et(s0,{key:5,class:"dndPiece"})):$(iA)(oe.value)&&!ae.value?(Q(),et(t0,{key:6,class:"dndPiece"})):$(oA)(oe.value)?(Q(),et(Kc,{key:7,class:"dndPiece"})):$(aA)(oe.value)?(Q(),et(zc,{key:8,class:"dndPiece"})):$(lA)(oe.value)?(Q(),et(Qc,{key:9,class:"dndPiece"})):$(cA)(oe.value)?(Q(),et(Yc,{key:10,class:"dndPiece"})):$(uA)(oe.value)?(Q(),et(n0,{key:11,class:"dndPiece"})):(Q(),ce("div",LA))])],32),ae.value?(Q(),ce("div",DA,[W("div",xA,[W("div",MA,[$(s).turn()==="w"?(Q(),ce(Ze,{key:0},[ke(eu,{size:K.value,class:"single-promotion-button",onClick:Le[0]||(Le[0]=()=>Qt("q"))},null,8,["size"]),ke(Zc,{size:K.value,class:"single-promotion-button",onClick:Le[1]||(Le[1]=()=>Qt("r"))},null,8,["size"]),ke(Jc,{size:K.value,class:"single-promotion-button",onClick:Le[2]||(Le[2]=()=>Qt("b"))},null,8,["size"]),ke(Xc,{size:K.value,class:"single-promotion-button",onClick:Le[3]||(Le[3]=()=>Qt("n"))},null,8,["size"]),ke(i0,{size:K.value,class:"single-promotion-button",onClick:Le[4]||(Le[4]=()=>Li())},null,8,["size"])],64)):(Q(),ce(Ze,{key:1},[ke(Yc,{size:K.value,class:"single-promotion-button",onClick:Le[5]||(Le[5]=()=>Qt("q"))},null,8,["size"]),ke(Qc,{size:K.value,class:"single-promotion-button",onClick:Le[6]||(Le[6]=()=>Qt("r"))},null,8,["size"]),ke(zc,{size:K.value,class:"single-promotion-button",onClick:Le[7]||(Le[7]=()=>Qt("b"))},null,8,["size"]),ke(Kc,{size:K.value,class:"single-promotion-button",onClick:Le[8]||(Le[8]=()=>Qt("n"))},null,8,["size"]),ke(i0,{size:K.value,class:"single-promotion-button",onClick:Le[9]||(Le[9]=()=>Li())},null,8,["size"])],64))])])])):jt("",!0)],512))}}),FA=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},$A=FA(VA,[["__scopeId","data-v-c00eddd7"]]),UA={install(t){t.component("ChessboardVue",$A)}},bs=qo();function al(t){t===void 0&&(t=bs.value.comp.returnValue()),bs.value.resolve(t),bs.value=null}function l0(t,e,n="default"){return new Promise(r=>{bs.value={dialog:t,props:e,wrapper:n,resolve:r}})}var BA=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n};const jA=ft({name:"DialogWrapper",components:{},props:{name:{type:String,default:"default"},transitionAttrs:Object},setup(){const t=Z();return xn(t,()=>{bs.value&&(bs.value.comp=t.value)}),{dialogRef:bs,dialogInstance:t}}});function WA(t,e,n,r,s,i){return Q(),et(Zh,Xy(Ng(t.transitionAttrs)),{default:hg(()=>[t.dialogRef&&t.dialogRef.wrapper===t.name?(Q(),et(Fv(t.dialogRef.dialog),Lg({key:0},t.dialogRef.props,{ref:"dialogInstance"}),null,16)):jt("",!0)]),_:1},16)}var HA=BA(jA,[["render",WA]]);const qA={__name:"App",setup(t){return(e,n)=>{const r=Ja("RouterView"),s=Ja("notifications");return Q(),ce(Ze,null,[ke(r),ke(s),ke($(HA))],64)}}},GA={pages:{home:{title:"home",createRoom:"Create a room",joinRoom:"Join a room",yourRoom:"Your room",roomIdCopied:"Room id copied in the clipboard."},createRoom:{title:"Create a room",labels:{nickname:"Your nickname"},placeholders:{nickname:"nickname"},errors:{emptyNickname:"Nickname must not be empty !",tooShortNickname:"Nickname must contains at least 4 characters !",failedCreatingRoom:"Failed to create room !"},submit:"Create",cancel:"Cancel"},joinRoom:{title:"Join a room",labels:{nickname:"Your nickname",roomId:"Room id"},placeholders:{nickname:"nickname",roomId:"id"},errors:{emptyNickname:"Nickname must not be empty !",tooShortNickname:"Nickname must contains at least 4 characters !",emptyRoomId:"Room id must not be empty !",noMatchingRoom:"There's no matching room !",alreadyFilledRoom:"This room is already busy !",failedJoiningRoom:"Failed to join room !"},submit:"Join",cancel:"Cancel"},newGame:{title:"New game",submit:"Confirm",cancel:"Cancel",hasWhite:"Do you have white ?",hasWhiteYes:"Yes",hasWhiteNo:"No"},giveUp:{title:"Give up ?",submit:"Confirm",cancel:"Cancel"},game:{outcomes:{gaveUp:"Game gave up by your opponent.",checkmate:"Checkmate !",stalemate:"Stalemate !",perpetualDraw:"Draw by three-fold repetition !",missingMaterial:"Draw by missing material !",fiftyMovesDraw:"Draw by the 50 moves rule !"}},pgn:{confirmationMessage:"Download the generated PGN file ?"},generic:{errors:{failedUpdatingRoom:"Failed to update room in database !",failedReadingRoom:"Failed to read room from database !"}}}},KA={pages:{home:{title:"Accueil",createRoom:"Crr un salon",joinRoom:"Rejoindre un salon",yourRoom:"Votre salon",roomIdCopied:"ID du salon copi dans le presse-papiers."},createRoom:{title:"Crr un salon",labels:{nickname:"Votre pseudo"},placeholders:{nickname:"pseudo"},errors:{emptyNickname:"Le pseudo ne doit pas tre vide !",tooShortNickname:"Le pseudo doit contenir au moins 4 caractres !",failedCreatingRoom:"chec de cration du salon !"},submit:"Crer",cancel:"Annuler"},joinRoom:{title:"Rejoindre un salon",labels:{nickname:"Votre pseudo",roomId:"Id du salon"},placeholders:{nickname:"pseudo",roomId:"id"},errors:{emptyNickname:"Le pseudo ne doit pas tre vide !",tooShortNickname:"Le pseudo doit contenir au moins 4 caractres !",emptyRoomId:"L'id du salon ne doit pas tre vide !",noMatchingRoom:"Aucun salon ne correspond !",alreadyFilledRoom:"Ce salon est dj occup !",failedJoiningRoom:"Erreur en tentant de rejoindre le salon !"},submit:"Joindre",cancel:"Annuler"},newGame:{title:"Nouvelle partie",submit:"Confirmer",cancel:"Annuler",hasWhite:"Avez-vous les Blancs ?",hasWhiteYes:"Oui",hasWhiteNo:"Non"},giveUp:{title:"Abandonner ?",submit:"Confirmer",cancel:"Annuler"},game:{outcomes:{gaveUp:"Partie abandonne par votre adversaire.",checkmate:"chec et mat !",stalemate:"Pat !",perpetualDraw:"Nulle par triple rptition !",missingMaterial:"Nulle par manque de matriel !",fiftyMovesDraw:"Nulle par la rgle des 50 coups !"}},pgn:{confirmationMessage:"Tlcharger le fichier PGN gnr ?"},generic:{errors:{failedUpdatingRoom:"chec de mise  jour du salon dans la base de donnes !",failedReadingRoom:"chec de lecture du salon depuis la base de donnes !"}}}},zA={pages:{home:{title:"Bienvenida",createRoom:"Crear una sala de estar",joinRoom:"Entrar a una sala",yourRoom:"Su sala",roomIdCopied:"ID de la sala copiada en el portapapeles."},createRoom:{title:"Crear una sala de estar",labels:{nickname:"Tu apodo"},placeholders:{nickname:"apodo"},errors:{emptyNickname:"El apodo no debe estar vaco!",tooShortNickname:"El apodo debe contener al menos 4 caracteres!",failedCreatingRoom:"No se pudo crear sala!"},submit:"Crear",cancel:"Anular"},joinRoom:{title:"Entrar a una sala",labels:{nickname:"Tu apodo",roomId:"Identificacin de la sala"},placeholders:{nickname:"apodo",roomId:"identificacin"},errors:{emptyNickname:"El apodo no debe estar vaco!",tooShortNickname:"El apodo debe contener al menos 4 caracteres!",emptyRoomId:"La identificacin de la sala no debe estar vaca!",noMatchingRoom:"No hay ninguna sala que coincida!",alreadyFilledRoom:"Esta sala ya est ocupada!",failedJoiningRoom:"No se pudo entrar a la sala!"},submit:"Entrar",cancel:"Anular"},newGame:{title:"Nueva partida",submit:"Confirmar",cancel:"Anular",hasWhite:"Tiene los blancos?",hasWhiteYes:"S",hasWhiteNo:"No"},giveUp:{title:"Abandonar?",submit:"Confirmar",cancel:"Anular"},game:{outcomes:{gaveUp:"Partida abandonada por su oponente.",checkmate:"Jaque mate!",stalemate:"Empate!",perpetualDraw:"Igualdad por repeticin triple!",missingMaterial:"Igualdad con el material que falta!",fiftyMovesDraw:"Igualdad segn la regla de los 50 movimientos!"}},pgn:{confirmationMessage:"Descargar el archivo PGN generado?"},generic:{errors:{failedUpdatingRoom:"No se pudo actualizar la sala en la base de datos!",failedReadingRoom:"No se pudo leer la sala de la base de datos!"}}}},QA={en:GA,es:zA,fr:KA},YA={apiKey:"AIzaSyDJsIcF_jVDnNf7VGwGtLX2Fs5UiK3u8G8",authDomain:"peer-chess-20535.firebaseapp.com",projectId:"peer-chess-20535",storageBucket:"peer-chess-20535.appspot.com",messagingSenderId:"249834096947",appId:"1:249834096947:web:9116716c18a90b0493d646"},XA="7895ChessAppWeb5614";var c0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},JA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},M_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,f=(i&3)<<4|a>>4;let h=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(h=64)),r.push(n[u],n[f],n[h],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(x_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):JA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new ZA;const h=i<<2|a>>4;if(r.push(h),c!==64){const p=a<<4&240|c>>2;if(r.push(p),f!==64){const g=c<<6&192|f;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ZA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eS=function(t){const e=x_(t);return M_.encodeByteArray(e,!0)},O_=function(t){return eS(t).replace(/\./g,"")},tS=function(t){try{return M_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS=()=>nS().__FIREBASE_DEFAULTS__,sS=()=>{if(typeof process>"u"||typeof c0>"u")return;const t=c0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},iS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&tS(t[1]);return e&&JSON.parse(e)},V_=()=>{try{return rS()||sS()||iS()}catch(t){console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(t));return}},oS=()=>{var t;return(t=V_())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lS(){var t;const e=(t=V_())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch(n){return!1}}function cS(){return!lS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function F_(){try{return typeof indexedDB=="object"}catch(t){return!1}}function uS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="FirebaseError";class Ci extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=hS,Object.setPrototypeOf(this,Ci.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$_.prototype.create)}}class $_{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s="".concat(this.service,"/").concat(e),i=this.errors[e],o=i?fS(i,r):"Error",a="".concat(this.serviceName,": ").concat(o," (").concat(s,").");return new Ci(s,a,r)}}function fS(t,e){return t.replace(dS,(n,r)=>{const s=e[r];return s!=null?String(s):"<".concat(r,"?>")})}const dS=/\{\$([^}]+)}/g;function cl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(u0(i)&&u0(o)){if(!cl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function u0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(t){return t&&t._delegate?t._delegate:t}class Co{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new aS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch(s){}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error("Service ".concat(this.name," is not available"))}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,!!this.shouldAutoInitialize()){if(gS(e))try{this.getOrInitializeService({instanceIdentifier:cs})}catch(n){}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch(i){}}}}clearInstance(e=cs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cs){return this.instances.has(e)}getOptions(e=cs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch(i){}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:pS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(s){}return r||null}normalizeInstanceIdentifier(e=cs){return this.component?this.component.multipleInstances?e:cs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pS(t){return t===cs?void 0:t}function gS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new mS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(He||(He={}));const yS={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},vS=He.INFO,ES={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},wS=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=ES[e];if(s)console[s]("[".concat(r,"]  ").concat(t.name,":"),...n);else throw new Error("Attempted to log a message with an invalid logType (value: ".concat(e,")"))};class U_{constructor(e){this.name=e,this._logLevel=vS,this._logHandler=wS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const bS=(t,e)=>e.some(n=>t instanceof n);let h0,f0;function TS(){return h0||(h0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IS(){return f0||(f0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const B_=new WeakMap,Yu=new WeakMap,j_=new WeakMap,tu=new WeakMap,hf=new WeakMap;function CS(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Hr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&B_.set(n,t)}).catch(()=>{}),hf.set(e,t),e}function AS(t){if(Yu.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Yu.set(t,e)}let Xu={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Yu.get(t);if(e==="objectStoreNames")return t.objectStoreNames||j_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function SS(t){Xu=t(Xu)}function RS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(nu(this),e,...n);return j_.set(r,e.sort?e.sort():[e]),Hr(r)}:IS().includes(t)?function(...e){return t.apply(nu(this),e),Hr(B_.get(this))}:function(...e){return Hr(t.apply(nu(this),e))}}function PS(t){return typeof t=="function"?RS(t):(t instanceof IDBTransaction&&AS(t),bS(t,TS())?new Proxy(t,Xu):t)}function Hr(t){if(t instanceof IDBRequest)return CS(t);if(tu.has(t))return tu.get(t);const e=PS(t);return e!==t&&(tu.set(t,e),hf.set(e,t)),e}const nu=t=>hf.get(t);function kS(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Hr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Hr(o.result),l.oldVersion,l.newVersion,Hr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const NS=["get","getKey","getAll","getAllKeys","count"],LS=["put","add","delete","clear"],ru=new Map;function d0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ru.get(e))return ru.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=LS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||NS.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return ru.set(e,i),i}SS(t=>({...t,get:(e,n,r)=>d0(e,n)||t.get(e,n,r),has:(e,n)=>!!d0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xS(n)){const r=n.getImmediate();return"".concat(r.library,"/").concat(r.version)}else return null}).filter(n=>n).join(" ")}}function xS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ju="@firebase/app",m0="0.10.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As=new U_("@firebase/app"),MS="@firebase/app-compat",OS="@firebase/analytics-compat",VS="@firebase/analytics",FS="@firebase/app-check-compat",$S="@firebase/app-check",US="@firebase/auth",BS="@firebase/auth-compat",jS="@firebase/database",WS="@firebase/database-compat",HS="@firebase/functions",qS="@firebase/functions-compat",GS="@firebase/installations",KS="@firebase/installations-compat",zS="@firebase/messaging",QS="@firebase/messaging-compat",YS="@firebase/performance",XS="@firebase/performance-compat",JS="@firebase/remote-config",ZS="@firebase/remote-config-compat",eR="@firebase/storage",tR="@firebase/storage-compat",nR="@firebase/firestore",rR="@firebase/firestore-compat",sR="firebase",iR="10.11.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR="[DEFAULT]",aR={[Ju]:"fire-core",[MS]:"fire-core-compat",[VS]:"fire-analytics",[OS]:"fire-analytics-compat",[$S]:"fire-app-check",[FS]:"fire-app-check-compat",[US]:"fire-auth",[BS]:"fire-auth-compat",[jS]:"fire-rtdb",[WS]:"fire-rtdb-compat",[HS]:"fire-fn",[qS]:"fire-fn-compat",[GS]:"fire-iid",[KS]:"fire-iid-compat",[zS]:"fire-fcm",[QS]:"fire-fcm-compat",[YS]:"fire-perf",[XS]:"fire-perf-compat",[JS]:"fire-rc",[ZS]:"fire-rc-compat",[eR]:"fire-gcs",[tR]:"fire-gcs-compat",[nR]:"fire-fst",[rR]:"fire-fst-compat","fire-js":"fire-js",[sR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zu=new Map,lR=new Map,eh=new Map;function p0(t,e){try{t.container.addComponent(e)}catch(n){As.debug("Component ".concat(e.name," failed to register with FirebaseApp ").concat(t.name),n)}}function ul(t){const e=t.name;if(eh.has(e))return As.debug("There were multiple attempts to register component ".concat(e,".")),!1;eh.set(e,t);for(const n of Zu.values())p0(n,t);for(const n of lR.values())p0(n,t);return!0}function cR(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ts=new $_("app","Firebase",uR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Co("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ts.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=iR;function dR(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:oR,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ts.create("bad-app-name",{appName:String(s)});if(n||(n=oS()),!n)throw Ts.create("no-options");const i=Zu.get(s);if(i){if(cl(n,i.options)&&cl(r,i.config))return i;throw Ts.create("duplicate-app",{appName:s})}const o=new _S(s);for(const l of eh.values())o.addComponent(l);const a=new hR(n,r,o);return Zu.set(s,a),a}function ri(t,e,n){var r;let s=(r=aR[t])!==null&&r!==void 0?r:t;n&&(s+="-".concat(n));const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=['Unable to register library "'.concat(s,'" with version "').concat(e,'":')];i&&a.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),i&&o&&a.push("and"),o&&a.push('version name "'.concat(e,'" contains illegal characters (whitespace or "/")')),As.warn(a.join(" "));return}ul(new Co("".concat(s,"-version"),()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR="firebase-heartbeat-database",pR=1,Ao="firebase-heartbeat-store";let su=null;function W_(){return su||(su=kS(mR,pR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ao)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ts.create("idb-open",{originalErrorMessage:t.message})})),su}async function gR(t){try{const n=(await W_()).transaction(Ao),r=await n.objectStore(Ao).get(H_(t));return await n.done,r}catch(e){if(e instanceof Ci)As.warn(e.message);else{const n=Ts.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});As.warn(n.message)}}}async function g0(t,e){try{const r=(await W_()).transaction(Ao,"readwrite");await r.objectStore(Ao).put(e,H_(t)),await r.done}catch(n){if(n instanceof Ci)As.warn(n.message);else{const r=Ts.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});As.warn(r.message)}}}function H_(t){return"".concat(t.name,"!").concat(t.options.appId)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=1024,yR=30*24*60*60*1e3;class vR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new wR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=_0();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=yR}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=_0(),{heartbeatsToSend:r,unsentEntries:s}=ER(this._heartbeatsCache.heartbeats),i=O_(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function _0(){return new Date().toISOString().substring(0,10)}function ER(t,e=_R){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),y0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),y0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class wR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return F_()?uS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await gR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return g0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return g0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function y0(t){return O_(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(t){ul(new Co("platform-logger",e=>new DS(e),"PRIVATE")),ul(new Co("heartbeat",e=>new vR(e),"PRIVATE")),ri(Ju,m0,t),ri(Ju,m0,"esm2017"),ri("fire-js","")}bR("");var TR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},te,ff=ff||{},Pe=TR||self;function zl(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Yo(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function IR(t){return Object.prototype.hasOwnProperty.call(t,iu)&&t[iu]||(t[iu]=++CR)}var iu="closure_uid_"+(1e9*Math.random()>>>0),CR=0;function AR(t,e,n){return t.call.apply(t.bind,arguments)}function SR(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function qt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?qt=AR:qt=SR,qt.apply(null,arguments)}function Ia(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Lt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function ts(){this.s=this.s,this.o=this.o}var RR=0;ts.prototype.s=!1;ts.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),RR!=0)&&IR(this)};ts.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const q_=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function df(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function v0(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(zl(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function Gt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Gt.prototype.h=function(){this.defaultPrevented=!0};var PR=function(){if(!Pe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};Pe.addEventListener("test",n,e),Pe.removeEventListener("test",n,e)}catch(n){}return t}();function So(t){return/^[\s\xa0]*$/.test(t)}function Ql(){var t=Pe.navigator;return t&&(t=t.userAgent)?t:""}function Kn(t){return Ql().indexOf(t)!=-1}function mf(t){return mf[" "](t),t}mf[" "]=function(){};function kR(t,e){var n=b3;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var NR=Kn("Opera"),mi=Kn("Trident")||Kn("MSIE"),G_=Kn("Edge"),th=G_||mi,K_=Kn("Gecko")&&!(Ql().toLowerCase().indexOf("webkit")!=-1&&!Kn("Edge"))&&!(Kn("Trident")||Kn("MSIE"))&&!Kn("Edge"),LR=Ql().toLowerCase().indexOf("webkit")!=-1&&!Kn("Edge");function z_(){var t=Pe.document;return t?t.documentMode:void 0}var nh;e:{var ou="",au=function(){var t=Ql();if(K_)return/rv:([^\);]+)(\)|;)/.exec(t);if(G_)return/Edge\/([\d\.]+)/.exec(t);if(mi)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(LR)return/WebKit\/(\S+)/.exec(t);if(NR)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(au&&(ou=au?au[1]:""),mi){var lu=z_();if(lu!=null&&lu>parseFloat(ou)){nh=String(lu);break e}}nh=ou}var rh;if(Pe.document&&mi){var E0=z_();rh=E0||parseInt(nh,10)||void 0}else rh=void 0;var DR=rh;function Ro(t,e){if(Gt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(K_){e:{try{mf(e.nodeName);var s=!0;break e}catch(i){}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:xR[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ro.$.h.call(this)}}Lt(Ro,Gt);var xR={2:"touch",3:"pen",4:"mouse"};Ro.prototype.h=function(){Ro.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Xo="closure_listenable_"+(1e6*Math.random()|0),MR=0;function OR(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++MR,this.fa=this.ia=!1}function Yl(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function pf(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function VR(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function Q_(t){const e={};for(const n in t)e[n]=t[n];return e}const w0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y_(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<w0.length;i++)n=w0[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Xl(t){this.src=t,this.g={},this.h=0}Xl.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=ih(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new OR(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function sh(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=q_(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Yl(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function ih(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var gf="closure_lm_"+(1e6*Math.random()|0),cu={};function X_(t,e,n,r,s){if(r&&r.once)return Z_(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)X_(t,e[i],n,r,s);return null}return n=vf(n),t&&t[Xo]?t.O(e,n,Yo(r)?!!r.capture:!!r,s):J_(t,e,n,!1,r,s)}function J_(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=Yo(s)?!!s.capture:!!s,a=yf(t);if(a||(t[gf]=a=new Xl(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=FR(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)PR||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(t1(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function FR(){function t(n){return e.call(t.src,t.listener,n)}const e=$R;return t}function Z_(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)Z_(t,e[i],n,r,s);return null}return n=vf(n),t&&t[Xo]?t.P(e,n,Yo(r)?!!r.capture:!!r,s):J_(t,e,n,!0,r,s)}function e1(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)e1(t,e[i],n,r,s);else r=Yo(r)?!!r.capture:!!r,n=vf(n),t&&t[Xo]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=ih(i,n,r,s),-1<n&&(Yl(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=yf(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ih(e,n,r,s)),(n=-1<t?e[t]:null)&&_f(n))}function _f(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Xo])sh(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(t1(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=yf(e))?(sh(n,t),n.h==0&&(n.src=null,e[gf]=null)):Yl(t)}}}function t1(t){return t in cu?cu[t]:cu[t]="on"+t}function $R(t,e){if(t.fa)t=!0;else{e=new Ro(e,this);var n=t.listener,r=t.la||t.src;t.ia&&_f(t),t=n.call(r,e)}return t}function yf(t){return t=t[gf],t instanceof Xl?t:null}var uu="__closure_events_fn_"+(1e9*Math.random()>>>0);function vf(t){return typeof t=="function"?t:(t[uu]||(t[uu]=function(e){return t.handleEvent(e)}),t[uu])}function Nt(){ts.call(this),this.i=new Xl(this),this.S=this,this.J=null}Lt(Nt,ts);Nt.prototype[Xo]=!0;Nt.prototype.removeEventListener=function(t,e,n,r){e1(this,t,e,n,r)};function Vt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Gt(e,t);else if(e instanceof Gt)e.target=e.target||t;else{var s=e;e=new Gt(r,t),Y_(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=Ca(o,r,!0,e)&&s}if(o=e.g=t,s=Ca(o,r,!0,e)&&s,s=Ca(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=Ca(o,r,!1,e)&&s}Nt.prototype.N=function(){if(Nt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Yl(n[r]);delete t.g[e],t.h--}}this.J=null};Nt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Nt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Ca(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&sh(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var Ef=Pe.JSON.stringify;class UR{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function BR(){var t=wf;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class jR{constructor(){this.h=this.g=null}add(e,n){const r=n1.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var n1=new UR(()=>new WR,t=>t.reset());class WR{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function HR(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function qR(t){Pe.setTimeout(()=>{throw t},0)}let Po,ko=!1,wf=new jR,r1=()=>{const t=Pe.Promise.resolve(void 0);Po=()=>{t.then(GR)}};var GR=()=>{for(var t;t=BR();){try{t.h.call(t.g)}catch(n){qR(n)}var e=n1;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ko=!1};function Jl(t,e){Nt.call(this),this.h=t||1,this.g=e||Pe,this.j=qt(this.qb,this),this.l=Date.now()}Lt(Jl,Nt);te=Jl.prototype;te.ga=!1;te.T=null;te.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Vt(this,"tick"),this.ga&&(bf(this),this.start()))}};te.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function bf(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}te.N=function(){Jl.$.N.call(this),bf(this),delete this.g};function Tf(t,e,n){if(typeof t=="function")n&&(t=qt(t,n));else if(t&&typeof t.handleEvent=="function")t=qt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Pe.setTimeout(t,e||0)}function s1(t){t.g=Tf(()=>{t.g=null,t.i&&(t.i=!1,s1(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class KR extends ts{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:s1(this)}N(){super.N(),this.g&&(Pe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function No(t){ts.call(this),this.h=t,this.g={}}Lt(No,ts);var b0=[];function i1(t,e,n,r){Array.isArray(n)||(n&&(b0[0]=n.toString()),n=b0);for(var s=0;s<n.length;s++){var i=X_(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function o1(t){pf(t.g,function(e,n){this.g.hasOwnProperty(n)&&_f(e)},t),t.g={}}No.prototype.N=function(){No.$.N.call(this),o1(this)};No.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Zl(){this.g=!0}Zl.prototype.Ea=function(){this.g=!1};function zR(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var f=u.split("_");o=2<=f.length&&f[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+n+"\n"+o})}function QR(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+n+"\n"+i+" "+o})}function Xs(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+XR(t,n)+(r?" "+r:"")})}function YR(t,e){t.info(function(){return"TIMEOUT: "+e})}Zl.prototype.info=function(){};function XR(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return Ef(n)}catch(a){return e}}var xs={},T0=null;function ec(){return T0=T0||new Nt}xs.Ta="serverreachability";function a1(t){Gt.call(this,xs.Ta,t)}Lt(a1,Gt);function Lo(t){const e=ec();Vt(e,new a1(e))}xs.STAT_EVENT="statevent";function l1(t,e){Gt.call(this,xs.STAT_EVENT,t),this.stat=e}Lt(l1,Gt);function Zt(t){const e=ec();Vt(e,new l1(e,t))}xs.Ua="timingevent";function c1(t,e){Gt.call(this,xs.Ua,t),this.size=e}Lt(c1,Gt);function Jo(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Pe.setTimeout(function(){t()},e)}var tc={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},u1={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function If(){}If.prototype.h=null;function I0(t){return t.h||(t.h=t.i())}function h1(){}var Zo={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Cf(){Gt.call(this,"d")}Lt(Cf,Gt);function Af(){Gt.call(this,"c")}Lt(Af,Gt);var oh;function nc(){}Lt(nc,If);nc.prototype.g=function(){return new XMLHttpRequest};nc.prototype.i=function(){return{}};oh=new nc;function ea(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new No(this),this.P=JR,t=th?125:void 0,this.V=new Jl(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new f1}function f1(){this.i=null,this.g="",this.h=!1}var JR=45e3,d1={},ah={};te=ea.prototype;te.setTimeout=function(t){this.P=t};function lh(t,e,n){t.L=1,t.A=sc(_r(e)),t.u=n,t.S=!0,m1(t,null)}function m1(t,e){t.G=Date.now(),ta(t),t.B=_r(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),b1(n.i,"t",r),t.o=0,n=t.l.J,t.h=new f1,t.g=W1(t.l,n?e:null,!t.u),0<t.O&&(t.M=new KR(qt(t.Pa,t,t.g),t.O)),i1(t.U,t.g,"readystatechange",t.nb),e=t.I?Q_(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Lo(),zR(t.j,t.v,t.B,t.m,t.W,t.u)}te.nb=function(t){t=t.target;const e=this.M;e&&Qn(t)==3?e.l():this.Pa(t)};te.Pa=function(t){try{if(t==this.g)e:{const u=Qn(this.g);var e=this.g.Ia();const f=this.g.da();if(!(3>u)&&(u!=3||th||this.g&&(this.h.h||this.g.ja()||R0(this.g)))){this.J||u!=4||e==7||(e==8||0>=f?Lo(3):Lo(2)),rc(this);var n=this.g.da();this.ca=n;t:if(p1(this)){var r=R0(this.g);t="";var s=r.length,i=Qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ps(this),ao(this);var o="";break t}this.h.i=new Pe.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,QR(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!So(a)){var c=a;break t}}c=null}if(n=c)Xs(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ch(this,n);else{this.i=!1,this.s=3,Zt(12),ps(this),ao(this);break e}}this.S?(g1(this,u,o),th&&this.i&&u==3&&(i1(this.U,this.V,"tick",this.mb),this.V.start())):(Xs(this.j,this.m,o,null),ch(this,o)),u==4&&ps(this),this.i&&!this.J&&(u==4?$1(this.l,this):(this.i=!1,ta(this)))}else v3(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Zt(12)):(this.s=0,Zt(13)),ps(this),ao(this)}}}catch(u){}finally{}};function p1(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function g1(t,e,n){let r=!0,s;for(;!t.J&&t.o<n.length;)if(s=ZR(t,n),s==ah){e==4&&(t.s=4,Zt(14),r=!1),Xs(t.j,t.m,null,"[Incomplete Response]");break}else if(s==d1){t.s=4,Zt(15),Xs(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Xs(t.j,t.m,s,null),ch(t,s);p1(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Zt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Lf(e),e.M=!0,Zt(11))):(Xs(t.j,t.m,n,"[Invalid Chunked Response]"),ps(t),ao(t))}te.mb=function(){if(this.g){var t=Qn(this.g),e=this.g.ja();this.o<e.length&&(rc(this),g1(this,t,e),this.i&&t!=4&&ta(this))}};function ZR(t,e){var n=t.o,r=e.indexOf("\n",n);return r==-1?ah:(n=Number(e.substring(n,r)),isNaN(n)?d1:(r+=1,r+n>e.length?ah:(e=e.slice(r,r+n),t.o=r+n,e)))}te.cancel=function(){this.J=!0,ps(this)};function ta(t){t.Y=Date.now()+t.P,_1(t,t.P)}function _1(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Jo(qt(t.lb,t),e)}function rc(t){t.C&&(Pe.clearTimeout(t.C),t.C=null)}te.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(YR(this.j,this.B),this.L!=2&&(Lo(),Zt(17)),ps(this),this.s=2,ao(this)):_1(this,this.Y-t)};function ao(t){t.l.H==0||t.J||$1(t.l,t)}function ps(t){rc(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,bf(t.V),o1(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function ch(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||uh(n.i,t))){if(!t.K&&uh(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch(c){r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)dl(n),lc(n);else break e;Nf(n),Zt(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=Jo(qt(n.ib,n),6e3));if(1>=C1(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else gs(n,11)}else if((t.K||n.g==t)&&dl(n),!So(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const f=c[4];f!=null&&(n.Ga=f,n.l.info("SVER="+n.Ga));const h=c[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const p=t.g;if(p){const g=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var i=r.i;i.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Sf(i,i.h),i.h=null))}if(r.F){const E=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;E&&(r.Da=E,it(r.I,r.F,E))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=j1(r,r.J?r.pa:null,r.Y),o.K){A1(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(rc(a),ta(a)),r.g=o}else V1(r);0<n.j.length&&cc(n)}else c[0]!="stop"&&c[0]!="close"||gs(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?gs(n,7):kf(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Lo(4)}catch(c){}}function e3(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(zl(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function t3(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(zl(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function y1(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(zl(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=t3(t),r=e3(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var v1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function n3(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Is(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Is){this.h=t.h,hl(this,t.j),this.s=t.s,this.g=t.g,fl(this,t.m),this.l=t.l;var e=t.i,n=new Do;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),C0(this,n),this.o=t.o}else t&&(e=String(t).match(v1))?(this.h=!1,hl(this,e[1]||"",!0),this.s=zi(e[2]||""),this.g=zi(e[3]||"",!0),fl(this,e[4]),this.l=zi(e[5]||"",!0),C0(this,e[6]||"",!0),this.o=zi(e[7]||"")):(this.h=!1,this.i=new Do(null,this.h))}Is.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Qi(e,A0,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Qi(e,A0,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Qi(n,n.charAt(0)=="/"?i3:s3,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Qi(n,a3)),t.join("")};function _r(t){return new Is(t)}function hl(t,e,n){t.j=n?zi(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function fl(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function C0(t,e,n){e instanceof Do?(t.i=e,l3(t.i,t.h)):(n||(e=Qi(e,o3)),t.i=new Do(e,t.h))}function it(t,e,n){t.i.set(e,n)}function sc(t){return it(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function zi(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Qi(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,r3),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function r3(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var A0=/[#\/\?@]/g,s3=/[#\?:]/g,i3=/[#\?]/g,o3=/[#\?@]/g,a3=/#/g;function Do(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ns(t){t.g||(t.g=new Map,t.h=0,t.i&&n3(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}te=Do.prototype;te.add=function(t,e){ns(this),this.i=null,t=Ai(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function E1(t,e){ns(t),e=Ai(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function w1(t,e){return ns(t),e=Ai(t,e),t.g.has(e)}te.forEach=function(t,e){ns(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};te.ta=function(){ns(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};te.Z=function(t){ns(this);let e=[];if(typeof t=="string")w1(this,t)&&(e=e.concat(this.g.get(Ai(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};te.set=function(t,e){return ns(this),this.i=null,t=Ai(this,t),w1(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};te.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function b1(t,e,n){E1(t,e),0<n.length&&(t.i=null,t.g.set(Ai(t,e),df(n)),t.h+=n.length)}te.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function Ai(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function l3(t,e){e&&!t.j&&(ns(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(E1(this,r),b1(this,s,n))},t)),t.j=e}var c3=class{constructor(t,e){this.g=t,this.map=e}};function T1(t){this.l=t||u3,Pe.PerformanceNavigationTiming?(t=Pe.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Pe.g&&Pe.g.Ka&&Pe.g.Ka()&&Pe.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var u3=10;function I1(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function C1(t){return t.h?1:t.g?t.g.size:0}function uh(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Sf(t,e){t.g?t.g.add(e):t.h=e}function A1(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}T1.prototype.cancel=function(){if(this.i=S1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function S1(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return df(t.i)}var h3=class{stringify(t){return Pe.JSON.stringify(t,void 0)}parse(t){return Pe.JSON.parse(t,void 0)}};function f3(){this.g=new h3}function d3(t,e,n){const r=n||"";try{y1(t,function(s,i){let o=s;Yo(s)&&(o=Ef(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function m3(t,e){const n=new Zl;if(Pe.Image){const r=new Image;r.onload=Ia(Aa,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ia(Aa,n,r,"TestLoadImage: error",!1,e),r.onabort=Ia(Aa,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ia(Aa,n,r,"TestLoadImage: timeout",!1,e),Pe.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Aa(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch(i){}}function ic(t){this.l=t.ec||null,this.j=t.ob||!1}Lt(ic,If);ic.prototype.g=function(){return new oc(this.l,this.j)};ic.prototype.i=function(t){return function(){return t}}({});function oc(t,e){Nt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Rf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Lt(oc,Nt);var Rf=0;te=oc.prototype;te.open=function(t,e){if(this.readyState!=Rf)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,xo(this)};te.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Pe).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};te.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,na(this)),this.readyState=Rf};te.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,xo(this)),this.g&&(this.readyState=3,xo(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Pe.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;R1(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function R1(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}te.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?na(this):xo(this),this.readyState==3&&R1(this)}};te.Za=function(t){this.g&&(this.response=this.responseText=t,na(this))};te.Ya=function(t){this.g&&(this.response=t,na(this))};te.ka=function(){this.g&&na(this)};function na(t){t.readyState=4,t.l=null,t.j=null,t.A=null,xo(t)}te.setRequestHeader=function(t,e){this.v.append(t,e)};te.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};te.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")};function xo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(oc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var p3=Pe.JSON.parse;function pt(t){Nt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=P1,this.L=this.M=!1}Lt(pt,Nt);var P1="",g3=/^https?$/i,_3=["POST","PUT"];te=pt.prototype;te.Oa=function(t){this.M=t};te.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():oh.g(),this.C=this.u?I0(this.u):I0(oh),this.g.onreadystatechange=qt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){S0(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=Pe.FormData&&t instanceof Pe.FormData,!(0<=q_(_3,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{L1(this),0<this.B&&((this.L=y3(this.g))?(this.g.timeout=this.B,this.g.ontimeout=qt(this.ua,this)):this.A=Tf(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){S0(this,i)}};function y3(t){return mi&&typeof t.timeout=="number"&&t.ontimeout!==void 0}te.ua=function(){typeof ff<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Vt(this,"timeout"),this.abort(8))};function S0(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,k1(t),ac(t)}function k1(t){t.F||(t.F=!0,Vt(t,"complete"),Vt(t,"error"))}te.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Vt(this,"complete"),Vt(this,"abort"),ac(this))};te.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ac(this,!0)),pt.$.N.call(this)};te.La=function(){this.s||(this.G||this.v||this.l?N1(this):this.kb())};te.kb=function(){N1(this)};function N1(t){if(t.h&&typeof ff<"u"&&(!t.C[1]||Qn(t)!=4||t.da()!=2)){if(t.v&&Qn(t)==4)Tf(t.La,0,t);else if(Vt(t,"readystatechange"),Qn(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(v1)[1]||null;!s&&Pe.self&&Pe.self.location&&(s=Pe.self.location.protocol.slice(0,-1)),r=!g3.test(s?s.toLowerCase():"")}n=r}if(n)Vt(t,"complete"),Vt(t,"success");else{t.m=6;try{var i=2<Qn(t)?t.g.statusText:""}catch(a){i=""}t.j=i+" ["+t.da()+"]",k1(t)}}finally{ac(t)}}}}function ac(t,e){if(t.g){L1(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Vt(t,"ready");try{n.onreadystatechange=r}catch(s){}}}function L1(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Pe.clearTimeout(t.A),t.A=null)}te.isActive=function(){return!!this.g};function Qn(t){return t.g?t.g.readyState:0}te.da=function(){try{return 2<Qn(this)?this.g.status:-1}catch(t){return-1}};te.ja=function(){try{return this.g?this.g.responseText:""}catch(t){return""}};te.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),p3(e)}};function R0(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case P1:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function v3(t){const e={};t=(t.g&&2<=Qn(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(So(t[r]))continue;var n=HR(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}VR(e,function(r){return r.join(", ")})}te.Ia=function(){return this.m};te.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function D1(t){let e="";return pf(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function Pf(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=D1(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):it(t,e,n))}function $i(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function x1(t){this.Ga=0,this.j=[],this.l=new Zl,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=$i("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=$i("baseRetryDelayMs",5e3,t),this.hb=$i("retryDelaySeedMs",1e4,t),this.eb=$i("forwardChannelMaxRetries",2,t),this.xa=$i("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new T1(t&&t.concurrentRequestLimit),this.Ja=new f3,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}te=x1.prototype;te.ra=8;te.H=1;function kf(t){if(M1(t),t.H==3){var e=t.W++,n=_r(t.I);if(it(n,"SID",t.K),it(n,"RID",e),it(n,"TYPE","terminate"),ra(t,n),e=new ea(t,t.l,e),e.L=2,e.A=sc(_r(n)),n=!1,Pe.navigator&&Pe.navigator.sendBeacon)try{n=Pe.navigator.sendBeacon(e.A.toString(),"")}catch(r){}!n&&Pe.Image&&(new Image().src=e.A,n=!0),n||(e.g=W1(e.l,null),e.g.ha(e.A)),e.G=Date.now(),ta(e)}B1(t)}function lc(t){t.g&&(Lf(t),t.g.cancel(),t.g=null)}function M1(t){lc(t),t.u&&(Pe.clearTimeout(t.u),t.u=null),dl(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Pe.clearTimeout(t.m),t.m=null)}function cc(t){if(!I1(t.i)&&!t.m){t.m=!0;var e=t.Na;Po||r1(),ko||(Po(),ko=!0),wf.add(e,t),t.C=0}}function E3(t,e){return C1(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Jo(qt(t.Na,t,e),U1(t,t.C)),t.C++,!0)}te.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new ea(this,this.l,t);let i=this.s;if(this.U&&(i?(i=Q_(i),Y_(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=O1(this,s,e),n=_r(this.I),it(n,"RID",t),it(n,"CVER",22),this.F&&it(n,"X-HTTP-Session-Id",this.F),ra(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(D1(i)))+"&"+e:this.o&&Pf(n,this.o,i)),Sf(this.i,s),this.bb&&it(n,"TYPE","init"),this.P?(it(n,"$req",e),it(n,"SID","null"),s.aa=!0,lh(s,n,null)):lh(s,n,e),this.H=2}}else this.H==3&&(t?P0(this,t):this.j.length==0||I1(this.i)||P0(this))};function P0(t,e){var n;e?n=e.m:n=t.W++;const r=_r(t.I);it(r,"SID",t.K),it(r,"RID",n),it(r,"AID",t.V),ra(t,r),t.o&&t.s&&Pf(r,t.o,t.s),n=new ea(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=O1(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Sf(t.i,n),lh(n,r,e)}function ra(t,e){t.na&&pf(t.na,function(n,r){it(e,r,n)}),t.h&&y1({},function(n,r){it(e,r,n)})}function O1(t,e,n){n=Math.min(t.j.length,n);var r=t.h?qt(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const u=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{d3(u,o,"req"+c+"_")}catch(f){r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function V1(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Po||r1(),ko||(Po(),ko=!0),wf.add(e,t),t.A=0}}function Nf(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Jo(qt(t.Ma,t),U1(t,t.A)),t.A++,!0)}te.Ma=function(){if(this.u=null,F1(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Jo(qt(this.jb,this),t)}};te.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Zt(10),lc(this),F1(this))};function Lf(t){t.B!=null&&(Pe.clearTimeout(t.B),t.B=null)}function F1(t){t.g=new ea(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=_r(t.wa);it(e,"RID","rpc"),it(e,"SID",t.K),it(e,"AID",t.V),it(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&it(e,"TO",t.qa),it(e,"TYPE","xmlhttp"),ra(t,e),t.o&&t.s&&Pf(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=sc(_r(e)),n.u=null,n.S=!0,m1(n,t)}te.ib=function(){this.v!=null&&(this.v=null,lc(this),Nf(this),Zt(19))};function dl(t){t.v!=null&&(Pe.clearTimeout(t.v),t.v=null)}function $1(t,e){var n=null;if(t.g==e){dl(t),Lf(t),t.g=null;var r=2}else if(uh(t.i,e))n=e.F,A1(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var s=t.C;r=ec(),Vt(r,new c1(r,n)),cc(t)}else V1(t);else if(s=e.s,s==3||s==0&&0<e.ca||!(r==1&&E3(t,e)||r==2&&Nf(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:gs(t,5);break;case 4:gs(t,10);break;case 3:gs(t,6);break;default:gs(t,2)}}}function U1(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function gs(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=qt(t.pb,t);n||(n=new Is("//www.google.com/images/cleardot.gif"),Pe.location&&Pe.location.protocol=="http"||hl(n,"https"),sc(n)),m3(n.toString(),r)}else Zt(2);t.H=0,t.h&&t.h.za(e),B1(t),M1(t)}te.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Zt(2)):(this.l.info("Failed to ping google.com"),Zt(1))};function B1(t){if(t.H=0,t.ma=[],t.h){const e=S1(t.i);(e.length!=0||t.j.length!=0)&&(v0(t.ma,e),v0(t.ma,t.j),t.i.i.length=0,df(t.j),t.j.length=0),t.h.ya()}}function j1(t,e,n){var r=n instanceof Is?_r(n):new Is(n);if(r.g!="")e&&(r.g=e+"."+r.g),fl(r,r.m);else{var s=Pe.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new Is(null);r&&hl(i,r),e&&(i.g=e),s&&fl(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&it(r,n,e),it(r,"VER",t.ra),ra(t,r),r}function W1(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new pt(new ic({ob:n})):new pt(t.va),e.Oa(t.J),e}te.isActive=function(){return!!this.h&&this.h.isActive(this)};function H1(){}te=H1.prototype;te.Ba=function(){};te.Aa=function(){};te.za=function(){};te.ya=function(){};te.isActive=function(){return!0};te.Va=function(){};function ml(){if(mi&&!(10<=Number(DR)))throw Error("Environmental error: no available transport.")}ml.prototype.g=function(t,e){return new vn(t,e)};function vn(t,e){Nt.call(this),this.g=new x1(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!So(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!So(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Si(this)}Lt(vn,Nt);vn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Zt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=j1(t,null,t.Y),cc(t)};vn.prototype.close=function(){kf(this.g)};vn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Ef(t),t=n);e.j.push(new c3(e.fb++,t)),e.H==3&&cc(e)};vn.prototype.N=function(){this.g.h=null,delete this.j,kf(this.g),delete this.g,vn.$.N.call(this)};function q1(t){Cf.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Lt(q1,Cf);function G1(){Af.call(this),this.status=1}Lt(G1,Af);function Si(t){this.g=t}Lt(Si,H1);Si.prototype.Ba=function(){Vt(this.g,"a")};Si.prototype.Aa=function(t){Vt(this.g,new q1(t))};Si.prototype.za=function(t){Vt(this.g,new G1)};Si.prototype.ya=function(){Vt(this.g,"b")};function w3(){this.blockSize=-1}function Fn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Lt(Fn,w3);Fn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function hu(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}Fn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)hu(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){hu(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){hu(this,r),s=0;break}}this.h=s,this.i+=e};Fn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Xe(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var b3={};function Df(t){return-128<=t&&128>t?kR(t,function(e){return new Xe([e|0],0>e?-1:0)}):new Xe([t|0],0>t?-1:0)}function Yn(t){if(isNaN(t)||!isFinite(t))return si;if(0>t)return xt(Yn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=hh;return new Xe(e,0)}function K1(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return xt(K1(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Yn(Math.pow(e,8)),r=si,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=Yn(Math.pow(e,i)),r=r.R(i).add(Yn(o))):(r=r.R(n),r=r.add(Yn(o)))}return r}var hh=4294967296,si=Df(0),fh=Df(1),k0=Df(16777216);te=Xe.prototype;te.ea=function(){if(An(this))return-xt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:hh+r)*e,e*=hh}return t};te.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(hr(this))return"0";if(An(this))return"-"+xt(this).toString(t);for(var e=Yn(Math.pow(t,6)),n=this,r="";;){var s=gl(n,e).g;n=pl(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,hr(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};te.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function hr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function An(t){return t.h==-1}te.X=function(t){return t=pl(this,t),An(t)?-1:hr(t)?0:1};function xt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Xe(n,~t.h).add(fh)}te.abs=function(){return An(this)?xt(this):this};te.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new Xe(n,n[n.length-1]&-2147483648?-1:0)};function pl(t,e){return t.add(xt(e))}te.R=function(t){if(hr(this)||hr(t))return si;if(An(this))return An(t)?xt(this).R(xt(t)):xt(xt(this).R(t));if(An(t))return xt(this.R(xt(t)));if(0>this.X(k0)&&0>t.X(k0))return Yn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*r+2*s]+=o*l,Sa(n,2*r+2*s),n[2*r+2*s+1]+=i*l,Sa(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,Sa(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,Sa(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Xe(n,0)};function Sa(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Ui(t,e){this.g=t,this.h=e}function gl(t,e){if(hr(e))throw Error("division by zero");if(hr(t))return new Ui(si,si);if(An(t))return e=gl(xt(t),e),new Ui(xt(e.g),xt(e.h));if(An(e))return e=gl(t,xt(e)),new Ui(xt(e.g),e.h);if(30<t.g.length){if(An(t)||An(e))throw Error("slowDivide_ only works with positive integers.");for(var n=fh,r=e;0>=r.X(t);)n=N0(n),r=N0(r);var s=js(n,1),i=js(r,1);for(r=js(r,2),n=js(n,2);!hr(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=js(r,1),n=js(n,1)}return e=pl(t,s.R(e)),new Ui(s,e)}for(s=si;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=Yn(n),o=i.R(e);An(o)||0<o.X(t);)n-=r,i=Yn(n),o=i.R(e);hr(i)&&(i=fh),s=s.add(i),t=pl(t,o)}return new Ui(s,t)}te.gb=function(t){return gl(this,t).h};te.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Xe(n,this.h&t.h)};te.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Xe(n,this.h|t.h)};te.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Xe(n,this.h^t.h)};function N0(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Xe(n,t.h)}function js(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new Xe(s,t.h)}ml.prototype.createWebChannel=ml.prototype.g;vn.prototype.send=vn.prototype.u;vn.prototype.open=vn.prototype.m;vn.prototype.close=vn.prototype.close;tc.NO_ERROR=0;tc.TIMEOUT=8;tc.HTTP_ERROR=6;u1.COMPLETE="complete";h1.EventType=Zo;Zo.OPEN="a";Zo.CLOSE="b";Zo.ERROR="c";Zo.MESSAGE="d";Nt.prototype.listen=Nt.prototype.O;pt.prototype.listenOnce=pt.prototype.P;pt.prototype.getLastError=pt.prototype.Sa;pt.prototype.getLastErrorCode=pt.prototype.Ia;pt.prototype.getStatus=pt.prototype.da;pt.prototype.getResponseJson=pt.prototype.Wa;pt.prototype.getResponseText=pt.prototype.ja;pt.prototype.send=pt.prototype.ha;pt.prototype.setWithCredentials=pt.prototype.Oa;Fn.prototype.digest=Fn.prototype.l;Fn.prototype.reset=Fn.prototype.reset;Fn.prototype.update=Fn.prototype.j;Xe.prototype.add=Xe.prototype.add;Xe.prototype.multiply=Xe.prototype.R;Xe.prototype.modulo=Xe.prototype.gb;Xe.prototype.compare=Xe.prototype.X;Xe.prototype.toNumber=Xe.prototype.ea;Xe.prototype.toString=Xe.prototype.toString;Xe.prototype.getBits=Xe.prototype.D;Xe.fromNumber=Yn;Xe.fromString=K1;var T3=function(){return new ml},I3=function(){return ec()},fu=tc,C3=u1,A3=xs,L0={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ra=h1,S3=pt,R3=Fn,ii=Xe;const D0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ri="10.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=new U_("@firebase/firestore");function Bi(){return Ss.logLevel}function ee(t,...e){if(Ss.logLevel<=He.DEBUG){const n=e.map(xf);Ss.debug("Firestore (".concat(Ri,"): ").concat(t),...n)}}function tr(t,...e){if(Ss.logLevel<=He.ERROR){const n=e.map(xf);Ss.error("Firestore (".concat(Ri,"): ").concat(t),...n)}}function Mo(t,...e){if(Ss.logLevel<=He.WARN){const n=e.map(xf);Ss.warn("Firestore (".concat(Ri,"): ").concat(t),...n)}}function xf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch(e){return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(t="Unexpected state"){const e="FIRESTORE (".concat(Ri,") INTERNAL ASSERTION FAILED: ")+t;throw tr(e),new Error(e)}function rt(t,e){t||Ie()}function De(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Ci{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class k3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(an.UNAUTHENTICATED))}shutdown(){}}class N3{constructor(e){this.t=e,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new mr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new mr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new mr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rt(typeof r.accessToken=="string"),new P3(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return rt(e===null||typeof e=="string"),new an(e)}}class L3{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=an.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class D3{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new L3(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(an.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class x3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class M3{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&ee("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(i.error.message));const o=i.token!==this.R;return this.R=i.token,ee("FirebaseAppCheckTokenProvider","Received ".concat(o?"new":"existing"," token.")),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(rt(typeof n.token=="string"),this.R=n.token,new x3(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=O3(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function qe(t,e){return t<e?-1:t>e?1:0}function pi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new he(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ct.fromMillis(Date.now())}static fromDate(e){return Ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ct(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new Ct(0,0))}static max(){return new Ne(new Ct(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ie(),r===void 0?r=e.length-n:r>e.length-n&&Ie(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Oo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Oo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ct extends Oo{construct(e,n,r){return new ct(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(j.INVALID_ARGUMENT,"Invalid segment (".concat(r,"). Paths must not contain // in them."));n.push(...r.split("/").filter(s=>s.length>0))}return new ct(n)}static emptyPath(){return new ct([])}}const V3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mt extends Oo{construct(e,n,r){return new Mt(e,n,r)}static isValidIdentifier(e){return V3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Mt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new he(j.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new he(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new he(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new he(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mt(n)}static emptyPath(){return new Mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(ct.fromString(e))}static fromName(e){return new pe(ct.fromString(e).popFirst(5))}static empty(){return new pe(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ct.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new ct(e.slice()))}}function F3(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ne.fromTimestamp(r===1e9?new Ct(n+1,0):new Ct(n,r));return new Yr(s,pe.empty(),e)}function $3(t){return new Yr(t.readTime,t.key,-1)}class Yr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Yr(Ne.min(),pe.empty(),-1)}static max(){return new Yr(Ne.max(),pe.empty(),-1)}}function U3(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=pe.comparator(t.documentKey,e.documentKey),n!==0?n:qe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class j3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sa(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==B3)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new mr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new lo(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=Of(r.target.error);this.V.reject(new lo(e,s))}}static open(e,n,r,s){try{return new Mf(n,e.transaction(s,r))}catch(i){throw new lo(n,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ee("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new H3(n)}}class _s{constructor(e,n,r){this.name=e,this.version=n,this.p=r,_s.S(ll())===12.2&&tr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ee("SimpleDb","Removing database:",e),ms(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!F_())return!1;if(_s.C())return!0;const e=ll(),n=_s.S(e),r=0<n&&n<10,s=_s.v(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(ee("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new lo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new he(j.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new he(j.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new lo(e,o))},s.onupgradeneeded=i=>{ee("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.N(o,s.transaction,i.oldVersion,this.version).next(()=>{ee("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=Mf.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),U.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(ee("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class W3{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return ms(this.k.delete())}}class lo extends he{constructor(e,n){super(j.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(n)),this.name="IndexedDbTransactionError"}}function ia(t){return t.name==="IndexedDbTransactionError"}class H3{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(ee("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(ee("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ms(r)}add(e){return ee("SimpleDb","ADD",this.store.name,e,e),ms(this.store.add(e))}get(e){return ms(this.store.get(e)).next(n=>(n===void 0&&(n=null),ee("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return ee("SimpleDb","DELETE",this.store.name,e),ms(this.store.delete(e))}count(){return ee("SimpleDb","COUNT",this.store.name),ms(this.store.count())}W(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new U((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.G(i,(a,l)=>{o.push(l)}).next(()=>o)}}j(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new U((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}H(e,n){ee("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const s=this.cursor(r);return this.G(s,(i,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.G(s,n)}Z(e){const n=this.cursor({});return new U((r,s)=>{n.onerror=i=>{const o=Of(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new U((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new W3(a),c=n(a.primaryKey,a.value,l);if(c instanceof U){const u=c.catch(f=>(l.done(),U.reject(f)));r.push(u)}l.isDone?s():l.$===null?a.continue():a.continue(l.$)}}).next(()=>U.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ms(t){return new U((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=Of(r.target.error);n(s)}})}let x0=!1;function Of(t){const e=_s.S(ll());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new he("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return x0||(x0=!0,setTimeout(()=>{throw r},0)),r}}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}Vf._e=-1;function uc(t){return t==null}function _l(t){return t===0&&1/t==-1/0}function q3(t){return typeof t=="number"&&Number.isInteger(t)&&!_l(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ms(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Q1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n){this.comparator=e,this.root=n||Dt.EMPTY}insert(e,n){return new ht(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Dt.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push("".concat(n,":").concat(r)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pa(this.root,e,this.comparator,!0)}}class Pa{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r!=null?r:Dt.RED,this.left=s!=null?s:Dt.EMPTY,this.right=i!=null?i:Dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Dt(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,s!=null?s:this.left,i!=null?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Dt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ie();const e=this.left.check();if(e!==this.right.check())throw Ie();return e+(this.isRed()?0:1)}}Dt.EMPTY=null,Dt.RED=!0,Dt.BLACK=!1;Dt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie()}get value(){throw Ie()}get color(){throw Ie()}get left(){throw Ie()}get right(){throw Ie()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Dt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new O0(this.data.getIterator())}getIteratorFrom(e){return new O0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ft(this.comparator);return n.data=e,n}}class O0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.fields=e,e.sort(Mt.comparator)}static empty(){return new yn([])}unionWith(e){let n=new Ft(Mt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new yn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return pi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Y1("Invalid base64 string: "+i):i}}(e);return new Kt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Kt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kt.EMPTY_BYTE_STRING=new Kt("");const G3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xr(t){if(rt(!!t),typeof t=="string"){let e=0;const n=G3.exec(t);if(rt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yt(t.seconds),nanos:yt(t.nanos)}}function yt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Rs(t){return typeof t=="string"?Kt.fromBase64String(t):Kt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function $f(t){const e=t.mapValue.fields.__previous_value__;return Ff(e)?$f(e):e}function Vo(t){const e=Xr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Fo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Fo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Fo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ps(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ff(t)?4:z3(t)?9007199254740991:10:Ie()}function nr(t,e){if(t===e)return!0;const n=Ps(t);if(n!==Ps(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Vo(t).isEqual(Vo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Xr(s.timestampValue),a=Xr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Rs(s.bytesValue).isEqual(Rs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return yt(s.geoPointValue.latitude)===yt(i.geoPointValue.latitude)&&yt(s.geoPointValue.longitude)===yt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return yt(s.integerValue)===yt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=yt(s.doubleValue),a=yt(i.doubleValue);return o===a?_l(o)===_l(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return pi(t.arrayValue.values||[],e.arrayValue.values||[],nr);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(M0(o)!==M0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!nr(o[l],a[l])))return!1;return!0}(t,e);default:return Ie()}}function $o(t,e){return(t.values||[]).find(n=>nr(n,e))!==void 0}function gi(t,e){if(t===e)return 0;const n=Ps(t),r=Ps(e);if(n!==r)return qe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return qe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=yt(i.integerValue||i.doubleValue),l=yt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return V0(t.timestampValue,e.timestampValue);case 4:return V0(Vo(t),Vo(e));case 5:return qe(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Rs(i),l=Rs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=qe(a[c],l[c]);if(u!==0)return u}return qe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=qe(yt(i.latitude),yt(o.latitude));return a!==0?a:qe(yt(i.longitude),yt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=gi(a[c],l[c]);if(u)return u}return qe(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===ka.mapValue&&o===ka.mapValue)return 0;if(i===ka.mapValue)return 1;if(o===ka.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const h=qe(l[f],u[f]);if(h!==0)return h;const p=gi(a[l[f]],c[u[f]]);if(p!==0)return p}return qe(l.length,u.length)}(t.mapValue,e.mapValue);default:throw Ie()}}function V0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return qe(t,e);const n=Xr(t),r=Xr(e),s=qe(n.seconds,r.seconds);return s!==0?s:qe(n.nanos,r.nanos)}function _i(t){return dh(t)}function dh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Xr(n);return"time(".concat(r.seconds,",").concat(r.nanos,")")}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Rs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return pe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return"geo(".concat(n.latitude,",").concat(n.longitude,")")}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=dh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+="".concat(o,":").concat(dh(n.fields[o]));return s+"}"}(t.mapValue):Ie()}function mh(t){return!!t&&"integerValue"in t}function Uf(t){return!!t&&"arrayValue"in t}function F0(t){return!!t&&"nullValue"in t}function $0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ja(t){return!!t&&"mapValue"in t}function co(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ms(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=co(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=co(t.arrayValue.values[n]);return e}return Object.assign({},t)}function z3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ja(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=co(n)}setAll(e){let n=Mt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=co(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ja(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return nr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ja(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ms(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new ln(co(this.value))}}function X1(t){const e=[];return Ms(t.fields,(n,r)=>{const s=new Mt([n]);if(ja(r)){const i=X1(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Wt(e,0,Ne.min(),Ne.min(),Ne.min(),ln.empty(),0)}static newFoundDocument(e,n,r,s){return new Wt(e,1,n,Ne.min(),r,s,0)}static newNoDocument(e,n){return new Wt(e,2,n,Ne.min(),Ne.min(),ln.empty(),0)}static newUnknownDocument(e,n){return new Wt(e,3,n,Ne.min(),Ne.min(),ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,n){this.position=e,this.inclusive=n}}function U0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=pe.comparator(pe.fromName(o.referenceValue),n.key):r=gi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function B0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!nr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,n="asc"){this.field=e,this.dir=n}}function Q3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{}class Tt extends J1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new X3(e,n,r):n==="array-contains"?new eP(e,r):n==="in"?new tP(e,r):n==="not-in"?new nP(e,r):n==="array-contains-any"?new rP(e,r):new Tt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new J3(e,r):new Z3(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(gi(n,this.value)):n!==null&&Ps(this.value)===Ps(n)&&this.matchesComparison(gi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rr extends J1{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new rr(e,n)}matches(e){return Z1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Z1(t){return t.op==="and"}function e2(t){return Y3(t)&&Z1(t)}function Y3(t){for(const e of t.filters)if(e instanceof rr)return!1;return!0}function ph(t){if(t instanceof Tt)return t.field.canonicalString()+t.op.toString()+_i(t.value);if(e2(t))return t.filters.map(e=>ph(e)).join(",");{const e=t.filters.map(n=>ph(n)).join(",");return"".concat(t.op,"(").concat(e,")")}}function t2(t,e){return t instanceof Tt?function(r,s){return s instanceof Tt&&r.op===s.op&&r.field.isEqual(s.field)&&nr(r.value,s.value)}(t,e):t instanceof rr?function(r,s){return s instanceof rr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&t2(o,s.filters[a]),!0):!1}(t,e):void Ie()}function n2(t){return t instanceof Tt?function(n){return"".concat(n.field.canonicalString()," ").concat(n.op," ").concat(_i(n.value))}(t):t instanceof rr?function(n){return n.op.toString()+" {"+n.getFilters().map(n2).join(" ,")+"}"}(t):"Filter"}class X3 extends Tt{constructor(e,n,r){super(e,n,r),this.key=pe.fromName(r.referenceValue)}matches(e){const n=pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class J3 extends Tt{constructor(e,n){super(e,"in",n),this.keys=r2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Z3 extends Tt{constructor(e,n){super(e,"not-in",n),this.keys=r2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function r2(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>pe.fromName(r.referenceValue))}class eP extends Tt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Uf(n)&&$o(n.arrayValue,this.value)}}class tP extends Tt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&$o(this.value.arrayValue,n)}}class nP extends Tt{constructor(e,n){super(e,"not-in",n)}matches(e){if($o(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!$o(this.value.arrayValue,n)}}class rP extends Tt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Uf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>$o(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ce=null}}function j0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new sP(t,e,n,r,s,i,o)}function Bf(t){const e=De(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ph(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),uc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>_i(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>_i(r)).join(",")),e.ce=n}return e.ce}function jf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Q3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!t2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!B0(t.startAt,e.startAt)&&B0(t.endAt,e.endAt)}function gh(t){return pe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function iP(t,e,n,r,s,i,o,a){return new hc(t,e,n,r,s,i,o,a)}function fc(t){return new hc(t)}function W0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function oP(t){return t.collectionGroup!==null}function uo(t){const e=De(t);if(e.le===null){e.le=[];const n=new Set;for(const i of e.explicitOrderBy)e.le.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ft(Mt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.le.push(new vl(i,r))}),n.has(Mt.keyField().canonicalString())||e.le.push(new vl(Mt.keyField(),r))}return e.le}function Xn(t){const e=De(t);return e.he||(e.he=aP(e,uo(t))),e.he}function aP(t,e){if(t.limitType==="F")return j0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new vl(s.field,i)});const n=t.endAt?new yl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new yl(t.startAt.position,t.startAt.inclusive):null;return j0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function _h(t,e,n){return new hc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function dc(t,e){return jf(Xn(t),Xn(e))&&t.limitType===e.limitType}function s2(t){return"".concat(Bf(Xn(t)),"|lt:").concat(t.limitType)}function Gs(t){return"Query(target=".concat(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=", filters: [".concat(n.filters.map(s=>n2(s)).join(", "),"]")),uc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=", orderBy: [".concat(n.orderBy.map(s=>function(o){return"".concat(o.field.canonicalString()," (").concat(o.dir,")")}(s)).join(", "),"]")),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>_i(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>_i(s)).join(",")),"Target(".concat(r,")")}(Xn(t)),"; limitType=").concat(t.limitType,")")}function mc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):pe.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of uo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=U0(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,uo(r),s)||r.endAt&&!function(o,a,l){const c=U0(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,uo(r),s))}(t,e)}function lP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function i2(t){return(e,n)=>{let r=!1;for(const s of uo(t)){const i=cP(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function cP(t,e,n){const r=t.field.isKeyField()?pe.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?gi(l,c):Ie()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ms(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Q1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP=new ht(pe.comparator);function yr(){return uP}const o2=new ht(pe.comparator);function Yi(...t){let e=o2;for(const n of t)e=e.insert(n.key,n);return e}function a2(t){let e=o2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ys(){return ho()}function l2(){return ho()}function ho(){return new Pi(t=>t.toString(),(t,e)=>t.isEqual(e))}const hP=new ht(pe.comparator),fP=new Ft(pe.comparator);function Ue(...t){let e=fP;for(const n of t)e=e.add(n);return e}const dP=new Ft(qe);function mP(){return dP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_l(e)?"-0":e}}function u2(t){return{integerValue:""+t}}function pP(t,e){return q3(e)?u2(e):c2(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(){this._=void 0}}function gP(t,e,n){return t instanceof El?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ff(i)&&(i=$f(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Uo?f2(t,e):t instanceof Bo?d2(t,e):function(s,i){const o=h2(s,i),a=H0(o)+H0(s.Ie);return mh(o)&&mh(s.Ie)?u2(a):c2(s.serializer,a)}(t,e)}function _P(t,e,n){return t instanceof Uo?f2(t,e):t instanceof Bo?d2(t,e):n}function h2(t,e){return t instanceof wl?function(r){return mh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class El extends pc{}class Uo extends pc{constructor(e){super(),this.elements=e}}function f2(t,e){const n=m2(e);for(const r of t.elements)n.some(s=>nr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Bo extends pc{constructor(e){super(),this.elements=e}}function d2(t,e){let n=m2(e);for(const r of t.elements)n=n.filter(s=>!nr(s,r));return{arrayValue:{values:n}}}class wl extends pc{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function H0(t){return yt(t.integerValue||t.doubleValue)}function m2(t){return Uf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function yP(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Uo&&s instanceof Uo||r instanceof Bo&&s instanceof Bo?pi(r.elements,s.elements,nr):r instanceof wl&&s instanceof wl?nr(r.Ie,s.Ie):r instanceof El&&s instanceof El}(t.transform,e.transform)}class vP{constructor(e,n){this.version=e,this.transformResults=n}}class Jn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class gc{}function p2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new _2(t.key,Jn.none()):new oa(t.key,t.data,Jn.none());{const n=t.data,r=ln.empty();let s=new Ft(Mt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new rs(t.key,r,new yn(s.toArray()),Jn.none())}}function EP(t,e,n){t instanceof oa?function(s,i,o){const a=s.value.clone(),l=G0(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof rs?function(s,i,o){if(!Wa(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=G0(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(g2(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function fo(t,e,n,r){return t instanceof oa?function(i,o,a,l){if(!Wa(i.precondition,o))return a;const c=i.value.clone(),u=K0(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof rs?function(i,o,a,l){if(!Wa(i.precondition,o))return a;const c=K0(i.fieldTransforms,l,o),u=o.data;return u.setAll(g2(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return Wa(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function wP(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=h2(r.transform,s||null);i!=null&&(n===null&&(n=ln.empty()),n.set(r.field,i))}return n||null}function q0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&pi(r,s,(i,o)=>yP(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class oa extends gc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class rs extends gc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function g2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function G0(t,e,n){const r=new Map;rt(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,_P(o,a,n[s]))}return r}function K0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,gP(i,o,e))}return r}class _2 extends gc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bP extends gc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&EP(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=fo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=fo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=l2();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=p2(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ue())}isEqual(e){return this.batchId===e.batchId&&pi(this.mutations,e.mutations,(n,r)=>q0(n,r))&&pi(this.baseMutations,e.baseMutations,(n,r)=>q0(n,r))}}class Wf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){rt(e.mutations.length===r.length);let s=function(){return hP}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Wf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t,je;function AP(t){switch(t){default:return Ie();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function y2(t){if(t===void 0)return tr("GRPC error has no .code"),j.UNKNOWN;switch(t){case _t.OK:return j.OK;case _t.CANCELLED:return j.CANCELLED;case _t.UNKNOWN:return j.UNKNOWN;case _t.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case _t.INTERNAL:return j.INTERNAL;case _t.UNAVAILABLE:return j.UNAVAILABLE;case _t.UNAUTHENTICATED:return j.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case _t.NOT_FOUND:return j.NOT_FOUND;case _t.ALREADY_EXISTS:return j.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return j.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case _t.ABORTED:return j.ABORTED;case _t.OUT_OF_RANGE:return j.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return j.UNIMPLEMENTED;case _t.DATA_LOSS:return j.DATA_LOSS;default:return Ie()}}(je=_t||(_t={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP=new ii([4294967295,4294967295],0);function z0(t){const e=SP().encode(t),n=new R3;return n.update(e),new Uint8Array(n.digest())}function Q0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ii([n,r],0),new ii([s,i],0)]}class Hf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Xi("Invalid padding: ".concat(n));if(r<0)throw new Xi("Invalid hash count: ".concat(r));if(e.length>0&&this.hashCount===0)throw new Xi("Invalid hash count: ".concat(r));if(e.length===0&&n!==0)throw new Xi("Invalid padding when bitmap length is 0: ".concat(n));this.Te=8*e.length-n,this.Ee=ii.fromNumber(this.Te)}de(e,n,r){let s=e.add(n.multiply(ii.fromNumber(r)));return s.compare(RP)===1&&(s=new ii([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=z0(e),[r,s]=Q0(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Hf(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=z0(e),[r,s]=Q0(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);this.Re(o)}}Re(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Xi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,aa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new _c(Ne.min(),s,new ht(qe),yr(),Ue())}}class aa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new aa(r,n,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,n,r,s){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=s}}class v2{constructor(e,n){this.targetId=e,this.fe=n}}class E2{constructor(e,n,r=Kt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Y0{constructor(){this.ge=0,this.pe=J0(),this.ye=Kt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Ue(),n=Ue(),r=Ue();return this.pe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ie()}}),new aa(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=J0()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,rt(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class PP{constructor(e){this.Be=e,this.ke=new Map,this.qe=yr(),this.Qe=X0(),this.Ke=new ht(qe)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:Ie()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,s)=>{this.je(s)&&n(s)})}Je(e){const n=e.targetId,r=e.fe.count,s=this.Ye(n);if(s){const i=s.target;if(gh(i))if(r===0){const o=new pe(i.path);this.We(n,o,Wt.newNoDocument(o,Ne.min()))}else rt(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Rs(r).toUint8Array()}catch(l){if(l instanceof Y1)return Mo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Hf(o,s,i)}catch(l){return Mo(l instanceof Xi?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Be.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Be.nt(),a="projects/".concat(o.projectId,"/databases/").concat(o.database,"/documents/").concat(i.path.canonicalString());e.mightContain(a)||(this.We(n,i,null),s++)}),s}it(e){const n=new Map;this.ke.forEach((i,o)=>{const a=this.Ye(o);if(a){if(i.current&&gh(a.target)){const l=new pe(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,Wt.newNoDocument(l,e))}i.De&&(n.set(o,i.ve()),i.Fe())}});let r=Ue();this.Qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.qe.forEach((i,o)=>o.setReadTime(e));const s=new _c(e,n,this.Ke,this.qe,r);return this.qe=yr(),this.Qe=X0(),this.Ke=new ht(qe),s}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const s=this.ze(e);this.st(e,n)?s.Me(n,1):s.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Y0,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Ft(qe),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new Y0),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function X0(){return new ht(pe.comparator)}function J0(){return new ht(pe.comparator)}const kP={asc:"ASCENDING",desc:"DESCENDING"},NP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LP={and:"AND",or:"OR"};class DP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function yh(t,e){return t.useProto3Json||uc(e)?e:{value:e}}function bl(t,e){return t.useProto3Json?"".concat(new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+e.nanoseconds).slice(-9),"Z"):{seconds:""+e.seconds,nanos:e.nanoseconds}}function w2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function xP(t,e){return bl(t,e.toTimestamp())}function Zn(t){return rt(!!t),Ne.fromTimestamp(function(n){const r=Xr(n);return new Ct(r.seconds,r.nanos)}(t))}function qf(t,e){return vh(t,e).canonicalString()}function vh(t,e){const n=function(s){return new ct(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function b2(t){const e=ct.fromString(t);return rt(S2(e)),e}function Eh(t,e){return qf(t.databaseId,e.path)}function du(t,e){const n=b2(e);if(n.get(1)!==t.databaseId.projectId)throw new he(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new he(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new pe(I2(n))}function T2(t,e){return qf(t.databaseId,e)}function MP(t){const e=b2(t);return e.length===4?ct.emptyPath():I2(e)}function wh(t){return new ct(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function I2(t){return rt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Z0(t,e,n){return{name:Eh(t,e),fields:n.value.mapValue.fields}}function OP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(rt(u===void 0||typeof u=="string"),Kt.fromBase64String(u||"")):(rt(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Kt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?j.UNKNOWN:y2(c.code);return new he(u,c.message||"")}(o);n=new E2(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=du(t,r.document.name),i=Zn(r.document.updateTime),o=r.document.createTime?Zn(r.document.createTime):Ne.min(),a=new ln({mapValue:{fields:r.document.fields}}),l=Wt.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Ha(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=du(t,r.document),i=r.readTime?Zn(r.readTime):Ne.min(),o=Wt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Ha([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=du(t,r.document),i=r.removedTargetIds||[];n=new Ha([],i,s,null)}else{if(!("filter"in e))return Ie();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new CP(s,i),a=r.targetId;n=new v2(a,o)}}return n}function VP(t,e){let n;if(e instanceof oa)n={update:Z0(t,e.key,e.value)};else if(e instanceof _2)n={delete:Eh(t,e.key)};else if(e instanceof rs)n={update:Z0(t,e.key,e.data),updateMask:GP(e.fieldMask)};else{if(!(e instanceof bP))return Ie();n={verify:Eh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof El)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Uo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Bo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof wl)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Ie()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:xP(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Ie()}(t,e.precondition)),n}function FP(t,e){return t&&t.length>0?(rt(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Zn(s.updateTime):Zn(i);return o.isEqual(Ne.min())&&(o=Zn(i)),new vP(o,s.transformResults||[])}(n,e))):[]}function $P(t,e){return{documents:[T2(t,e.path)]}}function UP(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=T2(t,s);const i=function(c){if(c.length!==0)return A2(rr.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(u=>function(h){return{field:Ks(h.field),direction:WP(h.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=yh(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:s}}function BP(t){let e=MP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){rt(r===1);const u=n.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];n.where&&(i=function(f){const h=C2(f);return h instanceof rr&&e2(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(h=>function(g){return new vl(zs(g.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(f){let h;return h=typeof f=="object"?f.value:f,uc(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(f){const h=!!f.before,p=f.values||[];return new yl(p,h)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const h=!f.before,p=f.values||[];return new yl(p,h)}(n.endAt)),iP(e,s,o,i,a,"F",l,c)}function jP(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function C2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=zs(n.unaryFilter.field);return Tt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=zs(n.unaryFilter.field);return Tt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=zs(n.unaryFilter.field);return Tt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=zs(n.unaryFilter.field);return Tt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ie()}}(t):t.fieldFilter!==void 0?function(n){return Tt.create(zs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ie()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return rr.create(n.compositeFilter.filters.map(r=>C2(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ie()}}(n.compositeFilter.op))}(t):Ie()}function WP(t){return kP[t]}function HP(t){return NP[t]}function qP(t){return LP[t]}function Ks(t){return{fieldPath:t.canonicalString()}}function zs(t){return Mt.fromServerFormat(t.fieldPath)}function A2(t){return t instanceof Tt?function(n){if(n.op==="=="){if($0(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NAN"}};if(F0(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($0(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NOT_NAN"}};if(F0(n.value))return{unaryFilter:{field:Ks(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ks(n.field),op:HP(n.op),value:n.value}}}(t):t instanceof rr?function(n){const r=n.getFilters().map(s=>A2(s));return r.length===1?r[0]:{compositeFilter:{op:qP(n.op),filters:r}}}(t):Ie()}function GP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function S2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n,r,s,i=Ne.min(),o=Ne.min(),a=Kt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Br(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e){this.ct=e}}function zP(t){const e=BP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_h(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(){this._n=new YP}addToCollectionParentIndex(e,n){return this._n.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Yr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Yr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class YP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ft(ct.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ft(ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new yi(0)}static Ln(){return new yi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(){this.changes=new Pi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&fo(r.mutation,s,yn.empty(),Ct.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ue()){const s=ys();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Yi();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ys();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ue()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=yr();const o=ho(),a=function(){return ho()}();return n.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof rs)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),fo(u.mutation,c,u.mutation.getFieldMask(),Ct.now())):o.set(c.key,yn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var f;return a.set(c,new JP(u,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ho();let s=new ht((o,a)=>o-a),i=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||yn.empty();u=a.applyToLocalView(c,u),r.set(l,u);const f=(s.get(a.batchId)||Ue()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,f=l2();u.forEach(h=>{if(!i.has(h)){const p=p2(n.get(h),r.get(h));p!==null&&f.set(h,p),i=i.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return pe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):oP(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(ys());let a=-1,l=i;return o.next(c=>U.forEach(c,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(u)?U.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Ue())).next(u=>({batchId:a,changes:a2(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new pe(n)).next(r=>{let s=Yi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Yi();return this.indexManager.getCollectionParents(e,i).next(a=>U.forEach(a,l=>{const c=function(f,h){return new hc(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(u=>{u.forEach((f,h)=>{o=o.insert(f,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Wt.newInvalidDocument(u)))});let a=Yi();return o.forEach((l,c)=>{const u=i.get(l);u!==void 0&&fo(u.mutation,c,yn.empty(),Ct.now()),mc(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return U.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Zn(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(s){return{name:s.name,query:zP(s.bundledQuery),readTime:Zn(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(){this.overlays=new ht(pe.comparator),this.hr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ys();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=ys(),i=n.length+1,o=new pe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ht((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=ys(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=ys(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return U.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new IP(n,r));let i=this.hr.get(n);i===void 0&&(i=Ue(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(){this.Pr=new Ft(Rt.Ir),this.Tr=new Ft(Rt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new Rt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Rt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new pe(new ct([])),r=new Rt(n,e),s=new Rt(n,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new pe(new ct([])),r=new Rt(n,e),s=new Rt(n,e+1);let i=Ue();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Rt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Rt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return pe.comparator(e.key,n.key)||qe(e.pr,n.pr)}static Er(e,n){return qe(e.pr,n.pr)||pe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ft(Rt.Ir)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new TP(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new Rt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.br(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Rt(n,0),s=new Rt(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ft(qe);return n.forEach(s=>{const i=new Rt(s,0),o=new Rt(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),U.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;pe.isDocumentKey(i)||(i=i.child(""));const o=new Rt(new pe(i),0);let a=new Ft(qe);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.pr)),!0)},o),U.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){rt(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return U.forEach(n.mutations,s=>{const i=new Rt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new Rt(n,0),s=this.wr.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.vr=e,this.docs=function(){return new ht(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():Wt.newInvalidDocument(n))}getEntries(e,n){let r=yr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Wt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=yr();const o=n.path,a=new pe(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||U3($3(u),r)<=0||(s.has(u.key)||mc(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Ie()}Fr(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new sk(this)}getSize(e){return U.resolve(this.size)}}class sk extends XP{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e){this.persistence=e,this.Mr=new Pi(n=>Bf(n),jf),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Gf,this.targetCount=0,this.Lr=yi.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),U.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new yi(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.qn(n),U.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e,n){this.Br={},this.overlays={},this.kr=new Vf(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new ik(this),this.indexManager=new QP,this.remoteDocumentCache=function(s){return new rk(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new KP(n),this.$r=new ek(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new tk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new nk(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const s=new ak(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,n){return U.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class ak extends j3{constructor(e){super(),this.currentSequenceNumber=e}}class Kf{constructor(e){this.persistence=e,this.zr=new Gf,this.jr=null}static Hr(e){return new Kf(e)}get Jr(){if(this.jr)return this.jr;throw Ie()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),U.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Jr,r=>{const s=pe.fromPath(r);return this.Yr(e,s).next(i=>{i||n.removeEntry(s,Ne.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return U.or([()=>U.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(e,n){let r=Ue(),s=Ue();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new zf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return cS()?8:_s.v(ll())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ji(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Hi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new lk;return this.Ji(e,n,o).next(a=>{if(i.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>i.result)}Yi(e,n,r,s){return r.documentReadCount<this.Wi?(Bi()<=He.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Gs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),U.resolve()):(Bi()<=He.DEBUG&&ee("QueryEngine","Query:",Gs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Gi*s?(Bi()<=He.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Gs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xn(n))):U.resolve())}ji(e,n){if(W0(n))return U.resolve(null);let r=Xn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=_h(n,null,"F"),r=Xn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ue(...i);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(e,_h(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,s){return W0(n)||s.isEqual(Ne.min())?U.resolve(null):this.zi.getDocuments(e,r).next(i=>{const o=this.Zi(n,i);return this.Xi(n,o,r,s)?U.resolve(null):(Bi()<=He.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Gs(n)),this.es(e,o,n,F3(s,-1)).next(a=>a))})}Zi(e,n){let r=new Ft(i2(e));return n.forEach((s,i)=>{mc(e,i)&&(r=r.add(i))}),r}Xi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ji(e,n,r){return Bi()<=He.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Gs(n)),this.zi.getDocumentsMatchingQuery(e,n,Yr.min(),r)}es(e,n,r,s){return this.zi.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e,n,r,s){this.persistence=e,this.ts=n,this.serializer=s,this.ns=new ht(qe),this.rs=new Pi(i=>Bf(i),jf),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZP(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function hk(t,e,n,r){return new uk(t,e,n,r)}async function R2(t,e){const n=De(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Ue();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function fk(t,e){const n=De(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const f=c.batch,h=f.keys();let p=U.resolve();return h.forEach(g=>{p=p.next(()=>u.getEntry(l,g)).next(E=>{const v=c.docVersions.get(g);rt(v!==null),E.version.compareTo(v)<0&&(f.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),u.addEntry(E)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ue();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function P2(t){const e=De(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function dk(t,e){const n=De(t),r=e.snapshotVersion;let s=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.os.newChangeBuffer({trackRemovals:!0});s=n.ns;const a=[];e.targetChanges.forEach((u,f)=>{const h=s.get(f);if(!h)return;a.push(n.Qr.removeMatchingKeys(i,u.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(i,u.addedDocuments,f)));let p=h.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?p=p.withResumeToken(Kt.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),s=s.insert(f,p),function(E,v,_){return E.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(h,p,u)&&a.push(n.Qr.updateTargetData(i,p))});let l=yr(),c=Ue();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(mk(i,o,e.documentUpdates).next(u=>{l=u.cs,c=u.ls})),!r.isEqual(Ne.min())){const u=n.Qr.getLastRemoteSnapshotVersion(i).next(f=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return U.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.ns=s,i))}function mk(t,e,n){let r=Ue(),s=Ue();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=yr();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Ne.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ee("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:s}})}function pk(t,e){const n=De(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function gk(t,e){const n=De(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new Br(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.ns.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function bh(t,e,n){const r=De(t),s=r.ns.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ia(o))throw o;ee("LocalStore","Failed to update sequence numbers for target ".concat(e,": ").concat(o))}r.ns=r.ns.remove(e),r.rs.delete(s.target)}function ep(t,e,n){const r=De(t);let s=Ne.min(),i=Ue();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const f=De(l),h=f.rs.get(u);return h!==void 0?U.resolve(f.ns.get(h)):f.Qr.getTargetData(c,u)}(r,o,Xn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?s:Ne.min(),n?i:Ue())).next(a=>(_k(r,lP(e),a),{documents:a,hs:i})))}function _k(t,e,n){let r=t.ss.get(e)||Ne.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.ss.set(e,r)}class tp{constructor(){this.activeTargetIds=mP()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yk{constructor(){this.no=new tp,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new tp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Na=null;function mu(){return Na===null?Na=function(){return 268435456+Math.round(2147483648*Math.random())}():Na++,"0x"+Na.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t="WebChannelConnection";class bk extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po="projects/".concat(s,"/databases/").concat(i),this.yo=this.databaseId.database==="(default)"?"project_id=".concat(s):"project_id=".concat(s,"&database_id=").concat(i)}get wo(){return!1}So(n,r,s,i,o){const a=mu(),l=this.bo(n,r.toUriEncodedString());ee("RestConnection","Sending RPC '".concat(n,"' ").concat(a,":"),l,s);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,i,o),this.Co(n,l,c,s).then(u=>(ee("RestConnection","Received RPC '".concat(n,"' ").concat(a,": "),u),u),u=>{throw Mo("RestConnection","RPC '".concat(n,"' ").concat(a," failed with error: "),u,"url: ",l,"request:",s),u})}vo(n,r,s,i,o,a){return this.So(n,r,s,i,o)}Do(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ri}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}bo(n,r){const s=Ek[n];return"".concat(this.fo,"/v1/").concat(r,":").concat(s)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,s){const i=mu();return new Promise((o,a)=>{const l=new S3;l.setWithCredentials(!0),l.listenOnce(C3.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case fu.NO_ERROR:const u=l.getResponseJson();ee($t,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(u)),o(u);break;case fu.TIMEOUT:ee($t,"RPC '".concat(e,"' ").concat(i," timed out")),a(new he(j.DEADLINE_EXCEEDED,"Request time out"));break;case fu.HTTP_ERROR:const f=l.getStatus();if(ee($t,"RPC '".concat(e,"' ").concat(i," failed with status:"),f,"response text:",l.getResponseText()),f>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const p=h==null?void 0:h.error;if(p&&p.status&&p.message){const g=function(v){const _=v.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(_)>=0?_:j.UNKNOWN}(p.status);a(new he(g,p.message))}else a(new he(j.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new he(j.UNAVAILABLE,"Connection failed."));break;default:Ie()}}finally{ee($t,"RPC '".concat(e,"' ").concat(i," completed."))}});const c=JSON.stringify(s);ee($t,"RPC '".concat(e,"' ").concat(i," sending request:"),s),l.send(n,"POST",c,r,15)})}Fo(e,n,r){const s=mu(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=T3(),a=I3(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");ee($t,"Creating RPC '".concat(e,"' stream ").concat(s,": ").concat(u),l);const f=o.createWebChannel(u,l);let h=!1,p=!1;const g=new wk({lo:v=>{p?ee($t,"Not sending because RPC '".concat(e,"' stream ").concat(s," is closed:"),v):(h||(ee($t,"Opening RPC '".concat(e,"' stream ").concat(s," transport.")),f.open(),h=!0),ee($t,"RPC '".concat(e,"' stream ").concat(s," sending:"),v),f.send(v))},ho:()=>f.close()}),E=(v,_,w)=>{v.listen(_,T=>{try{w(T)}catch(b){setTimeout(()=>{throw b},0)}})};return E(f,Ra.EventType.OPEN,()=>{p||ee($t,"RPC '".concat(e,"' stream ").concat(s," transport opened."))}),E(f,Ra.EventType.CLOSE,()=>{p||(p=!0,ee($t,"RPC '".concat(e,"' stream ").concat(s," transport closed")),g.Vo())}),E(f,Ra.EventType.ERROR,v=>{p||(p=!0,Mo($t,"RPC '".concat(e,"' stream ").concat(s," transport errored:"),v),g.Vo(new he(j.UNAVAILABLE,"The operation could not be completed")))}),E(f,Ra.EventType.MESSAGE,v=>{var _;if(!p){const w=v.data[0];rt(!!w);const T=w,b=T.error||((_=T[0])===null||_===void 0?void 0:_.error);if(b){ee($t,"RPC '".concat(e,"' stream ").concat(s," received error:"),b);const N=b.status;let S=function(k){const M=_t[k];if(M!==void 0)return y2(M)}(N),V=b.message;S===void 0&&(S=j.INTERNAL,V="Unknown error status: "+N+" with message "+b.message),p=!0,g.Vo(new he(S,V)),f.close()}else ee($t,"RPC '".concat(e,"' stream ").concat(s," received:"),w),g.mo(w)}}),E(a,A3.STAT_EVENT,v=>{v.stat===L0.PROXY?ee($t,"RPC '".concat(e,"' stream ").concat(s," detected buffering proxy")):v.stat===L0.NOPROXY&&ee($t,"RPC '".concat(e,"' stream ").concat(s," detected no buffering proxy"))}),setTimeout(()=>{g.Ro()},0),g}}function pu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(t){return new DP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,n,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=s,this.Oo=i,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),s=Math.max(0,n-r);s>0&&ee("ExponentialBackoff","Backing off for ".concat(s," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Lo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,n,r,s,i,o,a,l){this.oi=e,this.$o=r,this.Uo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new k2(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(tr(n.toString()),tr("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(n)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Wo===n&&this.o_(r,s)},r=>{e(()=>{const s=new he(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(s)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(s=>{r(()=>this.__(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return ee("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Tk extends N2{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=OP(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ne.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ne.min():o.readTime?Zn(o.readTime):Ne.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=wh(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=gh(l)?{documents:$P(i,l)}:{query:UP(i,l).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=w2(i,o.resumeToken);const c=yh(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Ne.min())>0){a.readTime=bl(i,o.snapshotVersion.toTimestamp());const c=yh(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=jP(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=wh(this.serializer),n.removeTarget=e,this.t_(n)}}class Ik extends N2{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=FP(e.writeResults,e.commitTime),r=Zn(e.commitTime);return this.listener.T_(r,n)}return rt(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=wh(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>VP(this.serializer,r))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.A_=!1}R_(){if(this.A_)throw new he(j.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(e,vh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new he(j.UNKNOWN,i.toString())})}vo(e,n,r,s,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,vh(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new he(j.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class Ak{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(tr(n),this.g_=!1):ee("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io(o=>{r.enqueueAndForget(async()=>{Os(this)&&(ee("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=De(l);c.v_.add(4),await la(c),c.x_.set("Unknown"),c.v_.delete(4),await vc(c)}(this))})}),this.x_=new Ak(r,s)}}async function vc(t){if(Os(t))for(const e of t.F_)await e(!0)}async function la(t){for(const e of t.F_)await e(!1)}function L2(t,e){const n=De(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),Jf(n)?Xf(n):ki(n).Jo()&&Yf(n,e))}function Qf(t,e){const n=De(t),r=ki(n);n.C_.delete(e),r.Jo()&&D2(n,e),n.C_.size===0&&(r.Jo()?r.Xo():Os(n)&&n.x_.set("Unknown"))}function Yf(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ki(t).c_(e)}function D2(t,e){t.O_.Oe(e),ki(t).l_(e)}function Xf(t){t.O_=new PP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),ki(t).start(),t.x_.p_()}function Jf(t){return Os(t)&&!ki(t).Ho()&&t.C_.size>0}function Os(t){return De(t).v_.size===0}function x2(t){t.O_=void 0}async function Rk(t){t.C_.forEach((e,n)=>{Yf(t,e)})}async function Pk(t,e){x2(t),Jf(t)?(t.x_.S_(e),Xf(t)):t.x_.set("Unknown")}async function kk(t,e,n){if(t.x_.set("Online"),e instanceof E2&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.C_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.C_.delete(a),s.O_.removeTarget(a))}(t,e)}catch(r){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Tl(t,r)}else if(e instanceof Ha?t.O_.$e(e):e instanceof v2?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(Ne.min()))try{const r=await P2(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.O_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.C_.get(c);u&&i.C_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i.C_.get(l);if(!u)return;i.C_.set(l,u.withResumeToken(Kt.EMPTY_BYTE_STRING,u.snapshotVersion)),D2(i,l);const f=new Br(u.target,l,c,u.sequenceNumber);Yf(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ee("RemoteStore","Failed to raise snapshot:",r),await Tl(t,r)}}async function Tl(t,e,n){if(!ia(e))throw e;t.v_.add(1),await la(t),t.x_.set("Offline"),n||(n=()=>P2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ee("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await vc(t)})}function M2(t,e){return e().catch(n=>Tl(t,n,e))}async function Ec(t){const e=De(t),n=Jr(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;Nk(e);)try{const s=await pk(e.localStore,r);if(s===null){e.D_.length===0&&n.Xo();break}r=s.batchId,Lk(e,s)}catch(s){await Tl(e,s)}O2(e)&&V2(e)}function Nk(t){return Os(t)&&t.D_.length<10}function Lk(t,e){t.D_.push(e);const n=Jr(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function O2(t){return Os(t)&&!Jr(t).Ho()&&t.D_.length>0}function V2(t){Jr(t).start()}async function Dk(t){Jr(t).d_()}async function xk(t){const e=Jr(t);for(const n of t.D_)e.I_(n.mutations)}async function Mk(t,e,n){const r=t.D_.shift(),s=Wf.from(r,e,n);await M2(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Ec(t)}async function Ok(t,e){e&&Jr(t).P_&&await async function(r,s){if(function(o){return AP(o)&&o!==j.ABORTED}(s.code)){const i=r.D_.shift();Jr(r).Zo(),await M2(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Ec(r)}}(t,e),O2(t)&&V2(t)}async function rp(t,e){const n=De(t);n.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const r=Os(n);n.v_.add(3),await la(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await vc(n)}async function Vk(t,e){const n=De(t);e?(n.v_.delete(2),await vc(n)):e||(n.v_.add(2),await la(n),n.x_.set("Unknown"))}function ki(t){return t.N_||(t.N_=function(n,r,s){const i=De(n);return i.R_(),new Tk(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Po:Rk.bind(null,t),To:Pk.bind(null,t),u_:kk.bind(null,t)}),t.F_.push(async e=>{e?(t.N_.Zo(),Jf(t)?Xf(t):t.x_.set("Unknown")):(await t.N_.stop(),x2(t))})),t.N_}function Jr(t){return t.L_||(t.L_=function(n,r,s){const i=De(n);return i.R_(),new Ik(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Po:Dk.bind(null,t),To:Ok.bind(null,t),E_:xk.bind(null,t),T_:Mk.bind(null,t)}),t.F_.push(async e=>{e?(t.L_.Zo(),await Ec(t)):(await t.L_.stop(),t.D_.length>0&&(ee("RemoteStore","Stopping write stream with ".concat(t.D_.length," pending writes")),t.D_=[]))})),t.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Zf(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ed(t,e){if(tr("AsyncQueue","".concat(e,": ").concat(t)),ia(t))return new he(j.UNAVAILABLE,"".concat(e,": ").concat(t));throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||pe.comparator(n.key,r.key):(n,r)=>pe.comparator(n.key,r.key),this.keyedMap=Yi(),this.sortedSet=new ht(this.comparator)}static emptySet(e){return new oi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof oi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new oi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(){this.B_=new ht(pe.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):Ie():this.B_=this.B_.insert(n,e)}k_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class vi{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new vi(e,n,oi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}}class $k{constructor(){this.queries=new Pi(e=>s2(e),dc),this.onlineState="Unknown",this.W_=new Set}}async function F2(t,e){const n=De(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.K_()&&e.U_()&&(r=2):(i=new Fk,r=e.U_()?0:1);try{switch(r){case 0:i.q_=await n.onListen(s,!0);break;case 1:i.q_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=ed(o,"Initialization of query '".concat(Gs(e.query),"' failed"));return void e.onError(a)}n.queries.set(s,i),i.Q_.push(e),e.G_(n.onlineState),i.q_&&e.z_(i.q_)&&td(n)}async function $2(t,e){const n=De(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Q_.indexOf(e);o>=0&&(i.Q_.splice(o,1),i.Q_.length===0?s=e.U_()?0:1:!i.K_()&&e.U_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Uk(t,e){const n=De(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Q_)a.z_(s)&&(r=!0);o.q_=s}}r&&td(n)}function Bk(t,e,n){const r=De(t),s=r.queries.get(e);if(s)for(const i of s.Q_)i.onError(n);r.queries.delete(e)}function td(t){t.W_.forEach(e=>{e.next()})}var Th,ip;(ip=Th||(Th={})).j_="default",ip.Cache="cache";class U2{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new vi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;const r=n!=="Offline";return(!this.options.ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;const n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=vi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==Th.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e){this.key=e}}class j2{constructor(e){this.key=e}}class jk{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=Ue(),this.mutatedKeys=Ue(),this.ha=i2(e),this.Pa=new oi(this.ha)}get Ia(){return this.ua}Ta(e,n){const r=n?n.Ea:new sp,s=n?n.Pa:this.Pa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,f)=>{const h=s.get(u),p=mc(this.query,f)?f:null,g=!!h&&this.mutatedKeys.has(h.key),E=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let v=!1;h&&p?h.data.isEqual(p.data)?g!==E&&(r.track({type:3,doc:p}),v=!0):this.da(h,p)||(r.track({type:2,doc:p}),v=!0,(l&&this.ha(p,l)>0||c&&this.ha(p,c)<0)&&(a=!0)):!h&&p?(r.track({type:0,doc:p}),v=!0):h&&!p&&(r.track({type:1,doc:h}),v=!0,(l||c)&&(a=!0)),v&&(p?(o=o.add(p),i=E?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{Pa:o,Ea:r,Xi:a,mutatedKeys:i}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const o=e.Ea.k_();o.sort((u,f)=>function(p,g){const E=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie()}};return E(p)-E(g)}(u.type,f.type)||this.ha(u.doc,f.doc)),this.Aa(r),s=s!=null&&s;const a=n&&!s?this.Ra():[],l=this.la.size===0&&this.current&&!s?1:0,c=l!==this.ca;return this.ca=l,o.length!==0||c?{snapshot:new vi(this.query,e.Pa,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new sp,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=Ue(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});const n=[];return e.forEach(r=>{this.la.has(r)||n.push(new j2(r))}),this.la.forEach(r=>{e.has(r)||n.push(new B2(r))}),n}fa(e){this.ua=e.hs,this.la=Ue();const n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return vi.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}}class Wk{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Hk{constructor(e){this.key=e,this.pa=!1}}class qk{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new Pi(a=>s2(a),dc),this.Sa=new Map,this.ba=new Set,this.Da=new ht(pe.comparator),this.Ca=new Map,this.va=new Gf,this.Fa={},this.Ma=new Map,this.xa=yi.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}}async function Gk(t,e,n=!0){const r=z2(t);let s;const i=r.wa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.ga()):s=await W2(r,e,n,!0),s}async function Kk(t,e){const n=z2(t);await W2(n,e,!0,!1)}async function W2(t,e,n,r){const s=await gk(t.localStore,Xn(e)),i=s.targetId,o=n?t.sharedClientState.addLocalQueryTarget(i):"not-current";let a;return r&&(a=await zk(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&L2(t.remoteStore,s),a}async function zk(t,e,n,r,s){t.Na=(f,h,p)=>async function(E,v,_,w){let T=v.view.Ta(_);T.Xi&&(T=await ep(E.localStore,v.query,!1).then(({documents:V})=>v.view.Ta(V,T)));const b=w&&w.targetChanges.get(v.targetId),N=w&&w.targetMismatches.get(v.targetId)!=null,S=v.view.applyChanges(T,E.isPrimaryClient,b,N);return ap(E,v.targetId,S.Va),S.snapshot}(t,f,h,p);const i=await ep(t.localStore,e,!0),o=new jk(e,i.hs),a=o.Ta(i.documents),l=aa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);ap(t,n,c.Va);const u=new Wk(e,n,o);return t.wa.set(e,u),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),c.snapshot}async function Qk(t,e,n){const r=De(t),s=r.wa.get(e),i=r.Sa.get(s.targetId);if(i.length>1)return r.Sa.set(s.targetId,i.filter(o=>!dc(o,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await bh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Qf(r.remoteStore,s.targetId),Ih(r,s.targetId)}).catch(sa)):(Ih(r,s.targetId),await bh(r.localStore,s.targetId,!0))}async function Yk(t,e){const n=De(t),r=n.wa.get(e),s=n.Sa.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Qf(n.remoteStore,r.targetId))}async function Xk(t,e,n){const r=s5(t);try{const s=await function(o,a){const l=De(o),c=Ct.now(),u=a.reduce((p,g)=>p.add(g.key),Ue());let f,h;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=yr(),E=Ue();return l.os.getEntries(p,u).next(v=>{g=v,g.forEach((_,w)=>{w.isValidDocument()||(E=E.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,g)).next(v=>{f=v;const _=[];for(const w of a){const T=wP(w,f.get(w.key).overlayedDocument);T!=null&&_.push(new rs(w.key,T,X1(T.value.mapValue),Jn.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,_,a)}).next(v=>{h=v;const _=v.applyToLocalDocumentSet(f,E);return l.documentOverlayCache.saveOverlays(p,v.batchId,_)})}).then(()=>({batchId:h.batchId,changes:a2(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Fa[o.currentUser.toKey()];c||(c=new ht(qe)),c=c.insert(a,l),o.Fa[o.currentUser.toKey()]=c}(r,s.batchId,n),await ca(r,s.changes),await Ec(r.remoteStore)}catch(s){const i=ed(s,"Failed to persist write");n.reject(i)}}async function H2(t,e){const n=De(t);try{const r=await dk(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Ca.get(i);o&&(rt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.pa=!0:s.modifiedDocuments.size>0?rt(o.pa):s.removedDocuments.size>0&&(rt(o.pa),o.pa=!1))}),await ca(n,r,e)}catch(r){await sa(r)}}function op(t,e,n){const r=De(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.wa.forEach((i,o)=>{const a=o.view.G_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=De(o);l.onlineState=a;let c=!1;l.queries.forEach((u,f)=>{for(const h of f.Q_)h.G_(a)&&(c=!0)}),c&&td(l)}(r.eventManager,e),s.length&&r.ya.u_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Jk(t,e,n){const r=De(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Ca.get(e),i=s&&s.key;if(i){let o=new ht(pe.comparator);o=o.insert(i,Wt.newNoDocument(i,Ne.min()));const a=Ue().add(i),l=new _c(Ne.min(),new Map,new ht(qe),o,a);await H2(r,l),r.Da=r.Da.remove(i),r.Ca.delete(e),nd(r)}else await bh(r.localStore,e,!1).then(()=>Ih(r,e,n)).catch(sa)}async function Zk(t,e){const n=De(t),r=e.batch.batchId;try{const s=await fk(n.localStore,e);G2(n,r,null),q2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ca(n,s)}catch(s){await sa(s)}}async function e5(t,e,n){const r=De(t);try{const s=await function(o,a){const l=De(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(rt(f!==null),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);G2(r,e,n),q2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ca(r,s)}catch(s){await sa(s)}}function q2(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function G2(t,e,n){const r=De(t);let s=r.Fa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Fa[r.currentUser.toKey()]=s}}function Ih(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||K2(t,r)})}function K2(t,e){t.ba.delete(e.path.canonicalString());const n=t.Da.get(e);n!==null&&(Qf(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),nd(t))}function ap(t,e,n){for(const r of n)r instanceof B2?(t.va.addReference(r.key,e),t5(t,r)):r instanceof j2?(ee("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||K2(t,r.key)):Ie()}function t5(t,e){const n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(ee("SyncEngine","New document in limbo: "+n),t.ba.add(r),nd(t))}function nd(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){const e=t.ba.values().next().value;t.ba.delete(e);const n=new pe(ct.fromString(e)),r=t.xa.next();t.Ca.set(r,new Hk(n)),t.Da=t.Da.insert(n,r),L2(t.remoteStore,new Br(Xn(fc(n.path)),r,"TargetPurposeLimboResolution",Vf._e))}}async function ca(t,e,n){const r=De(t),s=[],i=[],o=[];r.wa.isEmpty()||(r.wa.forEach((a,l)=>{o.push(r.Na(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const u=zf.Ki(l.targetId,c);i.push(u)}}))}),await Promise.all(o),r.ya.u_(s),await async function(l,c){const u=De(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>U.forEach(c,h=>U.forEach(h.qi,p=>u.persistence.referenceDelegate.addReference(f,h.targetId,p)).next(()=>U.forEach(h.Qi,p=>u.persistence.referenceDelegate.removeReference(f,h.targetId,p)))))}catch(f){if(!ia(f))throw f;ee("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const h=f.targetId;if(!f.fromCache){const p=u.ns.get(h),g=p.snapshotVersion,E=p.withLastLimboFreeSnapshotVersion(g);u.ns=u.ns.insert(h,E)}}}(r.localStore,i))}async function n5(t,e){const n=De(t);if(!n.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const r=await R2(n.localStore,e);n.currentUser=e,function(i,o){i.Ma.forEach(a=>{a.forEach(l=>{l.reject(new he(j.CANCELLED,o))})}),i.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ca(n,r.us)}}function r5(t,e){const n=De(t),r=n.Ca.get(e);if(r&&r.pa)return Ue().add(r.key);{let s=Ue();const i=n.Sa.get(e);if(!i)return s;for(const o of i){const a=n.wa.get(o);s=s.unionWith(a.view.Ia)}return s}}function z2(t){const e=De(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=H2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=r5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Jk.bind(null,e),e.ya.u_=Uk.bind(null,e.eventManager),e.ya.La=Bk.bind(null,e.eventManager),e}function s5(t){const e=De(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Zk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=e5.bind(null,e),e}class lp{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=yc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return hk(this.persistence,new ck,e.initialUser,this.serializer)}createPersistence(e){return new ok(Kf.Hr,this.serializer)}createSharedClientState(e){return new yk}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class i5{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>op(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=n5.bind(null,this.syncEngine),await Vk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new $k}()}createDatastore(e){const n=yc(e.databaseInfo.databaseId),r=function(i){return new bk(i)}(e.databaseInfo);return function(i,o,a,l){return new Ck(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new Sk(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>op(this.syncEngine,n,0),function(){return np.D()?new np:new vk}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,u){const f=new qk(s,i,o,a,l,c);return u&&(f.Oa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const s=De(r);ee("RemoteStore","RemoteStore shutting down."),s.v_.add(5),await la(s),s.M_.shutdown(),s.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):tr("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=an.UNAUTHENTICATED,this.clientId=z1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{ee("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(ee("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new he(j.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ed(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function gu(t,e){t.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await R2(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function cp(t,e){t.asyncQueue.verifyOperationInProgress();const n=await l5(t);ee("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>rp(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>rp(e.remoteStore,s)),t._onlineComponents=e}function a5(t){return t.name==="FirebaseError"?t.code===j.FAILED_PRECONDITION||t.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function l5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee("FirestoreClient","Using user provided OfflineComponentProvider");try{await gu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!a5(n))throw n;Mo("Error using user provided cache. Falling back to memory cache: "+n),await gu(t,new lp)}}else ee("FirestoreClient","Using default OfflineComponentProvider"),await gu(t,new lp);return t._offlineComponents}async function Y2(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee("FirestoreClient","Using user provided OnlineComponentProvider"),await cp(t,t._uninitializedComponentsProvider._online)):(ee("FirestoreClient","Using default OnlineComponentProvider"),await cp(t,new i5))),t._onlineComponents}function c5(t){return Y2(t).then(e=>e.syncEngine)}async function Ch(t){const e=await Y2(t),n=e.eventManager;return n.onListen=Gk.bind(null,e.syncEngine),n.onUnlisten=Qk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Kk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Yk.bind(null,e.syncEngine),n}function u5(t,e,n={}){const r=new mr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new Q2({next:h=>{o.enqueueAndForget(()=>$2(i,f));const p=h.docs.has(a);!p&&h.fromCache?c.reject(new he(j.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&h.fromCache&&l&&l.source==="server"?c.reject(new he(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),f=new U2(fc(a.path),u,{includeMetadataChanges:!0,ta:!0});return F2(i,f)}(await Ch(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(t,e,n){if(!n)throw new he(j.INVALID_ARGUMENT,"Function ".concat(t,"() cannot be called with an empty ").concat(e,"."))}function h5(t,e,n,r){if(e===!0&&r===!0)throw new he(j.INVALID_ARGUMENT,"".concat(t," and ").concat(n," cannot be used together."))}function hp(t){if(!pe.isDocumentKey(t))throw new he(j.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(t," has ").concat(t.length,"."))}function fp(t){if(pe.isDocumentKey(t))throw new he(j.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(t," has ").concat(t.length,"."))}function rd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t="".concat(t.substring(0,20),"...")),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?"a custom ".concat(e," object"):"an object"}}return typeof t=="function"?"a function":Ie()}function qr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new he(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rd(t);throw new he(j.INVALID_ARGUMENT,"Expected type '".concat(e.name,"', but it was: ").concat(n))}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new he(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new he(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}h5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=X2((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new he(j.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(i.timeoutSeconds," (must not be NaN)"));if(i.timeoutSeconds<5)throw new he(j.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(i.timeoutSeconds," (minimum allowed value is 5)"));if(i.timeoutSeconds>30)throw new he(j.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(i.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sd{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dp({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new he(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new he(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dp(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new k3;switch(r.type){case"firstParty":return new D3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=up.get(n);r&&(ee("ComponentProvider","Removing Datastore"),up.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new wc(this.firestore,e,this._query)}}class cn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cn(this.firestore,e,this._key)}}class Gr extends wc{constructor(e,n,r){super(e,n,fc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cn(this.firestore,null,new pe(e))}withConverter(e){return new Gr(this.firestore,e,this._path)}}function Z2(t,e,...n){if(t=gr(t),J2("collection","path",e),t instanceof sd){const r=ct.fromString(e,...n);return fp(r),new Gr(t,null,r)}{if(!(t instanceof cn||t instanceof Gr))throw new he(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ct.fromString(e,...n));return fp(r),new Gr(t.firestore,null,r)}}function ua(t,e,...n){if(t=gr(t),arguments.length===1&&(e=z1.newId()),J2("doc","path",e),t instanceof sd){const r=ct.fromString(e,...n);return hp(r),new cn(t,null,new pe(r))}{if(!(t instanceof cn||t instanceof Gr))throw new he(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ct.fromString(e,...n));return hp(r),new cn(t.firestore,t instanceof Gr?t.converter:null,new pe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new k2(this,"async_queue_retry"),this.cu=()=>{const n=pu();n&&ee("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=pu();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const n=pu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});const n=new mr;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}async Pu(){if(this.ru.length!==0){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!ia(e))throw e;ee("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}}hu(e){const n=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r);throw tr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);const s=Zf.createAndSchedule(this,e,n,r,i=>this.Iu(i));return this.su.push(s),s}lu(){this.ou&&Ie()}verifyOperationInProgress(){}async Tu(){let e;do e=this.nu,await e;while(e!==this.nu)}Eu(e){for(const n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){const n=this.su.indexOf(e);this.su.splice(n,1)}}function mp(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Ei extends sd{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new f5}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||ey(this),this._firestoreClient.terminate()}}function d5(t,e,n){n||(n="(default)");const r=cR(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(cl(i,e))return s;throw new he(j.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new he(j.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new he(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function id(t){return t._firestoreClient||ey(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ey(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,u){return new K3(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,X2(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new o5(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wi(Kt.fromBase64String(e))}catch(n){throw new he(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new wi(Kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5=/^__.*__$/;class p5{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new rs(e,this.data,this.fieldMask,n,this.fieldTransforms):new oa(e,this.data,n,this.fieldTransforms)}}class ty{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new rs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ny(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie()}}class ld{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ru(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new ld(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.mu({path:r,gu:!1});return s.pu(e),s}yu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.mu({path:r,gu:!1});return s.Ru(),s}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return Il(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(ny(this.Vu)&&m5.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class g5{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||yc(e)}Cu(e,n,r,s=!1){return new ld({Vu:e,methodName:n,Du:r,path:Mt.emptyPath(),gu:!1,bu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ry(t){const e=t._freezeSettings(),n=yc(t._databaseId);return new g5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _5(t,e,n,r,s,i={}){const o=t.Cu(i.merge||i.mergeFields?2:0,e,n,s);cd("Data must be an object, but it was:",o,r);const a=sy(r,o);let l,c;if(i.merge)l=new yn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const f of i.mergeFields){const h=Ah(e,f,n);if(!o.contains(h))throw new he(j.INVALID_ARGUMENT,"Field '".concat(h,"' is specified in your field mask but missing from your input data."));oy(u,h)||u.push(h)}l=new yn(u),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new p5(new ln(a),l,c)}class Tc extends od{_toFieldTransform(e){if(e.Vu!==2)throw e.Vu===1?e.Su("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Su("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tc}}function y5(t,e,n,r){const s=t.Cu(1,e,n);cd("Data must be an object, but it was:",s,r);const i=[],o=ln.empty();Ms(r,(l,c)=>{const u=ud(e,l,n);c=gr(c);const f=s.yu(u);if(c instanceof Tc)i.push(u);else{const h=Ic(c,f);h!=null&&(i.push(u),o.set(u,h))}});const a=new yn(i);return new ty(o,a,s.fieldTransforms)}function v5(t,e,n,r,s,i){const o=t.Cu(1,e,n),a=[Ah(e,r,n)],l=[s];if(i.length%2!=0)throw new he(j.INVALID_ARGUMENT,"Function ".concat(e,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<i.length;h+=2)a.push(Ah(e,i[h])),l.push(i[h+1]);const c=[],u=ln.empty();for(let h=a.length-1;h>=0;--h)if(!oy(c,a[h])){const p=a[h];let g=l[h];g=gr(g);const E=o.yu(p);if(g instanceof Tc)c.push(p);else{const v=Ic(g,E);v!=null&&(c.push(p),u.set(p,v))}}const f=new yn(c);return new ty(u,f,o.fieldTransforms)}function Ic(t,e){if(iy(t=gr(t)))return cd("Unsupported field value:",e,t),sy(t,e);if(t instanceof od)return function(r,s){if(!ny(s.Vu))throw s.Su("".concat(r._methodName,"() can only be used with update() and set()"));if(!s.path)throw s.Su("".concat(r._methodName,"() is not currently supported inside arrays"));const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Ic(a,s.wu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=gr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return pP(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ct.fromDate(r);return{timestampValue:bl(s.serializer,i)}}if(r instanceof Ct){const i=new Ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:bl(s.serializer,i)}}if(r instanceof ad)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof wi)return{bytesValue:w2(s.serializer,r._byteString)};if(r instanceof cn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Su("Document reference is for database ".concat(o.projectId,"/").concat(o.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:qf(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Su("Unsupported field value: ".concat(rd(r)))}(t,e)}function sy(t,e){const n={};return Q1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ms(t,(r,s)=>{const i=Ic(s,e.fu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function iy(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ct||t instanceof ad||t instanceof wi||t instanceof cn||t instanceof od)}function cd(t,e,n){if(!iy(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=rd(n);throw r==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+r)}}function Ah(t,e,n){if((e=gr(e))instanceof bc)return e._internalPath;if(typeof e=="string")return ud(t,e);throw Il("Field path arguments must be of type string or ",t,!1,void 0,n)}const E5=new RegExp("[~\\*/\\[\\]]");function ud(t,e,n){if(e.search(E5)>=0)throw Il("Invalid field path (".concat(e,"). Paths must not contain '~', '*', '/', '[', or ']'"),t,!1,void 0,n);try{return new bc(...e.split("."))._internalPath}catch(r){throw Il("Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),t,!1,void 0,n)}}function Il(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a="Function ".concat(e,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(s)),l+=")"),new he(j.INVALID_ARGUMENT,a+t+l)}function oy(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new w5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ly("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class w5 extends ay{data(){return super.data()}}function ly(t,e){return typeof e=="string"?ud(t,e):e instanceof bc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b5(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new he(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class T5{convertValue(e,n="none"){switch(Ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Ie()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ms(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new ad(yt(e.latitude),yt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=$f(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Vo(e));default:return null}}convertTimestamp(e){const n=Xr(e);return new Ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ct.fromString(e);rt(S2(r));const s=new Fo(r.get(1),r.get(3)),i=new pe(r.popFirst(5));return s.isEqual(n)||tr("Document ".concat(i," contains a document reference within a different database (").concat(s.projectId,"/").concat(s.database,") which is not supported. It will be treated as a reference in the current database (").concat(n.projectId,"/").concat(n.database,") instead.")),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cy extends ay{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ly("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class qa extends cy{data(e={}){return super.data(e)}}class C5{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ji(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new qa(this._firestore,this._userDataWriter,r.key,r,new Ji(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new qa(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ji(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new qa(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ji(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:A5(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function A5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(t){t=qr(t,cn);const e=qr(t.firestore,Ei);return u5(id(e),t._key).then(n=>my(e,t,n))}class uy extends T5{constructor(e){super(),this.firestore=e}convertBytes(e){return new wi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new cn(this.firestore,null,n)}}function hy(t,e,n,...r){t=qr(t,cn);const s=qr(t.firestore,Ei),i=ry(s);let o;return o=typeof(e=gr(e))=="string"||e instanceof bc?v5(i,"updateDoc",t._key,e,n,r):y5(i,"updateDoc",t._key,e),dy(s,[o.toMutation(t._key,Jn.exists(!0))])}function S5(t,e){const n=qr(t.firestore,Ei),r=ua(t),s=I5(t.converter,e);return dy(n,[_5(ry(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Jn.exists(!1))]).then(()=>r)}function fy(t,...e){var n,r,s;t=gr(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||mp(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(mp(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let l,c,u;if(t instanceof cn)c=qr(t.firestore,Ei),u=fc(t._key.path),l={next:f=>{e[o]&&e[o](my(c,t,f))},error:e[o+1],complete:e[o+2]};else{const f=qr(t,wc);c=qr(f.firestore,Ei),u=f._query;const h=new uy(c);l={next:p=>{e[o]&&e[o](new C5(c,h,f,p))},error:e[o+1],complete:e[o+2]},b5(t._query)}return function(h,p,g,E){const v=new Q2(E),_=new U2(p,v,g);return h.asyncQueue.enqueueAndForget(async()=>F2(await Ch(h),_)),()=>{v.Qa(),h.asyncQueue.enqueueAndForget(async()=>$2(await Ch(h),_))}}(id(c),u,a,l)}function dy(t,e){return function(r,s){const i=new mr;return r.asyncQueue.enqueueAndForget(async()=>Xk(await c5(r),s,i)),i.promise}(id(t),e)}function my(t,e,n){const r=n.docs.get(e._key),s=new uy(t);return new cy(t,s,e._key,r,new Ji(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Ri=s})(fR),ul(new Co("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Ei(new N3(r.getProvider("auth-internal")),new M3(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new he(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fo(c.options.projectId,u)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),ri(D0,"4.6.0",e),ri(D0,"4.6.0","esm2017")})();var R5="firebase",P5="10.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ri(R5,P5,"app");const k5=dR(YA),Ni=d5(k5,{ignoreUndefinedProperties:!0});function N5(t){return Dh()?($p(t),!0):!1}function fd(t){return typeof t=="function"?t():$(t)}const L5=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const D5=Object.prototype.toString,x5=t=>D5.call(t)==="[object Object]",M5=()=>{};function O5(t,e){function n(...r){return new Promise((s,i)=>{Promise.resolve(t(()=>e.apply(this,r),{fn:e,thisArg:this,args:r})).then(s).catch(i)})}return n}const py=t=>t();function V5(t=py){const e=Z(!0);function n(){e.value=!1}function r(){e.value=!0}const s=(...i)=>{e.value&&t(...i)};return{isActive:$h(e),pause:n,resume:r,eventFilter:s}}function F5(t){return t||pr()}function $5(t,e,n={}){const{eventFilter:r=py,...s}=n;return xn(t,O5(r,e),s)}function U5(t,e,n={}){const{eventFilter:r,...s}=n,{eventFilter:i,pause:o,resume:a,isActive:l}=V5(r);return{stop:$5(t,e,{...s,eventFilter:i}),pause:o,resume:a,isActive:l}}function B5(t,e=!0,n){F5()?Mn(t,n):e?t():Go(t)}function j5(t){var e;const n=fd(t);return(e=n==null?void 0:n.$el)!=null?e:n}const Cl=L5?window:void 0;function pp(...t){let e,n,r,s;if(typeof t[0]=="string"||Array.isArray(t[0])?([n,r,s]=t,e=Cl):[e,n,r,s]=t,!e)return M5;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const i=[],o=()=>{i.forEach(u=>u()),i.length=0},a=(u,f,h,p)=>(u.addEventListener(f,h,p),()=>u.removeEventListener(f,h,p)),l=xn(()=>[j5(e),fd(s)],([u,f])=>{if(o(),!u)return;const h=x5(f)?{...f}:f;i.push(...n.flatMap(p=>r.map(g=>a(u,p,g,h))))},{immediate:!0,flush:"post"}),c=()=>{l(),o()};return N5(c),c}const La=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Da="__vueuse_ssr_handlers__",W5=H5();function H5(){return Da in La||(La[Da]=La[Da]||{}),La[Da]}function q5(t,e){return W5[t]||e}function G5(t){return t==null?"any":t instanceof Set?"set":t instanceof Map?"map":t instanceof Date?"date":typeof t=="boolean"?"boolean":typeof t=="string"?"string":typeof t=="object"?"object":Number.isNaN(t)?"any":"number"}const K5={boolean:{read:t=>t==="true",write:t=>String(t)},object:{read:t=>JSON.parse(t),write:t=>JSON.stringify(t)},number:{read:t=>Number.parseFloat(t),write:t=>String(t)},any:{read:t=>t,write:t=>String(t)},string:{read:t=>t,write:t=>String(t)},map:{read:t=>new Map(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t.entries()))},set:{read:t=>new Set(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t))},date:{read:t=>new Date(t),write:t=>t.toISOString()}},gp="vueuse-storage";function z5(t,e,n,r={}){var s;const{flush:i="pre",deep:o=!0,listenToStorageChanges:a=!0,writeDefaults:l=!0,mergeDefaults:c=!1,shallow:u,window:f=Cl,eventFilter:h,onError:p=M=>{console.error(M)},initOnMounted:g}=r,E=(u?qo:Z)(typeof e=="function"?e():e);if(!n)try{n=q5("getDefaultStorage",()=>{var M;return(M=Cl)==null?void 0:M.localStorage})()}catch(M){p(M)}if(!n)return E;const v=fd(e),_=G5(v),w=(s=r.serializer)!=null?s:K5[_],{pause:T,resume:b}=U5(E,()=>S(E.value),{flush:i,deep:o,eventFilter:h});f&&a&&B5(()=>{pp(f,"storage",P),pp(f,gp,k),g&&P()}),g||P();function N(M,D){f&&f.dispatchEvent(new CustomEvent(gp,{detail:{key:t,oldValue:M,newValue:D,storageArea:n}}))}function S(M){try{const D=n.getItem(t);if(M==null)N(D,null),n.removeItem(t);else{const L=w.write(M);D!==L&&(n.setItem(t,L),N(D,L))}}catch(D){p(D)}}function V(M){const D=M?M.newValue:n.getItem(t);if(D==null)return l&&v!=null&&n.setItem(t,w.write(v)),v;if(!M&&c){const L=w.read(D);return typeof c=="function"?c(L,v):_==="object"&&!Array.isArray(L)?{...v,...L}:L}else return typeof D!="string"?D:w.read(D)}function P(M){if(!(M&&M.storageArea!==n)){if(M&&M.key==null){E.value=v;return}if(!(M&&M.key!==t)){T();try{(M==null?void 0:M.newValue)!==w.write(E.value)&&(E.value=V(M))}catch(D){p(D)}finally{M?Go(b):b()}}}}function k(M){P(M.detail)}return E}function on(t,e,n={}){const{window:r=Cl}=n;return z5(t,e,r==null?void 0:r.sessionStorage,n)}const ha=N_("RoomStore",{state:()=>({roomId:on("RoomStore$roomId",""),roomOwner:on("RoomStore$roomOwner",!1),gameStarted:on("RoomStore$gameStarted",!1),atLeastAGameStarted:on("RoomStore$atLeastAGameStarted",!1)}),actions:{setRoomId(t){this.roomId||(this.roomId=t)},setRoomOwner(t){this.roomOwner||(this.roomOwner=t)},setGameStartedStatus(t){this.gameStarted=t},setAtLeastAGameStartedStatus(t){this.atLeastAGameStarted=t}},persist:sessionStorage});function Q5(t){return fy(Z2(Ni,"rooms"),e=>{e.forEach(t)})}function Y5(t,e){return fy(ua(Ni,"rooms",t),n=>{e(n)})}async function X5({nickname:t}){const e=t.length===0,n=t.length<4;if(e)return{error:"pages.createRoom.errors.emptyNickname"};if(n)return{error:"pages.createRoom.errors.tooShortNickname"};try{const r=Z2(Ni,"rooms");return{result:await S5(r,{origin:XA,hostUser:t})}}catch(r){return console.error(r),{error:"pages.createRoom.errors.failedCreatingRoom",isFatalError:!0}}}async function J5({nickname:t,roomId:e}){const n=t.length===0,r=t.length<4,s=e.length===0;if(n)return{error:"pages.joinRoom.errors.emptyNickname"};if(r)return{error:"pages.joinRoom.errors.tooShortNickname"};if(s)return{error:"pages.joinRoom.errors.emptyRoomId"};try{const i=ua(Ni,"rooms",e),o=await hd(i);return o.exists()?o.data().guestUser?{error:"pages.joinRoom.errors.alreadyFilledRoom"}:(await hy(i,{guestUser:t}),ha().setRoomId(e),{isOk:!0}):{error:"pages.joinRoom.errors.noMatchingRoom"}}catch(i){return console.error(i),{error:"pages.joinRoom.errors.failedJoiningRoom",isFatalError:!0}}}async function Sr({newValues:t,roomId:e}){try{const n=ua(Ni,"rooms",e);return(await hd(n)).exists()?(await hy(n,t),{isOk:!0}):(console.error("No matching room when trying to update!"),{error:"page.generic.errors.failedUpdatingRoom",isFatalError:!0})}catch(n){return console.error(n),{error:"pages.generic.errors.failedUpdatingRoom",isFatalError:!0}}}async function Z5({roomId:t}){try{const e=ua(Ni,"rooms",t),n=await hd(e);return n.exists()?{isOk:!0,matchingDocument:n.data()}:(console.error("No matching room when trying to update!"),{error:"page.generic.errors.failedUpdatingRoom",isFatalError:!0})}catch(e){return console.error(e),{error:"pages.generic.errors.failedReadingRoom",isFatalError:!0}}}const e4="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M15.24%202H11.3458C9.58159%201.99999%208.18418%201.99997%207.09054%202.1476C5.96501%202.29953%205.05402%202.61964%204.33559%203.34096C3.61717%204.06227%203.29833%204.97692%203.14701%206.10697C2.99997%207.205%202.99999%208.60802%203%2010.3793V16.2169C3%2017.725%203.91995%2019.0174%205.22717%2019.5592C5.15989%2018.6498%205.15994%2017.3737%205.16%2016.312L5.16%2011.3976L5.16%2011.3024C5.15993%2010.0207%205.15986%208.91644%205.27828%208.03211C5.40519%207.08438%205.69139%206.17592%206.4253%205.43906C7.15921%204.70219%208.06404%204.41485%209.00798%204.28743C9.88877%204.16854%2010.9887%204.1686%2012.2652%204.16867L12.36%204.16868H15.24L15.3348%204.16867C16.6113%204.1686%2017.7088%204.16854%2018.5896%204.28743C18.0627%202.94779%2016.7616%202%2015.24%202Z'%20fill='%231C274C'/%3e%3cpath%20d='M6.6001%2011.3974C6.6001%208.67119%206.6001%207.3081%207.44363%206.46118C8.28716%205.61426%209.64481%205.61426%2012.3601%205.61426H15.2401C17.9554%205.61426%2019.313%205.61426%2020.1566%206.46118C21.0001%207.3081%2021.0001%208.6712%2021.0001%2011.3974V16.2167C21.0001%2018.9429%2021.0001%2020.306%2020.1566%2021.1529C19.313%2021.9998%2017.9554%2021.9998%2015.2401%2021.9998H12.3601C9.64481%2021.9998%208.28716%2021.9998%207.44363%2021.1529C6.6001%2020.306%206.6001%2018.9429%206.6001%2016.2167V11.3974Z'%20fill='%231C274C'/%3e%3c/svg%3e",Vs=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},t4={id:"root"},n4={key:0},r4=["src"],s4={__name:"HomePage",setup(t){const{t:e}=Er(),n=tf(),r=ha();function s(){n.push({path:"/create-room",replace:!0})}function i(){n.push({path:"/join-room",replace:!0})}async function o(){await navigator.clipboard.writeText(r.roomId),cr({text:e("pages.home.roomIdCopied")})}const a=Z();function l(f){const h=f.data(),g=r.roomId===f.id,E=![null,void 0].includes(h.guestUser),v=r.roomOwner;g&&E&&v&&n.push({path:"/game",replace:!0})}async function c(){a.value=Q5(l)}function u(){a.value&&a.value()}return Mn(c),ti(u),(f,h)=>(Q(),ce("div",t4,[W("h2",null,Ge($(e)("pages.home.title")),1),$(r).roomId&&$(r).roomOwner?(Q(),ce("div",n4,[Yh(Ge($(e)("pages.home.yourRoom"))+" : #"+Ge($(r).roomId)+" ",1),W("button",{onClick:o,class:"copyButton"},[W("img",{src:$(e4),width:"20",height:"20"},null,8,r4)])])):jt("",!0),$(r).roomId?jt("",!0):(Q(),ce("button",{key:1,onClick:s},Ge($(e)("pages.home.createRoom")),1)),$(r).roomId?jt("",!0):(Q(),ce("button",{key:2,onClick:i},Ge($(e)("pages.home.joinRoom")),1))]))}},i4=Vs(s4,[["__scopeId","data-v-a6ae8f26"]]),o4={id:"root"},a4=["placeholder"],l4={key:0,id:"button"},c4={__name:"CreateRoomPage",setup(t){const{t:e}=Er(),n=tf(),r=ha(),s=Z(!0),i=Z(),o=Z(e("pages.createRoom.placeholders.nickname")),a=async()=>{const c=i.value.value,u=await X5({nickname:c});if(u.hasOwnProperty("error"))alert(e(u.error)),u.isFatalError&&n.push({path:"/",replace:!0});else{s.value=!1;const h=u.result.id;r.setRoomId(h),r.setRoomOwner(!0),n.push({path:"/",replace:!0})}};function l(){n.push({path:"/",replace:!0})}return(c,u)=>(Q(),ce("div",o4,[W("header",null,[W("h2",null,Ge($(e)("pages.createRoom.title")),1)]),W("section",null,[W("table",null,[W("tr",null,[W("td",null,Ge($(e)("pages.createRoom.labels.nickname")),1),W("td",null,[W("input",{type:"text",placeholder:o.value,ref_key:"nicknameField",ref:i},null,8,a4)])])]),s.value?(Q(),ce("div",l4,[W("button",{class:"ok",onClick:a},Ge($(e)("pages.createRoom.submit")),1),W("button",{class:"cancel",onClick:l},Ge($(e)("pages.createRoom.cancel")),1)])):jt("",!0)])]))}},u4=Vs(c4,[["__scopeId","data-v-a9e5fa03"]]),h4="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9.5%202C8.67157%202%208%202.67157%208%203.5V4.5C8%205.32843%208.67157%206%209.5%206H14.5C15.3284%206%2016%205.32843%2016%204.5V3.5C16%202.67157%2015.3284%202%2014.5%202H9.5Z'%20fill='%231C274C'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M6.5%204.03662C5.24209%204.10719%204.44798%204.30764%203.87868%204.87694C3%205.75562%203%207.16983%203%209.99826V15.9983C3%2018.8267%203%2020.2409%203.87868%2021.1196C4.75736%2021.9983%206.17157%2021.9983%209%2021.9983H15C17.8284%2021.9983%2019.2426%2021.9983%2020.1213%2021.1196C21%2020.2409%2021%2018.8267%2021%2015.9983V9.99826C21%207.16983%2021%205.75562%2020.1213%204.87694C19.552%204.30764%2018.7579%204.10719%2017.5%204.03662V4.5C17.5%206.15685%2016.1569%207.5%2014.5%207.5H9.5C7.84315%207.5%206.5%206.15685%206.5%204.5V4.03662ZM7%2013.75C6.58579%2013.75%206.25%2014.0858%206.25%2014.5C6.25%2014.9142%206.58579%2015.25%207%2015.25H15C15.4142%2015.25%2015.75%2014.9142%2015.75%2014.5C15.75%2014.0858%2015.4142%2013.75%2015%2013.75H7ZM7%2017.25C6.58579%2017.25%206.25%2017.5858%206.25%2018C6.25%2018.4142%206.58579%2018.75%207%2018.75H12.5C12.9142%2018.75%2013.25%2018.4142%2013.25%2018C13.25%2017.5858%2012.9142%2017.25%2012.5%2017.25H7Z'%20fill='%231C274C'/%3e%3c/svg%3e",f4={id:"root"},d4=["placeholder"],m4=["placeholder"],p4=["src"],g4={key:0,id:"button"},_4={__name:"JoinRoomPage",setup(t){const{t:e}=Er(),n=tf(),r=ha(),s=Z(!0),i=Z(),o=Z(),a=Z(e("pages.joinRoom.placeholders.nickname")),l=Z(e("pages.joinRoom.placeholders.roomId"));async function c(){const h=i.value.value,p=o.value.value,g=await J5({nickname:h,roomId:p});g.hasOwnProperty("error")?(alert(e(g.error)),g.isFatalError&&n.push({path:"/",replace:!0})):(s.value=!1,r.setRoomId(p),r.setRoomOwner(!1),n.push({path:"/game",replace:!0}))}async function u(){const h=await navigator.clipboard.readText();try{o.value.value=h}catch(p){console.error(p)}}function f(){n.push({path:"/",replace:!0})}return(h,p)=>(Q(),ce("div",f4,[W("header",null,[W("h2",null,Ge($(e)("pages.joinRoom.title")),1)]),W("section",null,[W("table",null,[W("tr",null,[W("td",null,Ge($(e)("pages.joinRoom.labels.nickname")),1),W("td",null,[W("input",{type:"text",placeholder:a.value,ref_key:"nicknameField",ref:i},null,8,d4)])]),W("tr",null,[W("td",null,Ge($(e)("pages.joinRoom.labels.roomId")),1),W("td",null,[W("input",{type:"text",placeholder:l.value,ref_key:"roomIdField",ref:o},null,8,m4),W("button",{onClick:u},[W("img",{src:$(h4),width:"20",height:"20"},null,8,p4)])])])]),s.value?(Q(),ce("div",g4,[W("button",{class:"ok",onClick:c},Ge($(e)("pages.joinRoom.submit")),1),W("button",{class:"cancel",onClick:f},Ge($(e)("pages.joinRoom.cancel")),1)])):jt("",!0)])]))}},y4=Vs(_4,[["__scopeId","data-v-ad4314f9"]]);function us(t){return new Promise(e=>setTimeout(e,t))}/**
 * @license
 * Copyright (c) 2023, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const Bt="w",In="b",St="p",Sh="n",Ga="b",Zi="r",Ur="q",wt="k",Ka="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",rn=-1,v4={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},Se={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},Me={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},_u={b:[16,32,17,15],w:[-16,-32,-17,-15]},_p={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},E4=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],w4=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],b4={p:1,n:2,b:4,r:8,q:16,k:32},T4="pnbrqkPNBRQK",yp=[Sh,Ga,Zi,Ur],I4=7,C4=6,A4=1,S4=0,xa={[wt]:Se.KSIDE_CASTLE,[Ur]:Se.QSIDE_CASTLE},Rr={w:[{square:Me.a1,flag:Se.QSIDE_CASTLE},{square:Me.h1,flag:Se.KSIDE_CASTLE}],b:[{square:Me.a8,flag:Se.QSIDE_CASTLE},{square:Me.h8,flag:Se.KSIDE_CASTLE}]},R4={b:A4,w:C4},P4=["1-0","0-1","1/2-1/2","*"];function Cs(t){return t>>4}function jo(t){return t&15}function gy(t){return"0123456789".indexOf(t)!==-1}function pn(t){const e=jo(t),n=Cs(t);return"abcdefgh".substring(e,e+1)+"87654321".substring(n,n+1)}function ji(t){return t===Bt?In:Bt}function k4(t){const e=t.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const n=parseInt(e[5],10);if(isNaN(n)||n<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const r=parseInt(e[4],10);if(isNaN(r)||r<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const s=e[0].split("/");if(s.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let o=0;o<s.length;o++){let a=0,l=!1;for(let c=0;c<s[o].length;c++)if(gy(s[o][c])){if(l)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};a+=parseInt(s[o][c],10),l=!0}else{if(!/^[prnbqkPRNBQK]$/.test(s[o][c]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};a+=1,l=!1}if(a!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const i=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:o,regex:a}of i){if(!a.test(e[0]))return{ok:!1,error:"Invalid FEN: missing ".concat(o," king")};if((e[0].match(a)||[]).length>1)return{ok:!1,error:"Invalid FEN: too many ".concat(o," kings")}}return Array.from(s[0]+s[7]).some(o=>o.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function N4(t,e){const n=t.from,r=t.to,s=t.piece;let i=0,o=0,a=0;for(let l=0,c=e.length;l<c;l++){const u=e[l].from,f=e[l].to,h=e[l].piece;s===h&&n!==u&&r===f&&(i++,Cs(n)===Cs(u)&&o++,jo(n)===jo(u)&&a++)}return i>0?o>0&&a>0?pn(n):a>0?pn(n).charAt(1):pn(n).charAt(0):""}function Pr(t,e,n,r,s,i=void 0,o=Se.NORMAL){const a=Cs(r);if(s===St&&(a===I4||a===S4))for(let l=0;l<yp.length;l++){const c=yp[l];t.push({color:e,from:n,to:r,piece:s,captured:i,promotion:c,flags:o|Se.PROMOTION})}else t.push({color:e,from:n,to:r,piece:s,captured:i,flags:o})}function vp(t){let e=t.charAt(0);return e>="a"&&e<="h"?t.match(/[a-h]\d.*[a-h]\d/)?void 0:St:(e=e.toLowerCase(),e==="o"?wt:e)}function yu(t){return t.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function vu(t){return t.split(" ").slice(0,4).join(" ")}class Ep{constructor(e=Ka){wn(this,"_board",new Array(128));wn(this,"_turn",Bt);wn(this,"_header",{});wn(this,"_kings",{w:rn,b:rn});wn(this,"_epSquare",-1);wn(this,"_halfMoves",0);wn(this,"_moveNumber",0);wn(this,"_history",[]);wn(this,"_comments",{});wn(this,"_castling",{w:0,b:0});wn(this,"_positionCount",{});this.load(e)}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:rn,b:rn},this._turn=Bt,this._castling={w:0,b:0},this._epSquare=rn,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{},this._positionCount={},delete this._header.SetUp,delete this._header.FEN}removeHeader(e){e in this._header&&delete this._header[e]}load(e,{skipValidation:n=!1,preserveHeaders:r=!1}={}){let s=e.split(/\s+/);if(s.length>=2&&s.length<6){const a=["-","-","0","1"];e=s.concat(a.slice(-(6-s.length))).join(" ")}if(s=e.split(/\s+/),!n){const{ok:a,error:l}=k4(e);if(!a)throw new Error(l)}const i=s[0];let o=0;this.clear({preserveHeaders:r});for(let a=0;a<i.length;a++){const l=i.charAt(a);if(l==="/")o+=8;else if(gy(l))o+=parseInt(l,10);else{const c=l<"a"?Bt:In;this._put({type:l.toLowerCase(),color:c},pn(o)),o++}}this._turn=s[1],s[2].indexOf("K")>-1&&(this._castling.w|=Se.KSIDE_CASTLE),s[2].indexOf("Q")>-1&&(this._castling.w|=Se.QSIDE_CASTLE),s[2].indexOf("k")>-1&&(this._castling.b|=Se.KSIDE_CASTLE),s[2].indexOf("q")>-1&&(this._castling.b|=Se.QSIDE_CASTLE),this._epSquare=s[3]==="-"?rn:Me[s[3]],this._halfMoves=parseInt(s[4],10),this._moveNumber=parseInt(s[5],10),this._updateSetup(e),this._incPositionCount(e)}fen(){var i,o;let e=0,n="";for(let a=Me.a8;a<=Me.h1;a++){if(this._board[a]){e>0&&(n+=e,e=0);const{color:l,type:c}=this._board[a];n+=l===Bt?c.toUpperCase():c.toLowerCase()}else e++;a+1&136&&(e>0&&(n+=e),a!==Me.h1&&(n+="/"),e=0,a+=8)}let r="";this._castling[Bt]&Se.KSIDE_CASTLE&&(r+="K"),this._castling[Bt]&Se.QSIDE_CASTLE&&(r+="Q"),this._castling[In]&Se.KSIDE_CASTLE&&(r+="k"),this._castling[In]&Se.QSIDE_CASTLE&&(r+="q"),r=r||"-";let s="-";if(this._epSquare!==rn){const a=this._epSquare+(this._turn===Bt?16:-16),l=[a+1,a-1];for(const c of l){if(c&136)continue;const u=this._turn;if(((i=this._board[c])==null?void 0:i.color)===u&&((o=this._board[c])==null?void 0:o.type)===St){this._makeMove({color:u,from:c,to:this._epSquare,piece:St,captured:St,flags:Se.EP_CAPTURE});const f=!this._isKingAttacked(u);if(this._undoMove(),f){s=pn(this._epSquare);break}}}}return[n,this._turn,r,s,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(e){this._history.length>0||(e!==Ka?(this._header.SetUp="1",this._header.FEN=e):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(Ka)}get(e){return this._board[Me[e]]||!1}put({type:e,color:n},r){return this._put({type:e,color:n},r)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_put({type:e,color:n},r){if(T4.indexOf(e.toLowerCase())===-1||!(r in Me))return!1;const s=Me[r];if(e==wt&&!(this._kings[n]==rn||this._kings[n]==s))return!1;const i=this._board[s];return i&&i.type===wt&&(this._kings[i.color]=rn),this._board[s]={type:e,color:n},e===wt&&(this._kings[n]=s),!0}remove(e){const n=this.get(e);return delete this._board[Me[e]],n&&n.type===wt&&(this._kings[n.color]=rn),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),n}_updateCastlingRights(){var r,s,i,o,a,l,c,u,f,h,p,g;const e=((r=this._board[Me.e1])==null?void 0:r.type)===wt&&((s=this._board[Me.e1])==null?void 0:s.color)===Bt,n=((i=this._board[Me.e8])==null?void 0:i.type)===wt&&((o=this._board[Me.e8])==null?void 0:o.color)===In;(!e||((a=this._board[Me.a1])==null?void 0:a.type)!==Zi||((l=this._board[Me.a1])==null?void 0:l.color)!==Bt)&&(this._castling.w&=~Se.QSIDE_CASTLE),(!e||((c=this._board[Me.h1])==null?void 0:c.type)!==Zi||((u=this._board[Me.h1])==null?void 0:u.color)!==Bt)&&(this._castling.w&=~Se.KSIDE_CASTLE),(!n||((f=this._board[Me.a8])==null?void 0:f.type)!==Zi||((h=this._board[Me.a8])==null?void 0:h.color)!==In)&&(this._castling.b&=~Se.QSIDE_CASTLE),(!n||((p=this._board[Me.h8])==null?void 0:p.type)!==Zi||((g=this._board[Me.h8])==null?void 0:g.color)!==In)&&(this._castling.b&=~Se.KSIDE_CASTLE)}_updateEnPassantSquare(){var i,o;if(this._epSquare===rn)return;const e=this._epSquare+(this._turn===Bt?-16:16),n=this._epSquare+(this._turn===Bt?16:-16),r=[n+1,n-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||((i=this._board[n])==null?void 0:i.color)!==ji(this._turn)||((o=this._board[n])==null?void 0:o.type)!==St){this._epSquare=rn;return}const s=a=>{var l,c;return!(a&136)&&((l=this._board[a])==null?void 0:l.color)===this._turn&&((c=this._board[a])==null?void 0:c.type)===St};r.some(s)||(this._epSquare=rn)}_attacked(e,n){for(let r=Me.a8;r<=Me.h1;r++){if(r&136){r+=7;continue}if(this._board[r]===void 0||this._board[r].color!==e)continue;const s=this._board[r],i=r-n;if(i===0)continue;const o=i+119;if(E4[o]&b4[s.type]){if(s.type===St){if(i>0){if(s.color===Bt)return!0}else if(s.color===In)return!0;continue}if(s.type==="n"||s.type==="k")return!0;const a=w4[o];let l=r+a,c=!1;for(;l!==n;){if(this._board[l]!=null){c=!0;break}l+=a}if(!c)return!0}}return!1}_isKingAttacked(e){const n=this._kings[e];return n===-1?!1:this._attacked(ji(e),n)}isAttacked(e,n){return this._attacked(n,Me[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},n=[];let r=0,s=0;for(let i=Me.a8;i<=Me.h1;i++){if(s=(s+1)%2,i&136){i+=7;continue}const o=this._board[i];o&&(e[o.type]=o.type in e?e[o.type]+1:1,o.type===Ga&&n.push(s),r++)}if(r===2)return!0;if(r===3&&(e[Ga]===1||e[Sh]===1))return!0;if(r===e[Ga]+2){let i=0;const o=n.length;for(let a=0;a<o;a++)i+=n[a];if(i===0||i===o)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this.fen())>=3}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:e=!1,square:n=void 0,piece:r=void 0}={}){const s=this._moves({square:n,piece:r});return e?s.map(i=>this._makePretty(i)):s.map(i=>this._moveToSan(i,s))}_moves({legal:e=!0,piece:n=void 0,square:r=void 0}={}){var p;const s=r?r.toLowerCase():void 0,i=n==null?void 0:n.toLowerCase(),o=[],a=this._turn,l=ji(a);let c=Me.a8,u=Me.h1,f=!1;if(s)if(s in Me)c=u=Me[s],f=!0;else return[];for(let g=c;g<=u;g++){if(g&136){g+=7;continue}if(!this._board[g]||this._board[g].color===l)continue;const{type:E}=this._board[g];let v;if(E===St){if(i&&i!==E)continue;v=g+_u[a][0],this._board[v]||(Pr(o,a,g,v,St),v=g+_u[a][1],R4[a]===Cs(g)&&!this._board[v]&&Pr(o,a,g,v,St,void 0,Se.BIG_PAWN));for(let _=2;_<4;_++)v=g+_u[a][_],!(v&136)&&(((p=this._board[v])==null?void 0:p.color)===l?Pr(o,a,g,v,St,this._board[v].type,Se.CAPTURE):v===this._epSquare&&Pr(o,a,g,v,St,St,Se.EP_CAPTURE))}else{if(i&&i!==E)continue;for(let _=0,w=_p[E].length;_<w;_++){const T=_p[E][_];for(v=g;v+=T,!(v&136);){if(!this._board[v])Pr(o,a,g,v,E);else{if(this._board[v].color===a)break;Pr(o,a,g,v,E,this._board[v].type,Se.CAPTURE);break}if(E===Sh||E===wt)break}}}}if((i===void 0||i===wt)&&(!f||u===this._kings[a])){if(this._castling[a]&Se.KSIDE_CASTLE){const g=this._kings[a],E=g+2;!this._board[g+1]&&!this._board[E]&&!this._attacked(l,this._kings[a])&&!this._attacked(l,g+1)&&!this._attacked(l,E)&&Pr(o,a,this._kings[a],E,wt,void 0,Se.KSIDE_CASTLE)}if(this._castling[a]&Se.QSIDE_CASTLE){const g=this._kings[a],E=g-2;!this._board[g-1]&&!this._board[g-2]&&!this._board[g-3]&&!this._attacked(l,this._kings[a])&&!this._attacked(l,g-1)&&!this._attacked(l,E)&&Pr(o,a,this._kings[a],E,wt,void 0,Se.QSIDE_CASTLE)}}if(!e||this._kings[a]===-1)return o;const h=[];for(let g=0,E=o.length;g<E;g++)this._makeMove(o[g]),this._isKingAttacked(a)||h.push(o[g]),this._undoMove();return h}move(e,{strict:n=!1}={}){let r=null;if(typeof e=="string")r=this._moveFromSan(e,n);else if(typeof e=="object"){const i=this._moves();for(let o=0,a=i.length;o<a;o++)if(e.from===pn(i[o].from)&&e.to===pn(i[o].to)&&(!("promotion"in i[o])||e.promotion===i[o].promotion)){r=i[o];break}}if(!r)throw typeof e=="string"?new Error("Invalid move: ".concat(e)):new Error("Invalid move: ".concat(JSON.stringify(e)));const s=this._makePretty(r);return this._makeMove(r),this._incPositionCount(s.after),s}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(e){const n=this._turn,r=ji(n);if(this._push(e),this._board[e.to]=this._board[e.from],delete this._board[e.from],e.flags&Se.EP_CAPTURE&&(this._turn===In?delete this._board[e.to-16]:delete this._board[e.to+16]),e.promotion&&(this._board[e.to]={type:e.promotion,color:n}),this._board[e.to].type===wt){if(this._kings[n]=e.to,e.flags&Se.KSIDE_CASTLE){const s=e.to-1,i=e.to+1;this._board[s]=this._board[i],delete this._board[i]}else if(e.flags&Se.QSIDE_CASTLE){const s=e.to+1,i=e.to-2;this._board[s]=this._board[i],delete this._board[i]}this._castling[n]=0}if(this._castling[n]){for(let s=0,i=Rr[n].length;s<i;s++)if(e.from===Rr[n][s].square&&this._castling[n]&Rr[n][s].flag){this._castling[n]^=Rr[n][s].flag;break}}if(this._castling[r]){for(let s=0,i=Rr[r].length;s<i;s++)if(e.to===Rr[r][s].square&&this._castling[r]&Rr[r][s].flag){this._castling[r]^=Rr[r][s].flag;break}}e.flags&Se.BIG_PAWN?n===In?this._epSquare=e.to-16:this._epSquare=e.to+16:this._epSquare=rn,e.piece===St?this._halfMoves=0:e.flags&(Se.CAPTURE|Se.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,n===In&&this._moveNumber++,this._turn=r}undo(){const e=this._undoMove();if(e){const n=this._makePretty(e);return this._decPositionCount(n.after),n}return null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;const n=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber;const r=this._turn,s=ji(r);if(this._board[n.from]=this._board[n.to],this._board[n.from].type=n.piece,delete this._board[n.to],n.captured)if(n.flags&Se.EP_CAPTURE){let i;r===In?i=n.to-16:i=n.to+16,this._board[i]={type:St,color:s}}else this._board[n.to]={type:n.captured,color:s};if(n.flags&(Se.KSIDE_CASTLE|Se.QSIDE_CASTLE)){let i,o;n.flags&Se.KSIDE_CASTLE?(i=n.to+1,o=n.to-1):(i=n.to-2,o=n.to+1),this._board[i]=this._board[o],delete this._board[o]}return n}pgn({newline:e="\n",maxWidth:n=0}={}){const r=[];let s=!1;for(const h in this._header)r.push("["+h+' "'+this._header[h]+'"]'+e),s=!0;s&&this._history.length&&r.push(e);const i=h=>{const p=this._comments[this.fen()];if(typeof p<"u"){const g=h.length>0?" ":"";h="".concat(h).concat(g,"{").concat(p,"}")}return h},o=[];for(;this._history.length>0;)o.push(this._undoMove());const a=[];let l="";for(o.length===0&&a.push(i(""));o.length>0;){l=i(l);const h=o.pop();if(!h)break;if(!this._history.length&&h.color==="b"){const p="".concat(this._moveNumber,". ...");l=l?"".concat(l," ").concat(p):p}else h.color==="w"&&(l.length&&a.push(l),l=this._moveNumber+".");l=l+" "+this._moveToSan(h,this._moves({legal:!0})),this._makeMove(h)}if(l.length&&a.push(i(l)),typeof this._header.Result<"u"&&a.push(this._header.Result),n===0)return r.join("")+a.join(" ");const c=function(){return r.length>0&&r[r.length-1]===" "?(r.pop(),!0):!1},u=function(h,p){for(const g of p.split(" "))if(g){if(h+g.length>n){for(;c();)h--;r.push(e),h=0}r.push(g),h+=g.length,r.push(" "),h++}return c()&&h--,h};let f=0;for(let h=0;h<a.length;h++){if(f+a[h].length>n&&a[h].includes("{")){f=u(f,a[h]);continue}f+a[h].length>n&&h!==0?(r[r.length-1]===" "&&r.pop(),r.push(e),f=0):h!==0&&(r.push(" "),f++),r.push(a[h]),f+=a[h].length}return r.join("")}header(...e){for(let n=0;n<e.length;n+=2)typeof e[n]=="string"&&typeof e[n+1]=="string"&&(this._header[e[n]]=e[n+1]);return this._header}loadPgn(e,{strict:n=!1,newlineChar:r="\r?\n"}={}){function s(T){return T.replace(/\\/g,"\\")}function i(T){const b={},N=T.split(new RegExp(s(r)));let S="",V="";for(let P=0;P<N.length;P++){const k=/^\s*\[\s*([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;S=N[P].replace(k,"$1"),V=N[P].replace(k,"$2"),S.trim().length>0&&(b[S]=V)}return b}e=e.trim();const a=new RegExp("^(\\[((?:"+s(r)+")|.)*\\])((?:\\s*"+s(r)+"){2}|(?:\\s*"+s(r)+")*$)").exec(e),l=a&&a.length>=2?a[1]:"";this.reset();const c=i(l);let u="";for(const T in c)T.toLowerCase()==="fen"&&(u=c[T]),this.header(T,c[T]);if(!n)u&&this.load(u,{preserveHeaders:!0});else if(c.SetUp==="1"){if(!("FEN"in c))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(c.FEN,{preserveHeaders:!0})}function f(T){return Array.from(T).map(function(b){return b.charCodeAt(0)<128?b.charCodeAt(0).toString(16):encodeURIComponent(b).replace(/%/g,"").toLowerCase()}).join("")}function h(T){return T.length==0?"":decodeURIComponent("%"+(T.match(/.{1,2}/g)||[]).join("%"))}const p=function(T){return T=T.replace(new RegExp(s(r),"g")," "),"{".concat(f(T.slice(1,T.length-1)),"}")},g=function(T){if(T.startsWith("{")&&T.endsWith("}"))return h(T.slice(1,T.length-1))};let E=e.replace(l,"").replace(new RegExp("({[^}]*})+?|;([^".concat(s(r),"]*)"),"g"),function(T,b,N){return b!==void 0?p(b):" "+p("{".concat(N.slice(1),"}"))}).replace(new RegExp(s(r),"g")," ");const v=/(\([^()]+\))+?/g;for(;v.test(E);)E=E.replace(v,"");E=E.replace(/\d+\.(\.\.)?/g,""),E=E.replace(/\.\.\./g,""),E=E.replace(/\$\d+/g,"");let _=E.trim().split(new RegExp(/\s+/));_=_.filter(T=>T!=="");let w="";for(let T=0;T<_.length;T++){const b=g(_[T]);if(b!==void 0){this._comments[this.fen()]=b;continue}const N=this._moveFromSan(_[T],n);if(N==null)if(P4.indexOf(_[T])>-1)w=_[T];else throw new Error("Invalid move in PGN: ".concat(_[T]));else w="",this._makeMove(N),this._incPositionCount(this.fen())}w&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",w)}_moveToSan(e,n){let r="";if(e.flags&Se.KSIDE_CASTLE)r="O-O";else if(e.flags&Se.QSIDE_CASTLE)r="O-O-O";else{if(e.piece!==St){const s=N4(e,n);r+=e.piece.toUpperCase()+s}e.flags&(Se.CAPTURE|Se.EP_CAPTURE)&&(e.piece===St&&(r+=pn(e.from)[0]),r+="x"),r+=pn(e.to),e.promotion&&(r+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?r+="#":r+="+"),this._undoMove(),r}_moveFromSan(e,n=!1){const r=yu(e);let s=vp(r),i=this._moves({legal:!0,piece:s});for(let h=0,p=i.length;h<p;h++)if(r===yu(this._moveToSan(i[h],i)))return i[h];if(n)return null;let o,a,l,c,u,f=!1;if(a=r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),a?(o=a[1],l=a[2],c=a[3],u=a[4],l.length==1&&(f=!0)):(a=r.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),a&&(o=a[1],l=a[2],c=a[3],u=a[4],l.length==1&&(f=!0))),s=vp(r),i=this._moves({legal:!0,piece:o||s}),!c)return null;for(let h=0,p=i.length;h<p;h++)if(l){if((!o||o.toLowerCase()==i[h].piece)&&Me[l]==i[h].from&&Me[c]==i[h].to&&(!u||u.toLowerCase()==i[h].promotion))return i[h];if(f){const g=pn(i[h].from);if((!o||o.toLowerCase()==i[h].piece)&&Me[c]==i[h].to&&(l==g[0]||l==g[1])&&(!u||u.toLowerCase()==i[h].promotion))return i[h]}}else if(r===yu(this._moveToSan(i[h],i)).replace("x",""))return i[h];return null}ascii(){let e="   +------------------------+\n";for(let n=Me.a8;n<=Me.h1;n++){if(jo(n)===0&&(e+=" "+"87654321"[Cs(n)]+" |"),this._board[n]){const r=this._board[n].type,i=this._board[n].color===Bt?r.toUpperCase():r.toLowerCase();e+=" "+i+" "}else e+=" . ";n+1&136&&(e+="|\n",n+=8)}return e+="   +------------------------+\n",e+="     a  b  c  d  e  f  g  h",e}perft(e){const n=this._moves({legal:!1});let r=0;const s=this._turn;for(let i=0,o=n.length;i<o;i++)this._makeMove(n[i]),this._isKingAttacked(s)||(e-1>0?r+=this.perft(e-1):r++),this._undoMove();return r}_makePretty(e){const{color:n,piece:r,from:s,to:i,flags:o,captured:a,promotion:l}=e;let c="";for(const p in Se)Se[p]&o&&(c+=v4[p]);const u=pn(s),f=pn(i),h={color:n,piece:r,from:u,to:f,san:this._moveToSan(e,this._moves({legal:!0})),flags:c,lan:u+f,before:this.fen(),after:""};return this._makeMove(e),h.after=this.fen(),this._undoMove(),a&&(h.captured=a),l&&(h.promotion=l,h.lan+=l),h}turn(){return this._turn}board(){const e=[];let n=[];for(let r=Me.a8;r<=Me.h1;r++)this._board[r]==null?n.push(null):n.push({square:pn(r),type:this._board[r].type,color:this._board[r].color}),r+1&136&&(e.push(n),n=[],r+=8);return e}squareColor(e){if(e in Me){const n=Me[e];return(Cs(n)+jo(n))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const n=[],r=[];for(;this._history.length>0;)n.push(this._undoMove());for(;;){const s=n.pop();if(!s)break;e?r.push(this._makePretty(s)):r.push(this._moveToSan(s,this._moves())),this._makeMove(s)}return r}_getPositionCount(e){const n=vu(e);return this._positionCount[n]||0}_incPositionCount(e){const n=vu(e);this._positionCount[n]===void 0&&(this._positionCount[n]=0),this._positionCount[n]+=1}_decPositionCount(e){const n=vu(e);this._positionCount[n]===1?delete this._positionCount[n]:this._positionCount[n]-=1}_pruneComments(){const e=[],n={},r=s=>{s in this._comments&&(n[s]=this._comments[s])};for(;this._history.length>0;)e.push(this._undoMove());for(r(this.fen());;){const s=e.pop();if(!s)break;this._makeMove(s),r(this.fen())}this._comments=n}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const n=this._comments[e];return delete this._comments[e],{fen:e,comment:n}})}setCastlingRights(e,n){for(const s of[wt,Ur])n[s]!==void 0&&(n[s]?this._castling[e]|=xa[s]:this._castling[e]&=~xa[s]);this._updateCastlingRights();const r=this.getCastlingRights(e);return(n[wt]===void 0||n[wt]===r[wt])&&(n[Ur]===void 0||n[Ur]===r[Ur])}getCastlingRights(e){return{[wt]:(this._castling[e]&xa[wt])!==0,[Ur]:(this._castling[e]&xa[Ur])!==0}}moveNumber(){return this._moveNumber}}function $n(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function ks(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const _y=6048e5,L4=864e5;let D4={};function Cc(){return D4}function Wo(t,e){var a,l,c,u,f,h,p,g;const n=Cc(),r=(g=(p=(u=(c=e==null?void 0:e.weekStartsOn)!=null?c:(l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)!=null?u:n.weekStartsOn)!=null?p:(h=(f=n.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)!=null?g:0,s=$n(t),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Al(t){return Wo(t,{weekStartsOn:1})}function yy(t){const e=$n(t),n=e.getFullYear(),r=ks(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=Al(r),i=ks(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=Al(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function wp(t){const e=$n(t);return e.setHours(0,0,0,0),e}function bp(t){const e=$n(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function x4(t,e){const n=wp(t),r=wp(e),s=+n-bp(n),i=+r-bp(r);return Math.round((s-i)/L4)}function M4(t){const e=yy(t),n=ks(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Al(n)}function O4(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function V4(t){if(!O4(t)&&typeof t!="number")return!1;const e=$n(t);return!isNaN(Number(e))}function F4(t){const e=$n(t),n=ks(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const $4={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},U4=(t,e,n)=>{let r;const s=$4[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Eu(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const B4={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},j4={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},W4={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},H4={date:Eu({formats:B4,defaultWidth:"full"}),time:Eu({formats:j4,defaultWidth:"full"}),dateTime:Eu({formats:W4,defaultWidth:"full"})},q4={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},G4=(t,e,n,r)=>q4[t];function Wi(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[a]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const K4={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},z4={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Q4={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Y4={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},X4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},J4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Z4=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},eN={ordinalNumber:Z4,era:Wi({values:K4,defaultWidth:"wide"}),quarter:Wi({values:z4,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Wi({values:Q4,defaultWidth:"wide"}),day:Wi({values:Y4,defaultWidth:"wide"}),dayPeriod:Wi({values:X4,defaultWidth:"wide",formattingValues:J4,defaultFormattingWidth:"wide"})};function Hi(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?nN(a,f=>f.test(o)):tN(a,f=>f.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function tN(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function nN(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function rN(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const sN=/^(\d+)(th|st|nd|rd)?/i,iN=/\d+/i,oN={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},aN={any:[/^b/i,/^(a|c)/i]},lN={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},cN={any:[/1/i,/2/i,/3/i,/4/i]},uN={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},hN={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},fN={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},dN={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},mN={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},pN={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},gN={ordinalNumber:rN({matchPattern:sN,parsePattern:iN,valueCallback:t=>parseInt(t,10)}),era:Hi({matchPatterns:oN,defaultMatchWidth:"wide",parsePatterns:aN,defaultParseWidth:"any"}),quarter:Hi({matchPatterns:lN,defaultMatchWidth:"wide",parsePatterns:cN,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Hi({matchPatterns:uN,defaultMatchWidth:"wide",parsePatterns:hN,defaultParseWidth:"any"}),day:Hi({matchPatterns:fN,defaultMatchWidth:"wide",parsePatterns:dN,defaultParseWidth:"any"}),dayPeriod:Hi({matchPatterns:mN,defaultMatchWidth:"any",parsePatterns:pN,defaultParseWidth:"any"})},_N={code:"en-US",formatDistance:U4,formatLong:H4,formatRelative:G4,localize:eN,match:gN,options:{weekStartsOn:0,firstWeekContainsDate:1}};function yN(t){const e=$n(t);return x4(e,F4(e))+1}function vN(t){const e=$n(t),n=+Al(e)-+M4(e);return Math.round(n/_y)+1}function vy(t,e){var u,f,h,p,g,E,v,_;const n=$n(t),r=n.getFullYear(),s=Cc(),i=(_=(v=(p=(h=e==null?void 0:e.firstWeekContainsDate)!=null?h:(f=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)!=null?p:s.firstWeekContainsDate)!=null?v:(E=(g=s.locale)==null?void 0:g.options)==null?void 0:E.firstWeekContainsDate)!=null?_:1,o=ks(t,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const a=Wo(o,e),l=ks(t,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const c=Wo(l,e);return n.getTime()>=a.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function EN(t,e){var a,l,c,u,f,h,p,g;const n=Cc(),r=(g=(p=(u=(c=e==null?void 0:e.firstWeekContainsDate)!=null?c:(l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)!=null?u:n.firstWeekContainsDate)!=null?p:(h=(f=n.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)!=null?g:1,s=vy(t,e),i=ks(t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),Wo(i,e)}function wN(t,e){const n=$n(t),r=+Wo(n,e)-+EN(n,e);return Math.round(r/_y)+1}function Qe(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const kr={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Qe(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Qe(n+1,2)},d(t,e){return Qe(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Qe(t.getHours()%12||12,e.length)},H(t,e){return Qe(t.getHours(),e.length)},m(t,e){return Qe(t.getMinutes(),e.length)},s(t,e){return Qe(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Qe(s,e.length)}},Ws={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Tp={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return kr.y(t,e)},Y:function(t,e,n,r){const s=vy(t,r),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return Qe(o,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):Qe(i,e.length)},R:function(t,e){const n=yy(t);return Qe(n,e.length)},u:function(t,e){const n=t.getFullYear();return Qe(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Qe(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Qe(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return kr.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Qe(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=wN(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):Qe(s,e.length)},I:function(t,e,n){const r=vN(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Qe(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):kr.d(t,e)},D:function(t,e,n){const r=yN(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Qe(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Qe(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Qe(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return Qe(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Ws.noon:r===0?s=Ws.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Ws.evening:r>=12?s=Ws.afternoon:r>=4?s=Ws.morning:s=Ws.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return kr.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):kr.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Qe(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Qe(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):kr.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):kr.s(t,e)},S:function(t,e){return kr.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Cp(r);case"XXXX":case"XX":return hs(r);case"XXXXX":case"XXX":default:return hs(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return Cp(r);case"xxxx":case"xx":return hs(r);case"xxxxx":case"xxx":default:return hs(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Ip(r,":");case"OOOO":default:return"GMT"+hs(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Ip(r,":");case"zzzz":default:return"GMT"+hs(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Qe(r,e.length)},T:function(t,e,n){const r=t.getTime();return Qe(r,e.length)}};function Ip(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+Qe(i,2)}function Cp(t,e){return t%60===0?(t>0?"-":"+")+Qe(Math.abs(t)/60,2):hs(t,e)}function hs(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Qe(Math.trunc(r/60),2),i=Qe(r%60,2);return n+s+e+i}const Ap=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Ey=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},bN=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return Ap(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",Ap(r,e)).replace("{{time}}",Ey(s,e))},TN={p:Ey,P:bN},IN=/^D+$/,CN=/^Y+$/,AN=["D","DD","YY","YYYY"];function SN(t){return IN.test(t)}function RN(t){return CN.test(t)}function PN(t,e,n){const r=kN(t,e,n);if(console.warn(r),AN.includes(t))throw new RangeError(r)}function kN(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return"Use `".concat(t.toLowerCase(),"` instead of `").concat(t,"` (in `").concat(e,"`) for formatting ").concat(r," to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}const NN=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,LN=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,DN=/^'([^]*?)'?$/,xN=/''/g,MN=/[a-zA-Z]/;function ON(t,e,n){var u,f,h,p,g,E,v,_,w,T,b,N,S,V,P,k,M,D;const r=Cc(),s=(f=(u=n==null?void 0:n.locale)!=null?u:r.locale)!=null?f:_N,i=(T=(w=(E=(g=n==null?void 0:n.firstWeekContainsDate)!=null?g:(p=(h=n==null?void 0:n.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)!=null?E:r.firstWeekContainsDate)!=null?w:(_=(v=r.locale)==null?void 0:v.options)==null?void 0:_.firstWeekContainsDate)!=null?T:1,o=(D=(M=(V=(S=n==null?void 0:n.weekStartsOn)!=null?S:(N=(b=n==null?void 0:n.locale)==null?void 0:b.options)==null?void 0:N.weekStartsOn)!=null?V:r.weekStartsOn)!=null?M:(k=(P=r.locale)==null?void 0:P.options)==null?void 0:k.weekStartsOn)!=null?D:0,a=$n(t);if(!V4(a))throw new RangeError("Invalid time value");let l=e.match(LN).map(L=>{const G=L[0];if(G==="p"||G==="P"){const ge=TN[G];return ge(L,s.formatLong)}return L}).join("").match(NN).map(L=>{if(L==="''")return{isToken:!1,value:"'"};const G=L[0];if(G==="'")return{isToken:!1,value:VN(L)};if(Tp[G])return{isToken:!0,value:L};if(G.match(MN))throw new RangeError("Format string contains an unescaped latin alphabet character `"+G+"`");return{isToken:!1,value:L}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return l.map(L=>{if(!L.isToken)return L.value;const G=L.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&RN(G)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&SN(G))&&PN(G,e,String(t));const ge=Tp[G[0]];return ge(a,G,s.localize,c)}).join("")}function VN(t){const e=t.match(DN);return e?e[1].replace(xN,"'"):t}const FN=0,Sp=-1,Rp=1,Pp="4k3/8/8/8/8/8/8/4K3 w - - 0 1",$N="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23000000'%20width='800px'%20height='800px'%20viewBox='0%200%2056%2056'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M%209.2500%2047.0898%20L%2014.5703%2047.0898%20C%2016.6328%2047.0898%2017.6875%2046.0117%2017.6875%2043.9492%20L%2017.6875%2028.8789%20C%2017.6172%2028.5976%2017.5703%2028.2930%2017.5703%2027.9883%20C%2017.5703%2027.6602%2017.6172%2027.3555%2017.6875%2027.0742%20L%2017.6875%2012.0273%20C%2017.6875%209.8945%2016.6328%208.9102%2014.5703%208.9102%20L%209.2500%208.9102%20C%207.1875%208.9102%206.1094%209.9883%206.1094%2012.0273%20L%206.1094%2043.9492%20C%206.1094%2046.0117%207.1875%2047.0898%209.2500%2047.0898%20Z%20M%2046.5157%2046.3867%20C%2048.3671%2046.3867%2049.8906%2045.0039%2049.8906%2042.3789%20L%2049.8906%2013.5976%20C%2049.8906%2010.9727%2048.3671%209.5664%2046.5157%209.5664%20C%2045.5781%209.5664%2044.7813%209.8711%2043.8203%2010.4336%20L%2019.9375%2024.4961%20C%2018.6719%2025.2461%2017.9688%2026.1133%2017.6875%2027.0742%20L%2017.6875%2028.8789%20C%2017.9688%2029.8633%2018.6719%2030.7071%2019.9375%2031.4805%20L%2043.8203%2045.5195%20C%2044.7813%2046.0820%2045.5781%2046.3867%2046.5157%2046.3867%20Z'/%3e%3c/svg%3e",UN="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23000000'%20width='800px'%20height='800px'%20viewBox='0%200%2056%2056'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M%2025.1218%2044.5009%20C%2026.7084%2044.5009%2028.0509%2043.2804%2028.0509%2041.0225%20L%2028.0509%2029.3058%20C%2028.2747%2030.1601%2028.9053%2030.8924%2030.0037%2031.5434%20L%2050.7318%2043.7483%20C%2051.5454%2044.2365%2052.2369%2044.5009%2053.0709%2044.5009%20C%2054.6577%2044.5009%2056%2043.2804%2056%2041.0225%20L%2056%2016.0228%20C%2056%2013.7649%2054.6577%2012.5444%2053.0709%2012.5444%20C%2052.2369%2012.5444%2051.5658%2012.8088%2050.7318%2013.2970%20L%2030.0037%2025.5020%20C%2028.8849%2026.1529%2028.2747%2026.8852%2028.0509%2027.7395%20L%2028.0509%2016.0228%20C%2028.0509%2013.7649%2026.7084%2012.5444%2025.1218%2012.5444%20C%2024.2877%2012.5444%2023.6165%2012.8088%2022.7825%2013.2970%20L%202.0545%2025.5020%20C%20.6102%2026.3563%200%2027.3530%200%2028.5125%20C%200%2029.6923%20.6102%2030.6890%202.0545%2031.5434%20L%2022.7825%2043.7483%20C%2023.5962%2044.2365%2024.2877%2044.5009%2025.1218%2044.5009%20Z'/%3e%3c/svg%3e",BN="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23000000'%20width='800px'%20height='800px'%20viewBox='0%200%2056%2056'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M%202.9281%2044.4947%20C%203.7618%2044.4947%204.4531%2044.2304%205.2665%2043.7424%20L%2025.9869%2031.5420%20C%2027.1053%2030.8913%2027.7153%2030.1592%2027.9389%2029.3052%20L%2027.9389%2041.0176%20C%2027.9389%2043.2747%2029.2810%2044.4947%2030.8671%2044.4947%20C%2031.7007%2044.4947%2032.3921%2044.2304%2033.2055%2043.7424%20L%2053.9461%2031.5420%20C%2055.3695%2030.6879%2056%2029.6916%2056%2028.5122%20C%2056%2027.3531%2055.3695%2026.3568%2053.9461%2025.5028%20L%2033.2055%2013.3023%20C%2032.3921%2012.8143%2031.7007%2012.5500%2030.8671%2012.5500%20C%2029.2810%2012.5500%2027.9389%2013.7700%2027.9389%2016.0271%20L%2027.9389%2027.7395%20C%2027.7153%2026.8855%2027.1053%2026.1535%2025.9869%2025.5028%20L%205.2665%2013.3023%20C%204.4328%2012.8143%203.7618%2012.5500%202.9281%2012.5500%20C%201.3420%2012.5500%200%2013.7700%200%2016.0271%20L%200%2041.0176%20C%200%2043.2747%201.3420%2044.4947%202.9281%2044.4947%20Z'/%3e%3c/svg%3e",jN="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23000000'%20width='800px'%20height='800px'%20viewBox='0%200%2056%2056'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M%209.4844%2046.3867%20C%2010.4453%2046.3867%2011.2422%2046.0820%2012.1797%2045.5195%20L%2036.0625%2031.4805%20C%2037.3516%2030.7071%2038.0547%2029.8633%2038.3125%2028.8789%20L%2038.3125%2043.9492%20C%2038.3125%2046.0117%2039.3906%2047.0898%2041.4532%2047.0898%20L%2046.7735%2047.0898%20C%2048.8360%2047.0898%2049.8906%2046.0117%2049.8906%2043.9492%20L%2049.8906%2012.0273%20C%2049.8906%209.8945%2048.8360%208.9102%2046.7735%208.9102%20L%2041.4532%208.9102%20C%2039.3906%208.9102%2038.3125%209.9883%2038.3125%2012.0273%20L%2038.3125%2027.0742%20C%2038.0547%2026.1133%2037.3516%2025.2461%2036.0625%2024.4961%20L%2012.1797%2010.4336%20C%2011.2188%209.8711%2010.4453%209.5664%209.4844%209.5664%20C%207.6563%209.5664%206.1094%2010.9727%206.1094%2013.5976%20L%206.1094%2042.3789%20C%206.1094%2045.0039%207.6563%2046.3867%209.4844%2046.3867%20Z'/%3e%3c/svg%3e",WN={class:"root"},HN={key:0,class:"toolbar"},qN=["src"],GN=["src"],KN=["src"],zN=["src"],QN={key:0},YN=["onClick"],XN={__name:"ChessHistory",emits:["requestNodeSelected","requestStartPosition"],setup(t,{expose:e,emit:n}){const r=n,s=Z([]),i=Z(),o=Z(-1),a=Z(!1);function l(P,k){const M="".concat(P,".").concat(k?"":"..");a.value=!1,o.value=-1,s.value=[{number:M}]}function c(P){const{number:k,fan:M,san:D,fen:L,fromFileIndex:G,fromRankIndex:ge,toFileIndex:Ve,toRankIndex:me,whiteTurn:we}=P;if(s.value.length===1&&!s.value[0].fan){const tt={...s.value[0],fan:M,san:D,fen:L,fromFileIndex:G,fromRankIndex:ge,toFileIndex:Ve,toRankIndex:me,whiteTurn:we};s.value[0]=tt}else{const be="".concat(k,".").concat(we===!0?"":"..");s.value=[...s.value,{number:be,fan:M,san:D,fen:L,fromFileIndex:G,fromRankIndex:ge,toFileIndex:Ve,toRankIndex:me,whiteTurn:we}]}}function u(){document.querySelector(".main-content *:last-child").scrollIntoView()}async function f(P){if(P<0&&(P=-1),o.value=P,P>0){await us(50);const k=document.querySelector(".main-content > .selected");k&&k.scrollIntoView()}else document.querySelector(".main-content").scrollTo(0,0)}function h(){a.value&&r("requestStartPosition")}function p(){a.value&&h()}function g(){if(a.value){for(o.value-=1;o.value>=0&&!s.value[o.value].fen;o.value--);if(o.value>=0){const P=s.value[o.value],{fen:k,fromFileIndex:M,fromRankIndex:D,toFileIndex:L,toRankIndex:G}=P;r("requestNodeSelected",{nodeIndex:o.value,fen:k,fromFileIndex:M,fromRankIndex:D,toFileIndex:L,toRankIndex:G})}else p()}}function E(){if(!a.value)return;for(o.value+=1;o.value<s.value.length;o.value++);const P=s.value[o.value];if(!(P!=null&&P.fen)){g();return}const{fen:k,fromFileIndex:M,fromRankIndex:D,toFileIndex:L,toRankIndex:G}=s.value[o.value];r("requestNodeSelected",{nodeIndex:o.value,fen:k,fromFileIndex:M,fromRankIndex:D,toFileIndex:L,toRankIndex:G})}function v(){a.value=!0,E()}function _(P){const{fen:k,fromFileIndex:M,fromRankIndex:D,toFileIndex:L,toRankIndex:G}=s.value[P];a.value&&k&&r("requestNodeSelected",{nodeIndex:P,fen:k,fromFileIndex:M,fromRankIndex:D,toFileIndex:L,toRankIndex:G})}function w(P){return P===o.value}function T(){if(!a.value)return;for(o.value+=1;o.value<s.value.length&&!s.value[o.value].fen;o.value++);const P=s.value[o.value];P!=null&&P.fen||g();const{fen:k,fromFileIndex:M,fromRankIndex:D,toFileIndex:L,toRankIndex:G}=P;r("requestNodeSelected",{nodeIndex:o.value,fen:k,fromFileIndex:M,fromRankIndex:D,toFileIndex:L,toRankIndex:G})}function b(){return s.value.map(P=>P)}function N(P){s.value=P}function S(){return s.value[s.value.findLastIndex(P=>!0)]}function V(){return s.value.length}return e({reset:l,addNodeOrCompleteFirst:c,getNodes:b,setNodes:N,setSelectedNode:f,scrollToLastElement:u,activateNavigationMode:v,getLastNode:S,getNodesCount:V}),(P,k)=>(Q(),ce("div",WN,[a.value?(Q(),ce("div",HN,[W("button",{onClick:p,class:"toolbar__button"},[W("img",{src:$($N),width:"20",height:"20"},null,8,qN)]),W("button",{onClick:g,class:"toolbar__button"},[W("img",{src:$(UN),width:"20",height:"20"},null,8,GN)]),W("button",{onClick:T,class:"toolbar__button"},[W("img",{src:$(BN),width:"20",height:"20"},null,8,KN)]),W("button",{onClick:E,class:"toolbar__button"},[W("img",{src:$(jN),width:"20",height:"20"},null,8,zN)])])):jt("",!0),W("div",{class:"main-content",ref_key:"mainContent",ref:i},[(Q(!0),ce(Ze,null,qi(s.value,(M,D)=>{var L,G;return Q(),ce(Ze,{key:D},[M.whiteTurn||D===0?(Q(),ce("span",QN,Ge("".concat((L=M.number)!=null?L:"","")),1)):jt("",!0),W("button",{onClick:ge=>_(D),class:ut({selected:w(D)})},Ge("".concat((G=M.fan)!=null?G:"","")),11,YN)],64)}),128))],512)]))}},JN=Vs(XN,[["__scopeId","data-v-22dd577c"]]),ZN="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20512%20512'%20xml:space='preserve'%3e%3cg%3e%3cg%3e%3cg%3e%3cpath%20style='fill:%23FFCE8B;'%20d='M52.251,26.527v458.946c0,5.687-4.615,10.302-10.302,10.302H29.35%20c-5.697,0-10.302-4.615-10.302-10.302V26.527c0-5.687,4.605-10.302,10.302-10.302h12.599%20C47.636,16.225,52.251,20.841,52.251,26.527z'/%3e%3crect%20x='19.048'%20y='64.644'%20style='fill:%23FFB54E;'%20width='33.203'%20height='133.336'/%3e%3c/g%3e%3cg%3e%3cpath%20style='fill:%23FFCE8B;'%20d='M492.952,26.527v458.946c0,5.687-4.605,10.302-10.302,10.302h-12.599%20c-5.687,0-10.302-4.615-10.302-10.302V26.527c0-5.687,4.615-10.302,10.302-10.302h12.599%20C488.347,16.225,492.952,20.841,492.952,26.527z'/%3e%3cg%3e%3cg%3e%3crect%20x='459.749'%20y='64.644'%20style='fill:%23FFB54E;'%20width='33.203'%20height='133.336'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3cg%3e%3cg%3e%3crect%20x='150.846'%20y='79.064'%20style='fill:%23FFB54E;'%20width='210.308'%20height='104.491'/%3e%3crect%20x='335.163'%20y='79.064'%20style='fill:%23FF9A1B;'%20width='25.991'%20height='104.491'/%3e%3crect%20x='150.846'%20y='79.064'%20style='fill:%23FF9A1B;'%20width='25.991'%20height='104.491'/%3e%3cg%3e%3cg%3e%3cpath%20style='fill:%23FFF5F5;'%20d='M58.427,183.556H10.302C4.612,183.556,0,178.943,0,173.254v-48.125h58.427V183.556z'/%3e%3crect%20x='46.065'%20y='79.064'%20style='fill:%23FFF5F5;'%20width='64.608'%20height='58.427'/%3e%3cpath%20style='fill:%23756F6F;'%20d='M52.246,131.31H0V89.366c0-5.69,4.612-10.302,10.302-10.302h41.944V131.31z'/%3e%3crect%20x='98.31'%20y='125.129'%20style='fill:%23FFF5F5;'%20width='58.427'%20height='58.427'/%3e%3crect%20x='104.491'%20y='79.064'%20style='fill:%23756F6F;'%20width='52.246'%20height='52.246'/%3e%3crect%20x='52.246'%20y='131.31'%20style='fill:%23756F6F;'%20width='52.246'%20height='52.246'/%3e%3c/g%3e%3cg%3e%3crect%20x='401.327'%20y='79.064'%20style='fill:%23FFF5F5;'%20width='64.608'%20height='58.427'/%3e%3crect%20x='355.263'%20y='125.129'%20style='fill:%23FFF5F5;'%20width='58.427'%20height='58.427'/%3e%3crect%20x='355.263'%20y='79.064'%20style='fill:%23756F6F;'%20width='52.246'%20height='52.246'/%3e%3cpath%20style='fill:%23FFF5F5;'%20d='M501.698,183.556h-48.125v-58.427H512v48.125C512,178.943,507.388,183.556,501.698,183.556z'/%3e%3cpath%20style='fill:%23756F6F;'%20d='M512,131.31h-52.246V79.064h41.944c5.69,0,10.302,4.612,10.302,10.302V131.31z'/%3e%3crect%20x='407.509'%20y='131.31'%20style='fill:%23756F6F;'%20width='52.246'%20height='52.246'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3cpath%20style='fill:%23FFF5F5;'%20d='M267.261,144.371h-2.679v-33.849c0-2.678-1.387-5.164-3.665-6.572%20c-2.277-1.407-5.121-1.536-7.517-0.338l-12.115,6.057c-3.817,1.908-5.364,6.549-3.455,10.366%20c1.908,3.816,6.548,5.365,10.366,3.455l0.933-0.466v21.348h-2.679c-4.267,0-7.726,3.459-7.726,7.726%20c0,4.267,3.459,7.726,7.726,7.726h20.811c4.268,0,7.726-3.459,7.726-7.726C274.987,147.83,271.528,144.371,267.261,144.371z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",eL="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20version='1.1'%20id='Uploaded%20to%20svgrepo.com'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='800px'%20height='800px'%20viewBox='0%200%2032%2032'%20xml:space='preserve'%3e%3cstyle%20type='text/css'%3e%20.avocado_zeventien{fill:%23CC4121;}%20.avocado_een{fill:%23231F20;}%20.avocado_zes{fill:%23FFFAEE;}%20.st0{fill:%23A3AEB5;}%20.st1{fill:%23AF9480;}%20.st2{fill:%23DBD2C1;}%20.st3{fill:%23788287;}%20.st4{fill:%23EAD13F;}%20.st5{fill:%23C3CC6A;}%20.st6{fill:%23D1712A;}%20.st7{fill:%23E0A838;}%20.st8{fill:%23716558;}%20.st9{fill:%236F9B45;}%20.st10{fill:%230E608E;}%20.st11{fill:%23E598A3;}%20.st12{fill:%23FFFAEE;}%20.st13{fill:%233D3935;}%20.st14{fill:%23248EBC;}%20.st15{fill:%23BF63C1;}%20%3c/style%3e%3cg%3e%3cpolygon%20class='avocado_zeventien'%20points='10.408,29.5%202.5,21.592%202.5,10.408%2010.408,2.5%2021.592,2.5%2029.5,10.408%2029.5,21.592%2021.592,29.5%20'/%3e%3cpath%20class='avocado_zes'%20d='M21.414,12.707L18.121,16l3.293,3.293l-2.121,2.121L16,18.121l-3.293,3.293l-2.121-2.121%20L13.879,16l-3.293-3.293l2.121-2.121L16,13.879l3.293-3.293L21.414,12.707z%20M21.592,2.5H10.408L2.5,10.408v11.184l7.908,7.908%20h11.184l7.908-7.908V10.408L21.592,2.5z%20M28,20.97L20.97,28H11.03L4,20.97v-9.941L11.03,4h9.941L28,11.029V20.97z'/%3e%3cpath%20class='avocado_een'%20d='M19.293,9.879L16,13.172l-3.293-3.293l-2.828,2.828L13.172,16l-3.293,3.293l2.828,2.828%20L16,18.828l3.293,3.293l2.828-2.828L18.828,16l3.293-3.293L19.293,9.879z%20M17.414,16l3.293,3.293l-1.414,1.414L16,17.414%20l-3.293,3.293l-1.414-1.414L14.586,16l-3.293-3.293l1.414-1.414L16,14.586l3.293-3.293l1.414,1.414L17.414,16z%20M21.799,2H10.201%20L2,10.201v11.598L10.201,30h11.598L30,21.799V10.201L21.799,2z%20M29,21.385L21.385,29h-10.77L3,21.385v-10.77L10.615,3h10.77%20L29,10.615V21.385z'/%3e%3c/g%3e%3c/svg%3e",tL="data:image/svg+xml,%3c?xml%20version='1.0'%20?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%3e%3cdefs%3e%3cstyle%3e.c{stroke:%231237a5;}.c,.d{fill:none;stroke-linecap:round;stroke-linejoin:round;}.d{stroke:%234eb8ff;}%3c/style%3e%3c/defs%3e%3cg%20id='a'/%3e%3cg%20id='b'%3e%3cline%20class='c'%20x1='7.5'%20x2='7.5'%20y1='20.5'%20y2='3.5'/%3e%3cline%20class='c'%20x1='7.48'%20x2='3.5'%20y1='3.54'%20y2='7.99'/%3e%3cline%20class='c'%20x1='7.52'%20x2='11.5'%20y1='3.54'%20y2='7.99'/%3e%3cline%20class='d'%20x1='16.5'%20x2='16.5'%20y1='3.5'%20y2='20.5'/%3e%3cline%20class='d'%20x1='16.48'%20x2='12.5'%20y1='20.46'%20y2='16.01'/%3e%3cline%20class='d'%20x1='16.52'%20x2='20.5'%20y1='20.46'%20y2='16.01'/%3e%3c/g%3e%3c/svg%3e",kp="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='-1%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='user-6'%20transform='translate(-3%20-2)'%3e%3cpath%20id='secondary'%20fill='%232ca9bc'%20d='M11,13h2a7,7,0,0,1,7,7h0a1,1,0,0,1-1,1H5a1,1,0,0,1-1-1H4a7,7,0,0,1,7-7Z'/%3e%3cpath%20id='primary'%20d='M20,20h0a1,1,0,0,1-1,1H5a1,1,0,0,1-1-1H4a7,7,0,0,1,7-7h2A7,7,0,0,1,20,20ZM12,3a5,5,0,1,0,5,5A5,5,0,0,0,12,3Z'%20fill='none'%20stroke='%23000000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='2'/%3e%3c/g%3e%3c/svg%3e",nL="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='-0.01%20-0.008%20100.016%20100.016'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill='%2323475F'%20d='M88.555-.008H83v.016a2%202%200%200%201-2%202H19a2%202%200%200%201-2-2v-.016H4a4%204%200%200%200-4%204v92.016a4%204%200%200%200%204%204h92a4%204%200%200%200%204-4V11.517c.049-.089-11.436-11.454-11.445-11.525z'/%3e%3cpath%20fill='%231C3C50'%20d='M81.04%2053.008H18.96a2%202%200%200%200-2%202v45h66.08v-45c0-1.106-.895-2-2-2zm-61.957-10h61.834a2%202%200%200%200%202-2V.547A1.993%201.993%200%200%201%2081%202.007H19c-.916%200-1.681-.62-1.917-1.46v40.46a2%202%200%200%200%202%202.001z'/%3e%3cpath%20fill='%23EBF0F1'%20d='M22%2055.977h56a2%202%200%200%201%202%202v37.031a2%202%200%200%201-2%202H22c-1.104%200-2-.396-2-1.5V57.977a2%202%200%200%201%202-2z'/%3e%3cpath%20fill='%23BCC4C8'%20d='M25%2077.008h50v1H25v-1zm0%2010h50v1H25v-1z'/%3e%3cpath%20fill='%231C3C50'%20d='M7%2084.008h3a2%202%200%200%201%202%202v3a2%202%200%200%201-2%202H7a2%202%200%200%201-2-2v-3a2%202%200%200%201%202-2zm83%200h3a2%202%200%200%201%202%202v3a2%202%200%200%201-2%202h-3a2%202%200%200%201-2-2v-3a2%202%200%200%201%202-2z'/%3e%3cpath%20fill='%23BCC4C8'%20d='M37%201.981v36.026a2%202%200%200%200%202%202h39a2%202%200%200%200%202-2V1.981c0%20.007-42.982.007-43%200zm37%2029.027a2%202%200%200%201-2%202h-6a2%202%200%200%201-2-2V10.981a2%202%200%200%201%202-2h6a2%202%200%200%201%202%202v20.027z'/%3e%3cpath%20fill='%23FF9D00'%20d='M78%2055.977H22a2%202%200%200%200-2%202v10.031h60V57.977a2%202%200%200%200-2-2z'/%3e%3c/svg%3e",rL={class:"dialog"},sL={class:"center"},iL={class:"field"},oL={for:"yes"},aL={for:"yes"},lL={id:"button"},cL={__name:"NewGameDialog",setup(t,{expose:e}){const{t:n}=Er(),r=Z(Ka),s=Z(),i=Z("100"),o=Z(!0);function a(){const u={startPosition:r.value,withWhiteSide:o.value};al(u)}function l(){al()}function c(u){const f=u.target.value;o.value=f==="yes"}return Mn(()=>{const u=window.innerWidth<window.innerHeight?window.innerWidth:window.innerHeight;i.value="".concat(u*.75),s.value.newGame(r.value)}),e({returnValue:()=>{}}),(u,f)=>{const h=Ja("ChessboardVue");return Q(),ce("div",rL,[W("div",sL,[W("header",null,[W("h2",null,Ge($(n)("pages.newGame.title")),1)]),W("section",null,[ke(h,{id:"previewBoard",ref_key:"previewBoard",ref:s,size:i.value,whitePlayerHuman:!1,blackPlayerHuman:!1},null,8,["size"]),W("div",iL,[Yh(Ge($(n)("pages.newGame.hasWhite"))+" ",1),W("input",{type:"radio",name:"hasWhite",value:"yes",checked:"",onChange:c},null,32),W("label",oL,Ge($(n)("pages.newGame.hasWhiteYes")),1),W("input",{type:"radio",name:"hasWhite",value:"no",onChange:c},null,32),W("label",aL,Ge($(n)("pages.newGame.hasWhiteNo")),1)]),W("div",lL,[W("button",{class:"ok",onClick:a},Ge($(n)("pages.newGame.submit")),1),W("button",{class:"cancel",onClick:l},Ge($(n)("pages.newGame.cancel")),1)])])])])}}},uL=Vs(cL,[["__scopeId","data-v-0637cfd3"]]),hL={class:"dialog"},fL={class:"center"},dL={id:"button"},mL={__name:"GiveUpGameDialog",setup(t,{expose:e}){const{t:n}=Er();async function r(){al(!0)}function s(){al(!1)}return e({returnValue:()=>{}}),(i,o)=>(Q(),ce("div",hL,[W("div",fL,[W("header",null,[W("h2",null,Ge($(n)("pages.giveUp.title")),1)]),W("section",null,[W("div",dL,[W("button",{class:"ok",onClick:r},Ge($(n)("pages.giveUp.submit")),1),W("button",{class:"cancel",onClick:s},Ge($(n)("pages.giveUp.cancel")),1)])])])]))}},pL=Vs(mL,[["__scopeId","data-v-f77ae50c"]]),gL=N_("GameStore",{state:()=>({startPosition:on("GameStore$startPosition",Pp),currentPosition:on("GameStore$currentPosition",Pp),whitePlayerIsHuman:on("GameStore$whitePlayerIsHuman",!1),blackPlayerIsHuman:on("GameStore$blackPlayerIsHuman",!1),weHaveWhite:on("GameStore$weHaveWhite",void 0),whiteNickname:on("GameStore$whiteNickname",""),blackNickname:on("GameStore$blackNickname",""),boardReversed:on("GameStore$boardReversed",!1),historyNodes:on("GameStore$historyNodes",[]),lastMoveArrow:on("GameStore$lastMoveArrow",{start:{file:-1/0,rank:-1/0},end:{file:-1/0,rank:-1/0}})}),actions:{setCurrentPosition(t){this.currentPosition=t},setWhitePlayerIsHuman(t){this.whitePlayerIsHuman=t},setBlackPlayerIsHuman(t){this.blackPlayerIsHuman=t},setWeHaveWhiteStatus(t){this.weHaveWhite=t},setWhiteNickname(t){this.whiteNickname=t},setBlackNickname(t){this.blackNickname=t},setBoardReversedStatus(t){this.boardReversed=t},setHistoryNodes(t){this.historyNodes=t.map(e=>e)},addHistoryNode(t){this.historyNodes.push(t)},setLastMoveArrow(t){this.lastMoveArrow=t},setStartPosition(t){this.startPosition=t}},persist:sessionStorage}),wy=t=>(cg("data-v-813c6d66"),t=t(),ug(),t),_L={id:"pageRoot"},yL={id:"gameZone"},vL={id:"miscZone"},EL={id:"buttons"},wL=["src"],bL=["src"],TL=["src"],IL=["src"],CL={key:0,id:"nicknames"},AL=wy(()=>W("td",null,[W("div",{class:"color white"})],-1)),SL=["src"],RL=wy(()=>W("td",null,[W("div",{class:"color black"})],-1)),PL=["src"],kL={__name:"GamePage",setup(t){Ug(ae=>({"7d273762":f.value}));const{t:e}=Er(),n=ha(),r=gL();let s=new Ep;const i=Z(),o=Z("100"),a=Z(),l=Z(),c=Z(!1),u=Z(!1),f=ue(()=>o.value+"px"),h=ue(()=>n.roomOwner===!0),p=ue(()=>n.gameStarted===!0),{startPosition:g,currentPosition:E,whitePlayerIsHuman:v,blackPlayerIsHuman:_,whiteNickname:w,blackNickname:T,weHaveWhite:b}=_I(r),N=ue(()=>E.value.split(" ")[1]==="w"),S=Z();function V(){s=new Ep(g.value);const ae=l.value.getNodes(),K=ON(new Date,"yyyy.MM.dd");for(let R of ae)try{s.move(R.san)}catch(B){console.log("Failed to play ".concat(R.san," in pgn history"))}s.header("White",w.value,"Black",T.value,"Date",K)}function P(){const ae=window.innerWidth<window.innerHeight?window.innerWidth:window.innerHeight;o.value="".concat(ae*.8)}async function k(){const ae=n.roomId,K=await Z5({roomId:ae});if(K.hasOwnProperty("error")){alert(e(K.error));return}const{startPosition:B,hostHasWhite:F,hostUser:z,guestUser:_e}=K.matchingDocument,Ce=B.split(" "),m=parseInt(Ce[5]),d=Ce[1]==="w";l.value.reset(m,d),r.setHistoryNodes(l.value.getNodes()),r.setStartPosition(B),a.value.newGame(B),r.setCurrentPosition(B);const y=[!0,"true"].includes(F),I=y&&h.value||!y&&!h.value;r.setWeHaveWhiteStatus(I),r.setWhitePlayerIsHuman(I),r.setBlackPlayerIsHuman(!I),r.setWhiteNickname(F?z:_e),r.setBlackNickname(F?_e:z),u.value=!0,n.setAtLeastAGameStartedStatus(!0),r.setLastMoveArrow({start:{file:-1/0,rank:-1/0},end:{file:-1/0,rank:-1/0}})}async function M(){const ae=await l0(uL,{}),{startPosition:K,withWhiteSide:R}=ae;if(ae){const B={gameStarted:!0,giveUpSide:FN,startPosition:K,hostHasWhite:R},F=n.roomId,z=await Sr({roomId:F,newValues:B});if(z.hasOwnProperty("error")){alert(e(z.error));return}n.setGameStartedStatus(!0),r.setStartPosition(K);const Ce=n.roomOwner,m=R&&!Ce||!R&&Ce;r.setBoardReversedStatus(m),c.value=m,k()}}async function D(){const ae=await l0(pL,{}),K=[!0,"true"].includes(n.roomOwner);if(ae){const R={gameStarted:!1,giveUpSide:K?Sp:Rp},B=n.roomId,F=await Sr({roomId:B,newValues:R});if(F.hasOwnProperty("error")){alert(e(F.error));return}n.setGameStartedStatus(!1),a.value.stop(),r.setWhitePlayerIsHuman(!1),r.setBlackPlayerIsHuman(!1),V(),l.value.activateNavigationMode()}}function L(ae){const K=String.fromCharCode(97+ae.startFile),R=String.fromCharCode(49+ae.startRank),B=String.fromCharCode(97+ae.endFile),F=String.fromCharCode(49+ae.endRank);return"".concat(K).concat(R).concat(B).concat(F)}function G(ae){const K=ae.data(),R=ae.id,B=["true",!0].includes(K.gameStarted),z=n.roomId==R,_e=!h.value;if(z)if(B){const Ce=n.gameStarted;if(_e&&!Ce){const y=K.hostHasWhite&&!K.roomOwner||!K.hostHasWhite&&K.roomOwner;n.setGameStartedStatus(!0),r.setBoardReversedStatus(y),c.value=y,k()}if(!a.value.playManualMove(L({startFile:K.lastMoveStartFile,startRank:K.lastMoveStartRank,endFile:K.lastMoveEndFile,endRank:K.lastMoveEndRank,promotion:K.lastMovePromotion})))return;r.setLastMoveArrow({start:{file:K.lastMoveStartFile,rank:K.lastMoveStartRank},end:{file:K.lastMoveEndFile,rank:K.lastMoveEndRank}});const d=a.value.getCurrentPosition();E.value=d}else{const Ce=K.giveUpSide;(h.value?Ce>=Rp:Ce<=Sp)&&(n.setGameStartedStatus(!1),r.setWhitePlayerIsHuman(!1),r.setBlackPlayerIsHuman(!1),V(),l.value.activateNavigationMode(),cr({text:e("pages.game.outcomes.gaveUp")}))}}function ge(){c.value=!c.value}async function Ve(ae,K,R,B,F,z,_e){l.value.addNodeOrCompleteFirst({number:ae,whiteTurn:K,san:R,fan:B,fen:F,fromFileIndex:z.start.file,fromRankIndex:z.start.rank,toFileIndex:z.end.file,toRankIndex:z.end.rank}),await us(10),l.value.scrollToLastElement();const Ce=l.value.getNodesCount(),m=l.value.getLastNode;Ce>1&&m.fan?r.addHistoryNode(l.value.getLastNode()):r.setHistoryNodes(l.value.getNodes()),r.setLastMoveArrow(z),E.value=F;const d={lastMoveSan:R,lastMoveFan:B,lastMoveStartFile:z.start.file,lastMoveStartRank:z.start.rank,lastMoveEndFile:z.end.file,lastMoveEndRank:z.end.rank,lastMovePromotion:_e},y=n.roomId,I=await Sr({roomId:y,newValues:d});if(I.hasOwnProperty("error")){alert(e(I.error));return}}async function me(ae){if(!p.value)return;await us(50);const K={gameStarted:!1},R=n.roomId,B=await Sr({roomId:R,newValues:K});B.hasOwnProperty("error")&&console.error(B.error),V(),l.value.activateNavigationMode(),n.setGameStartedStatus(!1);const z=e("pages.game.outcomes.checkmate");cr({text:z})}async function we(){if(!p.value)return;await us(50);const ae={gameStarted:!1},K=n.roomId,R=await Sr({roomId:K,newValues:ae});R.hasOwnProperty("error")&&console.error(R.error),V(),l.value.activateNavigationMode(),n.setGameStartedStatus(!1);const F=e("pages.game.outcomes.stalemate");cr({text:F})}async function be(){if(!p.value)return;await us(50);const ae={gameStarted:!1},K=n.roomId,R=await Sr({roomId:K,newValues:ae});R.hasOwnProperty("error")&&console.error(R.error),V(),l.value.activateNavigationMode(),n.setGameStartedStatus(!1);const F=e("pages.game.outcomes.perpetualDraw");cr({text:F})}async function tt(){if(!p.value)return;await us(50);const ae={gameStarted:!1},K=n.roomId,R=await Sr({roomId:K,newValues:ae});R.hasOwnProperty("error")&&console.error(R.error),V(),l.value.activateNavigationMode(),n.setGameStartedStatus(!1);const F=e("pages.game.outcomes.missingMaterial");cr({text:F})}async function Je(){if(!p.value)return;await us(50);const ae={gameStarted:!1},K=n.roomId,R=await Sr({roomId:K,newValues:ae});R.hasOwnProperty("error")&&console.error(R.error),V(),l.value.activateNavigationMode(),n.setGameStartedStatus(!1);const F=e("pages.game.outcomes.fiftyMovesDraw");cr({text:F})}async function Te(){if(confirm(e("pages.pgn.confirmationMessage"))){const K=s.pgn({newline:"\n",maxWidth:80}),R=document.createElement("a"),B=new Blob([K],{type:"text/plain"});R.href=URL.createObjectURL(B),R.download="game.pgn",R.click(),URL.revokeObjectURL(R.href)}}function $e(){p.value||a.value.setPositionAndLastMove(g.value,{start:{file:-100,rank:-100},end:{file:-100,rank:-100}})&&l.value.setSelectedNode(-1)}function oe({nodeIndex:ae,fen:K,fromFileIndex:R,fromRankIndex:B,toFileIndex:F,toRankIndex:z}){p.value||a.value.setPositionAndLastMove(K,{start:{file:R,rank:B},end:{file:F,rank:z}})&&l.value.setSelectedNode(ae)}function at(ae){G(ae)}return Mn(async()=>{const ae=n.roomId;ae&&(i.value=await Y5(ae,at))}),ti(()=>{i.value&&i.value()}),ti(()=>{S.value&&S.value()}),Mn(()=>{window.addEventListener("resize",P),P()}),ti(()=>{window.removeEventListener("resize",P)}),Mn(()=>{a.value.newGame(E.value),p.value||a.value.stop(),u.value=n.atLeastAGameStarted,c.value=r.boardReversed,l.value.setNodes(r.historyNodes),a.value.setLastMoveArrow(r.lastMoveArrow),p.value||(V(),l.value.activateNavigationMode())}),(ae,K)=>{const R=Ja("ChessboardVue");return Q(),ce("div",_L,[W("div",yL,[ke(JN,{ref_key:"history",ref:l,onRequestStartPosition:$e,onRequestNodeSelected:oe},null,512),ke(R,{id:"board",ref_key:"board",ref:a,size:o.value,whitePlayerHuman:$(v),blackPlayerHuman:$(_),reversed:c.value,onMoveDone:Ve,onCheckmate:me,onStalemate:we,onPerpetualDraw:be,onMissingMaterialDraw:tt,onFiftyMovesDraw:Je},null,8,["size","whitePlayerHuman","blackPlayerHuman","reversed"])]),W("div",vL,[W("div",EL,[W("button",{onClick:ge},[W("img",{src:$(tL)},null,8,wL)]),h.value&&!p.value?(Q(),ce("button",{key:0,onClick:M},[W("img",{src:$(ZN)},null,8,bL)])):jt("",!0),p.value?(Q(),ce("button",{key:1,onClick:D},[W("img",{src:$(eL)},null,8,TL)])):jt("",!0),u.value&&!p.value?(Q(),ce("button",{key:2,onClick:Te},[W("img",{src:$(nL)},null,8,IL)])):jt("",!0)]),u.value?(Q(),ce("table",CL,[W("tr",{class:ut(["nickname",[N.value?"highlight":""]])},[AL,W("td",null,[W("p",null,Ge($(w)),1)]),W("td",null,[$(b)===!0?(Q(),ce("img",{key:0,src:$(kp)},null,8,SL)):jt("",!0)])],2),W("tr",{class:ut(["nickname",[N.value?"":"highlight"]])},[RL,W("td",null,[W("p",null,Ge($(T)),1)]),W("td",null,[$(b)===!1?(Q(),ce("img",{key:0,src:$(kp)},null,8,PL)):jt("",!0)])],2)])):jt("",!0)])])}}},NL=Vs(kL,[["__scopeId","data-v-813c6d66"]]),LL=[{path:"/",component:i4},{path:"/create-room",component:u4},{path:"/join-room",component:y4},{path:"/game",component:NL}],DL=db({history:jw(),routes:LL}),xL=()=>navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.userLanguage||navigator.language||navigator.browserLanguage||"en",ML=xL().substring(0,2),OL=ZT({fallbackLocale:"en",legacy:!1,locale:ML,messages:QA}),VL=hI();lw(qA).use(UA).use(VL).use(DL).use(OL).use(NI).mount("#app");export{$L as __vite_legacy_guard};
