!function(){var e=["eventFilter"],t=["eventFilter"];function n(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function r(){return r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},r.apply(this,arguments)}function i(e){var t="function"==typeof Map?new Map:void 0;return i=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return a(e,arguments,d(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),p(n,e)},i(e)}function a(e,t,n){if(h())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&p(i,n.prototype),i}function o(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */o=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,o=Object.create(a.prototype),u=new D(r||[]);return i(o,"_invoke",{value:T(e,n,u)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var d="suspendedStart",v="suspendedYield",p="executing",m="completed",g={};function y(){}function k(){}function _(){}var b={};c(b,u,(function(){return this}));var w=Object.getPrototypeOf,C=w&&w(w(P([])));C&&C!==n&&r.call(C,u)&&(b=C);var x=_.prototype=y.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,a,o,u){var s=h(e[i],e,a);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==E(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(c).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function T(t,n,r){var i=d;return function(a,o){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var u=r.delegate;if(u){var s=A(u,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var l=h(t,n,r);if("normal"===l.type){if(i=r.done?m:v,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=m,r.method="throw",r.arg=l.arg)}}}function A(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,A(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=h(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[u];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(E(t)+" is not iterable")}return k.prototype=_,i(x,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:k,configurable:!0}),k.displayName=c(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,l,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(I.prototype),c(I.prototype,s,(function(){return this})),t.AsyncIterator=I,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new I(f(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(x),c(x,l,"Generator"),c(x,u,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return u.type="throw",u.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function u(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(l){return void n(l)}u.done?t(s):Promise.resolve(s).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){u(a,r,i,o,s,"next",e)}function s(e){u(a,r,i,o,s,"throw",e)}o(void 0)}))}}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t=d(t),function(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,h()?Reflect.construct(t,n||[],d(e).constructor):t.apply(e,n))}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_(r.key),r)}}function y(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function k(e,t,n){return(t=_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E(t)?t:t+""}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){l=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return u}}(e,t)||x(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||x(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function C(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=x(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function x(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}System.register([],(function(u,l){"use strict";return{execute:function(){var u,h,p,g=document.createElement("style");
/**
            * @vue/shared v3.4.21
            * (c) 2018-present Yuxi (Evan) You and Vue contributors
            * @license MIT
            **/
function _(e,t){var n=new Set(e.split(","));return t?function(e){return n.has(e.toLowerCase())}:function(e){return n.has(e)}}g.textContent=':root{font-family:Inter,system-ui,Avenir,Helvetica,Arial,sans-serif;line-height:1.5;font-weight:400;color-scheme:light dark;color:rgba(255,255,255,.87);background-color:#242424;font-synthesis:none;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}a{font-weight:500;color:#646cff;text-decoration:inherit}a:hover{color:#535bf2}html,body{width:99%;height:99%}h1{font-size:3.2em;line-height:1.1}button{border-radius:8px;border:1px solid transparent;padding:.6em 1.2em;font-size:1em;font-weight:500;font-family:inherit;background-color:#1a1a1a;cursor:pointer;transition:border-color .25s}button:hover{border-color:#646cff}button:focus,button:focus-visible{outline:4px auto -webkit-focus-ring-color}.card{padding:2em}#app{width:100%;height:100%}@media (prefers-color-scheme: light){:root{color:#213547;background-color:#fff}a:hover{color:#747bff}button{background-color:#f9f9f9}}#root[data-v-a6ae8f26]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-evenly;align-items:center}button[data-v-a6ae8f26]{border:1px solid blue;border-radius:10px}.copyButton[data-v-a6ae8f26]{margin:0 5px}#root[data-v-a9e5fa03]{display:flex;flex-direction:column;justify-content:space-evenly;align-items:center;width:85%;height:85%}section[data-v-a9e5fa03]{padding:20px;border:1px solid navy;border-radius:20px;display:flex;flex-direction:column;justify-content:space-around;align-items:center}button[data-v-a9e5fa03]{border:1px solid black;margin:5px}#buttons[data-v-a9e5fa03]{display:flex;flex-direction:row;justify-content:end;align-items:center}button.ok[data-v-a9e5fa03]{color:#fff;background-color:green}button.cancel[data-v-a9e5fa03]{color:#fff;background-color:red}#root[data-v-ad4314f9]{display:flex;flex-direction:column;justify-content:space-evenly;align-items:center;width:85%;height:85%}section[data-v-ad4314f9]{padding:20px;border:1px solid navy;border-radius:20px;display:flex;flex-direction:column;justify-content:space-around;align-items:center}button[data-v-ad4314f9]{border:1px solid black;margin:5px}#buttons[data-v-ad4314f9]{display:flex;flex-direction:row;justify-content:end;align-items:center}button.ok[data-v-ad4314f9]{color:#fff;background-color:green}button.cancel[data-v-ad4314f9]{color:#fff;background-color:red}button[data-v-ad4314f9]:has(>img){margin:0 20px}@font-face{font-family:"Free Serif";src:url('+new URL("FreeSerif-26qiZnhg.ttf",l.meta.url).href+')}.root[data-v-22dd577c]{width:100%;height:100%;display:block}.toolbar[data-v-22dd577c]{background-color:olive;width:100%;display:flex;flex-direction:row;justify-content:space-around;align-items:center}.toolbar__button[data-v-22dd577c]{font-size:smaller}.main-content[data-v-22dd577c]{width:100%;height:5rem;display:flex;flex-direction:row;justify-content:flex-start;align-content:flex-start;box-sizing:border-box;background-color:#008b8b;font-family:"Free Serif";font-size:x-large;padding:.5rem;text-align:start;overflow-x:scroll;overflow-y:hidden}.main-content>button[data-v-22dd577c]{background-color:#008b8b;padding:0;text-wrap:nowrap}.selected[data-v-22dd577c]{background-color:#9acd32;color:#00f}.dialog[data-v-0637cfd3]{z-index:100;position:fixed;top:0;left:0;bottom:0;right:0;background-color:rgba(0,0,0,.3)}.center[data-v-0637cfd3]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#fff;padding:20px}section[data-v-0637cfd3]{padding:20px;border:1px solid navy;border-radius:20px;display:flex;flex-direction:column;justify-content:space-evenly;align-items:center}button[data-v-0637cfd3]{border:1px solid black;margin:5px}#buttons[data-v-0637cfd3]{display:flex;flex-direction:row;justify-content:end;align-items:center}button.ok[data-v-0637cfd3]{color:#fff;background-color:green}button.cancel[data-v-0637cfd3]{color:#fff;background-color:red}button[data-v-0637cfd3]:has(>img){margin:0 20px}.dialog[data-v-f77ae50c]{z-index:100;position:fixed;top:0;left:0;bottom:0;right:0;background-color:rgba(0,0,0,.3)}.center[data-v-f77ae50c]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#fff;padding:20px}section[data-v-f77ae50c]{padding:20px;border:1px solid navy;border-radius:20px;display:flex;flex-direction:column;justify-content:space-around;align-items:center}button[data-v-f77ae50c]{border:1px solid black;margin:5px}#buttons[data-v-f77ae50c]{display:flex;flex-direction:row;justify-content:end;align-items:center}button.ok[data-v-f77ae50c]{color:#fff;background-color:green}button.cancel[data-v-f77ae50c]{color:#fff;background-color:red}button[data-v-f77ae50c]:has(>img){margin:0 20px}#pageRoot[data-v-813c6d66]{display:flex;width:100%;height:100%;flex-direction:row;justify-content:center;align-items:center;overflow:hidden}#gameZone[data-v-813c6d66]{width:var(--7d273762);display:flex;flex-direction:column;justify-content:start;align-items:center}#miscZone[data-v-813c6d66]{margin:0 10px;display:flex;flex-direction:column;justify-content:center;align-items:center}#buttons[data-v-813c6d66]{margin:6px 0;display:flex;flex-direction:row;justify-content:center;align-items:center}#buttons>button[data-v-813c6d66]{border:1px solid blue;margin:0 8px}#buttons>button>img[data-v-813c6d66]{width:40px;height:40px}#nicknames[data-v-813c6d66]{display:flex;flex-direction:column;justify-content:center;align-items:flex-start;height:20vh;border:1px solid blue;border-radius:10px}.nickname[data-v-813c6d66]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center;margin:2px}.nickname.highlight[data-v-813c6d66]{background-color:coral}.nickname>td[data-v-813c6d66]:nth-child(1){width:6vw}.nickname>td[data-v-813c6d66]:nth-child(2){width:12vw}.nickname>td[data-v-813c6d66]:nth-child(3){width:3vw}.nickname>td>.color[data-v-813c6d66]{width:3vw;margin:0 8px;height:3vw;border:1px solid black;border-radius:4px}.nickname>td>.color.white[data-v-813c6d66]{background-color:#fff}.nickname>td>.color.black[data-v-813c6d66]{background-color:#000}.nickname>td>p[data-v-813c6d66]{font-family:Courier New,Courier,monospace;font-weight:700;font-size:large}.nickname>td>img[data-v-813c6d66]{width:3vw;height:3vw}@media (max-width: 1000px){#root[data-v-813c6d66]{flex-direction:column}#buttons>button[data-v-813c6d66]{padding:2px}#buttons>button>img[data-v-813c6d66]{width:6vw;height:6vw}}.root[data-v-c00eddd7]{position:relative;display:inline-block;width:var(--23365052);height:var(--23365052);background-color:var(--7b12f459)}.inner-layer[data-v-c00eddd7]{position:absolute;left:0;right:0;width:var(--23365052);height:var(--23365052)}.lowest-layer[data-v-c00eddd7]{position:absolute;display:grid;left:0;top:0;width:var(--23365052);height:var(--23365052);grid-template:var(--4e90964b)}.last-move-layer[data-v-c00eddd7],.dnd-layer[data-v-c00eddd7]{position:absolute;left:0;top:0;width:var(--23365052);height:var(--23365052)}.promotion-overlay-layer[data-v-c00eddd7]{position:absolute;left:0;top:0;width:var(--23365052);height:var(--23365052);opacity:.8;display:flex;justify-content:center;align-items:center;background-color:#000}.promotion-layer[data-v-c00eddd7]{position:absolute;left:0;top:0;width:var(--23365052);height:var(--23365052);background-color:#fff;display:flex;flex-direction:column;justify-content:center;align-items:center}.promotion-buttons[data-v-c00eddd7]{display:flex;justify-content:center;align-items:center;width:var(--0ccafbb5);height:var(--aac90db0)}.single-promotion-button[data-v-c00eddd7]{border:var(--edbfd394);padding:var(--66d0db47);margin:var(--c9bfb090)}.cell[data-v-c00eddd7]{display:flex;justify-content:center;align-items:center}.cell.white[data-v-c00eddd7]{background-color:var(--3dba7350)}.cell.black[data-v-c00eddd7]{background-color:var(--26ac38b4)}.coordinate[data-v-c00eddd7]{display:flex;justify-content:center;align-items:center;font-weight:700;font-size:var(--7e290edb);color:var(--9d9f45da)}.dndPiece[data-v-c00eddd7]{position:absolute;left:var(--33a18c2e);top:var(--33a18c2c);width:var(--313142cf);height:var(--313142cf)}.last-move-line[data-v-c00eddd7]{position:absolute}.player-turn-cell[data-v-c00eddd7]{display:flex;justify-content:center;align-items:center;width:90%;height:90%}.player-turn[data-v-c00eddd7]{border-radius:50%;width:100%;height:100%}.white-turn[data-v-c00eddd7]{background-color:#fff}.black-turn[data-v-c00eddd7]{background-color:#000}.dnd-orig[data-v-c00eddd7]{background-color:var(--b588fb60);width:var(--313142cf);height:var(--313142cf)}.dnd-target[data-v-c00eddd7]{background-color:var(--2f8b4845);width:var(--313142cf);height:var(--313142cf)}.dnd-cross-cell[data-v-c00eddd7]{background-color:var(--4eea78f0);width:var(--313142cf);height:var(--313142cf)}.no-highlight-cell[data-v-c00eddd7]{width:var(--313142cf);height:var(--313142cf)}.last-move-base-line[data-v-c00eddd7]{left:var(--14110304);top:var(--397bb7fe);width:var(--6cd5c3a2);height:var(--4f3fadde);transform:var(--3b360156);-ms-transform:var(--3b360156);-moz-transform:var(--3b360156);-webkit-transform:var(--3b360156);transform-origin:var(--0bbbf24a);-ms-transform-origin:var(--0bbbf24a);-moz-transform-origin:var(--0bbbf24a);-webkit-transform-origin:var(--0bbbf24a);background-color:var(--13014d6b)}.last-move-arrow-1[data-v-c00eddd7]{left:var(--5487e881);top:var(--2c04819b);width:var(--3d11f48c);height:var(--4b5da321);transform:var(--04a55f32);-ms-transform:var(--04a55f32);-moz-transform:var(--04a55f32);-webkit-transform:var(--04a55f32);transform-origin:var(--f1bf6610);-ms-transform-origin:var(--f1bf6610);-moz-transform-origin:var(--f1bf6610);-webkit-transform-origin:var(--f1bf6610);background-color:var(--13014d6b)}.last-move-arrow-2[data-v-c00eddd7]{left:var(--54960002);top:var(--2c04f5fa);width:var(--3ec6cd2b);height:var(--ff78433c);transform:var(--0e225f5e);-ms-transform:var(--0e225f5e);-moz-transform:var(--0e225f5e);-webkit-transform:var(--0e225f5e);transform-origin:var(--68b22ad7);-ms-transform-origin:var(--68b22ad7);-moz-transform-origin:var(--68b22ad7);-webkit-transform-origin:var(--68b22ad7);background-color:var(--13014d6b)}.last-move-point[data-v-c00eddd7]{left:var(--730e6736);top:var(--40359137);width:var(--093d8d28);height:var(--04a51e05);transform:var(--29db49ce);-ms-transform:var(--29db49ce);-moz-transform:var(--29db49ce);-webkit-transform:var(--29db49ce);transform-origin:var(--41ea5ad8);-ms-transform-origin:var(--41ea5ad8);-moz-transform-origin:var(--41ea5ad8);-webkit-transform-origin:var(--41ea5ad8);background-color:var(--13014d6b)}\n',document.head.appendChild(g);var x,S={},I=[],T=function(){},A=function(){return!1},L=function(e){return 111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97)},N=function(e){return e.startsWith("onUpdate:")},D=Object.assign,P=function(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)},R=Object.prototype.hasOwnProperty,M=function(e,t){return R.call(e,t)},O=Array.isArray,F=function(e){return"[object Map]"===H(e)},U=function(e){return"[object Set]"===H(e)},V=function(e){return"function"==typeof e},j=function(e){return"string"==typeof e},B=function(e){return"symbol"===E(e)},z=function(e){return null!==e&&"object"===E(e)},q=function(e){return(z(e)||V(e))&&V(e.then)&&V(e.catch)},G=Object.prototype.toString,H=function(e){return G.call(e)},W=function(e){return H(e).slice(8,-1)},K=function(e){return"[object Object]"===H(e)},Q=function(e){return j(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e},Y=_(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),$=function(e){var t=Object.create(null);return function(n){return t[n]||(t[n]=e(n))}},X=/-(\w)/g,J=$((function(e){return e.replace(X,(function(e,t){return t?t.toUpperCase():""}))})),Z=/\B([A-Z])/g,ee=$((function(e){return e.replace(Z,"-$1").toLowerCase()})),te=$((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),ne=$((function(e){return e?"on".concat(te(e)):""})),re=function(e,t){return!Object.is(e,t)},ie=function(e,t){for(var n=0;n<e.length;n++)e[n](t)},ae=function(e,t,n){Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},oe=function(e){var t=parseFloat(e);return isNaN(t)?e:t},ue=function(e){var t=j(e)?Number(e):NaN;return isNaN(t)?e:t},se=function(){return x||(x="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})};function le(e){if(O(e)){for(var t={},n=0;n<e.length;n++){var r=e[n],i=j(r)?de(r):le(r);if(i)for(var a in i)t[a]=i[a]}return t}if(j(e)||z(e))return e}var ce=/;(?![^(]*\))/g,fe=/:([^]+)/,he=/\/\*[^]*?\*\//g;function de(e){var t={};return e.replace(he,"").split(ce).forEach((function(e){if(e){var n=e.split(fe);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function ve(e){var t="";if(j(e))t=e;else if(O(e))for(var n=0;n<e.length;n++){var r=ve(e[n]);r&&(t+=r+" ")}else if(z(e))for(var i in e)e[i]&&(t+=i+" ");return t.trim()}var pe=_("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function me(e){return!!e||""===e}var ge,ye,ke=function(e){return j(e)?e:null==e?"":O(e)||z(e)&&(e.toString===G||!V(e.toString))?JSON.stringify(e,_e,2):String(e)},_e=function e(t,n){return n&&n.__v_isRef?e(t,n.value):F(n)?k({},"Map(".concat(n.size,")"),w(n.entries()).reduce((function(e,t,n){var r=b(t,2),i=r[0],a=r[1];return e[be(i,n)+" =>"]=a,e}),{})):U(n)?k({},"Set(".concat(n.size,")"),w(n.values()).map((function(e){return be(e)}))):B(n)?be(n):!z(n)||O(n)||K(n)?n:String(n)},be=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return B(e)?"Symbol(".concat(null!=(t=e.description)?t:n,")"):e},we=function(){return y((function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];m(this,e),this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=ge,!t&&ge&&(this.index=(ge.scopes||(ge.scopes=[])).push(this)-1)}),[{key:"active",get:function(){return this._active}},{key:"run",value:function(e){if(this._active){var t=ge;try{return ge=this,e()}finally{ge=t}}}},{key:"on",value:function(){ge=this}},{key:"off",value:function(){ge=this.parent}},{key:"stop",value:function(e){if(this._active){var t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){var r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}])}();function Ee(e){return new we(e)}function Ce(){return ge}function xe(e){ge&&ge.cleanups.push(e)}var Se=function(){return y((function e(t,n,r,i){m(this,e),this.fn=t,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ge;t&&t.active&&t.effects.push(e)}(this,i)}),[{key:"dirty",get:function(){if(2===this._dirtyLevel||3===this._dirtyLevel){this._dirtyLevel=1,Pe();for(var e=0;e<this._depsLength;e++){var t=this.deps[e];if(t.computed&&(t.computed.value,this._dirtyLevel>=4))break}1===this._dirtyLevel&&(this._dirtyLevel=0),Re()}return this._dirtyLevel>=4},set:function(e){this._dirtyLevel=e?4:0}},{key:"run",value:function(){if(this._dirtyLevel=0,!this.active)return this.fn();var e=Le,t=ye;try{return Le=!0,ye=this,this._runnings++,Ie(this),this.fn()}finally{Te(this),this._runnings--,ye=t,Le=e}}},{key:"stop",value:function(){var e;this.active&&(Ie(this),Te(this),null==(e=this.onStop)||e.call(this),this.active=!1)}}])}();function Ie(e){e._trackId++,e._depsLength=0}function Te(e){if(e.deps.length>e._depsLength){for(var t=e._depsLength;t<e.deps.length;t++)Ae(e.deps[t],e);e.deps.length=e._depsLength}}function Ae(e,t){var n=e.get(t);void 0!==n&&t._trackId!==n&&(e.delete(t),0===e.size&&e.cleanup())}var Le=!0,Ne=0,De=[];function Pe(){De.push(Le),Le=!1}function Re(){var e=De.pop();Le=void 0===e||e}function Me(){Ne++}function Oe(){for(Ne--;!Ne&&Ue.length;)Ue.shift()()}function Fe(e,t,n){if(t.get(e)!==e._trackId){t.set(e,e._trackId);var r=e.deps[e._depsLength];r!==t?(r&&Ae(r,e),e.deps[e._depsLength++]=t):e._depsLength++}}var Ue=[];function Ve(e,t,n){Me();var r,i=C(e.keys());try{for(i.s();!(r=i.n()).done;){var a=r.value,o=void 0;a._dirtyLevel<t&&(null!=o?o:o=e.get(a)===a._trackId)&&(a._shouldSchedule||(a._shouldSchedule=0===a._dirtyLevel),a._dirtyLevel=t),a._shouldSchedule&&(null!=o?o:o=e.get(a)===a._trackId)&&(a.trigger(),a._runnings&&!a.allowRecurse||2===a._dirtyLevel||(a._shouldSchedule=!1,a.scheduler&&Ue.push(a.scheduler)))}}catch(u){i.e(u)}finally{i.f()}Oe()}var je=function(e,t){var n=new Map;return n.cleanup=e,n.computed=t,n},Be=new WeakMap,ze=Symbol(""),qe=Symbol("");function Ge(e,t,n){if(Le&&ye){var r=Be.get(e);r||Be.set(e,r=new Map);var i=r.get(n);i||r.set(n,i=je((function(){return r.delete(n)}))),Fe(ye,i)}}function He(e,t,n,r,i,a){var o=Be.get(e);if(o){var u=[];if("clear"===t)u=w(o.values());else if("length"===n&&O(e)){var s=Number(r);o.forEach((function(e,t){("length"===t||!B(t)&&t>=s)&&u.push(e)}))}else switch(void 0!==n&&u.push(o.get(n)),t){case"add":O(e)?Q(n)&&u.push(o.get("length")):(u.push(o.get(ze)),F(e)&&u.push(o.get(qe)));break;case"delete":O(e)||(u.push(o.get(ze)),F(e)&&u.push(o.get(qe)));break;case"set":F(e)&&u.push(o.get(ze))}Me();var l,c=C(u);try{for(c.s();!(l=c.n()).done;){var f=l.value;f&&Ve(f,4)}}catch(h){c.e(h)}finally{c.f()}Oe()}}var We=_("__proto__,__v_isRef,__isVue"),Ke=new Set(Object.getOwnPropertyNames(Symbol).filter((function(e){return"arguments"!==e&&"caller"!==e})).map((function(e){return Symbol[e]})).filter(B)),Qe=Ye();function Ye(){var e={};return["includes","indexOf","lastIndexOf"].forEach((function(t){e[t]=function(){for(var e=Ft(this),n=0,r=this.length;n<r;n++)Ge(e,0,n+"");for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var u=e[t].apply(e,a);return-1===u||!1===u?e[t].apply(e,w(a.map(Ft))):u}})),["push","pop","shift","unshift","splice"].forEach((function(t){e[t]=function(){Pe(),Me();for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=Ft(this)[t].apply(this,n);return Oe(),Re(),i}})),e}function $e(e){var t=Ft(this);return Ge(t,0,e),t.hasOwnProperty(e)}var Xe=function(){return y((function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];m(this,e),this._isReadonly=t,this._isShallow=n}),[{key:"get",value:function(e,t,n){var r=this._isReadonly,i=this._isShallow;if("__v_isReactive"===t)return!r;if("__v_isReadonly"===t)return r;if("__v_isShallow"===t)return i;if("__v_raw"===t)return n===(r?i?Tt:It:i?St:xt).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;var a=O(e);if(!r){if(a&&M(Qe,t))return Reflect.get(Qe,t,n);if("hasOwnProperty"===t)return $e}var o=Reflect.get(e,t,n);return(B(t)?Ke.has(t):We(t))?o:(r||Ge(e,0,t),i?o:Gt(o)?a&&Q(t)?o:o.value:z(o)?r?Nt(o):At(o):o)}}])}(),Je=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return m(this,t),f(this,t,[!1,e])}return v(t,e),y(t,[{key:"set",value:function(e,t,n,r){var i=e[t];if(!this._isShallow){var a=Rt(i);if(Mt(n)||Rt(n)||(i=Ft(i),n=Ft(n)),!O(e)&&Gt(i)&&!Gt(n))return!a&&(i.value=n,!0)}var o=O(e)&&Q(t)?Number(t)<e.length:M(e,t),u=Reflect.set(e,t,n,r);return e===Ft(r)&&(o?re(n,i)&&He(e,"set",t,n):He(e,"add",t,n)),u}},{key:"deleteProperty",value:function(e,t){var n=M(e,t);e[t];var r=Reflect.deleteProperty(e,t);return r&&n&&He(e,"delete",t,void 0),r}},{key:"has",value:function(e,t){var n=Reflect.has(e,t);return B(t)&&Ke.has(t)||Ge(e,0,t),n}},{key:"ownKeys",value:function(e){return Ge(e,0,O(e)?"length":ze),Reflect.ownKeys(e)}}])}(Xe),Ze=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return m(this,t),f(this,t,[!0,e])}return v(t,e),y(t,[{key:"set",value:function(e,t){return!0}},{key:"deleteProperty",value:function(e,t){return!0}}])}(Xe),et=new Je,tt=new Ze,nt=new Je(!0),rt=function(e){return e},it=function(e){return Reflect.getPrototypeOf(e)};function at(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=Ft(e=e.__v_raw),a=Ft(t);n||(re(t,a)&&Ge(i,0,t),Ge(i,0,a));var o=it(i).has,u=r?rt:n?jt:Vt;return o.call(i,t)?u(e.get(t)):o.call(i,a)?u(e.get(a)):void(e!==i&&e.get(t))}function ot(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.__v_raw,r=Ft(n),i=Ft(e);return t||(re(e,i)&&Ge(r,0,e),Ge(r,0,i)),e===i?n.has(e):n.has(e)||n.has(i)}function ut(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e=e.__v_raw,!t&&Ge(Ft(e),0,ze),Reflect.get(e,"size",e)}function st(e){e=Ft(e);var t=Ft(this);return it(t).has.call(t,e)||(t.add(e),He(t,"add",e,e)),this}function lt(e,t){t=Ft(t);var n=Ft(this),r=it(n),i=r.has,a=r.get,o=i.call(n,e);o||(e=Ft(e),o=i.call(n,e));var u=a.call(n,e);return n.set(e,t),o?re(t,u)&&He(n,"set",e,t):He(n,"add",e,t),this}function ct(e){var t=Ft(this),n=it(t),r=n.has,i=n.get,a=r.call(t,e);a||(e=Ft(e),a=r.call(t,e)),i&&i.call(t,e);var o=t.delete(e);return a&&He(t,"delete",e,void 0),o}function ft(){var e=Ft(this),t=0!==e.size,n=e.clear();return t&&He(e,"clear",void 0,void 0),n}function ht(e,t){return function(n,r){var i=this,a=i.__v_raw,o=Ft(a),u=t?rt:e?jt:Vt;return!e&&Ge(o,0,ze),a.forEach((function(e,t){return n.call(r,u(e),u(t),i)}))}}function dt(e,t,n){return function(){var r=this.__v_raw,i=Ft(r),a=F(i),o="entries"===e||e===Symbol.iterator&&a,u="keys"===e&&a,s=r[e].apply(r,arguments),l=n?rt:t?jt:Vt;return!t&&Ge(i,0,u?qe:ze),k({next:function(){var e=s.next(),t=e.value,n=e.done;return n?{value:t,done:n}:{value:o?[l(t[0]),l(t[1])]:l(t),done:n}}},Symbol.iterator,(function(){return this}))}}function vt(e){return function(){return"delete"!==e&&("clear"===e?void 0:this)}}function pt(){var e={get:function(e){return at(this,e)},get size(){return ut(this)},has:ot,add:st,set:lt,delete:ct,clear:ft,forEach:ht(!1,!1)},t={get:function(e){return at(this,e,!1,!0)},get size(){return ut(this)},has:ot,add:st,set:lt,delete:ct,clear:ft,forEach:ht(!1,!0)},n={get:function(e){return at(this,e,!0)},get size(){return ut(this,!0)},has:function(e){return ot.call(this,e,!0)},add:vt("add"),set:vt("set"),delete:vt("delete"),clear:vt("clear"),forEach:ht(!0,!1)},r={get:function(e){return at(this,e,!0,!0)},get size(){return ut(this,!0)},has:function(e){return ot.call(this,e,!0)},add:vt("add"),set:vt("set"),delete:vt("delete"),clear:vt("clear"),forEach:ht(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((function(i){e[i]=dt(i,!1,!1),n[i]=dt(i,!0,!1),t[i]=dt(i,!1,!0),r[i]=dt(i,!0,!0)})),[e,n,t,r]}var mt=b(pt(),4),gt=mt[0],yt=mt[1],kt=mt[2],_t=mt[3];function bt(e,t){var n=t?e?_t:kt:e?yt:gt;return function(t,r,i){return"__v_isReactive"===r?!e:"__v_isReadonly"===r?e:"__v_raw"===r?t:Reflect.get(M(n,r)&&r in t?n:t,r,i)}}var wt={get:bt(!1,!1)},Et={get:bt(!1,!0)},Ct={get:bt(!0,!1)},xt=new WeakMap,St=new WeakMap,It=new WeakMap,Tt=new WeakMap;function At(e){return Rt(e)?e:Dt(e,!1,et,wt,xt)}function Lt(e){return Dt(e,!1,nt,Et,St)}function Nt(e){return Dt(e,!0,tt,Ct,It)}function Dt(e,t,n,r,i){if(!z(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;var a=i.get(e);if(a)return a;var o,u=(o=e).__v_skip||!Object.isExtensible(o)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}(W(o));if(0===u)return e;var s=new Proxy(e,2===u?r:n);return i.set(e,s),s}function Pt(e){return Rt(e)?Pt(e.__v_raw):!(!e||!e.__v_isReactive)}function Rt(e){return!(!e||!e.__v_isReadonly)}function Mt(e){return!(!e||!e.__v_isShallow)}function Ot(e){return Pt(e)||Rt(e)}function Ft(e){var t=e&&e.__v_raw;return t?Ft(t):e}function Ut(e){return Object.isExtensible(e)&&ae(e,"__v_skip",!0),e}var Vt=function(e){return z(e)?At(e):e},jt=function(e){return z(e)?Nt(e):e},Bt=function(){return y((function e(t,n,r,i){var a=this;m(this,e),this.getter=t,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Se((function(){return t(a._value)}),(function(){return qt(a,2===a.effect._dirtyLevel?2:3)})),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}),[{key:"value",get:function(){var e=Ft(this);return e._cacheable&&!e.effect.dirty||!re(e._value,e._value=e.effect.run())||qt(e,4),zt(e),e.effect._dirtyLevel>=2&&qt(e,2),e._value},set:function(e){this._setter(e)}},{key:"_dirty",get:function(){return this.effect.dirty},set:function(e){this.effect.dirty=e}}])}();function zt(e){var t;Le&&ye&&(e=Ft(e),Fe(ye,null!=(t=e.dep)?t:e.dep=je((function(){return e.dep=void 0}),e instanceof Bt?e:void 0)))}function qt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=(e=Ft(e)).dep;n&&Ve(n,t)}function Gt(e){return!(!e||!0!==e.__v_isRef)}function Ht(e){return Kt(e,!1)}function Wt(e){return Kt(e,!0)}function Kt(e,t){return Gt(e)?e:new Qt(e,t)}var Qt=function(){return y((function e(t,n){m(this,e),this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Ft(t),this._value=n?t:Vt(t)}),[{key:"value",get:function(){return zt(this),this._value},set:function(e){var t=this.__v_isShallow||Mt(e)||Rt(e);e=t?e:Ft(e),re(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:Vt(e),qt(this,4))}}])}();function Yt(e){return Gt(e)?e.value:e}var $t={get:function(e,t,n){return Yt(Reflect.get(e,t,n))},set:function(e,t,n,r){var i=e[t];return Gt(i)&&!Gt(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function Xt(e){return Pt(e)?e:new Proxy(e,$t)}var Jt=function(){return y((function e(t,n,r){m(this,e),this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0}),[{key:"value",get:function(){var e=this._object[this._key];return void 0===e?this._defaultValue:e},set:function(e){this._object[this._key]=e}},{key:"dep",get:function(){return e=Ft(this._object),t=this._key,null==(n=Be.get(e))?void 0:n.get(t);var e,t,n}}])}(),Zt=function(){return y((function e(t){m(this,e),this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0}),[{key:"value",get:function(){return this._getter()}}])}();function en(e,t,n){return Gt(e)?e:V(e)?new Zt(e):z(e)&&arguments.length>1?tn(e,t,n):Ht(e)}function tn(e,t,n){var r=e[t];return Gt(r)?r:new Jt(e,t,n)}
/**
            * @vue/runtime-core v3.4.21
            * (c) 2018-present Yuxi (Evan) You and Vue contributors
            * @license MIT
            **/function nn(e,t,n,r){try{return r?e.apply(void 0,w(r)):e()}catch(i){an(i,t,n)}}function rn(e,t,n,r){if(V(e)){var i=nn(e,t,n,r);return i&&q(i)&&i.catch((function(e){an(e,t,n)})),i}for(var a=[],o=0;o<e.length;o++)a.push(rn(e[o],t,n,r));return a}function an(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=t?t.vnode:null;if(t){for(var a=t.parent,o=t.proxy,u="https://vuejs.org/error-reference/#runtime-".concat(n);a;){var s=a.ec;if(s)for(var l=0;l<s.length;l++)if(!1===s[l](e,o,u))return;a=a.parent}var c=t.appContext.config.errorHandler;if(c)return void nn(c,null,10,[e,o,u])}!function(e,t,n){console.error(e)}(e,n,i,r)}var on=!1,un=!1,sn=[],ln=0,cn=[],fn=null,hn=0,dn=Promise.resolve(),vn=null;function pn(e){var t=vn||dn;return e?t.then(this?e.bind(this):e):t}function mn(e){sn.length&&sn.includes(e,on&&e.allowRecurse?ln+1:ln)||(null==e.id?sn.push(e):sn.splice(function(e){for(var t=ln+1,n=sn.length;t<n;){var r=t+n>>>1,i=sn[r],a=_n(i);a<e||a===e&&i.pre?t=r+1:n=r}return t}(e.id),0,e),gn())}function gn(){on||un||(un=!0,vn=dn.then(wn))}function yn(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:on?ln+1:0;n<sn.length;n++){var r=sn[n];if(r&&r.pre){if(e&&r.id!==e.uid)continue;sn.splice(n,1),n--,r()}}}function kn(e){if(cn.length){var t,n=w(new Set(cn)).sort((function(e,t){return _n(e)-_n(t)}));if(cn.length=0,fn)return void(t=fn).push.apply(t,w(n));for(fn=n,hn=0;hn<fn.length;hn++)fn[hn]();fn=null,hn=0}}var _n=function(e){return null==e.id?1/0:e.id},bn=function(e,t){var n=_n(e)-_n(t);if(0===n){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function wn(e){un=!1,on=!0,sn.sort(bn);try{for(ln=0;ln<sn.length;ln++){var t=sn[ln];t&&!1!==t.active&&nn(t,null,14)}}finally{ln=0,sn.length=0,kn(),on=!1,vn=null,(sn.length||cn.length)&&wn()}}function En(e,t){if(!e.isUnmounted){for(var n=e.vnode.props||S,r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];var o,u=i,s=t.startsWith("update:"),l=s&&t.slice(7);if(l&&l in n){var c=n["".concat("modelValue"===l?"model":l,"Modifiers")]||S,f=c.number;c.trim&&(u=i.map((function(e){return j(e)?e.trim():e}))),f&&(u=i.map(oe))}var h=n[o=ne(t)]||n[o=ne(J(t))];!h&&s&&(h=n[o=ne(ee(t))]),h&&rn(h,e,6,u);var d=n[o+"Once"];if(d){if(e.emitted){if(e.emitted[o])return}else e.emitted={};e.emitted[o]=!0,rn(d,e,6,u)}}}function Cn(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.emitsCache,i=r.get(e);if(void 0!==i)return i;var a=e.emits,o={},u=!1;if(!V(e)){var s=function(e){var n=Cn(e,t,!0);n&&(u=!0,D(o,n))};!n&&t.mixins.length&&t.mixins.forEach(s),e.extends&&s(e.extends),e.mixins&&e.mixins.forEach(s)}return a||u?(O(a)?a.forEach((function(e){return o[e]=null})):D(o,a),z(e)&&r.set(e,o),o):(z(e)&&r.set(e,null),null)}function xn(e,t){return!(!e||!L(t))&&(t=t.slice(2).replace(/Once$/,""),M(e,t[0].toLowerCase()+t.slice(1))||M(e,ee(t))||M(e,t))}var Sn=null,In=null;function Tn(e){var t=Sn;return Sn=e,In=e&&e.type.__scopeId||null,t}function An(e){In=e}function Ln(){In=null}function Nn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sn;if(!t)return e;if(e._n)return e;var n=function n(){n._d&&xi(-1);var r,i=Tn(t);try{r=e.apply(void 0,arguments)}finally{Tn(i),n._d&&xi(1)}return r};return n._n=!0,n._c=!0,n._d=!0,n}function Dn(e){var t,n,r=e.type,i=e.vnode,a=e.proxy,o=e.withProxy,u=e.props,s=b(e.propsOptions,1)[0],l=e.slots,c=e.attrs,f=e.emit,h=e.render,d=e.renderCache,v=e.data,p=e.setupState,m=e.ctx,g=e.inheritAttrs,y=Tn(e);try{if(4&i.shapeFlag){var k=o||a,_=k;t=Bi(h.call(_,k,d,u,p,v,m)),n=c}else{var w=r;0,t=Bi(w.length>1?w(u,{attrs:c,slots:l,emit:f}):w(u,null)),n=r.props?c:Pn(c)}}catch(S){bi.length=0,an(S,e,1),t=Mi(ki)}var E=t;if(n&&!1!==g){var C=Object.keys(n),x=E.shapeFlag;C.length&&7&x&&(s&&C.some(N)&&(n=Rn(n,s)),E=Fi(E,n))}return i.dirs&&((E=Fi(E)).dirs=E.dirs?E.dirs.concat(i.dirs):i.dirs),i.transition&&(E.transition=i.transition),t=E,Tn(y),t}var Pn=function(e){var t;for(var n in e)("class"===n||"style"===n||L(n))&&((t||(t={}))[n]=e[n]);return t},Rn=function(e,t){var n={};for(var r in e)N(r)&&r.slice(9)in t||(n[r]=e[r]);return n};function Mn(e,t,n){var r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(var i=0;i<r.length;i++){var a=r[i];if(t[a]!==e[a]&&!xn(n,a))return!0}return!1}var On="components";function Fn(e,t){return Vn(On,e,!0,t)||e}var Un=Symbol.for("v-ndc");function Vn(e,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=Sn||$i;if(r){var i=r.type;if(e===On){var a=sa(i,!1);if(a&&(a===t||a===J(t)||a===te(J(t))))return i}var o=jn(r[e]||i[e],t)||jn(r.appContext[e],t);return!o&&n?i:o}}function jn(e,t){return e&&(e[t]||e[J(t)]||e[te(J(t))])}var Bn=Symbol.for("v-scx"),zn=function(){return $r(Bn)};var qn={};function Gn(e,t,n){return Hn(e,t,n)}function Hn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S,r=n.immediate,i=n.deep,a=n.flush,o=n.once;n.onTrack,n.onTrigger;if(t&&o){var u=t;t=function(){u.apply(void 0,arguments),E()}}var s,l,c=$i,f=function(e){return!0===i?e:Qn(e,!1===i?1:void 0)},h=!1,d=!1;if(Gt(e)?(s=function(){return e.value},h=Mt(e)):Pt(e)?(s=function(){return f(e)},h=!0):O(e)?(d=!0,h=e.some((function(e){return Pt(e)||Mt(e)})),s=function(){return e.map((function(e){return Gt(e)?e.value:Pt(e)?f(e):V(e)?nn(e,c,2):void 0}))}):s=V(e)?t?function(){return nn(e,c,2)}:function(){return l&&l(),rn(e,c,3,[m])}:T,t&&i){var v=s;s=function(){return Qn(v())}}var p,m=function(e){l=b.onStop=function(){nn(e,c,4),l=b.onStop=void 0}};if(ia){if(m=T,t?r&&rn(t,c,3,[s(),d?[]:void 0,m]):s(),"sync"!==a)return T;var g=zn();p=g.__watcherHandles||(g.__watcherHandles=[])}var y,k=d?new Array(e.length).fill(qn):qn,_=function(){if(b.active&&b.dirty)if(t){var e=b.run();(i||h||(d?e.some((function(e,t){return re(e,k[t])})):re(e,k)))&&(l&&l(),rn(t,c,3,[e,k===qn?void 0:d&&k[0]===qn?[]:k,m]),k=e)}else b.run()};_.allowRecurse=!!t,"sync"===a?y=_:"post"===a?y=function(){return fi(_,c&&c.suspense)}:(_.pre=!0,c&&(_.id=c.uid),y=function(){return mn(_)});var b=new Se(s,T,y),w=Ce(),E=function(){b.stop(),w&&P(w.effects,b)};return t?r?_():k=b.run():"post"===a?fi(b.run.bind(b),c&&c.suspense):b.run(),p&&p.push(E),E}function Wn(e,t,n){var r,i=this.proxy,a=j(e)?e.includes(".")?Kn(i,e):function(){return i[e]}:e.bind(i,i);V(t)?r=t:(r=t.handler,n=t);var o=ea(this),u=Hn(a,r.bind(i),n);return o(),u}function Kn(e,t){var n=t.split(".");return function(){for(var t=e,r=0;r<n.length&&t;r++)t=t[n[r]];return t}}function Qn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;if(!z(e)||e.__v_skip)return e;if(t&&t>0){if(n>=t)return e;n++}if((r=r||new Set).has(e))return e;if(r.add(e),Gt(e))Qn(e.value,t,n,r);else if(O(e))for(var i=0;i<e.length;i++)Qn(e[i],t,n,r);else if(U(e)||F(e))e.forEach((function(e){Qn(e,t,n,r)}));else if(K(e))for(var a in e)Qn(e[a],t,n,r);return e}function Yn(e,t,n,r){for(var i=e.dirs,a=t&&t.dirs,o=0;o<i.length;o++){var u=i[o];a&&(u.oldValue=a[o].value);var s=u.dir[r];s&&(Pe(),rn(s,n,8,[e.el,u,e,t]),Re())}}var $n=Symbol("_leaveCb"),Xn=Symbol("_enterCb");function Jn(){var e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return yr((function(){e.isMounted=!0})),br((function(){e.isUnmounting=!0})),e}var Zn=[Function,Array],er={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Zn,onEnter:Zn,onAfterEnter:Zn,onEnterCancelled:Zn,onBeforeLeave:Zn,onLeave:Zn,onAfterLeave:Zn,onLeaveCancelled:Zn,onBeforeAppear:Zn,onAppear:Zn,onAfterAppear:Zn,onAppearCancelled:Zn},tr={name:"BaseTransition",props:er,setup:function(e,t){var n=t.slots,r=Xi(),i=Jn();return function(){var t=n.default&&ur(n.default(),!0);if(t&&t.length){var a=t[0];if(t.length>1){var o,u=C(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;if(s.type!==ki){a=s;break}}}catch(m){u.e(m)}finally{u.f()}}var l=Ft(e),c=l.mode;if(i.isLeaving)return ir(a);var f=ar(a);if(!f)return ir(a);var h=rr(f,l,i,r);or(f,h);var d=r.subTree,v=d&&ar(d);if(v&&v.type!==ki&&!Li(f,v)){var p=rr(v,l,i,r);if(or(v,p),"out-in"===c)return i.isLeaving=!0,p.afterLeave=function(){i.isLeaving=!1,!1!==r.update.active&&(r.effect.dirty=!0,r.update())},ir(a);"in-out"===c&&f.type!==ki&&(p.delayLeave=function(e,t,n){nr(i,v)[String(v.key)]=v,e[$n]=function(){t(),e[$n]=void 0,delete h.delayedLeave},h.delayedLeave=n})}return a}}}};function nr(e,t){var n=e.leavingVNodes,r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function rr(e,t,n,r){var i=t.appear,a=t.mode,o=t.persisted,u=void 0!==o&&o,s=t.onBeforeEnter,l=t.onEnter,c=t.onAfterEnter,f=t.onEnterCancelled,h=t.onBeforeLeave,d=t.onLeave,v=t.onAfterLeave,p=t.onLeaveCancelled,m=t.onBeforeAppear,g=t.onAppear,y=t.onAfterAppear,k=t.onAppearCancelled,_=String(e.key),b=nr(n,e),w=function(e,t){e&&rn(e,r,9,t)},E=function(e,t){var n=t[1];w(e,t),O(e)?e.every((function(e){return e.length<=1}))&&n():e.length<=1&&n()},C={mode:a,persisted:u,beforeEnter:function(t){var r=s;if(!n.isMounted){if(!i)return;r=m||s}t[$n]&&t[$n](!0);var a=b[_];a&&Li(e,a)&&a.el[$n]&&a.el[$n](),w(r,[t])},enter:function(e){var t=l,r=c,a=f;if(!n.isMounted){if(!i)return;t=g||l,r=y||c,a=k||f}var o=!1,u=e[Xn]=function(t){o||(o=!0,w(t?a:r,[e]),C.delayedLeave&&C.delayedLeave(),e[Xn]=void 0)};t?E(t,[e,u]):u()},leave:function(t,r){var i=String(e.key);if(t[Xn]&&t[Xn](!0),n.isUnmounting)return r();w(h,[t]);var a=!1,o=t[$n]=function(n){a||(a=!0,r(),w(n?p:v,[t]),t[$n]=void 0,b[i]===e&&delete b[i])};b[i]=e,d?E(d,[t,o]):o()},clone:function(e){return rr(e,t,n,r)}};return C}function ir(e){if(cr(e))return(e=Fi(e)).children=null,e}function ar(e){return cr(e)?e.children?e.children[0]:void 0:e}function or(e,t){6&e.shapeFlag&&e.component?or(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ur(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=[],i=0,a=0;a<e.length;a++){var o=e[a],u=null==n?o.key:String(n)+String(null!=o.key?o.key:a);o.type===gi?(128&o.patchFlag&&i++,r=r.concat(ur(o.children,t,u))):(t||o.type!==ki)&&r.push(null!=u?Fi(o,{key:u}):o)}if(i>1)for(var s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function sr(e,t){return V(e)?function(){return D({name:e.name},t,{setup:e})}():e}var lr=function(e){return!!e.type.__asyncLoader},cr=function(e){return e.type.__isKeepAlive};function fr(e,t){dr(e,"a",t)}function hr(e,t){dr(e,"da",t)}function dr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$i,r=e.__wdc||(e.__wdc=function(){for(var t=n;t;){if(t.isDeactivated)return;t=t.parent}return e()});if(pr(t,r,n),n)for(var i=n.parent;i&&i.parent;)cr(i.parent.vnode)&&vr(r,t,n,i),i=i.parent}function vr(e,t,n,r){var i=pr(t,e,r,!0);wr((function(){P(r[t],i)}),n)}function pr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$i,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(n){var i=n[e]||(n[e]=[]),a=t.__weh||(t.__weh=function(){if(!n.isUnmounted){Pe();for(var r=ea(n),i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var u=rn(t,n,e,a);return r(),Re(),u}});return r?i.unshift(a):i.push(a),a}}var mr=function(e){return function(t){return(!ia||"sp"===e)&&pr(e,(function(){return t.apply(void 0,arguments)}),arguments.length>1&&void 0!==arguments[1]?arguments[1]:$i)}},gr=mr("bm"),yr=mr("m"),kr=mr("bu"),_r=mr("u"),br=mr("bum"),wr=mr("um"),Er=mr("sp"),Cr=mr("rtg"),xr=mr("rtc");function Sr(e){pr("ec",e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:$i)}function Ir(e,t,n,r){var i,a=n&&n[r];if(O(e)||j(e)){i=new Array(e.length);for(var o=0,u=e.length;o<u;o++)i[o]=t(e[o],o,void 0,a&&a[o])}else if("number"==typeof e){i=new Array(e);for(var s=0;s<e;s++)i[s]=t(s+1,s,void 0,a&&a[s])}else if(z(e))if(e[Symbol.iterator])i=Array.from(e,(function(e,n){return t(e,n,void 0,a&&a[n])}));else{var l=Object.keys(e);i=new Array(l.length);for(var c=0,f=l.length;c<f;c++){var h=l[c];i[c]=t(e[h],h,c,a&&a[c])}}else i=[];return n&&(n[r]=i),i}var Tr=function e(t){return t?na(t)?ua(t)||t.proxy:e(t.parent):null},Ar=D(Object.create(null),{$:function(e){return e},$el:function(e){return e.vnode.el},$data:function(e){return e.data},$props:function(e){return e.props},$attrs:function(e){return e.attrs},$slots:function(e){return e.slots},$refs:function(e){return e.refs},$parent:function(e){return Tr(e.parent)},$root:function(e){return Tr(e.root)},$emit:function(e){return e.emit},$options:function(e){return Fr(e)},$forceUpdate:function(e){return e.f||(e.f=function(){e.effect.dirty=!0,mn(e.update)})},$nextTick:function(e){return e.n||(e.n=pn.bind(e.proxy))},$watch:function(e){return Wn.bind(e)}}),Lr=function(e,t){return e!==S&&!e.__isScriptSetup&&M(e,t)},Nr={get:function(e,t){var n,r=e._,i=r.ctx,a=r.setupState,o=r.data,u=r.props,s=r.accessCache,l=r.type,c=r.appContext;if("$"!==t[0]){var f=s[t];if(void 0!==f)switch(f){case 1:return a[t];case 2:return o[t];case 4:return i[t];case 3:return u[t]}else{if(Lr(a,t))return s[t]=1,a[t];if(o!==S&&M(o,t))return s[t]=2,o[t];if((n=r.propsOptions[0])&&M(n,t))return s[t]=3,u[t];if(i!==S&&M(i,t))return s[t]=4,i[t];Pr&&(s[t]=0)}}var h,d,v=Ar[t];return v?("$attrs"===t&&Ge(r,0,t),v(r)):(h=l.__cssModules)&&(h=h[t])?h:i!==S&&M(i,t)?(s[t]=4,i[t]):(d=c.config.globalProperties,M(d,t)?d[t]:void 0)},set:function(e,t,n){var r=e._,i=r.data,a=r.setupState,o=r.ctx;return Lr(a,t)?(a[t]=n,!0):i!==S&&M(i,t)?(i[t]=n,!0):!M(r.props,t)&&(("$"!==t[0]||!(t.slice(1)in r))&&(o[t]=n,!0))},has:function(e,t){var n,r=e._,i=r.data,a=r.setupState,o=r.accessCache,u=r.ctx,s=r.appContext,l=r.propsOptions;return!!o[t]||i!==S&&M(i,t)||Lr(a,t)||(n=l[0])&&M(n,t)||M(u,t)||M(Ar,t)||M(s.config.globalProperties,t)},defineProperty:function(e,t,n){return null!=n.get?e._.accessCache[t]=0:M(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Dr(e){return O(e)?e.reduce((function(e,t){return e[t]=null,e}),{}):e}var Pr=!0;function Rr(e){var t=Fr(e),n=e.proxy,r=e.ctx;Pr=!1,t.beforeCreate&&Mr(t.beforeCreate,e,"bc");var i=t.data,a=t.computed,o=t.methods,u=t.watch,s=t.provide,l=t.inject,c=t.created,f=t.beforeMount,h=t.mounted,d=t.beforeUpdate,v=t.updated,p=t.activated,m=t.deactivated,g=(t.beforeDestroy,t.beforeUnmount),y=(t.destroyed,t.unmounted),k=t.render,_=t.renderTracked,b=t.renderTriggered,w=t.errorCaptured,E=t.serverPrefetch,C=t.expose,x=t.inheritAttrs,S=t.components,I=t.directives;t.filters;if(l&&function(e,t){O(e)&&(e=Br(e));var n=function(){var n,i=e[r];Gt(n=z(i)?"default"in i?$r(i.from||r,i.default,!0):$r(i.from||r):$r(i))?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:function(){return n.value},set:function(e){return n.value=e}}):t[r]=n};for(var r in e)n()}(l,r,null),o)for(var A in o){var L=o[A];V(L)&&(r[A]=L.bind(n))}if(i){var N=i.call(n,n);z(N)&&(e.data=At(N))}if(Pr=!0,a){var D=function(){var e=a[P],t=V(e)?e.bind(n,n):V(e.get)?e.get.bind(n,n):T,i=!V(e)&&V(e.set)?e.set.bind(n):T,o=la({get:t,set:i});Object.defineProperty(r,P,{enumerable:!0,configurable:!0,get:function(){return o.value},set:function(e){return o.value=e}})};for(var P in a)D()}if(u)for(var R in u)Or(u[R],r,n,R);if(s){var M=V(s)?s.call(n):s;Reflect.ownKeys(M).forEach((function(e){Yr(e,M[e])}))}function F(e,t){O(t)?t.forEach((function(t){return e(t.bind(n))})):t&&e(t.bind(n))}if(c&&Mr(c,e,"c"),F(gr,f),F(yr,h),F(kr,d),F(_r,v),F(fr,p),F(hr,m),F(Sr,w),F(xr,_),F(Cr,b),F(br,g),F(wr,y),F(Er,E),O(C))if(C.length){var U=e.exposed||(e.exposed={});C.forEach((function(e){Object.defineProperty(U,e,{get:function(){return n[e]},set:function(t){return n[e]=t}})}))}else e.exposed||(e.exposed={});k&&e.render===T&&(e.render=k),null!=x&&(e.inheritAttrs=x),S&&(e.components=S),I&&(e.directives=I)}function Mr(e,t,n){rn(O(e)?e.map((function(e){return e.bind(t.proxy)})):e.bind(t.proxy),t,n)}function Or(e,t,n,r){var i=r.includes(".")?Kn(n,r):function(){return n[r]};if(j(e)){var a=t[e];V(a)&&Gn(i,a)}else if(V(e))Gn(i,e.bind(n));else if(z(e))if(O(e))e.forEach((function(e){return Or(e,t,n,r)}));else{var o=V(e.handler)?e.handler.bind(n):t[e.handler];V(o)&&Gn(i,o,e)}}function Fr(e){var t,n=e.type,r=n.mixins,i=n.extends,a=e.appContext,o=a.mixins,u=a.optionsCache,s=a.config.optionMergeStrategies,l=u.get(n);return l?t=l:o.length||r||i?(t={},o.length&&o.forEach((function(e){return Ur(t,e,s,!0)})),Ur(t,n,s)):t=n,z(n)&&u.set(n,t),t}function Ur(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t.mixins,a=t.extends;for(var o in a&&Ur(e,a,n,!0),i&&i.forEach((function(t){return Ur(e,t,n,!0)})),t)if(r&&"expose"===o);else{var u=Vr[o]||n&&n[o];e[o]=u?u(e[o],t[o]):t[o]}return e}var Vr={data:jr,props:Gr,emits:Gr,methods:qr,computed:qr,beforeCreate:zr,created:zr,beforeMount:zr,mounted:zr,beforeUpdate:zr,updated:zr,beforeDestroy:zr,beforeUnmount:zr,destroyed:zr,unmounted:zr,activated:zr,deactivated:zr,errorCaptured:zr,serverPrefetch:zr,components:qr,directives:qr,watch:function(e,t){if(!e)return t;if(!t)return e;var n=D(Object.create(null),e);for(var r in t)n[r]=zr(e[r],t[r]);return n},provide:jr,inject:function(e,t){return qr(Br(e),Br(t))}};function jr(e,t){return t?e?function(){return D(V(e)?e.call(this,this):e,V(t)?t.call(this,this):t)}:t:e}function Br(e){if(O(e)){for(var t={},n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function zr(e,t){return e?w(new Set([].concat(e,t))):t}function qr(e,t){return e?D(Object.create(null),e,t):t}function Gr(e,t){return e?O(e)&&O(t)?w(new Set([].concat(w(e),w(t)))):D(Object.create(null),Dr(e),Dr(null!=t?t:{})):t}function Hr(){return{app:null,config:{isNativeTag:A,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}var Wr=0;function Kr(e,t){return function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;V(n)||(n=D({},n)),null==r||z(r)||(r=null);var i=Hr(),a=new WeakSet,o=!1,u=i.app={_uid:Wr++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:fa,get config(){return i.config},set config(e){},use:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return a.has(e)||(e&&V(e.install)?(a.add(e),e.install.apply(e,[u].concat(n))):V(e)&&(a.add(e),e.apply(void 0,[u].concat(n)))),u},mixin:function(e){return i.mixins.includes(e)||i.mixins.push(e),u},component:function(e,t){return t?(i.components[e]=t,u):i.components[e]},directive:function(e,t){return t?(i.directives[e]=t,u):i.directives[e]},mount:function(a,s,l){if(!o){var c=Mi(n,r);return c.appContext=i,!0===l?l="svg":!1===l&&(l=void 0),s&&t?t(c,a):e(c,a,l),o=!0,u._container=a,a.__vue_app__=u,ua(c.component)||c.component.proxy}},unmount:function(){o&&(e(null,u._container),delete u._container.__vue_app__)},provide:function(e,t){return i.provides[e]=t,u},runWithContext:function(e){var t=Qr;Qr=u;try{return e()}finally{Qr=t}}};return u}}var Qr=null;function Yr(e,t){if($i){var n=$i.provides,r=$i.parent&&$i.parent.provides;r===n&&(n=$i.provides=Object.create(r)),n[e]=t}else;}function $r(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=$i||Sn;if(r||Qr){var i=r?null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Qr._context.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&V(t)?t.call(r&&r.proxy):t}}function Xr(e,t,n,r){var i,a=b(e.propsOptions,2),o=a[0],u=a[1],s=!1;if(t)for(var l in t)if(!Y(l)){var c=t[l],f=void 0;o&&M(o,f=J(l))?u&&u.includes(f)?(i||(i={}))[f]=c:n[f]=c:xn(e.emitsOptions,l)||l in r&&c===r[l]||(r[l]=c,s=!0)}if(u)for(var h=Ft(n),d=i||S,v=0;v<u.length;v++){var p=u[v];n[p]=Jr(o,h,p,d[p],e,!M(d,p))}return s}function Jr(e,t,n,r,i,a){var o=e[n];if(null!=o){var u=M(o,"default");if(u&&void 0===r){var s=o.default;if(o.type!==Function&&!o.skipFactory&&V(s)){var l=i.propsDefaults;if(n in l)r=l[n];else{var c=ea(i);r=l[n]=s.call(null,t),c()}}else r=s}o[0]&&(a&&!u?r=!1:!o[1]||""!==r&&r!==ee(n)||(r=!0))}return r}function Zr(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.propsCache,i=r.get(e);if(i)return i;var a=e.props,o={},u=[],s=!1;if(!V(e)){var l=function(e){s=!0;var n=b(Zr(e,t,!0),2),r=n[0],i=n[1];D(o,r),i&&u.push.apply(u,w(i))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}if(!a&&!s)return z(e)&&r.set(e,I),I;if(O(a))for(var c=0;c<a.length;c++){var f=J(a[c]);ei(f)&&(o[f]=S)}else if(a)for(var h in a){var d=J(h);if(ei(d)){var v=a[h],p=o[d]=O(v)||V(v)?{type:v}:D({},v);if(p){var m=ri(Boolean,p.type),g=ri(String,p.type);p[0]=m>-1,p[1]=g<0||m<g,(m>-1||M(p,"default"))&&u.push(d)}}}var y=[o,u];return z(e)&&r.set(e,y),y}function ei(e){return"$"!==e[0]&&!Y(e)}function ti(e){return null===e?"null":"function"==typeof e?e.name||"":"object"===E(e)&&e.constructor&&e.constructor.name||""}function ni(e,t){return ti(e)===ti(t)}function ri(e,t){return O(t)?t.findIndex((function(t){return ni(t,e)})):V(t)&&ni(t,e)?0:-1}var ii=function(e){return"_"===e[0]||"$stable"===e},ai=function(e){return O(e)?e.map(Bi):[Bi(e)]},oi=function(e,t,n){var r=e._ctx,i=function(){if(ii(a))return 1;var n=e[a];if(V(n))t[a]=function(e,t,n){if(t._n)return t;var r=Nn((function(){return ai(t.apply(void 0,arguments))}),n);return r._c=!1,r}(0,n,r);else if(null!=n){var i=ai(n);t[a]=function(){return i}}};for(var a in e)i()},ui=function(e,t){var n=ai(t);e.slots.default=function(){return n}},si=function(e,t){if(32&e.vnode.shapeFlag){var n=t._;n?(e.slots=Ft(t),ae(t,"_",n)):oi(t,e.slots={})}else e.slots={},t&&ui(e,t);ae(e.slots,Ni,1)},li=function(e,t,n){var r=e.vnode,i=e.slots,a=!0,o=S;if(32&r.shapeFlag){var u=t._;u?n&&1===u?a=!1:(D(i,t),n||1!==u||delete i._):(a=!t.$stable,oi(t,i)),o=t}else t&&(ui(e,t),o={default:1});if(a)for(var s in i)ii(s)||null!=o[s]||delete i[s]};function ci(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(O(e))e.forEach((function(e,a){return ci(e,t&&(O(t)?t[a]:t),n,r,i)}));else if(!lr(r)||i){var a=4&r.shapeFlag?ua(r.component)||r.component.proxy:r.el,o=i?null:a,u=e.i,s=e.r,l=t&&t.r,c=u.refs===S?u.refs={}:u.refs,f=u.setupState;if(null!=l&&l!==s&&(j(l)?(c[l]=null,M(f,l)&&(f[l]=null)):Gt(l)&&(l.value=null)),V(s))nn(s,u,12,[o,c]);else{var h=j(s),d=Gt(s);if(h||d){var v=function(){if(e.f){var t=h?M(f,s)?f[s]:c[s]:s.value;i?O(t)&&P(t,a):O(t)?t.includes(a)||t.push(a):h?(c[s]=[a],M(f,s)&&(f[s]=c[s])):(s.value=[a],e.k&&(c[e.k]=s.value))}else h?(c[s]=o,M(f,s)&&(f[s]=o)):d&&(s.value=o,e.k&&(c[e.k]=o))};o?(v.id=-1,fi(v,n)):v()}}}}var fi=function(e,t){var n;t&&t.pendingBranch?O(e)?(n=t.effects).push.apply(n,w(e)):t.effects.push(e):function(e){O(e)?cn.push.apply(cn,w(e)):fn&&fn.includes(e,e.allowRecurse?hn+1:hn)||cn.push(e),gn()}(e)};function hi(e){return function(e,t){var n=se();n.__VUE__=!0;var r,i,a=e.insert,o=e.remove,u=e.patchProp,s=e.createElement,l=e.createText,c=e.createComment,f=e.setText,h=e.setElementText,d=e.parentNode,v=e.nextSibling,p=e.setScopeId,m=void 0===p?T:p,g=e.insertStaticContent,y=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:!!t.dynamicChildren;if(e!==t){e&&!Li(e,t)&&(r=te(e),K(e,i,a,!0),e=null),-2===t.patchFlag&&(s=!1,t.dynamicChildren=null);var l=t.type,c=t.ref,f=t.shapeFlag;switch(l){case yi:k(e,t,n,r);break;case ki:_(e,t,n,r);break;case _i:null==e&&w(t,n,r,o);break;case gi:O(e,t,n,r,i,a,o,u,s);break;default:1&f?x(e,t,n,r,i,a,o,u,s):6&f?F(e,t,n,r,i,a,o,u,s):(64&f||128&f)&&l.process(e,t,n,r,i,a,o,u,s,oe)}null!=c&&i&&ci(c,e&&e.ref,a,t||e,!t)}},k=function(e,t,n,r){if(null==e)a(t.el=l(t.children),n,r);else{var i=t.el=e.el;t.children!==e.children&&f(i,t.children)}},_=function(e,t,n,r){null==e?a(t.el=c(t.children||""),n,r):t.el=e.el},w=function(e,t,n,r){var i=b(g(e.children,t,n,r,e.el,e.anchor),2);e.el=i[0],e.anchor=i[1]},E=function(e,t,n){for(var r,i=e.el,o=e.anchor;i&&i!==o;)r=v(i),a(i,t,n),i=r;a(o,t,n)},C=function(e){for(var t,n=e.el,r=e.anchor;n&&n!==r;)t=v(n),o(n),n=t;o(r)},x=function(e,t,n,r,i,a,o,u,s){"svg"===t.type?o="svg":"math"===t.type&&(o="mathml"),null==e?A(t,n,r,i,a,o,u,s):D(e,t,i,a,o,u,s)},A=function(e,t,n,r,i,o,l,c){var f,d,v=e.props,p=e.shapeFlag,m=e.transition,g=e.dirs;if(f=e.el=s(e.type,o,v&&v.is,v),8&p?h(f,e.children):16&p&&N(e.children,f,null,r,i,di(e,o),l,c),g&&Yn(e,null,r,"created"),L(f,e,e.scopeId,l,r),v){for(var y in v)"value"===y||Y(y)||u(f,y,null,v[y],o,e.children,r,i,Z);"value"in v&&u(f,"value",null,v.value,o),(d=v.onVnodeBeforeMount)&&Hi(d,r,e)}g&&Yn(e,null,r,"beforeMount");var k=function(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}(i,m);k&&m.beforeEnter(f),a(f,t,n),((d=v&&v.onVnodeMounted)||k||g)&&fi((function(){d&&Hi(d,r,e),k&&m.enter(f),g&&Yn(e,null,r,"mounted")}),i)},L=function e(t,n,r,i,a){if(r&&m(t,r),i)for(var o=0;o<i.length;o++)m(t,i[o]);if(a&&n===a.subTree){var u=a.vnode;e(t,u,u.scopeId,u.slotScopeIds,a.parent)}},N=function(e,t,n,r,i,a,o,u){for(var s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;s<e.length;s++){var l=e[s]=u?zi(e[s]):Bi(e[s]);y(null,l,t,n,r,i,a,o,u)}},D=function(e,t,n,r,i,a,o){var s=t.el=e.el,l=t.patchFlag,c=t.dynamicChildren,f=t.dirs;l|=16&e.patchFlag;var d,v=e.props||S,p=t.props||S;if(n&&vi(n,!1),(d=p.onVnodeBeforeUpdate)&&Hi(d,n,t,e),f&&Yn(t,e,n,"beforeUpdate"),n&&vi(n,!0),c?P(e.dynamicChildren,c,s,n,r,di(t,i),a):o||z(e,t,s,null,n,r,di(t,i),a,!1),l>0){if(16&l)R(s,t,v,p,n,r,i);else if(2&l&&v.class!==p.class&&u(s,"class",null,p.class,i),4&l&&u(s,"style",v.style,p.style,i),8&l)for(var m=t.dynamicProps,g=0;g<m.length;g++){var y=m[g],k=v[y],_=p[y];_===k&&"value"!==y||u(s,y,k,_,i,e.children,n,r,Z)}1&l&&e.children!==t.children&&h(s,t.children)}else o||null!=c||R(s,t,v,p,n,r,i);((d=p.onVnodeUpdated)||f)&&fi((function(){d&&Hi(d,n,t,e),f&&Yn(t,e,n,"updated")}),r)},P=function(e,t,n,r,i,a,o){for(var u=0;u<t.length;u++){var s=e[u],l=t[u],c=s.el&&(s.type===gi||!Li(s,l)||70&s.shapeFlag)?d(s.el):n;y(s,l,c,null,r,i,a,o,!0)}},R=function(e,t,n,r,i,a,o){if(n!==r){if(n!==S)for(var s in n)Y(s)||s in r||u(e,s,n[s],null,o,t.children,i,a,Z);for(var l in r)if(!Y(l)){var c=r[l],f=n[l];c!==f&&"value"!==l&&u(e,l,f,c,o,t.children,i,a,Z)}"value"in r&&u(e,"value",n.value,r.value,o)}},O=function(e,t,n,r,i,o,u,s,c){var f=t.el=e?e.el:l(""),h=t.anchor=e?e.anchor:l(""),d=t.patchFlag,v=t.dynamicChildren,p=t.slotScopeIds;p&&(s=s?s.concat(p):p),null==e?(a(f,n,r),a(h,n,r),N(t.children||[],n,h,i,o,u,s,c)):d>0&&64&d&&v&&e.dynamicChildren?(P(e.dynamicChildren,v,n,i,o,u,s),(null!=t.key||i&&t===i.subTree)&&pi(e,t,!0)):z(e,t,n,h,i,o,u,s,c)},F=function(e,t,n,r,i,a,o,u,s){t.slotScopeIds=u,null==e?512&t.shapeFlag?i.ctx.activate(t,n,r,o,s):U(t,n,r,i,a,o,s):V(e,t,s)},U=function(e,t,n,r,i,a,o){var u=e.component=function(e,t,n){var r=e.type,i=(t?t.appContext:e.appContext)||Wi,a={uid:Ki++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new we(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Zr(r,i),emitsOptions:Cn(r,i),emit:null,emitted:null,propsDefaults:S,inheritAttrs:r.inheritAttrs,ctx:S,data:S,props:S,attrs:S,slots:S,refs:S,setupState:S,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};a.ctx={_:a},a.root=t?t.root:a,a.emit=En.bind(null,a),e.ce&&e.ce(a);return a}(e,r,i);if(cr(e)&&(u.ctx.renderer=oe),function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&Yi(t);var n=e.vnode,r=n.props,i=n.children,a=na(e);(function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={},a={};for(var o in ae(a,Ni,1),e.propsDefaults=Object.create(null),Xr(e,t,i,a),e.propsOptions[0])o in i||(i[o]=void 0);n?e.props=r?i:Lt(i):e.type.props?e.props=i:e.props=a,e.attrs=a})(e,r,a,t),si(e,i);var o=a?function(e,t){var n=e.type;e.accessCache=Object.create(null),e.proxy=Ut(new Proxy(e.ctx,Nr));var r=n.setup;if(r){var i=e.setupContext=r.length>1?function(e){var t=function(t){e.exposed=t||{}};return{get attrs(){return function(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get:function(t,n){return Ge(e,0,"$attrs"),t[n]}}))}(e)},slots:e.slots,emit:e.emit,expose:t}}(e):null,a=ea(e);Pe();var o=nn(r,e,0,[e.props,i]);if(Re(),a(),q(o)){if(o.then(ta,ta),t)return o.then((function(n){aa(e,n,t)})).catch((function(t){an(t,e,0)}));e.asyncDep=o}else aa(e,o,t)}else oa(e,t)}(e,t):void 0;t&&Yi(!1)}(u),u.asyncDep){if(i&&i.registerDep(u,j),!e.el){var s=u.subTree=Mi(ki);_(null,s,t,n)}}else j(u,e,t,n,i,a,o)},V=function(e,t,n){var r,i,a=t.component=e.component;if(function(e,t,n){var r=e.props,i=e.children,a=e.component,o=t.props,u=t.children,s=t.patchFlag,l=a.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&s>=0))return!(!i&&!u||u&&u.$stable)||r!==o&&(r?!o||Mn(r,o,l):!!o);if(1024&s)return!0;if(16&s)return r?Mn(r,o,l):!!o;if(8&s)for(var c=t.dynamicProps,f=0;f<c.length;f++){var h=c[f];if(o[h]!==r[h]&&!xn(l,h))return!0}return!1}(e,t,n)){if(a.asyncDep&&!a.asyncResolved)return void B(a,t,n);a.next=t,r=a.update,(i=sn.indexOf(r))>ln&&sn.splice(i,1),a.effect.dirty=!0,a.update()}else t.el=e.el,a.vnode=t},j=function(e,t,n,r,a,o,u){var s=function s(){if(e.isMounted){var l=e.next,c=e.bu,f=e.u,h=e.parent,v=e.vnode,p=mi(e);if(p)return l&&(l.el=v.el,B(e,l,u)),void p.asyncDep.then((function(){e.isUnmounted||s()}));var m,g=l;vi(e,!1),l?(l.el=v.el,B(e,l,u)):l=v,c&&ie(c),(m=l.props&&l.props.onVnodeBeforeUpdate)&&Hi(m,h,l,v),vi(e,!0);var k=Dn(e),_=e.subTree;e.subTree=k,y(_,k,d(_.el),te(_),e,a,o),l.el=k.el,null===g&&function(e,t){for(var n=e.vnode,r=e.parent;r;){var i=r.subTree;if(i.suspense&&i.suspense.activeBranch===n&&(i.el=n.el),i!==n)break;(n=r.vnode).el=t,r=r.parent}}(e,k.el),f&&fi(f,a),(m=l.props&&l.props.onVnodeUpdated)&&fi((function(){return Hi(m,h,l,v)}),a)}else{var b,w=t,E=w.el,C=w.props,x=e.bm,S=e.m,I=e.parent,T=lr(t);if(vi(e,!1),x&&ie(x),!T&&(b=C&&C.onVnodeBeforeMount)&&Hi(b,I,t),vi(e,!0),E&&i){var A=function(){e.subTree=Dn(e),i(E,e.subTree,e,a,null)};T?t.type.__asyncLoader().then((function(){return!e.isUnmounted&&A()})):A()}else{var L=e.subTree=Dn(e);y(null,L,n,r,e,a,o),t.el=L.el}if(S&&fi(S,a),!T&&(b=C&&C.onVnodeMounted)){var N=t;fi((function(){return Hi(b,I,N)}),a)}(256&t.shapeFlag||I&&lr(I.vnode)&&256&I.vnode.shapeFlag)&&e.a&&fi(e.a,a),e.isMounted=!0,t=n=r=null}},l=e.effect=new Se(s,T,(function(){return mn(c)}),e.scope),c=e.update=function(){l.dirty&&l.run()};c.id=e.uid,vi(e,!0),c()},B=function(e,t,n){t.component=e;var r=e.vnode.props;e.vnode=t,e.next=null,function(e,t,n,r){var i=e.props,a=e.attrs,o=e.vnode.patchFlag,u=Ft(i),s=b(e.propsOptions,1)[0],l=!1;if(!(r||o>0)||16&o){var c;for(var f in Xr(e,t,i,a)&&(l=!0),u)t&&(M(t,f)||(c=ee(f))!==f&&M(t,c))||(s?!n||void 0===n[f]&&void 0===n[c]||(i[f]=Jr(s,u,f,void 0,e,!0)):delete i[f]);if(a!==u)for(var h in a)t&&M(t,h)||(delete a[h],l=!0)}else if(8&o)for(var d=e.vnode.dynamicProps,v=0;v<d.length;v++){var p=d[v];if(!xn(e.emitsOptions,p)){var m=t[p];if(s)if(M(a,p))m!==a[p]&&(a[p]=m,l=!0);else{var g=J(p);i[g]=Jr(s,u,g,m,e,!1)}else m!==a[p]&&(a[p]=m,l=!0)}}l&&He(e,"set","$attrs")}(e,t.props,r,n),li(e,t.children,n),Pe(),yn(e),Re()},z=function(e,t,n,r,i,a,o,u){var s=arguments.length>8&&void 0!==arguments[8]&&arguments[8],l=e&&e.children,c=e?e.shapeFlag:0,f=t.children,d=t.patchFlag,v=t.shapeFlag;if(d>0){if(128&d)return void H(l,f,n,r,i,a,o,u,s);if(256&d)return void G(l,f,n,r,i,a,o,u,s)}8&v?(16&c&&Z(l,i,a),f!==l&&h(n,f)):16&c?16&v?H(l,f,n,r,i,a,o,u,s):Z(l,i,a,!0):(8&c&&h(n,""),16&v&&N(f,n,r,i,a,o,u,s))},G=function(e,t,n,r,i,a,o,u,s){t=t||I;var l,c=(e=e||I).length,f=t.length,h=Math.min(c,f);for(l=0;l<h;l++){var d=t[l]=s?zi(t[l]):Bi(t[l]);y(e[l],d,n,null,i,a,o,u,s)}c>f?Z(e,i,a,!0,!1,h):N(t,n,r,i,a,o,u,s,h)},H=function(e,t,n,r,i,a,o,u,s){for(var l=0,c=t.length,f=e.length-1,h=c-1;l<=f&&l<=h;){var d=e[l],v=t[l]=s?zi(t[l]):Bi(t[l]);if(!Li(d,v))break;y(d,v,n,null,i,a,o,u,s),l++}for(;l<=f&&l<=h;){var p=e[f],m=t[h]=s?zi(t[h]):Bi(t[h]);if(!Li(p,m))break;y(p,m,n,null,i,a,o,u,s),f--,h--}if(l>f){if(l<=h)for(var g=h+1,k=g<c?t[g].el:r;l<=h;)y(null,t[l]=s?zi(t[l]):Bi(t[l]),n,k,i,a,o,u,s),l++}else if(l>h)for(;l<=f;)K(e[l],i,a,!0),l++;else{var _,b=l,w=l,E=new Map;for(l=w;l<=h;l++){var C=t[l]=s?zi(t[l]):Bi(t[l]);null!=C.key&&E.set(C.key,l)}var x=0,S=h-w+1,T=!1,A=0,L=new Array(S);for(l=0;l<S;l++)L[l]=0;for(l=b;l<=f;l++){var N=e[l];if(x>=S)K(N,i,a,!0);else{var D=void 0;if(null!=N.key)D=E.get(N.key);else for(_=w;_<=h;_++)if(0===L[_-w]&&Li(N,t[_])){D=_;break}void 0===D?K(N,i,a,!0):(L[D-w]=l+1,D>=A?A=D:T=!0,y(N,t[D],n,null,i,a,o,u,s),x++)}}var P=T?function(e){var t,n,r,i,a,o=e.slice(),u=[0],s=e.length;for(t=0;t<s;t++){var l=e[t];if(0!==l){if(e[n=u[u.length-1]]<l){o[t]=n,u.push(t);continue}for(r=0,i=u.length-1;r<i;)e[u[a=r+i>>1]]<l?r=a+1:i=a;l<e[u[r]]&&(r>0&&(o[t]=u[r-1]),u[r]=t)}}r=u.length,i=u[r-1];for(;r-- >0;)u[r]=i,i=o[i];return u}(L):I;for(_=P.length-1,l=S-1;l>=0;l--){var R=w+l,M=t[R],O=R+1<c?t[R+1].el:r;0===L[l]?y(null,M,n,O,i,a,o,u,s):T&&(_<0||l!==P[_]?W(M,n,O,2):_--)}}},W=function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=t.el,s=t.type,l=t.transition,c=t.children,f=t.shapeFlag;if(6&f)e(t.component.subTree,n,r,i);else if(128&f)t.suspense.move(n,r,i);else if(64&f)s.move(t,n,r,oe);else if(s!==gi){if(s!==_i)if(2!==i&&1&f&&l)if(0===i)l.beforeEnter(u),a(u,n,r),fi((function(){return l.enter(u)}),o);else{var h=l.leave,d=l.delayLeave,v=l.afterLeave,p=function(){return a(u,n,r)},m=function(){h(u,(function(){p(),v&&v()}))};d?d(u,p,m):m()}else a(u,n,r);else E(t,n,r)}else{a(u,n,r);for(var g=0;g<c.length;g++)e(c[g],n,r,i);a(t.anchor,n,r)}},K=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=e.type,o=e.props,u=e.ref,s=e.children,l=e.dynamicChildren,c=e.shapeFlag,f=e.patchFlag,h=e.dirs;if(null!=u&&ci(u,null,n,e,!0),256&c)t.ctx.deactivate(e);else{var d,v=1&c&&h,p=!lr(e);if(p&&(d=o&&o.onVnodeBeforeUnmount)&&Hi(d,t,e),6&c)X(e.component,n,r);else{if(128&c)return void e.suspense.unmount(n,r);v&&Yn(e,null,t,"beforeUnmount"),64&c?e.type.remove(e,t,n,i,oe,r):l&&(a!==gi||f>0&&64&f)?Z(l,t,n,!1,!0):(a===gi&&384&f||!i&&16&c)&&Z(s,t,n),r&&Q(e)}(p&&(d=o&&o.onVnodeUnmounted)||v)&&fi((function(){d&&Hi(d,t,e),v&&Yn(e,null,t,"unmounted")}),n)}},Q=function(e){var t=e.type,n=e.el,r=e.anchor,i=e.transition;if(t!==gi)if(t!==_i){var a=function(){o(n),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(1&e.shapeFlag&&i&&!i.persisted){var u=i.leave,s=i.delayLeave,l=function(){return u(n,a)};s?s(e.el,a,l):l()}else a()}else C(e);else $(n,r)},$=function(e,t){for(var n;e!==t;)n=v(e),o(e),e=n;o(t)},X=function(e,t,n){var r=e.bum,i=e.scope,a=e.update,o=e.subTree,u=e.um;r&&ie(r),i.stop(),a&&(a.active=!1,K(o,e,t,n)),u&&fi(u,t),fi((function(){e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},Z=function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;a<e.length;a++)K(e[a],t,n,r,i)},te=function e(t){return 6&t.shapeFlag?e(t.component.subTree):128&t.shapeFlag?t.suspense.next():v(t.anchor||t.el)},ne=!1,re=function(e,t,n){null==e?t._vnode&&K(t._vnode,null,null,!0):y(t._vnode||null,e,t,null,null,null,n),ne||(ne=!0,yn(),kn(),ne=!1),t._vnode=e},oe={p:y,um:K,m:W,r:Q,mt:U,mc:N,pc:z,pbc:P,n:te,o:e};if(t){var ue=b(t(oe),2);r=ue[0],i=ue[1]}return{render:re,hydrate:r,createApp:Kr(re,r)}}(e)}function di(e,t){var n=e.type,r=e.props;return"svg"===t&&"foreignObject"===n||"mathml"===t&&"annotation-xml"===n&&r&&r.encoding&&r.encoding.includes("html")?void 0:t}function vi(e,t){var n=e.effect,r=e.update;n.allowRecurse=r.allowRecurse=t}function pi(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.children,i=t.children;if(O(r)&&O(i))for(var a=0;a<r.length;a++){var o=r[a],u=i[a];1&u.shapeFlag&&!u.dynamicChildren&&((u.patchFlag<=0||32===u.patchFlag)&&((u=i[a]=zi(i[a])).el=o.el),n||pi(o,u)),u.type===yi&&(u.el=o.el)}}function mi(e){var t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:mi(t)}var gi=Symbol.for("v-fgt"),yi=Symbol.for("v-txt"),ki=Symbol.for("v-cmt"),_i=Symbol.for("v-stc"),bi=[],wi=null;function Ei(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];bi.push(wi=e?null:[])}var Ci=1;function xi(e){Ci+=e}function Si(e){return e.dynamicChildren=Ci>0?wi||I:null,bi.pop(),wi=bi[bi.length-1]||null,Ci>0&&wi&&wi.push(e),e}function Ii(e,t,n,r,i,a){return Si(Ri(e,t,n,r,i,a,!0))}function Ti(e,t,n,r,i){return Si(Mi(e,t,n,r,i,!0))}function Ai(e){return!!e&&!0===e.__v_isVNode}function Li(e,t){return e.type===t.type&&e.key===t.key}var Ni="__vInternal",Di=function(e){var t=e.key;return null!=t?t:null},Pi=function(e){var t=e.ref,n=e.ref_key,r=e.ref_for;return"number"==typeof t&&(t=""+t),null!=t?j(t)||Gt(t)||V(t)?{i:Sn,r:t,k:n,f:!!r}:t:null};function Ri(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e===gi?0:1,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],s={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Di(t),ref:t&&Pi(t),scopeId:In,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Sn};return u?(qi(s,n),128&a&&e.normalize(s)):n&&(s.shapeFlag|=j(n)?8:16),Ci>0&&!o&&wi&&(s.patchFlag>0||6&a)&&32!==s.patchFlag&&wi.push(s),s}var Mi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];e&&e!==Un||(e=ki);if(Ai(e)){var o=Fi(e,t,!0);return n&&qi(o,n),Ci>0&&!a&&wi&&(6&o.shapeFlag?wi[wi.indexOf(e)]=o:wi.push(o)),o.patchFlag|=-2,o}u=e,V(u)&&"__vccOpts"in u&&(e=e.__vccOpts);var u;if(t){var s=t=Oi(t),l=s.class,c=s.style;l&&!j(l)&&(t.class=ve(l)),z(c)&&(Ot(c)&&!O(c)&&(c=D({},c)),t.style=le(c))}var f=j(e)?1:function(e){return e.__isSuspense}(e)?128:function(e){return e.__isTeleport}(e)?64:z(e)?4:V(e)?2:0;return Ri(e,t,n,r,i,f,a,!0)};function Oi(e){return e?Ot(e)||Ni in e?D({},e):e:null}function Fi(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.props,i=e.ref,a=e.patchFlag,o=e.children,u=t?Gi(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Di(u),ref:t&&t.ref?n&&i?O(i)?i.concat(Pi(t)):[i,Pi(t)]:Pi(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==gi?-1===a?16:16|a:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Fi(e.ssContent),ssFallback:e.ssFallback&&Fi(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Ui(){return Mi(yi,null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ",arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}function Vi(e,t){var n=Mi(_i,null,e);return n.staticCount=t,n}function ji(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?(Ei(),Ti(ki,null,e)):Mi(ki,null,e)}function Bi(e){return null==e||"boolean"==typeof e?Mi(ki):O(e)?Mi(gi,null,e.slice()):"object"===E(e)?zi(e):Mi(yi,null,String(e))}function zi(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:Fi(e)}function qi(e,t){var n=0,r=e.shapeFlag;if(null==t)t=null;else if(O(t))n=16;else if("object"===E(t)){if(65&r){var i=t.default;return void(i&&(i._c&&(i._d=!1),qi(e,i()),i._c&&(i._d=!0)))}n=32;var a=t._;a||Ni in t?3===a&&Sn&&(1===Sn.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=Sn}else V(t)?(t={default:t,_ctx:Sn},n=32):(t=String(t),64&r?(n=16,t=[Ui(t)]):n=8);e.children=t,e.shapeFlag|=n}function Gi(){for(var e={},t=0;t<arguments.length;t++){var n=t<0||arguments.length<=t?void 0:arguments[t];for(var r in n)if("class"===r)e.class!==n.class&&(e.class=ve([e.class,n.class]));else if("style"===r)e.style=le([e.style,n.style]);else if(L(r)){var i=e[r],a=n[r];!a||i===a||O(i)&&i.includes(a)||(e[r]=i?[].concat(i,a):a)}else""!==r&&(e[r]=n[r])}return e}function Hi(e,t,n){rn(e,t,7,[n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null])}var Wi=Hr(),Ki=0;var Qi,Yi,$i=null,Xi=function(){return $i||Sn},Ji=se(),Zi=function(e,t){var n;return(n=Ji[e])||(n=Ji[e]=[]),n.push(t),function(e){n.length>1?n.forEach((function(t){return t(e)})):n[0](e)}};Qi=Zi("__VUE_INSTANCE_SETTERS__",(function(e){return $i=e})),Yi=Zi("__VUE_SSR_SETTERS__",(function(e){return ia=e}));var ea=function(e){var t=$i;return Qi(e),e.scope.on(),function(){e.scope.off(),Qi(t)}},ta=function(){$i&&$i.scope.off(),Qi(null)};function na(e){return 4&e.vnode.shapeFlag}var ra,ia=!1;function aa(e,t,n){V(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:z(t)&&(e.setupState=Xt(t)),oa(e,n)}function oa(e,t,n){var r=e.type;if(!e.render){if(!t&&ra&&!r.render){var i=r.template||Fr(e).template;if(i){var a=e.appContext.config,o=a.isCustomElement,u=a.compilerOptions,s=r.delimiters,l=r.compilerOptions,c=D(D({isCustomElement:o,delimiters:s},u),l);r.render=ra(i,c)}}e.render=r.render||T}var f=ea(e);Pe();try{Rr(e)}finally{Re(),f()}}function ua(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Xt(Ut(e.exposed)),{get:function(t,n){return n in t?t[n]:n in Ar?Ar[n](e):void 0},has:function(e,t){return t in e||t in Ar}}))}function sa(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return V(e)?e.displayName||e.name:e.name||t&&e.__name}var la=function(e,t){var n=function(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=V(e);return a?(n=e,r=T):(n=e.get,r=e.set),new Bt(n,r,a||!r,i)}(e,t,ia);return n};function ca(e,t,n){var r=arguments.length;return 2===r?z(t)&&!O(t)?Ai(t)?Mi(e,null,[t]):Mi(e,t):Mi(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&Ai(n)&&(n=[n]),Mi(e,t,n))}var fa="3.4.21",ha="undefined"!=typeof document?document:null,da=ha&&ha.createElement("template"),va={insert:function(e,t,n){t.insertBefore(e,n||null)},remove:function(e){var t=e.parentNode;t&&t.removeChild(e)},createElement:function(e,t,n,r){var i="svg"===t?ha.createElementNS("http://www.w3.org/2000/svg",e):"mathml"===t?ha.createElementNS("http://www.w3.org/1998/Math/MathML",e):ha.createElement(e,n?{is:n}:void 0);return"select"===e&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:function(e){return ha.createTextNode(e)},createComment:function(e){return ha.createComment(e)},setText:function(e,t){e.nodeValue=t},setElementText:function(e,t){e.textContent=t},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},querySelector:function(e){return ha.querySelector(e)},setScopeId:function(e,t){e.setAttribute(t,"")},insertStaticContent:function(e,t,n,r,i,a){var o=n?n.previousSibling:t.lastChild;if(i&&(i===a||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),i!==a&&(i=i.nextSibling););else{da.innerHTML="svg"===r?"<svg>".concat(e,"</svg>"):"mathml"===r?"<math>".concat(e,"</math>"):e;var u=da.content;if("svg"===r||"mathml"===r){for(var s=u.firstChild;s.firstChild;)u.appendChild(s.firstChild);u.removeChild(s)}t.insertBefore(u,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},pa="transition",ma="animation",ga=Symbol("_vtc"),ya=function(e,t){var n=t.slots;return ca(tr,Ea(e),n)};
/**
            * @vue/runtime-dom v3.4.21
            * (c) 2018-present Yuxi (Evan) You and Vue contributors
            * @license MIT
            **/ya.displayName="Transition";var ka={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},_a=ya.props=D({},er,ka),ba=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];O(e)?e.forEach((function(e){return e.apply(void 0,w(t))})):e&&e.apply(void 0,w(t))},wa=function(e){return!!e&&(O(e)?e.some((function(e){return e.length>1})):e.length>1)};function Ea(e){var t={};for(var n in e)n in ka||(t[n]=e[n]);if(!1===e.css)return t;var r=e.name,i=void 0===r?"v":r,a=e.type,o=e.duration,u=e.enterFromClass,s=void 0===u?"".concat(i,"-enter-from"):u,l=e.enterActiveClass,c=void 0===l?"".concat(i,"-enter-active"):l,f=e.enterToClass,h=void 0===f?"".concat(i,"-enter-to"):f,d=e.appearFromClass,v=void 0===d?s:d,p=e.appearActiveClass,m=void 0===p?c:p,g=e.appearToClass,y=void 0===g?h:g,k=e.leaveFromClass,_=void 0===k?"".concat(i,"-leave-from"):k,b=e.leaveActiveClass,w=void 0===b?"".concat(i,"-leave-active"):b,E=e.leaveToClass,C=void 0===E?"".concat(i,"-leave-to"):E,x=function(e){if(null==e)return null;if(z(e))return[Ca(e.enter),Ca(e.leave)];var t=Ca(e);return[t,t]}(o),S=x&&x[0],I=x&&x[1],T=t.onBeforeEnter,A=t.onEnter,L=t.onEnterCancelled,N=t.onLeave,P=t.onLeaveCancelled,R=t.onBeforeAppear,M=void 0===R?T:R,O=t.onAppear,F=void 0===O?A:O,U=t.onAppearCancelled,V=void 0===U?L:U,j=function(e,t,n){Sa(e,t?y:h),Sa(e,t?m:c),n&&n()},B=function(e,t){e._isLeaving=!1,Sa(e,_),Sa(e,C),Sa(e,w),t&&t()},q=function(e){return function(t,n){var r=e?F:A,i=function(){return j(t,e,n)};ba(r,[t,i]),Ia((function(){Sa(t,e?v:s),xa(t,e?y:h),wa(r)||Aa(t,a,S,i)}))}};return D(t,{onBeforeEnter:function(e){ba(T,[e]),xa(e,s),xa(e,c)},onBeforeAppear:function(e){ba(M,[e]),xa(e,v),xa(e,m)},onEnter:q(!1),onAppear:q(!0),onLeave:function(e,t){e._isLeaving=!0;var n=function(){return B(e,t)};xa(e,_),Pa(),xa(e,w),Ia((function(){e._isLeaving&&(Sa(e,_),xa(e,C),wa(N)||Aa(e,a,I,n))})),ba(N,[e,n])},onEnterCancelled:function(e){j(e,!1),ba(L,[e])},onAppearCancelled:function(e){j(e,!0),ba(V,[e])},onLeaveCancelled:function(e){B(e),ba(P,[e])}})}function Ca(e){return ue(e)}function xa(e,t){t.split(/\s+/).forEach((function(t){return t&&e.classList.add(t)})),(e[ga]||(e[ga]=new Set)).add(t)}function Sa(e,t){t.split(/\s+/).forEach((function(t){return t&&e.classList.remove(t)}));var n=e[ga];n&&(n.delete(t),n.size||(e[ga]=void 0))}function Ia(e){requestAnimationFrame((function(){requestAnimationFrame(e)}))}var Ta=0;function Aa(e,t,n,r){var i=e._endId=++Ta,a=function(){i===e._endId&&r()};if(n)return setTimeout(a,n);var o=La(e,t),u=o.type,s=o.timeout,l=o.propCount;if(!u)return r();var c=u+"end",f=0,h=function(){e.removeEventListener(c,d),a()},d=function(t){t.target===e&&++f>=l&&h()};setTimeout((function(){f<l&&h()}),s+1),e.addEventListener(c,d)}function La(e,t){var n=window.getComputedStyle(e),r=function(e){return(n[e]||"").split(", ")},i=r("".concat(pa,"Delay")),a=r("".concat(pa,"Duration")),o=Na(i,a),u=r("".concat(ma,"Delay")),s=r("".concat(ma,"Duration")),l=Na(u,s),c=null,f=0,h=0;return t===pa?o>0&&(c=pa,f=o,h=a.length):t===ma?l>0&&(c=ma,f=l,h=s.length):h=(c=(f=Math.max(o,l))>0?o>l?pa:ma:null)?c===pa?a.length:s.length:0,{type:c,timeout:f,propCount:h,hasTransform:c===pa&&/\b(transform|all)(,|$)/.test(r("".concat(pa,"Property")).toString())}}function Na(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max.apply(Math,w(t.map((function(t,n){return Da(t)+Da(e[n])}))))}function Da(e){return"auto"===e?0:1e3*Number(e.slice(0,-1).replace(",","."))}function Pa(){return document.body.offsetHeight}var Ra=Symbol("_vod"),Ma=Symbol("_vsh"),Oa=Symbol("");function Fa(e){var t=Xi();if(t){var n=t.ut=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e(t.proxy);Array.from(document.querySelectorAll('[data-v-owner="'.concat(t.uid,'"]'))).forEach((function(e){return Va(e,n)}))},r=function(){var r=e(t.proxy);Ua(t.subTree,r),n(r)};Hn(r,null,{flush:"post"}),yr((function(){var e=new MutationObserver(r);e.observe(t.subTree.el.parentNode,{childList:!0}),wr((function(){return e.disconnect()}))}))}}function Ua(e,t){if(128&e.shapeFlag){var n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push((function(){Ua(n.activeBranch,t)}))}for(;e.component;)e=e.component.subTree;if(1&e.shapeFlag&&e.el)Va(e.el,t);else if(e.type===gi)e.children.forEach((function(e){return Ua(e,t)}));else if(e.type===_i)for(var r=e,i=r.el,a=r.anchor;i&&(Va(i,t),i!==a);)i=i.nextSibling}function Va(e,t){if(1===e.nodeType){var n=e.style,r="";for(var i in t)n.setProperty("--".concat(i),t[i]),r+="--".concat(i,": ").concat(t[i],";");n[Oa]=r}}var ja=/(^|;)\s*display\s*:/;var Ba=/\s*!important$/;function za(e,t,n){if(O(n))n.forEach((function(n){return za(e,t,n)}));else if(null==n&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{var r=function(e,t){var n=Ga[t];if(n)return n;var r=J(t);if("filter"!==r&&r in e)return Ga[t]=r;r=te(r);for(var i=0;i<qa.length;i++){var a=qa[i]+r;if(a in e)return Ga[t]=a}return t}(e,t);Ba.test(n)?e.setProperty(ee(r),n.replace(Ba,""),"important"):e[r]=n}}var qa=["Webkit","Moz","ms"],Ga={};var Ha="http://www.w3.org/1999/xlink";var Wa=Symbol("_vei");function Ka(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=e[Wa]||(e[Wa]={}),o=a[t];if(r&&o)o.value=r;else{var u=function(e){var t;if(Qa.test(e)){var n;for(t={};n=e.match(Qa);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}var r=":"===e[2]?e.slice(3):ee(e.slice(2));return[r,t]}(t),s=b(u,2),l=s[0],c=s[1];if(r){var f=a[t]=function(e,t){var n=function e(n){if(n._vts){if(n._vts<=e.attached)return}else n._vts=Date.now();rn(function(e,t){if(O(t)){var n=e.stopImmediatePropagation;return e.stopImmediatePropagation=function(){n.call(e),e._stopped=!0},t.map((function(e){return function(t){return!t._stopped&&e&&e(t)}}))}return t}(n,e.value),t,5,[n])};return n.value=e,n.attached=Xa(),n}(r,i);!function(e,t,n,r){e.addEventListener(t,n,r)}(e,l,f,c)}else o&&(!function(e,t,n,r){e.removeEventListener(t,n,r)}(e,l,o,c),a[t]=void 0)}}var Qa=/(?:Once|Passive|Capture)$/;var Ya=0,$a=Promise.resolve(),Xa=function(){return Ya||($a.then((function(){return Ya=0})),Ya=Date.now())};var Ja=function(e){return 111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123};var Za=new WeakMap,eo=new WeakMap,to=Symbol("_moveCb"),no=Symbol("_enterCb"),ro={name:"TransitionGroup",props:D({},_a,{tag:String,moveClass:String}),setup:function(e,t){var n,r,i=t.slots,a=Xi(),o=Jn();return _r((function(){if(n.length){var t=e.moveClass||"".concat(e.name||"v","-move");if(function(e,t,n){var r=e.cloneNode(),i=e[ga];i&&i.forEach((function(e){e.split(/\s+/).forEach((function(e){return e&&r.classList.remove(e)}))}));n.split(/\s+/).forEach((function(e){return e&&r.classList.add(e)})),r.style.display="none";var a=1===t.nodeType?t:t.parentNode;a.appendChild(r);var o=La(r).hasTransform;return a.removeChild(r),o}(n[0].el,a.vnode.el,t)){n.forEach(ao),n.forEach(oo);var r=n.filter(uo);Pa(),r.forEach((function(e){var n=e.el,r=n.style;xa(n,t),r.transform=r.webkitTransform=r.transitionDuration="";var i=n[to]=function(e){e&&e.target!==n||e&&!/transform$/.test(e.propertyName)||(n.removeEventListener("transitionend",i),n[to]=null,Sa(n,t))};n.addEventListener("transitionend",i)}))}}})),function(){var t=Ft(e),u=Ea(t),s=t.tag||gi;n=r,r=i.default?ur(i.default()):[];for(var l=0;l<r.length;l++){var c=r[l];null!=c.key&&or(c,rr(c,u,o,a))}if(n)for(var f=0;f<n.length;f++){var h=n[f];or(h,rr(h,u,o,a)),Za.set(h,h.el.getBoundingClientRect())}return Mi(s,null,r)}}},io=ro;function ao(e){var t=e.el;t[to]&&t[to](),t[no]&&t[no]()}function oo(e){eo.set(e,e.el.getBoundingClientRect())}function uo(e){var t=Za.get(e),n=eo.get(e),r=t.left-n.left,i=t.top-n.top;if(r||i){var a=e.el.style;return a.transform=a.webkitTransform="translate(".concat(r,"px,").concat(i,"px)"),a.transitionDuration="0s",e}}var so,lo=D({patchProp:function(e,t,n,r,i,a,o,u,s){var l="svg"===i;"class"===t?function(e,t,n){var r=e[ga];r&&(t=(t?[t].concat(w(r)):w(r)).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}(e,r,l):"style"===t?function(e,t,n){var r=e.style,i=j(n),a=!1;if(n&&!i){if(t)if(j(t)){var o,u=C(t.split(";"));try{for(u.s();!(o=u.n()).done;){var s=o.value,l=s.slice(0,s.indexOf(":")).trim();null==n[l]&&za(r,l,"")}}catch(d){u.e(d)}finally{u.f()}}else for(var c in t)null==n[c]&&za(r,c,"");for(var f in n)"display"===f&&(a=!0),za(r,f,n[f])}else if(i){if(t!==n){var h=r[Oa];h&&(n+=";"+h),r.cssText=n,a=ja.test(n)}}else t&&e.removeAttribute("style");Ra in e&&(e[Ra]=a?r.display:"",e[Ma]&&(r.display="none"))}(e,n,r):L(t)?N(t)||Ka(e,t,n,r,o):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):function(e,t,n,r){if(r)return"innerHTML"===t||"textContent"===t||!!(t in e&&Ja(t)&&V(n));if("spellcheck"===t||"draggable"===t||"translate"===t)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if("width"===t||"height"===t){var i=e.tagName;if("IMG"===i||"VIDEO"===i||"CANVAS"===i||"SOURCE"===i)return!1}if(Ja(t)&&j(n))return!1;return t in e}(e,t,r,l))?function(e,t,n,r,i,a,o){if("innerHTML"===t||"textContent"===t)return r&&o(r,i,a),void(e[t]=null==n?"":n);var u=e.tagName;if("value"===t&&"PROGRESS"!==u&&!u.includes("-")){var s=null==n?"":n;return("OPTION"===u?e.getAttribute("value")||"":e.value)===s&&"_value"in e||(e.value=s),null==n&&e.removeAttribute(t),void(e._value=n)}var l=!1;if(""===n||null==n){var c=E(e[t]);"boolean"===c?n=me(n):null==n&&"string"===c?(n="",l=!0):"number"===c&&(n=0,l=!0)}try{e[t]=n}catch(f){}l&&e.removeAttribute(t)}(e,t,r,a,o,u,s):("true-value"===t?e._trueValue=r:"false-value"===t&&(e._falseValue=r),function(e,t,n,r,i){if(r&&t.startsWith("xlink:"))null==n?e.removeAttributeNS(Ha,t.slice(6,t.length)):e.setAttributeNS(Ha,t,n);else{var a=pe(t);null==n||a&&!me(n)?e.removeAttribute(t):e.setAttribute(t,a?"":n)}}(e,t,r,l))}},va);
/*!
              * vue-router v4.3.0
              * (c) 2024 Eduardo San Martin Morote
              * @license MIT
              */
var co="undefined"!=typeof document;var fo=Object.assign;function ho(e,t){var n={};for(var r in t){var i=t[r];n[r]=po(i)?i.map(e):e(i)}return n}var vo=function(){},po=Array.isArray,mo=/#/g,go=/&/g,yo=/\//g,ko=/=/g,_o=/\?/g,bo=/\+/g,wo=/%5B/g,Eo=/%5D/g,Co=/%5E/g,xo=/%60/g,So=/%7B/g,Io=/%7C/g,To=/%7D/g,Ao=/%20/g;function Lo(e){return encodeURI(""+e).replace(Io,"|").replace(wo,"[").replace(Eo,"]")}function No(e){return Lo(e).replace(bo,"%2B").replace(Ao,"+").replace(mo,"%23").replace(go,"%26").replace(xo,"`").replace(So,"{").replace(To,"}").replace(Co,"^")}function Do(e){return null==e?"":function(e){return Lo(e).replace(mo,"%23").replace(_o,"%3F")}(e).replace(yo,"%2F")}function Po(e){try{return decodeURIComponent(""+e)}catch(t){}return""+e}var Ro,Mo,Oo,Fo,Uo=/\/$/,Vo=function(e){return e.replace(Uo,"")};function jo(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",i={},a="",o="",u=t.indexOf("#"),s=t.indexOf("?");return u<s&&u>=0&&(s=-1),s>-1&&(n=t.slice(0,s),i=e(a=t.slice(s+1,u>-1?u:t.length))),u>-1&&(n=n||t.slice(0,u),o=t.slice(u,t.length)),n=function(e,t){if(e.startsWith("/"))return e;if(!e)return t;var n=t.split("/"),r=e.split("/"),i=r[r.length-1];".."!==i&&"."!==i||r.push("");var a,o,u=n.length-1;for(a=0;a<r.length;a++)if("."!==(o=r[a])){if(".."!==o)break;u>1&&u--}return n.slice(0,u).join("/")+"/"+r.slice(a).join("/")}(null!=n?n:t,r),{fullPath:n+(a&&"?")+a+o,path:n,query:i,hash:Po(o)}}function Bo(e,t){return t&&e.toLowerCase().startsWith(t.toLowerCase())?e.slice(t.length)||"/":e}function zo(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function qo(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(!Go(e[n],t[n]))return!1;return!0}function Go(e,t){return po(e)?Ho(e,t):po(t)?Ho(t,e):e===t}function Ho(e,t){return po(t)?e.length===t.length&&e.every((function(e,n){return e===t[n]})):1===e.length&&e[0]===t}(Mo=Ro||(Ro={})).pop="pop",Mo.push="push",(Fo=Oo||(Oo={})).back="back",Fo.forward="forward",Fo.unknown="";var Wo=/^[^#]+#/;function Ko(e,t){return e.replace(Wo,"#")+t}var Qo=function(){return{left:window.scrollX,top:window.scrollY}};function Yo(e){var t;if("el"in e){var n=e.el,r="string"==typeof n&&n.startsWith("#"),i="string"==typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=function(e,t){var n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.scrollX,null!=t.top?t.top:window.scrollY)}function $o(e,t){return(history.state?history.state.position-t:-1)+e}var Xo=new Map;var Jo=function(){return location.protocol+"//"+location.host};function Zo(e,t){var n=t.pathname,r=t.search,i=t.hash,a=e.indexOf("#");if(a>-1){var o=i.includes(e.slice(a))?e.slice(a).length:1,u=i.slice(o);return"/"!==u[0]&&(u="/"+u),Bo(u,"")}return Bo(n,e)+r+i}function eu(e,t,n){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return{back:e,current:t,forward:n,replaced:arguments.length>3&&void 0!==arguments[3]&&arguments[3],position:window.history.length,scroll:r?Qo():null}}function tu(e){var t=function(e){var t=window,n=t.history,r=t.location,i={value:Zo(e,r)},a={value:n.state};function o(t,i,o){var u=e.indexOf("#"),s=u>-1?(r.host&&document.querySelector("base")?e:e.slice(u))+t:Jo()+e+t;try{n[o?"replaceState":"pushState"](i,"",s),a.value=i}catch(l){console.error(l),r[o?"replace":"assign"](s)}}return a.value||o(i.value,{back:null,current:i.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0),{location:i,state:a,push:function(e,t){var r=fo({},a.value,n.state,{forward:e,scroll:Qo()});o(r.current,r,!0),o(e,fo({},eu(i.value,e,null),{position:r.position+1},t),!1),i.value=e},replace:function(e,t){o(e,fo({},n.state,eu(a.value.back,e,a.value.forward,!0),t,{position:a.value.position}),!0),i.value=e}}}(e=function(e){if(!e)if(co){var t=document.querySelector("base");e=(e=t&&t.getAttribute("href")||"/").replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),Vo(e)}(e)),n=function(e,t,n,r){var i=[],a=[],o=null,u=function(a){var u=a.state,s=Zo(e,location),l=n.value,c=t.value,f=0;if(u){if(n.value=s,t.value=u,o&&o===l)return void(o=null);f=c?u.position-c.position:0}else r(s);i.forEach((function(e){e(n.value,l,{delta:f,type:Ro.pop,direction:f?f>0?Oo.forward:Oo.back:Oo.unknown})}))};function s(){var e=window.history;e.state&&e.replaceState(fo({},e.state,{scroll:Qo()}),"")}return window.addEventListener("popstate",u),window.addEventListener("beforeunload",s,{passive:!0}),{pauseListeners:function(){o=n.value},listen:function(e){i.push(e);var t=function(){var t=i.indexOf(e);t>-1&&i.splice(t,1)};return a.push(t),t},destroy:function(){var e,t=C(a);try{for(t.s();!(e=t.n()).done;)(0,e.value)()}catch(n){t.e(n)}finally{t.f()}a=[],window.removeEventListener("popstate",u),window.removeEventListener("beforeunload",s)}}}(e,t.state,t.location,t.replace);var r=fo({location:"",base:e,go:function(e){!(arguments.length>1&&void 0!==arguments[1])||arguments[1]||n.pauseListeners(),history.go(e)},createHref:Ko.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:function(){return t.location.value}}),Object.defineProperty(r,"state",{enumerable:!0,get:function(){return t.state.value}}),r}function nu(e){return"string"==typeof e||"symbol"===E(e)}var ru,iu,au={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},ou=Symbol("");function uu(e,t){return fo(new Error,k({type:e},ou,!0),t)}function su(e,t){return e instanceof Error&&ou in e&&(null==t||!!(e.type&t))}(iu=ru||(ru={}))[iu.aborted=4]="aborted",iu[iu.cancelled=8]="cancelled",iu[iu.duplicated=16]="duplicated";var lu="[^/]+?",cu={sensitive:!1,strict:!1,start:!0,end:!0},fu=/[.+*?^${}()[\]/\\]/g;function hu(e,t){for(var n=0;n<e.length&&n<t.length;){var r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?1===e.length&&80===e[0]?-1:1:e.length>t.length?1===t.length&&80===t[0]?1:-1:0}function du(e,t){for(var n=0,r=e.score,i=t.score;n<r.length&&n<i.length;){var a=hu(r[n],i[n]);if(a)return a;n++}if(1===Math.abs(i.length-r.length)){if(vu(r))return 1;if(vu(i))return-1}return i.length-r.length}function vu(e){var t=e[e.length-1];return e.length>0&&t[t.length-1]<0}var pu={type:0,value:""},mu=/[a-zA-Z0-9_]/;function gu(e,t,n){var r=function(e,t){var n,r=fo({},cu,t),i=[],a=r.start?"^":"",o=[],u=C(e);try{for(u.s();!(n=u.n()).done;){var s=n.value,l=s.length?[]:[90];r.strict&&!s.length&&(a+="/");for(var c=0;c<s.length;c++){var f=s[c],h=40+(r.sensitive?.25:0);if(0===f.type)c||(a+="/"),a+=f.value.replace(fu,"\\$&"),h+=40;else if(1===f.type){var d=f.value,v=f.repeatable,p=f.optional,m=f.regexp;o.push({name:d,repeatable:v,optional:p});var g=m||lu;if(g!==lu){h+=10;try{new RegExp("(".concat(g,")"))}catch(b){throw new Error('Invalid custom RegExp for param "'.concat(d,'" (').concat(g,"): ")+b.message)}}var y=v?"((?:".concat(g,")(?:/(?:").concat(g,"))*)"):"(".concat(g,")");c||(y=p&&s.length<2?"(?:/".concat(y,")"):"/"+y),p&&(y+="?"),a+=y,h+=20,p&&(h+=-8),v&&(h+=-20),".*"===g&&(h+=-50)}l.push(h)}i.push(l)}}catch(b){u.e(b)}finally{u.f()}if(r.strict&&r.end){var k=i.length-1;i[k][i[k].length-1]+=.7000000000000001}r.strict||(a+="/?"),r.end?a+="$":r.strict&&(a+="(?:/|$)");var _=new RegExp(a,r.sensitive?"":"i");return{re:_,score:i,keys:o,parse:function(e){var t=e.match(_),n={};if(!t)return null;for(var r=1;r<t.length;r++){var i=t[r]||"",a=o[r-1];n[a.name]=i&&a.repeatable?i.split("/"):i}return n},stringify:function(t){var n,r="",i=!1,a=C(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;i&&r.endsWith("/")||(r+="/"),i=!1;var u,s=C(o);try{for(s.s();!(u=s.n()).done;){var l=u.value;if(0===l.type)r+=l.value;else if(1===l.type){var c=l.value,f=l.repeatable,h=l.optional,d=c in t?t[c]:"";if(po(d)&&!f)throw new Error('Provided param "'.concat(c,'" is an array but it is not repeatable (* or + modifiers)'));var v=po(d)?d.join("/"):d;if(!v){if(!h)throw new Error('Missing required param "'.concat(c,'"'));o.length<2&&(r.endsWith("/")?r=r.slice(0,-1):i=!0)}r+=v}}}catch(b){s.e(b)}finally{s.f()}}}catch(b){a.e(b)}finally{a.f()}return r||"/"}}}(function(e){if(!e)return[[]];if("/"===e)return[[pu]];if(!e.startsWith("/"))throw new Error('Invalid path "'.concat(e,'"'));function t(e){throw new Error("ERR (".concat(r,')/"').concat(l,'": ').concat(e))}var n,r=0,i=r,a=[];function o(){n&&a.push(n),n=[]}var u,s=0,l="",c="";function f(){l&&(0===r?n.push({type:0,value:l}):1===r||2===r||3===r?(n.length>1&&("*"===u||"+"===u)&&t("A repeatable param (".concat(l,") must be alone in its segment. eg: '/:ids+.")),n.push({type:1,value:l,regexp:c,repeatable:"*"===u||"+"===u,optional:"*"===u||"?"===u})):t("Invalid state to consume buffer"),l="")}function h(){l+=u}for(;s<e.length;)if("\\"!==(u=e[s++])||2===r)switch(r){case 0:"/"===u?(l&&f(),o()):":"===u?(f(),r=1):h();break;case 4:h(),r=i;break;case 1:"("===u?r=2:mu.test(u)?h():(f(),r=0,"*"!==u&&"?"!==u&&"+"!==u&&s--);break;case 2:")"===u?"\\"==c[c.length-1]?c=c.slice(0,-1)+u:r=3:c+=u;break;case 3:f(),r=0,"*"!==u&&"?"!==u&&"+"!==u&&s--,c="";break;default:t("Unknown state")}else i=r,r=4;return 2===r&&t('Unfinished custom RegExp for param "'.concat(l,'"')),f(),o(),a}(e.path),n),i=fo(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function yu(e,t){var n=[],r=new Map;function i(e,n,r){var u=!r,s=function(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:_u(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}(e);s.aliasOf=r&&r.record;var l,c,f=Eu(t,e),h=[s];if("alias"in e){var d,v=C("string"==typeof e.alias?[e.alias]:e.alias);try{for(v.s();!(d=v.n()).done;){var p=d.value;h.push(fo({},s,{components:r?r.record.components:s.components,path:p,aliasOf:r?r.record:s}))}}catch(x){v.e(x)}finally{v.f()}}for(var m=0,g=h;m<g.length;m++){var y=g[m],k=y.path;if(n&&"/"!==k[0]){var _=n.record.path,b="/"===_[_.length-1]?"":"/";y.path=n.record.path+(k&&b+k)}if(l=gu(y,n,f),r?r.alias.push(l):((c=c||l)!==l&&c.alias.push(l),u&&e.name&&!bu(l)&&a(e.name)),s.children)for(var w=s.children,E=0;E<w.length;E++)i(w[E],l,r&&r.children[E]);r=r||l,(l.record.components&&Object.keys(l.record.components).length||l.record.name||l.record.redirect)&&o(l)}return c?function(){a(c)}:vo}function a(e){if(nu(e)){var t=r.get(e);t&&(r.delete(e),n.splice(n.indexOf(t),1),t.children.forEach(a),t.alias.forEach(a))}else{var i=n.indexOf(e);i>-1&&(n.splice(i,1),e.record.name&&r.delete(e.record.name),e.children.forEach(a),e.alias.forEach(a))}}function o(e){for(var t=0;t<n.length&&du(e,n[t])>=0&&(e.record.path!==n[t].record.path||!Cu(e,n[t]));)t++;n.splice(t,0,e),e.record.name&&!bu(e)&&r.set(e.record.name,e)}return t=Eu({strict:!1,end:!0,sensitive:!1},t),e.forEach((function(e){return i(e)})),{addRoute:i,resolve:function(e,t){var i,a,o,u={};if("name"in e&&e.name){if(!(i=r.get(e.name)))throw uu(1,{location:e});o=i.record.name,u=fo(ku(t.params,i.keys.filter((function(e){return!e.optional})).concat(i.parent?i.parent.keys.filter((function(e){return e.optional})):[]).map((function(e){return e.name}))),e.params&&ku(e.params,i.keys.map((function(e){return e.name})))),a=i.stringify(u)}else if(null!=e.path)a=e.path,(i=n.find((function(e){return e.re.test(a)})))&&(u=i.parse(a),o=i.record.name);else{if(!(i=t.name?r.get(t.name):n.find((function(e){return e.re.test(t.path)}))))throw uu(1,{location:e,currentLocation:t});o=i.record.name,u=fo({},t.params,e.params),a=i.stringify(u)}for(var s=[],l=i;l;)s.unshift(l.record),l=l.parent;return{name:o,path:a,params:u,matched:s,meta:wu(s)}},removeRoute:a,getRoutes:function(){return n},getRecordMatcher:function(e){return r.get(e)}}}function ku(e,t){var n,r={},i=C(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;a in e&&(r[a]=e[a])}}catch(o){i.e(o)}finally{i.f()}return r}function _u(e){var t={},n=e.props||!1;if("component"in e)t.default=n;else for(var r in e.components)t[r]="object"===E(n)?n[r]:n;return t}function bu(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function wu(e){return e.reduce((function(e,t){return fo(e,t.meta)}),{})}function Eu(e,t){var n={};for(var r in e)n[r]=r in t?t[r]:e[r];return n}function Cu(e,t){return t.children.some((function(t){return t===e||Cu(e,t)}))}function xu(e){var t={};if(""===e||"?"===e)return t;for(var n=("?"===e[0]?e.slice(1):e).split("&"),r=0;r<n.length;++r){var i=n[r].replace(bo," "),a=i.indexOf("="),o=Po(a<0?i:i.slice(0,a)),u=a<0?null:Po(i.slice(a+1));if(o in t){var s=t[o];po(s)||(s=t[o]=[s]),s.push(u)}else t[o]=u}return t}function Su(e){var t="",n=function(n){var r=e[n];if(n=No(n).replace(ko,"%3D"),null==r)return void 0!==r&&(t+=(t.length?"&":"")+n),1;var i=po(r)?r.map((function(e){return e&&No(e)})):[r&&No(r)];i.forEach((function(e){void 0!==e&&(t+=(t.length?"&":"")+n,null!=e&&(t+="="+e))}))};for(var r in e)n(r);return t}function Iu(e){var t={};for(var n in e){var r=e[n];void 0!==r&&(t[n]=po(r)?r.map((function(e){return null==e?null:""+e})):null==r?r:""+r)}return t}var Tu=Symbol(""),Au=Symbol(""),Lu=Symbol(""),Nu=Symbol(""),Du=Symbol("");function Pu(){var e=[];return{add:function(t){return e.push(t),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}},list:function(){return e.slice()},reset:function(){e=[]}}}function Ru(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(e){return e()},o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return function(){return new Promise((function(u,s){var l=function(e){var a;!1===e?s(uu(4,{from:n,to:t})):e instanceof Error?s(e):"string"==typeof(a=e)||a&&"object"===E(a)?s(uu(2,{from:t,to:e})):(o&&r.enterCallbacks[i]===o&&"function"==typeof e&&o.push(e),u())},c=a((function(){return e.call(r&&r.instances[i],t,n,l)})),f=Promise.resolve(c);e.length<3&&(f=f.then(l)),f.catch((function(e){return s(e)}))}))}}function Mu(e,t,n,r){var i,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e){return e()},o=[],u=C(e);try{var s=function(){var e=i.value,u=function(i){var u,s=e.components[i];if("beforeRouteEnter"!==t&&!e.instances[i])return 1;if("object"===E(u=s)||"displayName"in u||"props"in u||"__vccOpts"in u){var l=(s.__vccOpts||s)[t];l&&o.push(Ru(l,n,r,e,i,a))}else{var c=s();o.push((function(){return c.then((function(o){if(!o)return Promise.reject(new Error("Couldn't resolve component \"".concat(i,'" at "').concat(e.path,'"')));var u,s=(u=o).__esModule||"Module"===u[Symbol.toStringTag]?o.default:o;e.components[i]=s;var l=(s.__vccOpts||s)[t];return l&&Ru(l,n,r,e,i,a)()}))}))}};for(var s in e.components)u(s)};for(u.s();!(i=u.n()).done;)s()}catch(l){u.e(l)}finally{u.f()}return o}function Ou(e){var t=$r(Lu),n=$r(Nu),r=la((function(){return t.resolve(Yt(e.to))})),i=la((function(){var e=r.value.matched,t=e.length,i=e[t-1],a=n.matched;if(!i||!a.length)return-1;var o=a.findIndex(zo.bind(null,i));if(o>-1)return o;var u=Uu(e[t-2]);return t>1&&Uu(i)===u&&a[a.length-1].path!==u?a.findIndex(zo.bind(null,e[t-2])):o})),a=la((function(){return i.value>-1&&function(e,t){var n,r=function(){var n=t[i],r=e[i];if("string"==typeof n){if(n!==r)return{v:!1}}else if(!po(r)||r.length!==n.length||n.some((function(e,t){return e!==r[t]})))return{v:!1}};for(var i in t)if(n=r())return n.v;return!0}(n.params,r.value.params)})),o=la((function(){return i.value>-1&&i.value===n.matched.length-1&&qo(n.params,r.value.params)}));return{route:r,href:la((function(){return r.value.href})),isActive:a,isExactActive:o,navigate:function(){return function(e){if(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)return;if(e.defaultPrevented)return;if(void 0!==e.button&&0!==e.button)return;if(e.currentTarget&&e.currentTarget.getAttribute){var t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}e.preventDefault&&e.preventDefault();return!0}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})?t[Yt(e.replace)?"replace":"push"](Yt(e.to)).catch(vo):Promise.resolve()}}}var Fu=sr({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Ou,setup:function(e,t){var n=t.slots,r=At(Ou(e)),i=$r(Lu).options,a=la((function(){return k(k({},Vu(e.activeClass,i.linkActiveClass,"router-link-active"),r.isActive),Vu(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active"),r.isExactActive)}));return function(){var t=n.default&&n.default(r);return e.custom?t:ca("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:a.value},t)}}});function Uu(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}var Vu=function(e,t,n){return null!=e?e:null!=t?t:n},ju=sr({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup:function(e,t){var n=t.attrs,r=t.slots,i=$r(Du),a=la((function(){return e.route||i.value})),o=$r(Au,0),u=la((function(){for(var e,t=Yt(o),n=a.value.matched;(e=n[t])&&!e.components;)t++;return t})),s=la((function(){return a.value.matched[u.value]}));Yr(Au,la((function(){return u.value+1}))),Yr(Tu,s),Yr(Du,a);var l=Ht();return Gn((function(){return[l.value,s.value,e.name]}),(function(e,t){var n=b(e,3),r=n[0],i=n[1],a=n[2],o=b(t,3),u=o[0],s=o[1];o[2];i&&(i.instances[a]=r,s&&s!==i&&r&&r===u&&(i.leaveGuards.size||(i.leaveGuards=s.leaveGuards),i.updateGuards.size||(i.updateGuards=s.updateGuards))),!r||!i||s&&zo(i,s)&&u||(i.enterCallbacks[a]||[]).forEach((function(e){return e(r)}))}),{flush:"post"}),function(){var t=a.value,i=e.name,o=s.value,u=o&&o.components[i];if(!u)return Bu(r.default,{Component:u,route:t});var c=o.props[i],f=c?!0===c?t.params:"function"==typeof c?c(t):c:null,h=ca(u,fo({},f,n,{onVnodeUnmounted:function(e){e.component.isUnmounted&&(o.instances[i]=null)},ref:l}));return Bu(r.default,{Component:h,route:t})||h}}});function Bu(e,t){if(!e)return null;var n=e(t);return 1===n.length?n[0]:n}var zu=ju;function qu(){return $r(Lu)}
/*!
              * shared v9.10.2
              * (c) 2024 kazuya kawaguchi
              * Released under the MIT License.
              */var Gu,Hu="undefined"!=typeof window,Wu=function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Symbol.for(e):Symbol(e)},Ku=function(e,t,n){return Qu({l:e,k:t,s:n})},Qu=function(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027")},Yu=function(e){return"number"==typeof e&&isFinite(e)},$u=function(e){return"[object Date]"===fs(e)},Xu=function(e){return"[object RegExp]"===fs(e)},Ju=function(e){return hs(e)&&0===Object.keys(e).length},Zu=Object.assign,es=function(){return Gu||(Gu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})};function ts(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}var ns=Object.prototype.hasOwnProperty;function rs(e,t){return ns.call(e,t)}var is=Array.isArray,as=function(e){return"function"==typeof e},os=function(e){return"string"==typeof e},us=function(e){return"boolean"==typeof e},ss=function(e){return null!==e&&"object"===E(e)},ls=function(e){return ss(e)&&as(e.then)&&as(e.catch)},cs=Object.prototype.toString,fs=function(e){return cs.call(e)},hs=function(e){if(!ss(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t.constructor===Object};function ds(e){var t=e;return function(){return++t}}function vs(e,t){"undefined"!=typeof console&&(console.warn("[intlify] "+e),t&&console.warn(t.stack))}var ps=function(e){return!ss(e)||is(e)};function ms(e,t){if(ps(e)||ps(t))throw new Error("Invalid value");for(var n=[{src:e,des:t}],r=function(){var e=n.pop(),t=e.src,r=e.des;Object.keys(t).forEach((function(e){ps(t[e])||ps(r[e])?r[e]=t[e]:n.push({src:t[e],des:r[e]})}))};n.length;)r()}
/*!
              * message-compiler v9.10.2
              * (c) 2024 kazuya kawaguchi
              * Released under the MIT License.
              */function gs(e,t,n){var r={start:e,end:t};return null!=n&&(r.source=n),r}var ys=/\{([0-9a-zA-Z]+)\}/g;function ks(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return 1===n.length&&ws(n[0])&&(n=n[0]),n&&n.hasOwnProperty||(n={}),e.replace(ys,(function(e,t){return n.hasOwnProperty(t)?n[t]:""}))}var _s=Object.assign,bs=function(e){return"string"==typeof e},ws=function(e){return null!==e&&"object"===E(e)};function Es(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.reduce((function(e,n,r){return 0===r?e+n:e+t+n}),"")}var Cs={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},xs=(k(k(k(k(k(k(k(k(k(k(u={},Cs.EXPECTED_TOKEN,"Expected token: '{0}'"),Cs.INVALID_TOKEN_IN_PLACEHOLDER,"Invalid token in placeholder: '{0}'"),Cs.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,"Unterminated single quote in placeholder"),Cs.UNKNOWN_ESCAPE_SEQUENCE,"Unknown escape sequence: \\{0}"),Cs.INVALID_UNICODE_ESCAPE_SEQUENCE,"Invalid unicode escape sequence: {0}"),Cs.UNBALANCED_CLOSING_BRACE,"Unbalanced closing brace"),Cs.UNTERMINATED_CLOSING_BRACE,"Unterminated closing brace"),Cs.EMPTY_PLACEHOLDER,"Empty placeholder"),Cs.NOT_ALLOW_NEST_PLACEHOLDER,"Not allowed nest placeholder"),Cs.INVALID_LINKED_FORMAT,"Invalid linked format"),k(k(k(k(k(k(u,Cs.MUST_HAVE_MESSAGES_IN_PLURAL,"Plural must have messages"),Cs.UNEXPECTED_EMPTY_LINKED_MODIFIER,"Unexpected empty linked modifier"),Cs.UNEXPECTED_EMPTY_LINKED_KEY,"Unexpected empty linked key"),Cs.UNEXPECTED_LEXICAL_ANALYSIS,"Unexpected lexical analysis in token: '{0}'"),Cs.UNHANDLED_CODEGEN_NODE_TYPE,"unhandled codegen node type: '{0}'"),Cs.UNHANDLED_MINIFIER_NODE_TYPE,"unhandled mimifier node type: '{0}'"));function Ss(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.domain,i=n.messages,a=n.args,o=ks.apply(void 0,[(i||xs)[e]||""].concat(w(a||[]))),u=new SyntaxError(String(o));return u.code=e,t&&(u.location=t),u.domain=r,u}function Is(e){throw e}var Ts=" ",As="\r",Ls="\n",Ns=String.fromCharCode(8232),Ds=String.fromCharCode(8233);function Ps(e){var t=e,n=0,r=1,i=1,a=0,o=function(e){return t[e]===As&&t[e+1]===Ls},u=function(e){return t[e]===Ds},s=function(e){return t[e]===Ns},l=function(e){return o(e)||function(e){return t[e]===Ls}(e)||u(e)||s(e)},c=function(e){return o(e)||u(e)||s(e)?Ls:t[e]};function f(){return a=0,l(n)&&(r++,i=0),o(n)&&n++,n++,i++,t[n]}return{index:function(){return n},line:function(){return r},column:function(){return i},peekOffset:function(){return a},charAt:c,currentChar:function(){return c(n)},currentPeek:function(){return c(n+a)},next:f,peek:function(){return o(n+a)&&a++,a++,t[n+a]},reset:function(){n=0,r=1,i=1,a=0},resetPeek:function(){a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0},skipToPeek:function(){for(var e=n+a;e!==n;)f();a=0}}}var Rs=void 0,Ms=".",Os="'",Fs="tokenizer";function Us(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!1!==t.location,r=Ps(e),i=function(){return r.index()},a=function(){return e=r.line(),t=r.column(),n=r.index(),{line:e,column:t,offset:n};var e,t,n},o=a(),u=i(),s={currentType:14,offset:u,startLoc:o,endLoc:o,lastType:14,lastOffset:u,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},l=function(){return s},c=t.onError;function f(e,t,r){var i=l();if(t.column+=r,t.offset+=r,c){for(var a=n?gs(i.startLoc,t):null,o=arguments.length,u=new Array(o>3?o-3:0),s=3;s<o;s++)u[s-3]=arguments[s];var f=Ss(e,a,{domain:Fs,args:u});c(f)}}function h(e,t,r){e.endLoc=a(),e.currentType=t;var i={type:t};return n&&(i.loc=gs(e.startLoc,e.endLoc)),null!=r&&(i.value=r),i}var d=function(e){return h(e,14)};function v(e,t){return e.currentChar()===t?(e.next(),t):(f(Cs.EXPECTED_TOKEN,a(),0,t),"")}function p(e){for(var t="";e.currentPeek()===Ts||e.currentPeek()===Ls;)t+=e.currentPeek(),e.peek();return t}function m(e){var t=p(e);return e.skipToPeek(),t}function g(e){if(e===Rs)return!1;var t=e.charCodeAt(0);return t>=97&&t<=122||t>=65&&t<=90||95===t}function y(e,t){if(2!==t.currentType)return!1;p(e);var n=function(e){if(e===Rs)return!1;var t=e.charCodeAt(0);return t>=48&&t<=57}("-"===e.currentPeek()?e.peek():e.currentPeek());return e.resetPeek(),n}function k(e){p(e);var t="|"===e.currentPeek();return e.resetPeek(),t}function _(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=function t(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e.currentPeek();return"{"===a?"%"!==r&&n:"@"!==a&&a?"%"===a?(e.peek(),t(n,"%",!0)):"|"===a?!("%"!==r&&!i)||!(r===Ts||r===Ls):a===Ts?(e.peek(),t(!0,Ts,i)):a!==Ls||(e.peek(),t(!0,Ls,i)):"%"===r||n}();return t&&e.resetPeek(),n}function b(e,t){var n=e.currentChar();return n===Rs?Rs:t(n)?(e.next(),n):null}function w(e){return b(e,(function(e){var t=e.charCodeAt(0);return t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57||95===t||36===t}))}function E(e){return b(e,(function(e){var t=e.charCodeAt(0);return t>=48&&t<=57}))}function C(e){return b(e,(function(e){var t=e.charCodeAt(0);return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}))}function x(e){for(var t="",n="";t=E(e);)n+=t;return n}function S(e){for(var t="";;){var n=e.currentChar();if("{"===n||"}"===n||"@"===n||"|"===n||!n)break;if("%"===n){if(!_(e))break;t+=n,e.next()}else if(n===Ts||n===Ls)if(_(e))t+=n,e.next();else{if(k(e))break;t+=n,e.next()}else t+=n,e.next()}return t}function I(e){var t=e.currentChar();switch(t){case"\\":case"'":return e.next(),"\\".concat(t);case"u":return T(e,t,4);case"U":return T(e,t,6);default:return f(Cs.UNKNOWN_ESCAPE_SEQUENCE,a(),0,t),""}}function T(e,t,n){v(e,t);for(var r="",i=0;i<n;i++){var o=C(e);if(!o){f(Cs.INVALID_UNICODE_ESCAPE_SEQUENCE,a(),0,"\\".concat(t).concat(r).concat(e.currentChar()));break}r+=o}return"\\".concat(t).concat(r)}function A(e){m(e);var t=v(e,"|");return m(e),t}function L(e,t){var n=null;switch(e.currentChar()){case"{":return t.braceNest>=1&&f(Cs.NOT_ALLOW_NEST_PLACEHOLDER,a(),0),e.next(),n=h(t,2,"{"),m(e),t.braceNest++,n;case"}":return t.braceNest>0&&2===t.currentType&&f(Cs.EMPTY_PLACEHOLDER,a(),0),e.next(),n=h(t,3,"}"),t.braceNest--,t.braceNest>0&&m(e),t.inLinked&&0===t.braceNest&&(t.inLinked=!1),n;case"@":return t.braceNest>0&&f(Cs.UNTERMINATED_CLOSING_BRACE,a(),0),n=N(e,t)||d(t),t.braceNest=0,n;default:var r,i,o;if(k(e))return t.braceNest>0&&f(Cs.UNTERMINATED_CLOSING_BRACE,a(),0),n=h(t,1,A(e)),t.braceNest=0,t.inLinked=!1,n;if(t.braceNest>0&&(5===t.currentType||6===t.currentType||7===t.currentType))return f(Cs.UNTERMINATED_CLOSING_BRACE,a(),0),t.braceNest=0,D(e,t);if(r=function(e,t){if(2!==t.currentType)return!1;p(e);var n=g(e.currentPeek());return e.resetPeek(),n}(e,t))return n=h(t,5,function(e){m(e);for(var t="",n="";t=w(e);)n+=t;return e.currentChar()===Rs&&f(Cs.UNTERMINATED_CLOSING_BRACE,a(),0),n}(e)),m(e),n;if(i=y(e,t))return n=h(t,6,function(e){m(e);var t="";return"-"===e.currentChar()?(e.next(),t+="-".concat(x(e))):t+=x(e),e.currentChar()===Rs&&f(Cs.UNTERMINATED_CLOSING_BRACE,a(),0),t}(e)),m(e),n;if(o=function(e,t){if(2!==t.currentType)return!1;p(e);var n=e.currentPeek()===Os;return e.resetPeek(),n}(e,t))return n=h(t,7,function(e){m(e),v(e,"'");for(var t="",n="",r=function(e){return e!==Os&&e!==Ls};t=b(e,r);)n+="\\"===t?I(e):t;var i=e.currentChar();return i===Ls||i===Rs?(f(Cs.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,a(),0),i===Ls&&(e.next(),v(e,"'")),n):(v(e,"'"),n)}(e)),m(e),n;if(!r&&!i&&!o)return n=h(t,13,function(e){m(e);for(var t="",n="",r=function(e){return"{"!==e&&"}"!==e&&e!==Ts&&e!==Ls};t=b(e,r);)n+=t;return n}(e)),f(Cs.INVALID_TOKEN_IN_PLACEHOLDER,a(),0,n.value),m(e),n}return n}function N(e,t){var n=t.currentType,r=null,i=e.currentChar();switch(8!==n&&9!==n&&12!==n&&10!==n||i!==Ls&&i!==Ts||f(Cs.INVALID_LINKED_FORMAT,a(),0),i){case"@":return e.next(),r=h(t,8,"@"),t.inLinked=!0,r;case".":return m(e),e.next(),h(t,9,".");case":":return m(e),e.next(),h(t,10,":");default:return k(e)?(r=h(t,1,A(e)),t.braceNest=0,t.inLinked=!1,r):function(e,t){if(8!==t.currentType)return!1;p(e);var n="."===e.currentPeek();return e.resetPeek(),n}(e,t)||function(e,t){var n=t.currentType;if(8!==n&&12!==n)return!1;p(e);var r=":"===e.currentPeek();return e.resetPeek(),r}(e,t)?(m(e),N(e,t)):function(e,t){if(9!==t.currentType)return!1;p(e);var n=g(e.currentPeek());return e.resetPeek(),n}(e,t)?(m(e),h(t,12,function(e){for(var t="",n="";t=w(e);)n+=t;return n}(e))):function(e,t){if(10!==t.currentType)return!1;var n=function t(){var n=e.currentPeek();return"{"===n?g(e.peek()):!("@"===n||"%"===n||"|"===n||":"===n||"."===n||n===Ts||!n)&&(n===Ls?(e.peek(),t()):g(n))}();return e.resetPeek(),n}(e,t)?(m(e),"{"===i?L(e,t)||r:h(t,11,function(e){return function t(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1?arguments[1]:void 0,i=e.currentChar();return"{"!==i&&"%"!==i&&"@"!==i&&"|"!==i&&"("!==i&&")"!==i&&i?i===Ts?r:i===Ls||i===Ms?(r+=i,e.next(),t(n,r)):(r+=i,e.next(),t(!0,r)):r}(!1,"")}(e))):(8===n&&f(Cs.INVALID_LINKED_FORMAT,a(),0),t.braceNest=0,t.inLinked=!1,D(e,t))}}function D(e,t){var n={type:14};if(t.braceNest>0)return L(e,t)||d(t);if(t.inLinked)return N(e,t)||d(t);switch(e.currentChar()){case"{":return L(e,t)||d(t);case"}":return f(Cs.UNBALANCED_CLOSING_BRACE,a(),0),e.next(),h(t,3,"}");case"@":return N(e,t)||d(t);default:if(k(e))return n=h(t,1,A(e)),t.braceNest=0,t.inLinked=!1,n;var r=function(e){var t=p(e),n="%"===e.currentPeek()&&"{"===e.peek();return e.resetPeek(),{isModulo:n,hasSpace:t.length>0}}(e),i=r.isModulo,o=r.hasSpace;if(i)return o?h(t,0,S(e)):h(t,4,function(e){m(e);var t=e.currentChar();return"%"!==t&&f(Cs.EXPECTED_TOKEN,a(),0,t),e.next(),"%"}(e));if(_(e))return h(t,0,S(e))}return n}return{nextToken:function(){var e=s.currentType,t=s.offset,n=s.startLoc,o=s.endLoc;return s.lastType=e,s.lastOffset=t,s.lastStartLoc=n,s.lastEndLoc=o,s.offset=i(),s.startLoc=a(),r.currentChar()===Rs?h(s,14):D(r,s)},currentOffset:i,currentPosition:a,context:l}}var Vs="parser",js=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function Bs(e,t,n){switch(e){case"\\\\":return"\\";case"\\'":return"'";default:var r=parseInt(t||n,16);return r<=55295||r>=57344?String.fromCodePoint(r):""}}function zs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!1!==e.location,n=e.onError;function r(e,r,i,a){var o=e.currentPosition();if(o.offset+=a,o.column+=a,n){for(var u=t?gs(i,o):null,s=arguments.length,l=new Array(s>4?s-4:0),c=4;c<s;c++)l[c-4]=arguments[c];var f=Ss(r,u,{domain:Vs,args:l});n(f)}}function i(e,n,r){var i={type:e};return t&&(i.start=n,i.end=n,i.loc={start:r,end:r}),i}function a(e,n,r,i){i&&(e.type=i),t&&(e.end=n,e.loc&&(e.loc.end=r))}function o(e,t){var n=e.context(),r=i(3,n.offset,n.startLoc);return r.value=t,a(r,e.currentOffset(),e.currentPosition()),r}function u(e,t){var n=e.context(),r=i(5,n.lastOffset,n.lastStartLoc);return r.index=parseInt(t,10),e.nextToken(),a(r,e.currentOffset(),e.currentPosition()),r}function s(e,t){var n=e.context(),r=i(4,n.lastOffset,n.lastStartLoc);return r.key=t,e.nextToken(),a(r,e.currentOffset(),e.currentPosition()),r}function l(e,t){var n=e.context(),r=i(9,n.lastOffset,n.lastStartLoc);return r.value=t.replace(js,Bs),e.nextToken(),a(r,e.currentOffset(),e.currentPosition()),r}function c(e){var t=e.context(),n=i(6,t.offset,t.startLoc),o=e.nextToken();if(9===o.type){var c=function(e){var t=e.nextToken(),n=e.context(),o=n.lastOffset,u=n.lastStartLoc,s=i(8,o,u);return 12!==t.type?(r(e,Cs.UNEXPECTED_EMPTY_LINKED_MODIFIER,n.lastStartLoc,0),s.value="",a(s,o,u),{nextConsumeToken:t,node:s}):(null==t.value&&r(e,Cs.UNEXPECTED_LEXICAL_ANALYSIS,n.lastStartLoc,0,qs(t)),s.value=t.value||"",a(s,e.currentOffset(),e.currentPosition()),{node:s})}(e);n.modifier=c.node,o=c.nextConsumeToken||e.nextToken()}switch(10!==o.type&&r(e,Cs.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,qs(o)),2===(o=e.nextToken()).type&&(o=e.nextToken()),o.type){case 11:null==o.value&&r(e,Cs.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,qs(o)),n.key=function(e,t){var n=e.context(),r=i(7,n.offset,n.startLoc);return r.value=t,a(r,e.currentOffset(),e.currentPosition()),r}(e,o.value||"");break;case 5:null==o.value&&r(e,Cs.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,qs(o)),n.key=s(e,o.value||"");break;case 6:null==o.value&&r(e,Cs.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,qs(o)),n.key=u(e,o.value||"");break;case 7:null==o.value&&r(e,Cs.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,qs(o)),n.key=l(e,o.value||"");break;default:r(e,Cs.UNEXPECTED_EMPTY_LINKED_KEY,t.lastStartLoc,0);var f=e.context(),h=i(7,f.offset,f.startLoc);return h.value="",a(h,f.offset,f.startLoc),n.key=h,a(n,f.offset,f.startLoc),{nextConsumeToken:o,node:n}}return a(n,e.currentOffset(),e.currentPosition()),{node:n}}function f(e){var t=e.context(),n=i(2,1===t.currentType?e.currentOffset():t.offset,1===t.currentType?t.endLoc:t.startLoc);n.items=[];var f=null;do{var h=f||e.nextToken();switch(f=null,h.type){case 0:null==h.value&&r(e,Cs.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,qs(h)),n.items.push(o(e,h.value||""));break;case 6:null==h.value&&r(e,Cs.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,qs(h)),n.items.push(u(e,h.value||""));break;case 5:null==h.value&&r(e,Cs.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,qs(h)),n.items.push(s(e,h.value||""));break;case 7:null==h.value&&r(e,Cs.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,qs(h)),n.items.push(l(e,h.value||""));break;case 8:var d=c(e);n.items.push(d.node),f=d.nextConsumeToken||null}}while(14!==t.currentType&&1!==t.currentType);return a(n,1===t.currentType?t.lastOffset:e.currentOffset(),1===t.currentType?t.lastEndLoc:e.currentPosition()),n}function h(e){var t=e.context(),n=t.offset,o=t.startLoc,u=f(e);return 14===t.currentType?u:function(e,t,n,o){var u=e.context(),s=0===o.items.length,l=i(1,t,n);l.cases=[],l.cases.push(o);do{var c=f(e);s||(s=0===c.items.length),l.cases.push(c)}while(14!==u.currentType);return s&&r(e,Cs.MUST_HAVE_MESSAGES_IN_PLURAL,n,0),a(l,e.currentOffset(),e.currentPosition()),l}(e,n,o,u)}return{parse:function(n){var o=Us(n,_s({},e)),u=o.context(),s=i(0,u.offset,u.startLoc);return t&&s.loc&&(s.loc.source=n),s.body=h(o),e.onCacheKey&&(s.cacheKey=e.onCacheKey(n)),14!==u.currentType&&r(o,Cs.UNEXPECTED_LEXICAL_ANALYSIS,u.lastStartLoc,0,n[u.offset]||""),a(s,o.currentOffset(),o.currentPosition()),s}}}function qs(e){if(14===e.type)return"EOF";var t=(e.value||"").replace(/\r?\n/g,"\\n");return t.length>10?t.slice(0,9)+"":t}function Gs(e,t){for(var n=0;n<e.length;n++)Hs(e[n],t)}function Hs(e,t){switch(e.type){case 1:Gs(e.cases,t),t.helper("plural");break;case 2:Gs(e.items,t);break;case 6:Hs(e.key,t),t.helper("linked"),t.helper("type");break;case 5:t.helper("interpolate"),t.helper("list");break;case 4:t.helper("interpolate"),t.helper("named")}}function Ws(e){var t=function(e){var t={ast:e,helpers:new Set};return{context:function(){return t},helper:function(e){return t.helpers.add(e),e}}}(e);t.helper("normalize"),e.body&&Hs(e.body,t);var n=t.context();e.helpers=Array.from(n.helpers)}function Ks(e){if(1===e.items.length){var t=e.items[0];3!==t.type&&9!==t.type||(e.static=t.value,delete t.value)}else{for(var n=[],r=0;r<e.items.length;r++){var i=e.items[r];if(3!==i.type&&9!==i.type)break;if(null==i.value)break;n.push(i.value)}if(n.length===e.items.length){e.static=Es(n);for(var a=0;a<e.items.length;a++){var o=e.items[a];3!==o.type&&9!==o.type||delete o.value}}}}var Qs="minifier";function Ys(e){switch(e.t=e.type,e.type){case 0:var t=e;Ys(t.body),t.b=t.body,delete t.body;break;case 1:for(var n=e,r=n.cases,i=0;i<r.length;i++)Ys(r[i]);n.c=r,delete n.cases;break;case 2:for(var a=e,o=a.items,u=0;u<o.length;u++)Ys(o[u]);a.i=o,delete a.items,a.static&&(a.s=a.static,delete a.static);break;case 3:case 9:case 8:case 7:var s=e;s.value&&(s.v=s.value,delete s.value);break;case 6:var l=e;Ys(l.key),l.k=l.key,delete l.key,l.modifier&&(Ys(l.modifier),l.m=l.modifier,delete l.modifier);break;case 5:var c=e;c.i=c.index,delete c.index;break;case 4:var f=e;f.k=f.key,delete f.key;break;default:throw Ss(Cs.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:Qs,args:[e.type]})}delete e.type}var $s="parser";function Xs(e,t){var n=e.helper;switch(t.type){case 0:!function(e,t){t.body?Xs(e,t.body):e.push("null")}(e,t);break;case 1:!function(e,t){var n=e.helper,r=e.needIndent;if(t.cases.length>1){e.push("".concat(n("plural"),"([")),e.indent(r());for(var i=t.cases.length,a=0;a<i&&(Xs(e,t.cases[a]),a!==i-1);a++)e.push(", ");e.deindent(r()),e.push("])")}}(e,t);break;case 2:!function(e,t){var n=e.helper,r=e.needIndent;e.push("".concat(n("normalize"),"([")),e.indent(r());for(var i=t.items.length,a=0;a<i&&(Xs(e,t.items[a]),a!==i-1);a++)e.push(", ");e.deindent(r()),e.push("])")}(e,t);break;case 6:!function(e,t){var n=e.helper;e.push("".concat(n("linked"),"(")),Xs(e,t.key),t.modifier?(e.push(", "),Xs(e,t.modifier),e.push(", _type")):e.push(", undefined, _type"),e.push(")")}(e,t);break;case 8:case 7:case 9:case 3:e.push(JSON.stringify(t.value),t);break;case 5:e.push("".concat(n("interpolate"),"(").concat(n("list"),"(").concat(t.index,"))"),t);break;case 4:e.push("".concat(n("interpolate"),"(").concat(n("named"),"(").concat(JSON.stringify(t.key),"))"),t);break;default:throw Ss(Cs.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:$s,args:[t.type]})}}var Js=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=bs(t.mode)?t.mode:"normal",r=bs(t.filename)?t.filename:"message.intl",i=!!t.sourceMap,a=null!=t.breakLineCode?t.breakLineCode:"arrow"===n?";":"\n",o=t.needIndent?t.needIndent:"arrow"!==n,u=e.helpers||[],s=function(e,t){t.sourceMap;var n=t.filename,r=t.breakLineCode,i=t.needIndent,a=!1!==t.location,o={filename:n,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:r,needIndent:i,indentLevel:0};function u(e,t){o.code+=e}function s(e){var t=arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?"":r;u(i?t+"  ".repeat(e):t)}return a&&e.loc&&(o.source=e.loc.source),{context:function(){return o},push:u,indent:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=++o.indentLevel;e&&s(t)},deindent:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=--o.indentLevel;e&&s(t)},newline:function(){s(o.indentLevel)},helper:function(e){return"_".concat(e)},needIndent:function(){return o.needIndent}}}(e,{mode:n,filename:r,sourceMap:i,breakLineCode:a,needIndent:o});s.push("normal"===n?"function __msg__ (ctx) {":"(ctx) => {"),s.indent(o),u.length>0&&(s.push("const { ".concat(Es(u.map((function(e){return"".concat(e,": _").concat(e)})),", ")," } = ctx")),s.newline()),s.push("return "),Xs(s,e),s.deindent(o),s.push("}"),delete e.helpers;var l=s.context(),c=l.code,f=l.map;return{ast:e,code:c,map:f?f.toJSON():void 0}};function Zs(e){var t=_s({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),n=!!t.jit,r=!!t.minify,i=null==t.optimize||t.optimize,a=zs(t).parse(e);return n?(i&&function(e){var t=e.body;2===t.type?Ks(t):t.cases.forEach((function(e){return Ks(e)}))}(a),r&&Ys(a),{ast:a,code:""}):(Ws(a,t),Js(a,t))}
/*!
              * core-base v9.10.2
              * (c) 2024 kazuya kawaguchi
              * Released under the MIT License.
              */var el=[];el[0]=k(k(k(k({},"w",[0]),"i",[3,0]),"[",[4]),"o",[7]),el[1]=k(k(k(k({},"w",[1]),".",[2]),"[",[4]),"o",[7]),el[2]=k(k(k({},"w",[2]),"i",[3,0]),"0",[3,0]),el[3]=k(k(k(k(k(k({},"i",[3,0]),"0",[3,0]),"w",[1,1]),".",[2,1]),"[",[4,1]),"o",[7,1]),el[4]=k(k(k(k(k(k({},"'",[5,0]),'"',[6,0]),"[",[4,2]),"]",[1,3]),"o",8),"l",[4,0]),el[5]=k(k(k({},"'",[4,0]),"o",8),"l",[5,0]),el[6]=k(k(k({},'"',[4,0]),"o",8),"l",[6,0]);var tl=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function nl(e){if(null==e)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function rl(e){var t,n,r,i=e.trim();return("0"!==e.charAt(0)||!isNaN(parseInt(e)))&&(r=i,tl.test(r)?(n=(t=i).charCodeAt(0))!==t.charCodeAt(t.length-1)||34!==n&&39!==n?t:t.slice(1,-1):"*"+i)}var il=new Map;function al(e,t){return ss(e)?e[t]:null}var ol=function(e){return e},ul=function(e){return""},sl="text",ll=function(e){return 0===e.length?"":function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.reduce((function(e,n,r){return 0===r?e+n:e+t+n}),"")}(e)},cl=function(e){return null==e?"":is(e)||hs(e)&&e.toString===cs?JSON.stringify(e,null,2):String(e)};function fl(e,t){return e=Math.abs(e),2===t?e?e>1?1:0:1:e?Math.min(e,2):0}function hl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.locale,n=function(e){var t=Yu(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(Yu(e.named.count)||Yu(e.named.n))?Yu(e.named.count)?e.named.count:Yu(e.named.n)?e.named.n:t:t}(e),r=ss(e.pluralRules)&&os(t)&&as(e.pluralRules[t])?e.pluralRules[t]:fl,i=ss(e.pluralRules)&&os(t)&&as(e.pluralRules[t])?fl:void 0,a=e.list||[],o=e.named||{};Yu(e.pluralIndex)&&function(e,t){t.count||(t.count=e),t.n||(t.n=e)}(n,o);function u(t){var n=as(e.messages)?e.messages(t):!!ss(e.messages)&&e.messages[t];return n||(e.parent?e.parent.message(t):ul)}var s=hs(e.processor)&&as(e.processor.normalize)?e.processor.normalize:ll,l=hs(e.processor)&&as(e.processor.interpolate)?e.processor.interpolate:cl,c=hs(e.processor)&&os(e.processor.type)?e.processor.type:sl,f=k(k(k(k(k(k(k(k(k({},"list",(function(e){return a[e]})),"named",(function(e){return o[e]})),"plural",(function(e){return e[r(n,e.length,i)]})),"linked",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=r[0],o=r[1],s="text",l="";1===r.length?ss(a)?(l=a.modifier||l,s=a.type||s):os(a)&&(l=a||l):2===r.length&&(os(a)&&(l=a||l),os(o)&&(s=o||s));var c=u(t)(f),h="vnode"===s&&is(c)&&l?c[0]:c;return l?function(t){return e.modifiers?e.modifiers[t]:ol}(l)(h,s):h})),"message",u),"type",c),"interpolate",l),"normalize",s),"values",Zu({},a,o));return f}var dl=null;var vl=pl("function:translate");function pl(e){return function(t){return dl&&dl.emit(e,t)}}var ml,gl=Cs.__EXTEND_POINT__,yl=ds(gl),kl={INVALID_ARGUMENT:gl,INVALID_DATE_ARGUMENT:yl(),INVALID_ISO_DATE_ARGUMENT:yl(),NOT_SUPPORT_NON_STRING_MESSAGE:yl(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:yl(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:yl(),NOT_SUPPORT_LOCALE_TYPE:yl(),__EXTEND_POINT__:yl()};function _l(e){return Ss(e,null,void 0)}function bl(e,t){return null!=t.locale?wl(t.locale):wl(e.locale)}function wl(e){if(os(e))return e;if(as(e)){if(e.resolvedOnce&&null!=ml)return ml;if("Function"===e.constructor.name){var t=e();if(ls(t))throw _l(kl.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return ml=t}throw _l(kl.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}throw _l(kl.NOT_SUPPORT_LOCALE_TYPE)}function El(e,t,n){return w(new Set([n].concat(w(is(t)?t:ss(t)?Object.keys(t):os(t)?[t]:[n]))))}function Cl(e,t,n){var r=os(n)?n:Pl,i=e;i.__localeChainCache||(i.__localeChainCache=new Map);var a=i.__localeChainCache.get(r);if(!a){a=[];for(var o=[n];is(o);)o=xl(a,o,t);var u=is(t)||!hs(t)?t:t.default?t.default:null;o=os(u)?[u]:u,is(o)&&xl(a,o,!1),i.__localeChainCache.set(r,a)}return a}function xl(e,t,n){for(var r=!0,i=0;i<t.length&&us(r);i++){var a=t[i];os(a)&&(r=Sl(e,t[i],n))}return r}function Sl(e,t,n){var r,i=t.split("-");do{r=Il(e,i.join("-"),n),i.splice(-1,1)}while(i.length&&!0===r);return r}function Il(e,t,n){var r=!1;if(!e.includes(t)&&(r=!0,t)){r="!"!==t[t.length-1];var i=t.replace(/!/g,"");e.push(i),(is(n)||hs(n))&&n[i]&&(r=n[i])}return r}var Tl,Al,Ll,Nl="9.10.2",Dl=-1,Pl="en-US",Rl="",Ml=function(e){return"".concat(e.charAt(0).toLocaleUpperCase()).concat(e.substr(1))};function Ol(e){Tl=e}var Fl=null,Ul=function(e){Fl=e},Vl=function(){return Fl},jl=null,Bl=function(e){jl=e},zl=function(){return jl},ql=0;function Gl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=as(e.onWarn)?e.onWarn:vs,n=os(e.version)?e.version:Nl,r=os(e.locale)||as(e.locale)?e.locale:Pl,i=as(r)?Pl:r,a=is(e.fallbackLocale)||hs(e.fallbackLocale)||os(e.fallbackLocale)||!1===e.fallbackLocale?e.fallbackLocale:i,o=hs(e.messages)?e.messages:k({},i,{}),u=hs(e.datetimeFormats)?e.datetimeFormats:k({},i,{}),s=hs(e.numberFormats)?e.numberFormats:k({},i,{}),l=Zu({},e.modifiers||{},{upper:function(e,t){return"text"===t&&os(e)?e.toUpperCase():"vnode"===t&&ss(e)&&"__v_isVNode"in e?e.children.toUpperCase():e},lower:function(e,t){return"text"===t&&os(e)?e.toLowerCase():"vnode"===t&&ss(e)&&"__v_isVNode"in e?e.children.toLowerCase():e},capitalize:function(e,t){return"text"===t&&os(e)?Ml(e):"vnode"===t&&ss(e)&&"__v_isVNode"in e?Ml(e.children):e}}),c=e.pluralRules||{},f=as(e.missing)?e.missing:null,h=!us(e.missingWarn)&&!Xu(e.missingWarn)||e.missingWarn,d=!us(e.fallbackWarn)&&!Xu(e.fallbackWarn)||e.fallbackWarn,v=!!e.fallbackFormat,p=!!e.unresolving,m=as(e.postTranslation)?e.postTranslation:null,g=hs(e.processor)?e.processor:null,y=!us(e.warnHtmlMessage)||e.warnHtmlMessage,_=!!e.escapeParameter,b=as(e.messageCompiler)?e.messageCompiler:Tl,w=as(e.messageResolver)?e.messageResolver:Al||al,E=as(e.localeFallbacker)?e.localeFallbacker:Ll||El,C=ss(e.fallbackContext)?e.fallbackContext:void 0,x=e,S=ss(x.__datetimeFormatters)?x.__datetimeFormatters:new Map,I=ss(x.__numberFormatters)?x.__numberFormatters:new Map,T=ss(x.__meta)?x.__meta:{},A={version:n,cid:++ql,locale:r,fallbackLocale:a,messages:o,modifiers:l,pluralRules:c,missing:f,missingWarn:h,fallbackWarn:d,fallbackFormat:v,unresolving:p,postTranslation:m,processor:g,warnHtmlMessage:y,escapeParameter:_,messageCompiler:b,messageResolver:w,localeFallbacker:E,fallbackContext:C,onWarn:t,__meta:T};return A.datetimeFormats=u,A.numberFormats=s,A.__datetimeFormatters=S,A.__numberFormatters=I,__INTLIFY_PROD_DEVTOOLS__&&function(e,t,n){dl&&dl.emit("i18n:init",{timestamp:Date.now(),i18n:e,version:t,meta:n})}(A,n,T),A}function Hl(e,t,n,r,i){var a=e.missing;e.onWarn;if(null!==a){var o=a(e,n,t,i);return os(o)?o:t}return t}function Wl(e,t,n){e.__localeChainCache=new Map,e.localeFallbacker(e,n,t)}function Kl(e){return function(t){return function(e,t){var n=t.b||t.body;if(1===(n.t||n.type)){var r=n,i=r.c||r.cases;return e.plural(i.reduce((function(t,n){return[].concat(w(t),[Ql(e,n)])}),[]))}return Ql(e,n)}(t,e)}}function Ql(e,t){var n=t.s||t.static;if(n)return"text"===e.type?n:e.normalize([n]);var r=(t.i||t.items).reduce((function(t,n){return[].concat(w(t),[Yl(e,n)])}),[]);return e.normalize(r)}function Yl(e,t){var n=t.t||t.type;switch(n){case 3:var r=t;return r.v||r.value;case 9:var i=t;return i.v||i.value;case 4:var a=t;return e.interpolate(e.named(a.k||a.key));case 5:var o=t;return e.interpolate(e.list(null!=o.i?o.i:o.index));case 6:var u=t,s=u.m||u.modifier;return e.linked(Yl(e,u.k||u.key),s?Yl(e,s):void 0,e.type);case 7:var l=t;return l.v||l.value;case 8:var c=t;return c.v||c.value;default:throw new Error("unhandled node type on format message part: ".concat(n))}}var $l=function(e){return e},Xl=Object.create(null),Jl=function(e){return ss(e)&&(0===e.t||0===e.type)&&("b"in e||"body"in e)};function Zl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!1,r=t.onError||Is;return t.onError=function(e){n=!0,r(e)},c(c({},Zs(e,t)),{},{detectError:n})}var ec=function(){return""},tc=function(e){return as(e)};function nc(e){for(var t=e.fallbackFormat,n=e.postTranslation,r=e.unresolving,i=e.messageCompiler,a=e.fallbackLocale,o=e.messages,u=arguments.length,s=new Array(u>1?u-1:0),l=1;l<u;l++)s[l-1]=arguments[l];var c=b(ac.apply(void 0,s),2),f=c[0],h=c[1],d=us(h.missingWarn)?h.missingWarn:e.missingWarn,v=us(h.fallbackWarn)?h.fallbackWarn:e.fallbackWarn,p=us(h.escapeParameter)?h.escapeParameter:e.escapeParameter,m=!!h.resolvedMessage,g=os(h.default)||us(h.default)?us(h.default)?i?f:function(){return f}:h.default:t?i?f:function(){return f}:"",y=t||""!==g,k=bl(e,h);p&&function(e){is(e.list)?e.list=e.list.map((function(e){return os(e)?ts(e):e})):ss(e.named)&&Object.keys(e.named).forEach((function(t){os(e.named[t])&&(e.named[t]=ts(e.named[t]))}))}(h);var _=b(m?[f,k,o[k]||{}]:rc(e,f,k,a,v,d),3),w=_[0],E=_[1],C=_[2],x=w,S=f;if(m||os(x)||Jl(x)||tc(x)||y&&(S=x=g),!(m||(os(x)||Jl(x)||tc(x))&&os(E)))return r?Dl:f;var I=!1,T=tc(x)?x:ic(e,f,E,x,S,(function(){I=!0}));if(I)return x;var A=function(e,t,n,r){var i=e.modifiers,a=e.pluralRules,o=e.messageResolver,u=e.fallbackLocale,s=e.fallbackWarn,l=e.missingWarn,c=e.fallbackContext,f=function(r){var i=o(n,r);if(null==i&&c){var a=b(rc(c,r,t,u,s,l),3)[2];i=o(a,r)}if(os(i)||Jl(i)){var f=!1,h=ic(e,r,t,i,r,(function(){f=!0}));return f?ec:h}return tc(i)?i:ec},h={locale:t,modifiers:i,pluralRules:a,messages:f};e.processor&&(h.processor=e.processor);r.list&&(h.list=r.list);r.named&&(h.named=r.named);Yu(r.plural)&&(h.pluralIndex=r.plural);return h}(e,E,C,h),L=function(e,t,n){var r=t(n);return r}(0,T,hl(A)),N=n?n(L,f):L;if(__INTLIFY_PROD_DEVTOOLS__){var D={timestamp:Date.now(),key:os(f)?f:tc(x)?x.key:"",locale:E||(tc(x)?x.locale:""),format:os(x)?x:tc(x)?x.source:"",message:N};D.meta=Zu({},e.__meta,Vl()||{}),vl(D)}return N}function rc(e,t,n,r,i,a){for(var o,u=e.messages,s=(e.onWarn,e.messageResolver),l=(0,e.localeFallbacker)(e,r,n),c={},f=null,h=0;h<l.length&&(null===(f=s(c=u[o=l[h]]||{},t))&&(f=c[t]),!(os(f)||Jl(f)||tc(f)));h++){var d=Hl(e,t,o,0,"translate");d!==t&&(f=d)}return[f,o,c]}function ic(e,t,n,r,i,a){var o=e.messageCompiler,u=e.warnHtmlMessage;if(tc(r)){var s=r;return s.locale=s.locale||n,s.key=s.key||t,s}if(null==o){var l=function(){return r};return l.locale=n,l.key=t,l}var c=o(r,function(e,t,n,r,i,a){return{locale:t,key:n,warnHtmlMessage:i,onError:function(e){throw a&&a(e),e},onCacheKey:function(e){return Ku(t,n,e)}}}(0,n,i,0,u,a));return c.locale=n,c.key=t,c.source=r,c}function ac(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2],o={};if(!(os(r)||Yu(r)||tc(r)||Jl(r)))throw _l(kl.INVALID_ARGUMENT);var u=Yu(r)?String(r):(tc(r),r);return Yu(i)?o.plural=i:os(i)?o.default=i:hs(i)&&!Ju(i)?o.named=i:is(i)&&(o.list=i),Yu(a)?o.plural=a:os(a)?o.default=a:hs(a)&&Zu(o,a),[u,o]}function oc(e){for(var t=e.datetimeFormats,n=e.unresolving,r=e.fallbackLocale,i=(e.onWarn,e.localeFallbacker),a=e.__datetimeFormatters,o=arguments.length,u=new Array(o>1?o-1:0),s=1;s<o;s++)u[s-1]=arguments[s];var l=b(sc.apply(void 0,u),4),c=l[0],f=l[1],h=l[2],d=l[3];us(h.missingWarn)?h.missingWarn:e.missingWarn;us(h.fallbackWarn)?h.fallbackWarn:e.fallbackWarn;var v=!!h.part,p=bl(e,h),m=i(e,r,p);if(!os(c)||""===c)return new Intl.DateTimeFormat(p,d).format(f);for(var g,y=null,k=0;k<m.length&&(y=(t[g=m[k]]||{})[c],!hs(y));k++)Hl(e,c,g,0,"datetime format");if(!hs(y)||!os(g))return n?Dl:c;var _="".concat(g,"__").concat(c);Ju(d)||(_="".concat(_,"__").concat(JSON.stringify(d)));var w=a.get(_);return w||(w=new Intl.DateTimeFormat(g,Zu({},y,d)),a.set(_,w)),v?w.formatToParts(f):w.format(f)}var uc=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function sc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=t[0],a=t[1],o=t[2],u=t[3],s={},l={};if(os(i)){var c=i.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!c)throw _l(kl.INVALID_ISO_DATE_ARGUMENT);var f=c[3]?c[3].trim().startsWith("T")?"".concat(c[1].trim()).concat(c[3].trim()):"".concat(c[1].trim(),"T").concat(c[3].trim()):c[1].trim();r=new Date(f);try{r.toISOString()}catch(h){throw _l(kl.INVALID_ISO_DATE_ARGUMENT)}}else if($u(i)){if(isNaN(i.getTime()))throw _l(kl.INVALID_DATE_ARGUMENT);r=i}else{if(!Yu(i))throw _l(kl.INVALID_ARGUMENT);r=i}return os(a)?s.key=a:hs(a)&&Object.keys(a).forEach((function(e){uc.includes(e)?l[e]=a[e]:s[e]=a[e]})),os(o)?s.locale=o:hs(o)&&(l=o),hs(u)&&(l=u),[s.key||"",r,s,l]}function lc(e,t,n){var r=e;for(var i in n){var a="".concat(t,"__").concat(i);r.__datetimeFormatters.has(a)&&r.__datetimeFormatters.delete(a)}}function cc(e){for(var t=e.numberFormats,n=e.unresolving,r=e.fallbackLocale,i=(e.onWarn,e.localeFallbacker),a=e.__numberFormatters,o=arguments.length,u=new Array(o>1?o-1:0),s=1;s<o;s++)u[s-1]=arguments[s];var l=b(hc.apply(void 0,u),4),c=l[0],f=l[1],h=l[2],d=l[3];us(h.missingWarn)?h.missingWarn:e.missingWarn;us(h.fallbackWarn)?h.fallbackWarn:e.fallbackWarn;var v=!!h.part,p=bl(e,h),m=i(e,r,p);if(!os(c)||""===c)return new Intl.NumberFormat(p,d).format(f);for(var g,y=null,k=0;k<m.length&&(y=(t[g=m[k]]||{})[c],!hs(y));k++)Hl(e,c,g,0,"number format");if(!hs(y)||!os(g))return n?Dl:c;var _="".concat(g,"__").concat(c);Ju(d)||(_="".concat(_,"__").concat(JSON.stringify(d)));var w=a.get(_);return w||(w=new Intl.NumberFormat(g,Zu({},y,d)),a.set(_,w)),v?w.formatToParts(f):w.format(f)}var fc=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function hc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2],o=t[3],u={},s={};if(!Yu(r))throw _l(kl.INVALID_ARGUMENT);var l=r;return os(i)?u.key=i:hs(i)&&Object.keys(i).forEach((function(e){fc.includes(e)?s[e]=i[e]:u[e]=i[e]})),os(a)?u.locale=a:hs(a)&&(s=a),hs(o)&&(s=o),[u.key||"",l,u,s]}function dc(e,t,n){var r=e;for(var i in n){var a="".concat(t,"__").concat(i);r.__numberFormatters.has(a)&&r.__numberFormatters.delete(a)}}"boolean"!=typeof __INTLIFY_PROD_DEVTOOLS__&&(es().__INTLIFY_PROD_DEVTOOLS__=!1),"boolean"!=typeof __INTLIFY_JIT_COMPILATION__&&(es().__INTLIFY_JIT_COMPILATION__=!1),"boolean"!=typeof __INTLIFY_DROP_MESSAGE_COMPILER__&&(es().__INTLIFY_DROP_MESSAGE_COMPILER__=!1);
/*!
              * vue-i18n v9.10.2
              * (c) 2024 kazuya kawaguchi
              * Released under the MIT License.
              */
var vc="9.10.2";var pc=ds(8);pc(),pc(),pc(),pc(),pc(),pc(),pc(),pc(),pc();var mc=kl.__EXTEND_POINT__,gc=ds(mc),yc={UNEXPECTED_RETURN_TYPE:mc,INVALID_ARGUMENT:gc(),MUST_BE_CALL_SETUP_TOP:gc(),NOT_INSTALLED:gc(),NOT_AVAILABLE_IN_LEGACY_MODE:gc(),REQUIRED_VALUE:gc(),INVALID_VALUE:gc(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:gc(),NOT_INSTALLED_WITH_PROVIDE:gc(),UNEXPECTED_ERROR:gc(),NOT_COMPATIBLE_LEGACY_VUE_I18N:gc(),BRIDGE_SUPPORT_VUE_2_ONLY:gc(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:gc(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:gc(),__EXTEND_POINT__:gc()};function kc(e){return Ss(e,null,void 0)}var _c=Wu("__translateVNode"),bc=Wu("__datetimeParts"),wc=Wu("__numberParts"),Ec=Wu("__setPluralRules"),Cc=Wu("__injectWithOption"),xc=Wu("__dispose");function Sc(e){if(!ss(e))return e;for(var t in e)if(rs(e,t))if(t.includes(".")){for(var n=t.split("."),r=n.length-1,i=e,a=!1,o=0;o<r;o++){if(n[o]in i||(i[n[o]]={}),!ss(i[n[o]])){a=!0;break}i=i[n[o]]}a||(i[n[r]]=e[t],delete e[t]),ss(i[n[r]])&&Sc(i[n[r]])}else ss(e[t])&&Sc(e[t]);return e}function Ic(e,t){var n=t.messages,r=t.__i18n,i=t.messageResolver,a=t.flatJson,o=hs(n)?n:is(r)?{}:k({},e,{});if(is(r)&&r.forEach((function(e){if("locale"in e&&"resource"in e){var t=e.locale,n=e.resource;t?(o[t]=o[t]||{},ms(n,o[t])):ms(n,o)}else os(e)&&ms(JSON.parse(e),o)})),null==i&&a)for(var u in o)rs(o,u)&&Sc(o[u]);return o}function Tc(e){return e.type}function Ac(e,t,n){var r=ss(t.messages)?t.messages:{};"__i18nGlobal"in n&&(r=Ic(e.locale.value,{messages:r,__i18n:n.__i18nGlobal}));var i=Object.keys(r);if(i.length&&i.forEach((function(t){e.mergeLocaleMessage(t,r[t])})),ss(t.datetimeFormats)){var a=Object.keys(t.datetimeFormats);a.length&&a.forEach((function(n){e.mergeDateTimeFormat(n,t.datetimeFormats[n])}))}if(ss(t.numberFormats)){var o=Object.keys(t.numberFormats);o.length&&o.forEach((function(n){e.mergeNumberFormat(n,t.numberFormats[n])}))}}function Lc(e){return Mi(yi,null,e,0)}var Nc="__INTLIFY_META__",Dc=function(){return[]},Pc=function(){return!1},Rc=0;function Mc(e){return function(t,n,r,i){return e(n,r,Xi()||void 0,i)}}var Oc=function(){var e=Xi(),t=null;return e&&(t=Tc(e)[Nc])?k({},Nc,t):null};function Fc(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.__root,r=t.__injectWithOption,i=void 0===n,a=t.flatJson,o=Hu?Ht:Wt,u=!!t.translateExistCompatible,s=!us(t.inheritLocale)||t.inheritLocale,l=o(n&&s?n.locale.value:os(t.locale)?t.locale:Pl),c=o(n&&s?n.fallbackLocale.value:os(t.fallbackLocale)||is(t.fallbackLocale)||hs(t.fallbackLocale)||!1===t.fallbackLocale?t.fallbackLocale:l.value),f=o(Ic(l.value,t)),h=o(hs(t.datetimeFormats)?t.datetimeFormats:k({},l.value,{})),d=o(hs(t.numberFormats)?t.numberFormats:k({},l.value,{})),v=n?n.missingWarn:!us(t.missingWarn)&&!Xu(t.missingWarn)||t.missingWarn,p=n?n.fallbackWarn:!us(t.fallbackWarn)&&!Xu(t.fallbackWarn)||t.fallbackWarn,m=n?n.fallbackRoot:!us(t.fallbackRoot)||t.fallbackRoot,g=!!t.fallbackFormat,y=as(t.missing)?t.missing:null,_=as(t.missing)?Mc(t.missing):null,w=as(t.postTranslation)?t.postTranslation:null,E=n?n.warnHtmlMessage:!us(t.warnHtmlMessage)||t.warnHtmlMessage,C=!!t.escapeParameter,x=n?n.modifiers:hs(t.modifiers)?t.modifiers:{},S=t.pluralRules||n&&n.pluralRules;Wl(e=function(){i&&Bl(null);var n={version:vc,locale:l.value,fallbackLocale:c.value,messages:f.value,modifiers:x,pluralRules:S,missing:null===_?void 0:_,missingWarn:v,fallbackWarn:p,fallbackFormat:g,unresolving:!0,postTranslation:null===w?void 0:w,warnHtmlMessage:E,escapeParameter:C,messageResolver:t.messageResolver,messageCompiler:t.messageCompiler,__meta:{framework:"vue"}};n.datetimeFormats=h.value,n.numberFormats=d.value,n.__datetimeFormatters=hs(e)?e.__datetimeFormatters:void 0,n.__numberFormatters=hs(e)?e.__numberFormatters:void 0;var r=Gl(n);return i&&Bl(r),r}(),l.value,c.value);var I=la({get:function(){return l.value},set:function(t){l.value=t,e.locale=l.value}}),T=la({get:function(){return c.value},set:function(t){c.value=t,e.fallbackLocale=c.value,Wl(e,l.value,t)}}),A=la((function(){return f.value})),L=la((function(){return h.value})),N=la((function(){return d.value}));var D=function(t,r,a,o,u,s){var v;l.value,c.value,f.value,h.value,d.value;try{__INTLIFY_PROD_DEVTOOLS__&&Ul(Oc()),i||(e.fallbackContext=n?zl():void 0),v=t(e)}finally{__INTLIFY_PROD_DEVTOOLS__,i||(e.fallbackContext=void 0)}if("translate exists"!==a&&Yu(v)&&v===Dl||"translate exists"===a&&!v){var p=b(r(),2),g=p[0];p[1];return n&&m?o(n):u(g)}if(s(v))return v;throw kc(yc.UNEXPECTED_RETURN_TYPE)};function P(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return D((function(e){return Reflect.apply(nc,null,[e].concat(t))}),(function(){return ac.apply(void 0,t)}),"translate",(function(e){return Reflect.apply(e.t,e,[].concat(t))}),(function(e){return e}),(function(e){return os(e)}))}var R={normalize:function(e){return e.map((function(e){return os(e)||Yu(e)||us(e)?Lc(String(e)):e}))},interpolate:function(e){return e},type:"vnode"};function M(e){return f.value[e]||{}}Rc++,n&&Hu&&(Gn(n.locale,(function(t){s&&(l.value=t,e.locale=t,Wl(e,l.value,c.value))})),Gn(n.fallbackLocale,(function(t){s&&(c.value=t,e.fallbackLocale=t,Wl(e,l.value,c.value))})));var O=k({id:Rc,locale:I,fallbackLocale:T,get inheritLocale(){return s},set inheritLocale(t){s=t,t&&n&&(l.value=n.locale.value,c.value=n.fallbackLocale.value,Wl(e,l.value,c.value))},get availableLocales(){return Object.keys(f.value).sort()},messages:A,get modifiers(){return x},get pluralRules(){return S||{}},get isGlobal(){return i},get missingWarn(){return v},set missingWarn(t){v=t,e.missingWarn=v},get fallbackWarn(){return p},set fallbackWarn(t){p=t,e.fallbackWarn=p},get fallbackRoot(){return m},set fallbackRoot(e){m=e},get fallbackFormat(){return g},set fallbackFormat(t){g=t,e.fallbackFormat=g},get warnHtmlMessage(){return E},set warnHtmlMessage(t){E=t,e.warnHtmlMessage=t},get escapeParameter(){return C},set escapeParameter(t){C=t,e.escapeParameter=t},t:P,getLocaleMessage:M,setLocaleMessage:function(t,n){if(a){var r=k({},t,n);for(var i in r)rs(r,i)&&Sc(r[i]);n=r[t]}f.value[t]=n,e.messages=f.value},mergeLocaleMessage:function(t,n){f.value[t]=f.value[t]||{};var r=k({},t,n);if(a)for(var i in r)rs(r,i)&&Sc(r[i]);ms(n=r[t],f.value[t]),e.messages=f.value},getPostTranslationHandler:function(){return as(w)?w:null},setPostTranslationHandler:function(t){w=t,e.postTranslation=t},getMissingHandler:function(){return y},setMissingHandler:function(t){null!==t&&(_=Mc(t)),y=t,e.missing=_}},Ec,(function(t){S=t,e.pluralRules=S}));return O.datetimeFormats=L,O.numberFormats=N,O.rt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2];if(a&&!ss(a))throw kc(yc.INVALID_ARGUMENT);return P.apply(void 0,[r,i,Zu({resolvedMessage:!0},a||{})])},O.te=function(t,n){return D((function(){if(!t)return!1;var r=M(os(n)?n:l.value),i=e.messageResolver(r,t);return u?null!=i:Jl(i)||tc(i)||os(i)}),(function(){return[t]}),"translate exists",(function(e){return Reflect.apply(e.te,e,[t,n])}),Pc,(function(e){return us(e)}))},O.tm=function(t){var r=function(t){for(var n=null,r=Cl(e,c.value,l.value),i=0;i<r.length;i++){var a=f.value[r[i]]||{},o=e.messageResolver(a,t);if(null!=o){n=o;break}}return n}(t);return null!=r?r:n&&n.tm(t)||{}},O.d=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return D((function(e){return Reflect.apply(oc,null,[e].concat(t))}),(function(){return sc.apply(void 0,t)}),"datetime format",(function(e){return Reflect.apply(e.d,e,[].concat(t))}),(function(){return Rl}),(function(e){return os(e)}))},O.n=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return D((function(e){return Reflect.apply(cc,null,[e].concat(t))}),(function(){return hc.apply(void 0,t)}),"number format",(function(e){return Reflect.apply(e.n,e,[].concat(t))}),(function(){return Rl}),(function(e){return os(e)}))},O.getDateTimeFormat=function(e){return h.value[e]||{}},O.setDateTimeFormat=function(t,n){h.value[t]=n,e.datetimeFormats=h.value,lc(e,t,n)},O.mergeDateTimeFormat=function(t,n){h.value[t]=Zu(h.value[t]||{},n),e.datetimeFormats=h.value,lc(e,t,n)},O.getNumberFormat=function(e){return d.value[e]||{}},O.setNumberFormat=function(t,n){d.value[t]=n,e.numberFormats=d.value,dc(e,t,n)},O.mergeNumberFormat=function(t,n){d.value[t]=Zu(d.value[t]||{},n),e.numberFormats=d.value,dc(e,t,n)},O[Cc]=r,O[_c]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return D((function(e){var n,r=e;try{r.processor=R,n=Reflect.apply(nc,null,[r].concat(t))}finally{r.processor=null}return n}),(function(){return ac.apply(void 0,t)}),"translate",(function(e){return e[_c].apply(e,t)}),(function(e){return[Lc(e)]}),(function(e){return is(e)}))},O[bc]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return D((function(e){return Reflect.apply(oc,null,[e].concat(t))}),(function(){return sc.apply(void 0,t)}),"datetime format",(function(e){return e[bc].apply(e,t)}),Dc,(function(e){return os(e)||is(e)}))},O[wc]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return D((function(e){return Reflect.apply(cc,null,[e].concat(t))}),(function(){return hc.apply(void 0,t)}),"number format",(function(e){return e[wc].apply(e,t)}),Dc,(function(e){return os(e)||is(e)}))},O}function Uc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Fc(function(e){var t=os(e.locale)?e.locale:Pl,n=os(e.fallbackLocale)||is(e.fallbackLocale)||hs(e.fallbackLocale)||!1===e.fallbackLocale?e.fallbackLocale:t,r=as(e.missing)?e.missing:void 0,i=!us(e.silentTranslationWarn)&&!Xu(e.silentTranslationWarn)||!e.silentTranslationWarn,a=!us(e.silentFallbackWarn)&&!Xu(e.silentFallbackWarn)||!e.silentFallbackWarn,o=!us(e.fallbackRoot)||e.fallbackRoot,u=!!e.formatFallbackMessages,s=hs(e.modifiers)?e.modifiers:{},l=e.pluralizationRules,c=as(e.postTranslation)?e.postTranslation:void 0,f=!os(e.warnHtmlInMessage)||"off"!==e.warnHtmlInMessage,h=!!e.escapeParameterHtml,d=!us(e.sync)||e.sync,v=e.messages;if(hs(e.sharedMessages)){var p=e.sharedMessages;v=Object.keys(p).reduce((function(e,t){var n=e[t]||(e[t]={});return Zu(n,p[t]),e}),v||{})}var m=e.__i18n,g=e.__root,y=e.__injectWithOption,k=e.datetimeFormats,_=e.numberFormats,b=e.flatJson,w=e.translateExistCompatible;return{locale:t,fallbackLocale:n,messages:v,flatJson:b,datetimeFormats:k,numberFormats:_,missing:r,missingWarn:i,fallbackWarn:a,fallbackRoot:o,fallbackFormat:u,modifiers:s,pluralRules:l,postTranslation:c,warnHtmlMessage:f,escapeParameter:h,messageResolver:e.messageResolver,inheritLocale:d,translateExistCompatible:w,__i18n:m,__root:g,__injectWithOption:y}}(e)),n=e.__extender,r={id:t.id,get locale(){return t.locale.value},set locale(e){t.locale.value=e},get fallbackLocale(){return t.fallbackLocale.value},set fallbackLocale(e){t.fallbackLocale.value=e},get messages(){return t.messages.value},get datetimeFormats(){return t.datetimeFormats.value},get numberFormats(){return t.numberFormats.value},get availableLocales(){return t.availableLocales},get formatter(){return{interpolate:function(){return[]}}},set formatter(e){},get missing(){return t.getMissingHandler()},set missing(e){t.setMissingHandler(e)},get silentTranslationWarn(){return us(t.missingWarn)?!t.missingWarn:t.missingWarn},set silentTranslationWarn(e){t.missingWarn=us(e)?!e:e},get silentFallbackWarn(){return us(t.fallbackWarn)?!t.fallbackWarn:t.fallbackWarn},set silentFallbackWarn(e){t.fallbackWarn=us(e)?!e:e},get modifiers(){return t.modifiers},get formatFallbackMessages(){return t.fallbackFormat},set formatFallbackMessages(e){t.fallbackFormat=e},get postTranslation(){return t.getPostTranslationHandler()},set postTranslation(e){t.setPostTranslationHandler(e)},get sync(){return t.inheritLocale},set sync(e){t.inheritLocale=e},get warnHtmlInMessage(){return t.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(e){t.warnHtmlMessage="off"!==e},get escapeParameterHtml(){return t.escapeParameter},set escapeParameterHtml(e){t.escapeParameter=e},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(e){},get pluralizationRules(){return t.pluralRules||{}},__composer:t,t:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],a=n[1],o=n[2],u={},s=null,l=null;if(!os(i))throw kc(yc.INVALID_ARGUMENT);var c=i;return os(a)?u.locale=a:is(a)?s=a:hs(a)&&(l=a),is(o)?s=o:hs(o)&&(l=o),Reflect.apply(t.t,t,[c,s||l||{},u])},rt:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Reflect.apply(t.rt,t,[].concat(n))},tc:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],a=n[1],o=n[2],u={plural:1},s=null,l=null;if(!os(i))throw kc(yc.INVALID_ARGUMENT);var c=i;return os(a)?u.locale=a:Yu(a)?u.plural=a:is(a)?s=a:hs(a)&&(l=a),os(o)?u.locale=o:is(o)?s=o:hs(o)&&(l=o),Reflect.apply(t.t,t,[c,s||l||{},u])},te:function(e,n){return t.te(e,n)},tm:function(e){return t.tm(e)},getLocaleMessage:function(e){return t.getLocaleMessage(e)},setLocaleMessage:function(e,n){t.setLocaleMessage(e,n)},mergeLocaleMessage:function(e,n){t.mergeLocaleMessage(e,n)},d:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Reflect.apply(t.d,t,[].concat(n))},getDateTimeFormat:function(e){return t.getDateTimeFormat(e)},setDateTimeFormat:function(e,n){t.setDateTimeFormat(e,n)},mergeDateTimeFormat:function(e,n){t.mergeDateTimeFormat(e,n)},n:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Reflect.apply(t.n,t,[].concat(n))},getNumberFormat:function(e){return t.getNumberFormat(e)},setNumberFormat:function(e,n){t.setNumberFormat(e,n)},mergeNumberFormat:function(e,n){t.mergeNumberFormat(e,n)},getChoiceIndex:function(e,t){return-1}};return r.__extender=n,r}var Vc={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:function(e){return"parent"===e||"global"===e},default:"parent"},i18n:{type:Object}};function jc(e){return gi}var Bc=sr({name:"i18n-t",props:Zu({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:function(e){return Yu(e)||!isNaN(e)}}},Vc),setup:function(e,t){var n=t.slots,r=t.attrs,i=e.i18n||ef({useScope:e.scope,__useComponent:!0});return function(){var a=Object.keys(n).filter((function(e){return"_"!==e})),o={};e.locale&&(o.locale=e.locale),void 0!==e.plural&&(o.plural=os(e.plural)?+e.plural:e.plural);var u=function(e,t){var n=e.slots;return 1===t.length&&"default"===t[0]?(n.default?n.default():[]).reduce((function(e,t){return[].concat(w(e),w(t.type===gi?t.children:[t]))}),[]):t.reduce((function(e,t){var r=n[t];return r&&(e[t]=r()),e}),{})}(t,a),s=i[_c](e.keypath,u,o),l=Zu({},r);return ca(os(e.tag)||ss(e.tag)?e.tag:jc(),l,s)}}}),zc=Bc;function qc(e,t,n,r){var i=t.slots,a=t.attrs;return function(){var t={part:!0},o={};e.locale&&(t.locale=e.locale),os(e.format)?t.key=e.format:ss(e.format)&&(os(e.format.key)&&(t.key=e.format.key),o=Object.keys(e.format).reduce((function(t,r){return n.includes(r)?Zu({},t,k({},r,e.format[r])):t}),{}));var u=r.apply(void 0,[e.value,t,o]),s=[t.key];is(u)?s=u.map((function(e,t){var n=i[e.type],r=n?n(k(k(k({},e.type,e.value),"index",t),"parts",u)):[e.value];return function(e){return is(e)&&!os(e[0])}(r)&&(r[0].key="".concat(e.type,"-").concat(t)),r})):os(u)&&(s=[u]);var l=Zu({},a);return ca(os(e.tag)||ss(e.tag)?e.tag:jc(),l,s)}}var Gc=sr({name:"i18n-n",props:Zu({value:{type:Number,required:!0},format:{type:[String,Object]}},Vc),setup:function(e,t){var n=e.i18n||ef({useScope:"parent",__useComponent:!0});return qc(e,t,fc,(function(){return n[wc].apply(n,arguments)}))}}),Hc=Gc,Wc=sr({name:"i18n-d",props:Zu({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},Vc),setup:function(e,t){var n=e.i18n||ef({useScope:"parent",__useComponent:!0});return qc(e,t,uc,(function(){return n[bc].apply(n,arguments)}))}}),Kc=Wc;function Qc(e){if(os(e))return{path:e};if(hs(e)){if(!("path"in e))throw kc(yc.REQUIRED_VALUE);return e}throw kc(yc.INVALID_VALUE)}function Yc(e){var t=e.path,n=e.locale,r=e.args,i=e.choice,a=e.plural,o={},u=r||{};return os(n)&&(o.locale=n),Yu(i)&&(o.plural=i),Yu(a)&&(o.plural=a),[t,u,o]}function $c(e,t){var n=hs(arguments.length<=2?void 0:arguments[2])?arguments.length<=2?void 0:arguments[2]:{},r=!!n.useI18nComponentName;(!us(n.globalInstall)||n.globalInstall)&&([r?"i18n":zc.name,"I18nT"].forEach((function(t){return e.component(t,zc)})),[Hc.name,"I18nN"].forEach((function(t){return e.component(t,Hc)})),[Kc.name,"I18nD"].forEach((function(t){return e.component(t,Kc)}))),e.directive("t",function(e){var t=function(t){var n=t.instance,r=(t.modifiers,t.value);if(!n||!n.$)throw kc(yc.UNEXPECTED_ERROR);var i=function(e,t){var n=e;if("composition"===e.mode)return n.__getInstance(t)||e.global;var r=n.__getInstance(t);return null!=r?r.__composer:e.global.__composer}(e,n.$),a=Qc(r);return[Reflect.apply(i.t,i,w(Yc(a))),i]};return{created:function(n,r){var i=b(t(r),2),a=i[0],o=i[1];Hu&&e.global===o&&(n.__i18nWatcher=Gn(o.locale,(function(){r.instance&&r.instance.$forceUpdate()}))),n.__composer=o,n.textContent=a},unmounted:function(e){Hu&&e.__i18nWatcher&&(e.__i18nWatcher(),e.__i18nWatcher=void 0,delete e.__i18nWatcher),e.__composer&&(e.__composer=void 0,delete e.__composer)},beforeUpdate:function(e,t){var n=t.value;if(e.__composer){var r=e.__composer,i=Qc(n);e.textContent=Reflect.apply(r.t,r,w(Yc(i)))}},getSSRProps:function(e){return{textContent:b(t(e),1)[0]}}}}(t))}function Xc(e,t,n){return{beforeCreate:function(){var r=this,i=Xi();if(!i)throw kc(yc.UNEXPECTED_ERROR);var a=this.$options;if(a.i18n){var o=a.i18n;if(a.__i18n&&(o.__i18n=a.__i18n),o.__root=t,this===this.$root)this.$i18n=Jc(e,o);else{o.__injectWithOption=!0,o.__extender=n.__vueI18nExtend,this.$i18n=Uc(o);var u=this.$i18n;u.__extender&&(u.__disposer=u.__extender(this.$i18n))}}else if(a.__i18n)if(this===this.$root)this.$i18n=Jc(e,a);else{this.$i18n=Uc({__i18n:a.__i18n,__injectWithOption:!0,__extender:n.__vueI18nExtend,__root:t});var s=this.$i18n;s.__extender&&(s.__disposer=s.__extender(this.$i18n))}else this.$i18n=e;a.__i18nGlobal&&Ac(t,a,a),this.$t=function(){var e;return(e=r.$i18n).t.apply(e,arguments)},this.$rt=function(){var e;return(e=r.$i18n).rt.apply(e,arguments)},this.$tc=function(){var e;return(e=r.$i18n).tc.apply(e,arguments)},this.$te=function(e,t){return r.$i18n.te(e,t)},this.$d=function(){var e;return(e=r.$i18n).d.apply(e,arguments)},this.$n=function(){var e;return(e=r.$i18n).n.apply(e,arguments)},this.$tm=function(e){return r.$i18n.tm(e)},n.__setInstance(i,this.$i18n)},mounted:function(){},unmounted:function(){var e=Xi();if(!e)throw kc(yc.UNEXPECTED_ERROR);var t=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,t.__disposer&&(t.__disposer(),delete t.__disposer,delete t.__extender),n.__deleteInstance(e),delete this.$i18n}}}function Jc(e,t){e.locale=t.locale||e.locale,e.fallbackLocale=t.fallbackLocale||e.fallbackLocale,e.missing=t.missing||e.missing,e.silentTranslationWarn=t.silentTranslationWarn||e.silentFallbackWarn,e.silentFallbackWarn=t.silentFallbackWarn||e.silentFallbackWarn,e.formatFallbackMessages=t.formatFallbackMessages||e.formatFallbackMessages,e.postTranslation=t.postTranslation||e.postTranslation,e.warnHtmlInMessage=t.warnHtmlInMessage||e.warnHtmlInMessage,e.escapeParameterHtml=t.escapeParameterHtml||e.escapeParameterHtml,e.sync=t.sync||e.sync,e.__composer[Ec](t.pluralizationRules||e.pluralizationRules);var n=Ic(e.locale,{messages:t.messages,__i18n:t.__i18n});return Object.keys(n).forEach((function(t){return e.mergeLocaleMessage(t,n[t])})),t.datetimeFormats&&Object.keys(t.datetimeFormats).forEach((function(n){return e.mergeDateTimeFormat(n,t.datetimeFormats[n])})),t.numberFormats&&Object.keys(t.numberFormats).forEach((function(n){return e.mergeNumberFormat(n,t.numberFormats[n])})),e}var Zc=Wu("global-vue-i18n");function ef(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Xi();if(null==t)throw kc(yc.MUST_BE_CALL_SETUP_TOP);if(!t.isCE&&null!=t.appContext.app&&!t.appContext.app.__VUE_I18N_SYMBOL__)throw kc(yc.NOT_INSTALLED);var n=function(e){var t=$r(e.isCE?Zc:e.appContext.app.__VUE_I18N_SYMBOL__);if(!t)throw kc(e.isCE?yc.NOT_INSTALLED_WITH_PROVIDE:yc.UNEXPECTED_ERROR);return t}(t),r=function(e){return"composition"===e.mode?e.global:e.global.__composer}(n),i=Tc(t),a=function(e,t){return Ju(e)?"__i18n"in t?"local":"global":e.useScope?e.useScope:"local"}(e,i);if(__VUE_I18N_LEGACY_API__&&"legacy"===n.mode&&!e.__useComponent){if(!n.allowComposition)throw kc(yc.NOT_AVAILABLE_IN_LEGACY_MODE);return function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i="local"===t,a=Wt(null);if(i&&e.proxy&&!e.proxy.$options.i18n&&!e.proxy.$options.__i18n)throw kc(yc.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);var o=us(r.inheritLocale)?r.inheritLocale:!os(r.locale),u=Ht(!i||o?n.locale.value:os(r.locale)?r.locale:Pl),s=Ht(!i||o?n.fallbackLocale.value:os(r.fallbackLocale)||is(r.fallbackLocale)||hs(r.fallbackLocale)||!1===r.fallbackLocale?r.fallbackLocale:u.value),l=Ht(Ic(u.value,r)),c=Ht(hs(r.datetimeFormats)?r.datetimeFormats:k({},u.value,{})),f=Ht(hs(r.numberFormats)?r.numberFormats:k({},u.value,{})),h=i?n.missingWarn:!us(r.missingWarn)&&!Xu(r.missingWarn)||r.missingWarn,d=i?n.fallbackWarn:!us(r.fallbackWarn)&&!Xu(r.fallbackWarn)||r.fallbackWarn,v=i?n.fallbackRoot:!us(r.fallbackRoot)||r.fallbackRoot,p=!!r.fallbackFormat,m=as(r.missing)?r.missing:null,g=as(r.postTranslation)?r.postTranslation:null,y=i?n.warnHtmlMessage:!us(r.warnHtmlMessage)||r.warnHtmlMessage,_=!!r.escapeParameter,b=i?n.modifiers:hs(r.modifiers)?r.modifiers:{},w=r.pluralRules||i&&n.pluralRules;function E(){return[u.value,s.value,l.value,c.value,f.value]}var C=la({get:function(){return a.value?a.value.locale.value:u.value},set:function(e){a.value&&(a.value.locale.value=e),u.value=e}}),x=la({get:function(){return a.value?a.value.fallbackLocale.value:s.value},set:function(e){a.value&&(a.value.fallbackLocale.value=e),s.value=e}}),S=la((function(){return a.value?a.value.messages.value:l.value})),I=la((function(){return c.value})),T=la((function(){return f.value}));function A(){return a.value?a.value.getPostTranslationHandler():g}function L(e){a.value&&a.value.setPostTranslationHandler(e)}function N(){return a.value?a.value.getMissingHandler():m}function D(e){a.value&&a.value.setMissingHandler(e)}function P(e){return E(),e()}function R(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a.value?P((function(){return Reflect.apply(a.value.t,null,[].concat(t))})):P((function(){return""}))}function M(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a.value?Reflect.apply(a.value.rt,null,[].concat(t)):""}function O(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a.value?P((function(){return Reflect.apply(a.value.d,null,[].concat(t))})):P((function(){return""}))}function F(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a.value?P((function(){return Reflect.apply(a.value.n,null,[].concat(t))})):P((function(){return""}))}function U(e){return a.value?a.value.tm(e):{}}function V(e,t){return!!a.value&&a.value.te(e,t)}function j(e){return a.value?a.value.getLocaleMessage(e):{}}function B(e,t){a.value&&(a.value.setLocaleMessage(e,t),l.value[e]=t)}function z(e,t){a.value&&a.value.mergeLocaleMessage(e,t)}function q(e){return a.value?a.value.getDateTimeFormat(e):{}}function G(e,t){a.value&&(a.value.setDateTimeFormat(e,t),c.value[e]=t)}function H(e,t){a.value&&a.value.mergeDateTimeFormat(e,t)}function W(e){return a.value?a.value.getNumberFormat(e):{}}function K(e,t){a.value&&(a.value.setNumberFormat(e,t),f.value[e]=t)}function Q(e,t){a.value&&a.value.mergeNumberFormat(e,t)}var Y={get id(){return a.value?a.value.id:-1},locale:C,fallbackLocale:x,messages:S,datetimeFormats:I,numberFormats:T,get inheritLocale(){return a.value?a.value.inheritLocale:o},set inheritLocale(e){a.value&&(a.value.inheritLocale=e)},get availableLocales(){return a.value?a.value.availableLocales:Object.keys(l.value)},get modifiers(){return a.value?a.value.modifiers:b},get pluralRules(){return a.value?a.value.pluralRules:w},get isGlobal(){return!!a.value&&a.value.isGlobal},get missingWarn(){return a.value?a.value.missingWarn:h},set missingWarn(e){a.value&&(a.value.missingWarn=e)},get fallbackWarn(){return a.value?a.value.fallbackWarn:d},set fallbackWarn(e){a.value&&(a.value.missingWarn=e)},get fallbackRoot(){return a.value?a.value.fallbackRoot:v},set fallbackRoot(e){a.value&&(a.value.fallbackRoot=e)},get fallbackFormat(){return a.value?a.value.fallbackFormat:p},set fallbackFormat(e){a.value&&(a.value.fallbackFormat=e)},get warnHtmlMessage(){return a.value?a.value.warnHtmlMessage:y},set warnHtmlMessage(e){a.value&&(a.value.warnHtmlMessage=e)},get escapeParameter(){return a.value?a.value.escapeParameter:_},set escapeParameter(e){a.value&&(a.value.escapeParameter=e)},t:R,getPostTranslationHandler:A,setPostTranslationHandler:L,getMissingHandler:N,setMissingHandler:D,rt:M,d:O,n:F,tm:U,te:V,getLocaleMessage:j,setLocaleMessage:B,mergeLocaleMessage:z,getDateTimeFormat:q,setDateTimeFormat:G,mergeDateTimeFormat:H,getNumberFormat:W,setNumberFormat:K,mergeNumberFormat:Q};function $(e){e.locale.value=u.value,e.fallbackLocale.value=s.value,Object.keys(l.value).forEach((function(t){e.mergeLocaleMessage(t,l.value[t])})),Object.keys(c.value).forEach((function(t){e.mergeDateTimeFormat(t,c.value[t])})),Object.keys(f.value).forEach((function(t){e.mergeNumberFormat(t,f.value[t])})),e.escapeParameter=_,e.fallbackFormat=p,e.fallbackRoot=v,e.fallbackWarn=d,e.missingWarn=h,e.warnHtmlMessage=y}return gr((function(){if(null==e.proxy||null==e.proxy.$i18n)throw kc(yc.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);var n=a.value=e.proxy.$i18n.__composer;"global"===t?(u.value=n.locale.value,s.value=n.fallbackLocale.value,l.value=n.messages.value,c.value=n.datetimeFormats.value,f.value=n.numberFormats.value):i&&$(n)})),Y}(t,a,r,e)}if("global"===a)return Ac(r,e,i),r;if("parent"===a){var o=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=null,i=t.root,a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==e)return null;return t&&e.vnode.ctx||e.parent}(t,n);for(;null!=a;){var o=e;if("composition"===e.mode)r=o.__getInstance(a);else if(__VUE_I18N_LEGACY_API__){var u=o.__getInstance(a);null!=u&&(r=u.__composer,n&&r&&!r[Cc]&&(r=null))}if(null!=r)break;if(i===a)break;a=a.parent}return r}(n,t,e.__useComponent);return null==o&&(o=r),o}var u=n,s=u.__getInstance(t);if(null==s){var l=Zu({},e);"__i18n"in i&&(l.__i18n=i.__i18n),r&&(l.__root=r),s=Fc(l),u.__composerExtend&&(s[xc]=u.__composerExtend(s)),function(e,t,n){yr((function(){}),t),wr((function(){var r=n;e.__deleteInstance(t);var i=r[xc];i&&(i(),delete r[xc])}),t)}(u,t,s),u.__setInstance(t,s)}return s}var tf,nf=["locale","fallbackLocale","availableLocales"],rf=["t","rt","d","n","tm","te"];function af(e,t){var n=Object.create(null);nf.forEach((function(e){var r=Object.getOwnPropertyDescriptor(t,e);if(!r)throw kc(yc.UNEXPECTED_ERROR);var i=Gt(r.value)?{get:function(){return r.value.value},set:function(e){r.value.value=e}}:{get:function(){return r.get&&r.get()}};Object.defineProperty(n,e,i)})),e.config.globalProperties.$i18n=n,rf.forEach((function(n){var r=Object.getOwnPropertyDescriptor(t,n);if(!r||!r.value)throw kc(yc.UNEXPECTED_ERROR);Object.defineProperty(e.config.globalProperties,"$".concat(n),r)}));return function(){delete e.config.globalProperties.$i18n,rf.forEach((function(t){delete e.config.globalProperties["$".concat(t)]}))}}if("boolean"!=typeof __VUE_I18N_FULL_INSTALL__&&(es().__VUE_I18N_FULL_INSTALL__=!0),"boolean"!=typeof __VUE_I18N_LEGACY_API__&&(es().__VUE_I18N_LEGACY_API__=!0),"boolean"!=typeof __INTLIFY_JIT_COMPILATION__&&(es().__INTLIFY_JIT_COMPILATION__=!1),"boolean"!=typeof __INTLIFY_DROP_MESSAGE_COMPILER__&&(es().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),"boolean"!=typeof __INTLIFY_PROD_DEVTOOLS__&&(es().__INTLIFY_PROD_DEVTOOLS__=!1),__INTLIFY_JIT_COMPILATION__?Ol((function(e,t){if(__INTLIFY_JIT_COMPILATION__&&!__INTLIFY_DROP_MESSAGE_COMPILER__&&os(e)){!us(t.warnHtmlMessage)||t.warnHtmlMessage;var n=(t.onCacheKey||$l)(e),r=Xl[n];if(r)return r;var i=Zl(e,c(c({},t),{},{location:!1,jit:!0})),a=i.ast,o=i.detectError,u=Kl(a);return o?u:Xl[n]=u}var s=e.cacheKey;if(s){return Xl[s]||(Xl[s]=Kl(e))}return Kl(e)})):Ol((function(e,t){if(!os(e))throw _l(kl.NOT_SUPPORT_NON_STRING_MESSAGE);!us(t.warnHtmlMessage)||t.warnHtmlMessage;var n=(t.onCacheKey||$l)(e),r=Xl[n];if(r)return r;var i=Zl(e,t),a=i.code,o=i.detectError,u=new Function("return ".concat(a))();return o?u:Xl[n]=u})),Al=function(e,t){if(!ss(e))return null;var n=il.get(t);if(n||(n=function(e){var t,n,r,i,a,o,u,s=[],l=-1,c=0,f=0,h=[];function d(){var t=e[l+1];if(5===c&&"'"===t||6===c&&'"'===t)return l++,r="\\"+t,h[0](),!0}for(h[0]=function(){void 0===n?n=r:n+=r},h[1]=function(){void 0!==n&&(s.push(n),n=void 0)},h[2]=function(){h[0](),f++},h[3]=function(){if(f>0)f--,c=4,h[0]();else{if(f=0,void 0===n)return!1;if(!1===(n=rl(n)))return!1;h[1]()}};null!==c;)if(l++,"\\"!==(t=e[l])||!d()){if(i=nl(t),8===(a=(u=el[c])[i]||u.l||8))return;if(c=a[0],void 0!==a[1]&&(o=h[a[1]])&&(r=t,!1===o()))return;if(7===c)return s}}(t))&&il.set(t,n),!n)return null;for(var r=n.length,i=e,a=0;a<r;){var o=i[n[a]];if(void 0===o)return null;if(as(i))return null;i=o,a++}return i},Ll=Cl,__INTLIFY_PROD_DEVTOOLS__){var of=es();of.__INTLIFY__=!0,tf=of.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__,dl=tf}var uf,sf,lf,cf=function(e){return uf=e},ff=Symbol();
/*!
             * pinia v2.1.7
             * (c) 2023 Eduardo San Martin Morote
             * @license MIT
             */function hf(e){return e&&"object"===E(e)&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!=typeof e.toJSON}(lf=sf||(sf={})).direct="direct",lf.patchObject="patch object",lf.patchFunction="patch function";var df=function(){};function vf(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:df;e.push(t);var i=function(){var n=e.indexOf(t);n>-1&&(e.splice(n,1),r())};return!n&&Ce()&&xe(i),i}function pf(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.slice().forEach((function(e){e.apply(void 0,n)}))}var mf=function(e){return e()};function gf(e,t){for(var n in e instanceof Map&&t instanceof Map&&t.forEach((function(t,n){return e.set(n,t)})),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e),t)if(t.hasOwnProperty(n)){var r=t[n],i=e[n];hf(i)&&hf(r)&&e.hasOwnProperty(n)&&!Gt(r)&&!Pt(r)?e[n]=gf(i,r):e[n]=r}return e}var yf=Symbol();var kf=Object.assign;function _f(e,t,n,r){var i,a=t.state,o=t.actions,u=t.getters,s=n.state.value[e];return i=bf(e,(function(){s||(n.state.value[e]=a?a():{});var t=function(e){var t=O(e)?new Array(e.length):{};for(var n in e)t[n]=tn(e,n);return t}(n.state.value[e]);return kf(t,o,Object.keys(u||{}).reduce((function(t,r){return t[r]=Ut(la((function(){cf(n);var t=n._s.get(e);return u[r].call(t,t)}))),t}),{}))}),t,n,r,!0),i}function bf(e,t){var n,r,i,a,o,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0,l=arguments.length>5?arguments[5]:void 0,c=kf({actions:{}},u),f={deep:!0},h=[],d=[],v=s.state.value[e];function p(t){var n;r=i=!1,"function"==typeof t?(t(s.state.value[e]),n={type:sf.patchFunction,storeId:e,events:a}):(gf(s.state.value[e],t),n={type:sf.patchObject,payload:t,storeId:e,events:a});var u=o=Symbol();pn().then((function(){o===u&&(r=!0)})),i=!0,pf(h,n,s.state.value[e])}l||v||(s.state.value[e]={}),Ht({});var m=l?function(){var e=u.state,t=e?e():{};this.$patch((function(e){kf(e,t)}))}:df;function g(t,n){return function(){cf(s);var r,i=Array.from(arguments),a=[],o=[];pf(d,{args:i,name:t,store:k,after:function(e){a.push(e)},onError:function(e){o.push(e)}});try{r=n.apply(this&&this.$id===e?this:k,i)}catch(u){throw pf(o,u),u}return r instanceof Promise?r.then((function(e){return pf(a,e),e})).catch((function(e){return pf(o,e),Promise.reject(e)})):(pf(a,r),r)}}var y={_p:s,$id:e,$onAction:vf.bind(null,d),$patch:p,$reset:m,$subscribe:function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=vf(h,t,o.detached,(function(){return l()})),l=n.run((function(){return Gn((function(){return s.state.value[e]}),(function(n){("sync"===o.flush?i:r)&&t({storeId:e,type:sf.direct,events:a},n)}),kf({},f,o))}));return u},$dispose:function(){n.stop(),h=[],d=[],s._s.delete(e)}},k=At(y);s._s.set(e,k);var _,b,w=(s._a&&s._a.runWithContext||mf)((function(){return s._e.run((function(){return(n=Ee()).run(t)}))}));for(var E in w){var C=w[E];if(Gt(C)&&(!Gt(b=C)||!b.effect)||Pt(C))l||(!v||hf(_=C)&&_.hasOwnProperty(yf)||(Gt(C)?C.value=v[E]:gf(C,v[E])),s.state.value[e][E]=C);else if("function"==typeof C){var x=g(E,C);w[E]=x,c.actions[E]=C}}return kf(k,w),kf(Ft(k),w),Object.defineProperty(k,"$state",{get:function(){return s.state.value[e]},set:function(e){p((function(t){kf(t,e)}))}}),s._p.forEach((function(e){kf(k,n.run((function(){return e({store:k,app:s._a,pinia:s,options:c})})))})),v&&l&&u.hydrate&&u.hydrate(k.$state,v),r=!0,i=!0,k}function wf(e,t,n){var r,i,a="function"==typeof t;function o(e,n){return(e=e||(!!($i||Sn||Qr)?$r(ff,null):null))&&cf(e),(e=uf)._s.has(r)||(a?bf(r,t,i,e):_f(r,i,e)),e._s.get(r)}return"string"==typeof e?(r=e,i=a?n:t):(i=e,r=e.id),o.$id=r,o}!function(){var e;try{if(("undefined"==typeof document?"undefined":E(document))<"u"){var t=document.createElement("style");t.nonce=null==(e=document.head.querySelector("meta[property=csp-nonce]"))?void 0:e.content,t.appendChild(document.createTextNode(".vue-notification-group{display:block;position:fixed;z-index:5000}.vue-notification-wrapper{display:block;overflow:hidden;width:100%;margin:0;padding:0}.notification-title{font-weight:600}.vue-notification-template{display:block;box-sizing:border-box;background:white;text-align:left}.vue-notification{display:block;box-sizing:border-box;text-align:left;font-size:12px;padding:10px;margin:0 5px 5px;color:#fff;background:#44A4FC;border-left:5px solid #187FE7}.vue-notification.warn{background:#ffb648;border-left-color:#f48a06}.vue-notification.error{background:#E54D42;border-left-color:#b82e24}.vue-notification.success{background:#68CD86;border-left-color:#42a85f}.vn-fade-enter-active,.vn-fade-leave-active,.vn-fade-move{transition:all .5s}.vn-fade-enter-from,.vn-fade-leave-to{opacity:0}")),document.head.appendChild(t)}}catch(n){console.error("vite-plugin-css-injected-by-js",n)}}();var Ef=new Map,Cf=function(){return y((function e(t,n,r){m(this,e),this.remaining=n,this.callback=t,this.notifyItem=r,this.resume()}),[{key:"pause",value:function(){clearTimeout(this.notifyItem.timer),this.remaining-=Date.now()-this.start}},{key:"resume",value:function(){this.start=Date.now(),clearTimeout(this.notifyItem.timer),this.notifyItem.timer=setTimeout(this.callback,this.remaining)}}])}();var xf,Sf={all:xf=xf||new Map,on:function(e,t){var n=xf.get(e);n?n.push(t):xf.set(e,[t])},off:function(e,t){var n=xf.get(e);n&&(t?n.splice(n.indexOf(t)>>>0,1):xf.set(e,[]))},emit:function(e,t){var n=xf.get(e);n&&n.slice().map((function(e){e(t)})),(n=xf.get("*"))&&n.slice().map((function(n){n(e,t)}))}},If="[-+]?[0-9]*.?[0-9]+",Tf=[{name:"px",regexp:new RegExp("^".concat(If,"px$"))},{name:"%",regexp:new RegExp("^".concat(If,"%$"))},{name:"px",regexp:new RegExp("^".concat(If,"$"))}],Af=function(e){switch(E(e)){case"number":return{type:"px",value:e};case"string":return function(e){if("auto"===e)return{type:e,value:0};for(var t=0;t<Tf.length;t++){var n=Tf[t];if(n.regexp.test(e))return{type:n.name,value:parseFloat(e)}}return{type:"",value:e}}(e);default:return{type:"",value:e}}},Lf={x:new Set(["left","center","right"]),y:new Set(["top","bottom"])},Nf=function(e){return function(){return e++}}(0),Df=function(e){"string"==typeof e&&(e=function(e){return"string"!=typeof e?[]:e.split(/\s+/gi).filter(Boolean)}(e));var t=null,n=null;return e.forEach((function(e){Lf.y.has(e)&&(n=e),Lf.x.has(e)&&(t=e)})),{x:t,y:n}},Pf=["top","right"],Rf="vn-fade",Mf={enter:function(e){return{height:[e.clientHeight,0],opacity:[1,0]}},leave:{height:0,opacity:[0,1]}},Of=sr({name:"velocity-group",inheritAttrs:!1,props:{name:{type:String,default:""}},emits:{enter:function(e,t){return!0},leave:function(e,t){return!0},afterLeave:function(){return!0}},setup:function(e,t){var n=t.slots,r=t.emit,i=function(e,t){r("enter",e,t)},a=function(e,t){r("leave",e,t)},o=function(){r("afterLeave")};return function(){return Mi(io,{tag:"div",css:!1,name:e.name,onEnter:i,onLeave:a,onAfterLeave:o},{default:function(){var e;return[null==(e=n.default)?void 0:e.call(n)]}})}}}),Ff=sr({name:"css-group",inheritAttrs:!1,props:{name:{type:String,default:""}},setup:function(e,t){var n=t.slots;return function(){return Mi(io,{tag:"div",name:e.name},{default:function(){var e;return[null==(e=n.default)?void 0:e.call(n)]}})}}});function Uf(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!Ai(e)}var Vf=0,jf=2,Bf=sr({name:"notifications",props:{group:{type:String,default:""},width:{type:[Number,String],default:300},reverse:{type:Boolean,default:!1},position:{type:[String,Array],default:function(){return Pf}},classes:{type:[String,Array],default:"vue-notification"},animationType:{type:String,default:"css",validator:function(e){return"css"===e||"velocity"===e}},animation:{type:Object,default:function(){return Mf}},animationName:{type:String,default:Rf},speed:{type:Number,default:300},duration:{type:Number,default:3e3},delay:{type:Number,default:0},max:{type:Number,default:1/0},ignoreDuplicates:{type:Boolean,default:!1},closeOnClick:{type:Boolean,default:!0},pauseOnHover:{type:Boolean,default:!1},dangerouslySetInnerHtml:{type:Boolean,default:!1}},emits:{click:function(e){return!0},destroy:function(e){return!0},start:function(e){return!0}},slots:Object,setup:function(e,t){var n=t.emit,r=t.slots,i=(t.expose,Ht([])),a=Ht(null),o=Ef.get("velocity"),u=la((function(){return"velocity"===e.animationType})),s=la((function(){return u.value?Of:Ff})),l=la((function(){return i.value.filter((function(e){return e.state!==jf}))})),c=la((function(){return Af(e.width)})),f=la((function(){var t=Df(e.position),n=t.x,r=t.y,i=c.value.value,a=c.value.type,o={width:i+a};return r&&(o[r]="0px"),n&&("center"===n?o.left="calc(50% - ".concat(+i/2).concat(a,")"):o[n]="0px"),o})),h=la((function(){return"bottom"in f.value})),d=function(){var t;e.pauseOnHover&&(null==(t=a.value)||t.pause())},v=function(){var t;e.pauseOnHover&&(null==(t=a.value)||t.resume())},p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.group||(t.group=""),t.data||(t.data={}),e.group===t.group)if(t.clean||t.clear)b();else{var r="number"==typeof t.duration?t.duration:e.duration,o="number"==typeof t.speed?t.speed:e.speed,u="boolean"==typeof t.ignoreDuplicates?t.ignoreDuplicates:e.ignoreDuplicates,s=t.title,c=t.text,f=t.type,d=t.data,v={id:t.id||Nf(),title:s,text:c,type:f,state:Vf,speed:o,length:r+2*o,data:d,duplicates:0};r>=0&&(a.value=new Cf((function(){return k(v)}),v.length,v));var p=e.reverse?!h.value:h.value,m=-1,g=l.value.find((function(e){return e.title===t.title&&e.text===t.text}));u&&g?g.duplicates++:(p?(i.value.push(v),n("start",v),l.value.length>e.max&&(m=0)):(i.value.unshift(v),n("start",v),l.value.length>e.max&&(m=l.value.length-1)),-1!==m&&k(l.value[m]))}},m=function(e){_(e)},g=function(t){return["vue-notification-template",e.classes,t.type||""]},y=function(e){return u.value?void 0:{transition:"all ".concat(e.speed,"ms")}},k=function(e){clearTimeout(e.timer),e.state=jf,x(),n("destroy",e)},_=function(e){var t=i.value.find((function(t){return t.id===e}));t&&k(t)},b=function(){l.value.forEach(k)},w=function(t,n){var r,i=null==(r=e.animation)?void 0:r[t];return"function"==typeof i?i(n):i},E=function(t,n){if(u.value){var r=w("enter",t);o(t,r,{duration:e.speed,complete:n})}},C=function(t,n){if(u.value){var r=w("leave",t);o(t,r,{duration:e.speed,complete:n})}};function x(){i.value=i.value.filter((function(e){return e.state!==jf}))}return yr((function(){Sf.on("add",p),Sf.on("close",m)})),function(){var t;return Mi("div",{class:"vue-notification-group",style:f.value},[Mi(s.value,{name:e.animationName,onEnter:E,onLeave:C,onAfterLeave:x},Uf(t=l.value.map((function(t){return Mi("div",{key:t.id,class:"vue-notification-wrapper",style:y(t),"data-id":t.id,onMouseenter:d,onMouseleave:v},[r.body?r.body({item:t,class:[e.classes,t.type],close:function(){return k(t)}}):Mi("div",{class:g(t),onClick:function(){return function(t){n("click",t),e.closeOnClick&&k(t)}(t)}},[e.dangerouslySetInnerHtml?Mi(gi,null,[t.title?Mi("div",{class:"notification-title",innerHTML:t.title},null):null,Mi("div",{class:"notification-content",innerHTML:t.text},null)]):Mi(gi,null,[t.title?Mi("div",{class:"notification-title"},[t.title]):null,Mi("div",{class:"notification-content"},[t.text])])])])})))?t:{default:function(){return[t]}})])}}}),zf=function(e){"string"==typeof e&&(e={title:"",text:e}),"object"==E(e)&&Sf.emit("add",e)};zf.close=function(e){Sf.emit("close",e)};var qf={install:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.entries(t).forEach((function(e){return Ef.set.apply(Ef,w(e))}));var n=t.name||"notify";e.config.globalProperties["$"+n]=zf,e.component(t.componentName||"Notifications",Bf)}},Gf=Object.defineProperty,Hf=function(e,t,n){return function(e,t,n){t in e?Gf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=E(t)?t+"":t,n),n},Wf="w",Kf="b",Qf="p",Yf="b",$f="r",Xf="q",Jf="k",Zf="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",eh=-1,th={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},nh={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},rh={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},ih={b:[16,32,17,15],w:[-16,-32,-17,-15]},ah={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},oh=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],uh=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],sh={p:1,n:2,b:4,r:8,q:16,k:32},lh=["n",Yf,$f,Xf],ch=k(k({},Jf,nh.KSIDE_CASTLE),Xf,nh.QSIDE_CASTLE),fh={w:[{square:rh.a1,flag:nh.QSIDE_CASTLE},{square:rh.h1,flag:nh.KSIDE_CASTLE}],b:[{square:rh.a8,flag:nh.QSIDE_CASTLE},{square:rh.h8,flag:nh.KSIDE_CASTLE}]},hh={b:1,w:6},dh=["1-0","0-1","1/2-1/2","*"];function vh(e){return e>>4}function ph(e){return 15&e}function mh(e){return-1!=="0123456789".indexOf(e)}function gh(e){var t=ph(e),n=vh(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(n,n+1)}function yh(e){return e===Wf?Kf:Wf}function kh(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:nh.NORMAL,u=vh(r);if(i!==Qf||7!==u&&0!==u)e.push({color:t,from:n,to:r,piece:i,captured:a,flags:o});else for(var s=0;s<lh.length;s++){var l=lh[s];e.push({color:t,from:n,to:r,piece:i,captured:a,promotion:l,flags:o|nh.PROMOTION})}}function _h(e){var t=e.charAt(0);return t>="a"&&t<="h"?e.match(/[a-h]\d.*[a-h]\d/)?void 0:Qf:"o"===(t=t.toLowerCase())?Jf:t}function bh(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function wh(e){return e.split(" ").slice(0,4).join(" ")}var Eh=function(){return y((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zf;m(this,e),Hf(this,"_board",new Array(128)),Hf(this,"_turn",Wf),Hf(this,"_header",{}),Hf(this,"_kings",{w:eh,b:eh}),Hf(this,"_epSquare",-1),Hf(this,"_halfMoves",0),Hf(this,"_moveNumber",0),Hf(this,"_history",[]),Hf(this,"_comments",{}),Hf(this,"_castling",{w:0,b:0}),Hf(this,"_positionCount",{}),this.load(t)}),[{key:"clear",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).preserveHeaders,t=void 0!==e&&e;this._board=new Array(128),this._kings={w:eh,b:eh},this._turn=Wf,this._castling={w:0,b:0},this._epSquare=eh,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=t?this._header:{},this._positionCount={},delete this._header.SetUp,delete this._header.FEN}},{key:"removeHeader",value:function(e){e in this._header&&delete this._header[e]}},{key:"load",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.skipValidation,r=void 0!==n&&n,i=t.preserveHeaders,a=void 0!==i&&i,o=e.split(/\s+/);if(o.length>=2&&o.length<6){e=o.concat(["-","-","0","1"].slice(-(6-o.length))).join(" ")}if(o=e.split(/\s+/),!r){var u=function(e){var t=e.split(/\s+/);if(6!==t.length)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};var n=parseInt(t[5],10);if(isNaN(n)||n<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};var r=parseInt(t[4],10);if(isNaN(r)||r<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(t[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(t[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(t[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};var i=t[0].split("/");if(8!==i.length)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(var a=0;a<i.length;a++){for(var o=0,u=!1,s=0;s<i[a].length;s++)if(mh(i[a][s])){if(u)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};o+=parseInt(i[a][s],10),u=!0}else{if(!/^[prnbqkPRNBQK]$/.test(i[a][s]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};o+=1,u=!1}if(8!==o)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if("3"==t[3][1]&&"w"==t[1]||"6"==t[3][1]&&"b"==t[1])return{ok:!1,error:"Invalid FEN: illegal en-passant square"};for(var l=0,c=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];l<c.length;l++){var f=c[l],h=f.color,d=f.regex;if(!d.test(t[0]))return{ok:!1,error:"Invalid FEN: missing ".concat(h," king")};if((t[0].match(d)||[]).length>1)return{ok:!1,error:"Invalid FEN: too many ".concat(h," kings")}}return Array.from(i[0]+i[7]).some((function(e){return"P"===e.toUpperCase()}))?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}(e),s=u.ok,l=u.error;if(!s)throw new Error(l)}var c=o[0],f=0;this.clear({preserveHeaders:a});for(var h=0;h<c.length;h++){var d=c.charAt(h);if("/"===d)f+=8;else if(mh(d))f+=parseInt(d,10);else{var v=d<"a"?Wf:Kf;this._put({type:d.toLowerCase(),color:v},gh(f)),f++}}this._turn=o[1],o[2].indexOf("K")>-1&&(this._castling.w|=nh.KSIDE_CASTLE),o[2].indexOf("Q")>-1&&(this._castling.w|=nh.QSIDE_CASTLE),o[2].indexOf("k")>-1&&(this._castling.b|=nh.KSIDE_CASTLE),o[2].indexOf("q")>-1&&(this._castling.b|=nh.QSIDE_CASTLE),this._epSquare="-"===o[3]?eh:rh[o[3]],this._halfMoves=parseInt(o[4],10),this._moveNumber=parseInt(o[5],10),this._updateSetup(e),this._incPositionCount(e)}},{key:"fen",value:function(){for(var e,t,n=0,r="",i=rh.a8;i<=rh.h1;i++){if(this._board[i]){n>0&&(r+=n,n=0);var a=this._board[i],o=a.color,u=a.type;r+=o===Wf?u.toUpperCase():u.toLowerCase()}else n++;i+1&136&&(n>0&&(r+=n),i!==rh.h1&&(r+="/"),n=0,i+=8)}var s="";this._castling[Wf]&nh.KSIDE_CASTLE&&(s+="K"),this._castling[Wf]&nh.QSIDE_CASTLE&&(s+="Q"),this._castling[Kf]&nh.KSIDE_CASTLE&&(s+="k"),this._castling[Kf]&nh.QSIDE_CASTLE&&(s+="q"),s=s||"-";var l="-";if(this._epSquare!==eh)for(var c=this._epSquare+(this._turn===Wf?16:-16),f=0,h=[c+1,c-1];f<h.length;f++){var d=h[f];if(!(136&d)){var v=this._turn;if((null==(e=this._board[d])?void 0:e.color)===v&&(null==(t=this._board[d])?void 0:t.type)===Qf){this._makeMove({color:v,from:d,to:this._epSquare,piece:Qf,captured:Qf,flags:nh.EP_CAPTURE});var p=!this._isKingAttacked(v);if(this._undoMove(),p){l=gh(this._epSquare);break}}}}return[r,this._turn,s,l,this._halfMoves,this._moveNumber].join(" ")}},{key:"_updateSetup",value:function(e){this._history.length>0||(e!==Zf?(this._header.SetUp="1",this._header.FEN=e):(delete this._header.SetUp,delete this._header.FEN))}},{key:"reset",value:function(){this.load(Zf)}},{key:"get",value:function(e){return this._board[rh[e]]||!1}},{key:"put",value:function(e,t){var n=e.type,r=e.color;return!!this._put({type:n,color:r},t)&&(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0)}},{key:"_put",value:function(e,t){var n=e.type,r=e.color;if(-1==="pnbrqkPNBRQK".indexOf(n.toLowerCase())||!(t in rh))return!1;var i=rh[t];if(n==Jf&&this._kings[r]!=eh&&this._kings[r]!=i)return!1;var a=this._board[i];return a&&a.type===Jf&&(this._kings[a.color]=eh),this._board[i]={type:n,color:r},n===Jf&&(this._kings[r]=i),!0}},{key:"remove",value:function(e){var t=this.get(e);return delete this._board[rh[e]],t&&t.type===Jf&&(this._kings[t.color]=eh),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),t}},{key:"_updateCastlingRights",value:function(){var e,t,n,r,i,a,o,u,s,l,c,f,h=(null==(e=this._board[rh.e1])?void 0:e.type)===Jf&&(null==(t=this._board[rh.e1])?void 0:t.color)===Wf,d=(null==(n=this._board[rh.e8])?void 0:n.type)===Jf&&(null==(r=this._board[rh.e8])?void 0:r.color)===Kf;(!h||(null==(i=this._board[rh.a1])?void 0:i.type)!==$f||(null==(a=this._board[rh.a1])?void 0:a.color)!==Wf)&&(this._castling.w&=~nh.QSIDE_CASTLE),(!h||(null==(o=this._board[rh.h1])?void 0:o.type)!==$f||(null==(u=this._board[rh.h1])?void 0:u.color)!==Wf)&&(this._castling.w&=~nh.KSIDE_CASTLE),(!d||(null==(s=this._board[rh.a8])?void 0:s.type)!==$f||(null==(l=this._board[rh.a8])?void 0:l.color)!==Kf)&&(this._castling.b&=~nh.QSIDE_CASTLE),(!d||(null==(c=this._board[rh.h8])?void 0:c.type)!==$f||(null==(f=this._board[rh.h8])?void 0:f.color)!==Kf)&&(this._castling.b&=~nh.KSIDE_CASTLE)}},{key:"_updateEnPassantSquare",value:function(){var e,t,n=this;if(this._epSquare!==eh){var r=this._epSquare+(this._turn===Wf?-16:16),i=this._epSquare+(this._turn===Wf?16:-16),a=[i+1,i-1];if(null===this._board[r]&&null===this._board[this._epSquare]&&(null==(e=this._board[i])?void 0:e.color)===yh(this._turn)&&(null==(t=this._board[i])?void 0:t.type)===Qf){a.some((function(e){var t,r;return!(136&e)&&(null==(t=n._board[e])?void 0:t.color)===n._turn&&(null==(r=n._board[e])?void 0:r.type)===Qf}))||(this._epSquare=eh)}else this._epSquare=eh}}},{key:"_attacked",value:function(e,t){for(var n=rh.a8;n<=rh.h1;n++)if(136&n)n+=7;else if(void 0!==this._board[n]&&this._board[n].color===e){var r=this._board[n],i=n-t;if(0!==i){var a=i+119;if(oh[a]&sh[r.type]){if(r.type===Qf){if(i>0){if(r.color===Wf)return!0}else if(r.color===Kf)return!0;continue}if("n"===r.type||"k"===r.type)return!0;for(var o=uh[a],u=n+o,s=!1;u!==t;){if(null!=this._board[u]){s=!0;break}u+=o}if(!s)return!0}}}return!1}},{key:"_isKingAttacked",value:function(e){var t=this._kings[e];return-1!==t&&this._attacked(yh(e),t)}},{key:"isAttacked",value:function(e,t){return this._attacked(t,rh[e])}},{key:"isCheck",value:function(){return this._isKingAttacked(this._turn)}},{key:"inCheck",value:function(){return this.isCheck()}},{key:"isCheckmate",value:function(){return this.isCheck()&&0===this._moves().length}},{key:"isStalemate",value:function(){return!this.isCheck()&&0===this._moves().length}},{key:"isInsufficientMaterial",value:function(){for(var e={b:0,n:0,r:0,q:0,k:0,p:0},t=[],n=0,r=0,i=rh.a8;i<=rh.h1;i++)if(r=(r+1)%2,136&i)i+=7;else{var a=this._board[i];a&&(e[a.type]=a.type in e?e[a.type]+1:1,a.type===Yf&&t.push(r),n++)}if(2===n)return!0;if(3===n&&(1===e[Yf]||1===e.n))return!0;if(n===e[Yf]+2){for(var o=0,u=t.length,s=0;s<u;s++)o+=t[s];if(0===o||o===u)return!0}return!1}},{key:"isThreefoldRepetition",value:function(){return this._getPositionCount(this.fen())>=3}},{key:"isDraw",value:function(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}},{key:"isGameOver",value:function(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}},{key:"moves",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.verbose,r=void 0!==n&&n,i=t.square,a=void 0===i?void 0:i,o=t.piece,u=void 0===o?void 0:o,s=this._moves({square:a,piece:u});return r?s.map((function(t){return e._makePretty(t)})):s.map((function(t){return e._moveToSan(t,s)}))}},{key:"_moves",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.legal,r=void 0===n||n,i=t.piece,a=void 0===i?void 0:i,o=t.square,u=void 0===o?void 0:o,s=u?u.toLowerCase():void 0,l=null==a?void 0:a.toLowerCase(),c=[],f=this._turn,h=yh(f),d=rh.a8,v=rh.h1,p=!1;if(s){if(!(s in rh))return[];d=v=rh[s],p=!0}for(var m=d;m<=v;m++)if(136&m)m+=7;else if(this._board[m]&&this._board[m].color!==h){var g=this._board[m].type,y=void 0;if(g===Qf){if(l&&l!==g)continue;y=m+ih[f][0],this._board[y]||(kh(c,f,m,y,Qf),y=m+ih[f][1],hh[f]===vh(m)&&!this._board[y]&&kh(c,f,m,y,Qf,void 0,nh.BIG_PAWN));for(var k=2;k<4;k++)!(136&(y=m+ih[f][k]))&&((null==(e=this._board[y])?void 0:e.color)===h?kh(c,f,m,y,Qf,this._board[y].type,nh.CAPTURE):y===this._epSquare&&kh(c,f,m,y,Qf,Qf,nh.EP_CAPTURE))}else{if(l&&l!==g)continue;for(var _=0,b=ah[g].length;_<b;_++){var w=ah[g][_];for(y=m;!(136&(y+=w));){if(this._board[y]){if(this._board[y].color===f)break;kh(c,f,m,y,g,this._board[y].type,nh.CAPTURE);break}if(kh(c,f,m,y,g),"n"===g||g===Jf)break}}}}if(!(void 0!==l&&l!==Jf||p&&v!==this._kings[f])){if(this._castling[f]&nh.KSIDE_CASTLE){var E=this._kings[f],C=E+2;!this._board[E+1]&&!this._board[C]&&!this._attacked(h,this._kings[f])&&!this._attacked(h,E+1)&&!this._attacked(h,C)&&kh(c,f,this._kings[f],C,Jf,void 0,nh.KSIDE_CASTLE)}if(this._castling[f]&nh.QSIDE_CASTLE){var x=this._kings[f],S=x-2;!this._board[x-1]&&!this._board[x-2]&&!this._board[x-3]&&!this._attacked(h,this._kings[f])&&!this._attacked(h,x-1)&&!this._attacked(h,S)&&kh(c,f,this._kings[f],S,Jf,void 0,nh.QSIDE_CASTLE)}}if(!r||-1===this._kings[f])return c;for(var I=[],T=0,A=c.length;T<A;T++)this._makeMove(c[T]),this._isKingAttacked(f)||I.push(c[T]),this._undoMove();return I}},{key:"move",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).strict,n=void 0!==t&&t,r=null;if("string"==typeof e)r=this._moveFromSan(e,n);else if("object"==E(e))for(var i=this._moves(),a=0,o=i.length;a<o;a++)if(e.from===gh(i[a].from)&&e.to===gh(i[a].to)&&(!("promotion"in i[a])||e.promotion===i[a].promotion)){r=i[a];break}if(!r)throw"string"==typeof e?new Error("Invalid move: ".concat(e)):new Error("Invalid move: ".concat(JSON.stringify(e)));var u=this._makePretty(r);return this._makeMove(r),this._incPositionCount(u.after),u}},{key:"_push",value:function(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}},{key:"_makeMove",value:function(e){var t=this._turn,n=yh(t);if(this._push(e),this._board[e.to]=this._board[e.from],delete this._board[e.from],e.flags&nh.EP_CAPTURE&&(this._turn===Kf?delete this._board[e.to-16]:delete this._board[e.to+16]),e.promotion&&(this._board[e.to]={type:e.promotion,color:t}),this._board[e.to].type===Jf){if(this._kings[t]=e.to,e.flags&nh.KSIDE_CASTLE){var r=e.to-1,i=e.to+1;this._board[r]=this._board[i],delete this._board[i]}else if(e.flags&nh.QSIDE_CASTLE){var a=e.to+1,o=e.to-2;this._board[a]=this._board[o],delete this._board[o]}this._castling[t]=0}if(this._castling[t])for(var u=0,s=fh[t].length;u<s;u++)if(e.from===fh[t][u].square&&this._castling[t]&fh[t][u].flag){this._castling[t]^=fh[t][u].flag;break}if(this._castling[n])for(var l=0,c=fh[n].length;l<c;l++)if(e.to===fh[n][l].square&&this._castling[n]&fh[n][l].flag){this._castling[n]^=fh[n][l].flag;break}e.flags&nh.BIG_PAWN?this._epSquare=t===Kf?e.to-16:e.to+16:this._epSquare=eh,e.piece===Qf||e.flags&(nh.CAPTURE|nh.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,t===Kf&&this._moveNumber++,this._turn=n}},{key:"undo",value:function(){var e=this._undoMove();if(e){var t=this._makePretty(e);return this._decPositionCount(t.after),t}return null}},{key:"_undoMove",value:function(){var e=this._history.pop();if(void 0===e)return null;var t=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber;var n,r,i=this._turn,a=yh(i);if(this._board[t.from]=this._board[t.to],this._board[t.from].type=t.piece,delete this._board[t.to],t.captured)if(t.flags&nh.EP_CAPTURE){var o;o=i===Kf?t.to-16:t.to+16,this._board[o]={type:Qf,color:a}}else this._board[t.to]={type:t.captured,color:a};t.flags&(nh.KSIDE_CASTLE|nh.QSIDE_CASTLE)&&(t.flags&nh.KSIDE_CASTLE?(n=t.to+1,r=t.to-1):(n=t.to-2,r=t.to+1),this._board[n]=this._board[r],delete this._board[r]);return t}},{key:"pgn",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.newline,r=void 0===n?"\n":n,i=t.maxWidth,a=void 0===i?0:i,o=[],u=!1;for(var s in this._header)o.push("["+s+' "'+this._header[s]+'"]'+r),u=!0;u&&this._history.length&&o.push(r);for(var l=function(t){var n=e._comments[e.fen()];if(E(n)<"u"){var r=t.length>0?" ":"";t="".concat(t).concat(r,"{").concat(n,"}")}return t},c=[];this._history.length>0;)c.push(this._undoMove());var f=[],h="";for(0===c.length&&f.push(l(""));c.length>0;){h=l(h);var d=c.pop();if(!d)break;if(this._history.length||"b"!==d.color)"w"===d.color&&(h.length&&f.push(h),h=this._moveNumber+".");else{var v="".concat(this._moveNumber,". ...");h=h?"".concat(h," ").concat(v):v}h=h+" "+this._moveToSan(d,this._moves({legal:!0})),this._makeMove(d)}if(h.length&&f.push(l(h)),E(this._header.Result)<"u"&&f.push(this._header.Result),0===a)return o.join("")+f.join(" ");for(var p=function(){return o.length>0&&" "===o[o.length-1]&&(o.pop(),!0)},m=function(e,t){var n,i=C(t.split(" "));try{for(i.s();!(n=i.n()).done;){var u=n.value;if(u){if(e+u.length>a){for(;p();)e--;o.push(r),e=0}o.push(u),e+=u.length,o.push(" "),e++}}}catch(s){i.e(s)}finally{i.f()}return p()&&e--,e},g=0,y=0;y<f.length;y++)g+f[y].length>a&&f[y].includes("{")?g=m(g,f[y]):(g+f[y].length>a&&0!==y?(" "===o[o.length-1]&&o.pop(),o.push(r),g=0):0!==y&&(o.push(" "),g++),o.push(f[y]),g+=f[y].length);return o.join("")}},{key:"header",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r+=2)"string"==typeof t[r]&&"string"==typeof t[r+1]&&(this._header[t[r]]=t[r+1]);return this._header}},{key:"loadPgn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.strict,r=void 0!==n&&n,i=t.newlineChar,a=void 0===i?"\r?\n":i;function o(e){return e.replace(/\\/g,"\\")}e=e.trim();var u=new RegExp("^(\\[((?:"+o(a)+")|.)*\\])((?:\\s*"+o(a)+"){2}|(?:\\s*"+o(a)+")*$)").exec(e),s=u&&u.length>=2?u[1]:"";this.reset();var l=function(e){for(var t={},n=e.split(new RegExp(o(a))),r="",i="",u=0;u<n.length;u++){var s=/^\s*\[\s*([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;r=n[u].replace(s,"$1"),i=n[u].replace(s,"$2"),r.trim().length>0&&(t[r]=i)}return t}(s),c="";for(var f in l)"fen"===f.toLowerCase()&&(c=l[f]),this.header(f,l[f]);if(r){if("1"===l.SetUp){if(!("FEN"in l))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(l.FEN,{preserveHeaders:!0})}}else c&&this.load(c,{preserveHeaders:!0});for(var h=function(e){return e=e.replace(new RegExp(o(a),"g")," "),"{".concat(function(e){return Array.from(e).map((function(e){return e.charCodeAt(0)<128?e.charCodeAt(0).toString(16):encodeURIComponent(e).replace(/%/g,"").toLowerCase()})).join("")}(e.slice(1,e.length-1)),"}")},d=function(e){if(e.startsWith("{")&&e.endsWith("}"))return function(e){return 0==e.length?"":decodeURIComponent("%"+(e.match(/.{1,2}/g)||[]).join("%"))}(e.slice(1,e.length-1))},v=e.replace(s,"").replace(new RegExp("({[^}]*})+?|;([^".concat(o(a),"]*)"),"g"),(function(e,t,n){return void 0!==t?h(t):" "+h("{".concat(n.slice(1),"}"))})).replace(new RegExp(o(a),"g")," "),p=/(\([^()]+\))+?/g;p.test(v);)v=v.replace(p,"");var m=(v=(v=(v=v.replace(/\d+\.(\.\.)?/g,"")).replace(/\.\.\./g,"")).replace(/\$\d+/g,"")).trim().split(new RegExp(/\s+/));m=m.filter((function(e){return""!==e}));for(var g="",y=0;y<m.length;y++){var k=d(m[y]);if(void 0===k){var _=this._moveFromSan(m[y],r);if(null==_){if(!(dh.indexOf(m[y])>-1))throw new Error("Invalid move in PGN: ".concat(m[y]));g=m[y]}else g="",this._makeMove(_),this._incPositionCount(this.fen())}else this._comments[this.fen()]=k}g&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",g)}},{key:"_moveToSan",value:function(e,t){var n="";if(e.flags&nh.KSIDE_CASTLE)n="O-O";else if(e.flags&nh.QSIDE_CASTLE)n="O-O-O";else{if(e.piece!==Qf){var r=function(e,t){for(var n=e.from,r=e.to,i=e.piece,a=0,o=0,u=0,s=0,l=t.length;s<l;s++){var c=t[s].from,f=t[s].to;i===t[s].piece&&n!==c&&r===f&&(a++,vh(n)===vh(c)&&o++,ph(n)===ph(c)&&u++)}return a>0?o>0&&u>0?gh(n):u>0?gh(n).charAt(1):gh(n).charAt(0):""}(e,t);n+=e.piece.toUpperCase()+r}e.flags&(nh.CAPTURE|nh.EP_CAPTURE)&&(e.piece===Qf&&(n+=gh(e.from)[0]),n+="x"),n+=gh(e.to),e.promotion&&(n+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?n+="#":n+="+"),this._undoMove(),n}},{key:"_moveFromSan",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=bh(e),r=_h(n),i=this._moves({legal:!0,piece:r}),a=0,o=i.length;a<o;a++)if(n===bh(this._moveToSan(i[a],i)))return i[a];if(t)return null;var u,s,l,c,f,h=!1;if((s=n.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/))?(u=s[1],l=s[2],c=s[3],f=s[4],1==l.length&&(h=!0)):(s=n.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/))&&(u=s[1],l=s[2],c=s[3],f=s[4],1==l.length&&(h=!0)),r=_h(n),i=this._moves({legal:!0,piece:u||r}),!c)return null;for(var d=0,v=i.length;d<v;d++)if(l){if(!(u&&u.toLowerCase()!=i[d].piece||rh[l]!=i[d].from||rh[c]!=i[d].to||f&&f.toLowerCase()!=i[d].promotion))return i[d];if(h){var p=gh(i[d].from);if(!(u&&u.toLowerCase()!=i[d].piece||rh[c]!=i[d].to||l!=p[0]&&l!=p[1]||f&&f.toLowerCase()!=i[d].promotion))return i[d]}}else if(n===bh(this._moveToSan(i[d],i)).replace("x",""))return i[d];return null}},{key:"ascii",value:function(){for(var e="   +------------------------+\n",t=rh.a8;t<=rh.h1;t++){if(0===ph(t)&&(e+=" "+"87654321"[vh(t)]+" |"),this._board[t]){var n=this._board[t].type;e+=" "+(this._board[t].color===Wf?n.toUpperCase():n.toLowerCase())+" "}else e+=" . ";t+1&136&&(e+="|\n",t+=8)}return e+="   +------------------------+\n",e+="     a  b  c  d  e  f  g  h"}},{key:"perft",value:function(e){for(var t=this._moves({legal:!1}),n=0,r=this._turn,i=0,a=t.length;i<a;i++)this._makeMove(t[i]),this._isKingAttacked(r)||(e-1>0?n+=this.perft(e-1):n++),this._undoMove();return n}},{key:"_makePretty",value:function(e){var t=e.color,n=e.piece,r=e.from,i=e.to,a=e.flags,o=e.captured,u=e.promotion,s="";for(var l in nh)nh[l]&a&&(s+=th[l]);var c=gh(r),f=gh(i),h={color:t,piece:n,from:c,to:f,san:this._moveToSan(e,this._moves({legal:!0})),flags:s,lan:c+f,before:this.fen(),after:""};return this._makeMove(e),h.after=this.fen(),this._undoMove(),o&&(h.captured=o),u&&(h.promotion=u,h.lan+=u),h}},{key:"turn",value:function(){return this._turn}},{key:"board",value:function(){for(var e=[],t=[],n=rh.a8;n<=rh.h1;n++)null==this._board[n]?t.push(null):t.push({square:gh(n),type:this._board[n].type,color:this._board[n].color}),n+1&136&&(e.push(t),t=[],n+=8);return e}},{key:"squareColor",value:function(e){if(e in rh){var t=rh[e];return(vh(t)+ph(t))%2==0?"light":"dark"}return null}},{key:"history",value:function(){for(var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).verbose,t=void 0!==e&&e,n=[],r=[];this._history.length>0;)n.push(this._undoMove());for(;;){var i=n.pop();if(!i)break;t?r.push(this._makePretty(i)):r.push(this._moveToSan(i,this._moves())),this._makeMove(i)}return r}},{key:"_getPositionCount",value:function(e){var t=wh(e);return this._positionCount[t]||0}},{key:"_incPositionCount",value:function(e){var t=wh(e);void 0===this._positionCount[t]&&(this._positionCount[t]=0),this._positionCount[t]+=1}},{key:"_decPositionCount",value:function(e){var t=wh(e);1===this._positionCount[t]?delete this._positionCount[t]:this._positionCount[t]-=1}},{key:"_pruneComments",value:function(){for(var e=this,t=[],n={},r=function(t){t in e._comments&&(n[t]=e._comments[t])};this._history.length>0;)t.push(this._undoMove());for(r(this.fen());;){var i=t.pop();if(!i)break;this._makeMove(i),r(this.fen())}this._comments=n}},{key:"getComment",value:function(){return this._comments[this.fen()]}},{key:"setComment",value:function(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}},{key:"deleteComment",value:function(){var e=this._comments[this.fen()];return delete this._comments[this.fen()],e}},{key:"getComments",value:function(){var e=this;return this._pruneComments(),Object.keys(this._comments).map((function(t){return{fen:t,comment:e._comments[t]}}))}},{key:"deleteComments",value:function(){var e=this;return this._pruneComments(),Object.keys(this._comments).map((function(t){var n=e._comments[t];return delete e._comments[t],{fen:t,comment:n}}))}},{key:"setCastlingRights",value:function(e,t){for(var n=0,r=[Jf,Xf];n<r.length;n++){var i=r[n];void 0!==t[i]&&(t[i]?this._castling[e]|=ch[i]:this._castling[e]&=~ch[i])}this._updateCastlingRights();var a=this.getCastlingRights(e);return!(void 0!==t[Jf]&&t[Jf]!==a[Jf]||void 0!==t[Xf]&&t[Xf]!==a[Xf])}},{key:"getCastlingRights",value:function(e){return k(k({},Jf,!!(this._castling[e]&ch[Jf])),Xf,!!(this._castling[e]&ch[Xf]))}},{key:"moveNumber",value:function(){return this._moveNumber}}])}(),Ch=["width","height"],xh=[Ri("path",{d:"M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z ",style:{opacity:"1",fill:"#000000","fill-opacity":"1","fill-rule":"nonzero",stroke:"#000000","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-opacity":"1"}},null,-1)],Sh=sr({__name:"BP",props:{size:{default:100}},setup:function(e){var t=e,n=la((function(){return"".concat(t.size,"px")}));return function(e,t){return Ei(),Ii("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},xh,8,Ch)}}}),Ih=["width","height"],Th=[Vi('<g style="opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18" style="fill:#000000;stroke:#000000;"></path><path d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10" style="fill:#000000;stroke:#000000;"></path><path d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z" style="fill:#ffffff;stroke:#ffffff;"></path><path d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z" transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)" style="fill:#ffffff;stroke:#ffffff;"></path><path d="M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z " style="fill:#ffffff;stroke:none;"></path></g>',1)],Ah=sr({__name:"BN",props:{size:{default:100}},setup:function(e){var t=e,n=la((function(){return"".concat(t.size,"px")}));return function(e,t){return Ei(),Ii("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},Th,8,Ih)}}}),Lh=["width","height"],Nh=[Vi('<g style="opacity:1;fill:none;fill-rule:evenodd;fill-opacity:1;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><g style="fill:#000000;stroke:#000000;stroke-linecap:butt;"><path d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z"></path><path d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"></path><path d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"></path></g><path d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18" style="fill:none;stroke:#ffffff;stroke-linejoin:miter;"></path></g>',1)],Dh=sr({__name:"BB",props:{size:{default:100}},setup:function(e){var t=e,n=la((function(){return"".concat(t.size,"px")}));return function(e,t){return Ei(),Ii("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},Nh,8,Lh)}}}),Ph=["width","height"],Rh=[Vi('<g style="opacity:1;fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z " style="stroke-linecap:butt;"></path><path d="M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z " style="stroke-linecap:butt;"></path><path d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z " style="stroke-linecap:butt;"></path><path d="M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z " style="stroke-linecap:butt;stroke-linejoin:miter;"></path><path d="M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z " style="stroke-linecap:butt;"></path><path d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z " style="stroke-linecap:butt;"></path><path d="M 12,35.5 L 33,35.5 L 33,35.5" style="fill:none;stroke:#ffffff;stroke-width:1;stroke-linejoin:miter;"></path><path d="M 13,31.5 L 32,31.5" style="fill:none;stroke:#ffffff;stroke-width:1;stroke-linejoin:miter;"></path><path d="M 14,29.5 L 31,29.5" style="fill:none;stroke:#ffffff;stroke-width:1;stroke-linejoin:miter;"></path><path d="M 14,16.5 L 31,16.5" style="fill:none;stroke:#ffffff;stroke-width:1;stroke-linejoin:miter;"></path><path d="M 11,14 L 34,14" style="fill:none;stroke:#ffffff;stroke-width:1;stroke-linejoin:miter;"></path></g>',1)],Mh=sr({__name:"BR",props:{size:{default:100}},setup:function(e){var t=e,n=la((function(){return"".concat(t.size,"px")}));return function(e,t){return Ei(),Ii("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},Rh,8,Ph)}}}),Oh=["width","height"],Fh=[Vi('<g style="opacity:1;fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><g style="fill:#000000;stroke:none;"><circle cx="6" cy="12" r="2.75"></circle><circle cx="14" cy="9" r="2.75"></circle><circle cx="22.5" cy="8" r="2.75"></circle><circle cx="31" cy="9" r="2.75"></circle><circle cx="39" cy="12" r="2.75"></circle></g><path d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z" style="stroke-linecap:butt;stroke:#000000;"></path><path d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z" style="stroke-linecap:butt;"></path><path d="M 11,38.5 A 35,35 1 0 0 34,38.5" style="fill:none;stroke:#000000;stroke-linecap:butt;"></path><path d="M 11,29 A 35,35 1 0 1 34,29" style="fill:none;stroke:#ffffff;"></path><path d="M 12.5,31.5 L 32.5,31.5" style="fill:none;stroke:#ffffff;"></path><path d="M 11.5,34.5 A 35,35 1 0 0 33.5,34.5" style="fill:none;stroke:#ffffff;"></path><path d="M 10.5,37.5 A 35,35 1 0 0 34.5,37.5" style="fill:none;stroke:#ffffff;"></path></g>',1)],Uh=sr({__name:"BQ",props:{size:{default:100}},setup:function(e){var t=e,n=la((function(){return"".concat(t.size,"px")}));return function(e,t){return Ei(),Ii("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},Fh,8,Oh)}}}),Vh=["width","height"],jh=[Vi('<g style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 22.5,11.63 L 22.5,6" style="fill:none;stroke:#000000;stroke-linejoin:miter;" id="path6570"></path><path d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25" style="fill:#000000;fill-opacity:1;stroke-linecap:butt;stroke-linejoin:miter;"></path><path d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z " style="fill:#000000;stroke:#000000;"></path><path d="M 20,8 L 25,8" style="fill:none;stroke:#000000;stroke-linejoin:miter;"></path><path d="M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.51,26.6 L 22.5,24.5 C 20,18 9.906,14 6.997,19.85 C 4.5,25.5 11.85,28.85 11.85,28.85" style="fill:none;stroke:#ffffff;"></path><path d="M 11.5,30 C 17,27 27,27 32.5,30 M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5 M 11.5,37 C 17,34 27,34 32.5,37" style="fill:none;stroke:#ffffff;"></path></g>',1)],Bh=sr({__name:"BK",props:{size:{default:100}},setup:function(e){var t=e,n=la((function(){return"".concat(t.size,"px")}));return function(e,t){return Ei(),Ii("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},jh,8,Vh)}}}),zh=["width","height"],qh=[Ri("path",{d:"M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z ",style:{opacity:"1",fill:"#ffffff","fill-opacity":"1","fill-rule":"nonzero",stroke:"#000000","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-opacity":"1"}},null,-1)],Gh=sr({__name:"WP",props:{size:{default:100}},setup:function(e){var t=e,n=la((function(){return"".concat(t.size,"px")}));return function(e,t){return Ei(),Ii("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},qh,8,zh)}}}),Hh=["width","height"],Wh=[Vi('<g style="opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18" style="fill:#ffffff;stroke:#000000;"></path><path d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10" style="fill:#ffffff;stroke:#000000;"></path><path d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z" style="fill:#000000;stroke:#000000;"></path><path d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z" transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)" style="fill:#000000;stroke:#000000;"></path></g>',1)],Kh=sr({__name:"WN",props:{size:{default:100}},setup:function(e){var t=e,n=la((function(){return"".concat(t.size,"px")}));return function(e,t){return Ei(),Ii("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},Wh,8,Hh)}}}),Qh=["width","height"],Yh=[Vi('<g style="opacity:1;fill:none;fill-rule:evenodd;fill-opacity:1;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><g style="fill:#ffffff;stroke:#000000;stroke-linecap:butt;"><path d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z"></path><path d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"></path><path d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"></path></g><path d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18" style="fill:none;stroke:#000000;stroke-linejoin:miter;"></path></g>',1)],$h=sr({__name:"WB",props:{size:{default:100}},setup:function(e){var t=e,n=la((function(){return"".concat(t.size,"px")}));return function(e,t){return Ei(),Ii("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},Yh,8,Qh)}}}),Xh=["width","height"],Jh=[Vi('<g style="opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z " style="stroke-linecap:butt;"></path><path d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z " style="stroke-linecap:butt;"></path><path d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14" style="stroke-linecap:butt;"></path><path d="M 34,14 L 31,17 L 14,17 L 11,14"></path><path d="M 31,17 L 31,29.5 L 14,29.5 L 14,17" style="stroke-linecap:butt;stroke-linejoin:miter;"></path><path d="M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5"></path><path d="M 11,14 L 34,14" style="fill:none;stroke:#000000;stroke-linejoin:miter;"></path></g>',1)],Zh=sr({__name:"WR",props:{size:{default:100}},setup:function(e){var t=e,n=la((function(){return"".concat(t.size,"px")}));return function(e,t){return Ei(),Ii("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},Jh,8,Xh)}}}),ed=["width","height"],td=[Vi('<g style="opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z" transform="translate(-1,-1)"></path><path d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z" transform="translate(15.5,-5.5)"></path><path d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z" transform="translate(32,-1)"></path><path d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z" transform="translate(7,-4.5)"></path><path d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z" transform="translate(24,-4)"></path><path d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38,14 L 31,25 L 31,11 L 25.5,24.5 L 22.5,9.5 L 19.5,24.5 L 14,10.5 L 14,25 L 7,14 L 9,26 z " style="stroke-linecap:butt;"></path><path d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z " style="stroke-linecap:butt;"></path><path d="M 11.5,30 C 15,29 30,29 33.5,30" style="fill:none;"></path><path d="M 12,33.5 C 18,32.5 27,32.5 33,33.5" style="fill:none;"></path></g>',1)],nd=sr({__name:"WQ",props:{size:{default:100}},setup:function(e){var t=e,n=la((function(){return"".concat(t.size,"px")}));return function(e,t){return Ei(),Ii("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},td,8,ed)}}}),rd=["width","height"],id=[Vi('<g style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;"><path d="M 22.5,11.63 L 22.5,6" style="fill:none;stroke:#000000;stroke-linejoin:miter;"></path><path d="M 20,8 L 25,8" style="fill:none;stroke:#000000;stroke-linejoin:miter;"></path><path d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25" style="fill:#ffffff;stroke:#000000;stroke-linecap:butt;stroke-linejoin:miter;"></path><path d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z " style="fill:#ffffff;stroke:#000000;"></path><path d="M 11.5,30 C 17,27 27,27 32.5,30" style="fill:none;stroke:#000000;"></path><path d="M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5" style="fill:none;stroke:#000000;"></path><path d="M 11.5,37 C 17,34 27,34 32.5,37" style="fill:none;stroke:#000000;"></path></g>',1)],ad=sr({__name:"WK",props:{size:{default:100}},setup:function(e){var t=e,n=la((function(){return"".concat(t.size,"px")}));return function(e,t){return Ei(),Ii("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:n.value,height:n.value,viewBox:"0 0 45 45"},id,8,rd)}}}),od=["width","height"],ud=[Ri("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"},null,-1),Ri("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),Ri("g",{id:"SVGRepo_iconCarrier"},[Ri("polygon",{points:"456.851,0 245,212.564 33.149,0 0.708,32.337 212.669,245.004 0.708,457.678 33.149,490 245,277.443 456.851,490 489.292,457.678 277.331,245.004 489.292,32.337 "})],-1)],sd=sr({__name:"Cross",props:{size:{default:100}},setup:function(e){var t=e,n=la((function(){return"".concat(t.size,"px")}));return function(e,t){return Ei(),Ii("svg",{fill:"#d01616",width:n.value,height:n.value,version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 490 490","xml:space":"preserve",stroke:"#d01616"},ud,8,od)}}});function ld(e,t){return"".concat(String.fromCharCode(97+e)).concat(String.fromCharCode(49+t))}function cd(e,t,n){return e.split(" ")[0].split("/").map(fd).toReversed()[n][t]}function fd(e){return e.split("").flatMap((function(e){return function(e){var t=e.charCodeAt(0);return t>=48&&t<=57}(e)?function(e){for(var t=parseInt(e),n=[],r=0;r<t;r++)n.push("");return n}(e):e}))}function hd(e,t,n){var r=cd(e,t,n);return void 0!==r&&"P"===r}function dd(e,t,n){var r=cd(e,t,n);return void 0!==r&&"N"===r}function vd(e,t,n){var r=cd(e,t,n);return void 0!==r&&"B"===r}function pd(e,t,n){var r=cd(e,t,n);return void 0!==r&&"R"===r}function md(e,t,n){var r=cd(e,t,n);return void 0!==r&&"Q"===r}function gd(e,t,n){var r=cd(e,t,n);return void 0!==r&&"K"===r}function yd(e,t,n){var r=cd(e,t,n);return void 0!==r&&"p"===r}function kd(e,t,n){var r=cd(e,t,n);return void 0!==r&&"n"===r}function _d(e,t,n){var r=cd(e,t,n);return void 0!==r&&"b"===r}function bd(e,t,n){var r=cd(e,t,n);return void 0!==r&&"r"===r}function wd(e,t,n){var r=cd(e,t,n);return void 0!==r&&"q"===r}function Ed(e,t,n){var r=cd(e,t,n);return void 0!==r&&"k"===r}function Cd(e,t,n,r){var i=Math.floor((e-.5*n)/n),a=Math.floor((t-.5*n)/n);return[[!0,"true"].includes(r)?7-i:i,[!0,"true"].includes(r)?a:7-a]}function xd(e,t){if(!t)return[];var n=t.getBoundingClientRect();return[e.clientX-n.x,e.clientY-n.y]}function Sd(e,t,n,r,i){return{from:ld(e,t),to:ld(n,r),promotion:i}}function Id(e,t,n){var r=n.originCell;return r.file===e&&r.rank===t}function Td(e,t,n){var r=n.targetCell;return r.file===e&&r.rank===t}function Ad(e,t,n){var r=n.targetCell;return r.file===e||r.rank===t}function Ld(e){return"P"===e.piece}function Nd(e){return"N"===e.piece}function Dd(e){return"B"===e.piece}function Pd(e){return"R"===e.piece}function Rd(e){return"Q"===e.piece}function Md(e){return"K"===e.piece}function Od(e){return"p"===e.piece}function Fd(e){return"n"===e.piece}function Ud(e){return"b"===e.piece}function Vd(e){return"r"===e.piece}function jd(e){return"q"===e.piece}function Bd(e){return"k"===e.piece}var zd=function(e){return An("data-v-c00eddd7"),e=e(),Ln(),e},qd={class:"lowest-layer"},Gd=zd((function(){return Ri("div",null,null,-1)})),Hd={key:0,class:"coordinate"},Wd={key:1},Kd=zd((function(){return Ri("div",null,null,-1)})),Qd={key:0,class:"coordinate"},Yd={key:1},$d={key:0,class:"dnd-orig"},Xd={key:2,class:"coordinate"},Jd={key:3},Zd=zd((function(){return Ri("div",null,null,-1)})),ev={key:0,class:"coordinate"},tv={key:1},nv={class:"player-turn-cell"},rv={key:0,class:"last-move-layer"},iv=[zd((function(){return Ri("div",{class:"last-move-line last-move-base-line"},null,-1)})),zd((function(){return Ri("div",{class:"last-move-line last-move-arrow-1"},null,-1)})),zd((function(){return Ri("div",{class:"last-move-line last-move-arrow-2"},null,-1)})),zd((function(){return Ri("div",{class:"last-move-line last-move-arrow-point"},null,-1)}))],av={class:"dnd-layer"},ov={key:12},uv={key:0,class:"promotion-overlay-layer"},sv={class:"promotion-layer"},lv={class:"promotion-buttons"},cv="4k3/8/8/8/8/8/8/4K3 w - - 0 1",fv=sr({__name:"ChessboardVue",props:{size:{default:100},reversed:{type:Boolean,default:!1},background:{default:"#124589"},coordinatesVisible:{type:Boolean,default:!0},coordinatesColor:{default:"yellow"},whiteCellsColor:{default:"navajowhite"},blackCellsColor:{default:"peru"},originCellColor:{default:"crimson"},targetCellColor:{default:"ForestGreen"},dndCrossCellColor:{default:"DimGrey"},moveHighlightColor:{default:"CadetBlue"},whitePlayerHuman:{type:Boolean,default:!0},blackPlayerHuman:{type:Boolean,default:!0},lastMoveVisible:{type:Boolean,default:!0}},emits:["checkmate","stalemate","perpetualDraw","missingMaterialDraw","fiftyMovesDraw","waitingManualMove","moveDone"],setup:function(e,t){var n=t.expose,r=t.emit;Fa((function(e){return{23365052:K.value,"7b12f459":e.background,"4e90964b":ee.value,"0ccafbb5":Y.value,aac90db0:$.value,edbfd394:X.value,"66d0db47":J.value,c9bfb090:Z.value,"3dba7350":e.whiteCellsColor,"26ac38b4":e.blackCellsColor,"7e290edb":W.value,"9d9f45da":e.coordinatesColor,"33a18c2e":ae.value,"33a18c2c":oe.value,"313142cf":Q.value,b588fb60:e.originCellColor,"2f8b4845":e.targetCellColor,"4eea78f0":e.dndCrossCellColor,14110304:v.value,"397bb7fe":p.value,"6cd5c3a2":m.value,"4f3fadde":g.value,"3b360156":y.value,"0bbbf24a":k.value,"13014d6b":e.moveHighlightColor,"5487e881":_.value,"2c04819b":w.value,"3d11f48c":E.value,"4b5da321":C.value,"04a55f32":x.value,f1bf6610:S.value,54960002:I.value,"2c04f5fa":T.value,"3ec6cd2b":A.value,ff78433c:L.value,"0e225f5e":N.value,"68b22ad7":D.value,"730e6736":P.value,40359137:R.value,"093d8d28":M.value,"04a51e05":O.value,"29db49ce":F.value,"41ea5ad8":U.value}}));var i=r,a=new Eh(cv),o=Ht(a.fen()),u=Ht(cv),s=Ht(!1),l=Ht(!1),c=Ht(!1),f=Ht(!1),h=Ht({start:{file:-100,rank:-100},end:{file:-100,rank:-100}}),d=Ht({start:{file:-100,rank:-100},end:{file:-100,rank:-100}}),v=Ht("0px"),p=Ht("0px"),m=Ht("0px"),g=Ht("0px"),y=Ht(""),k=Ht("center"),_=Ht("0px"),w=Ht("0px"),E=Ht("0px"),C=Ht("0px"),x=Ht(""),S=Ht("center"),I=Ht("0px"),T=Ht("0px"),A=Ht("0px"),L=Ht("0px"),N=Ht(""),D=Ht("center"),P=Ht("0px"),R=Ht("0px"),M=Ht("0px"),O=Ht("0px"),F=Ht(""),U=Ht("center"),V=e;function j(){o.value=a.fen()}var B=Ht({piece:"",originCell:{file:-100,rank:-100},targetCell:{file:-100,rank:-100}}),z=Ht({x:-100,y:-100}),q=Ht(!1),G=la((function(){return V.size/9})),H=la((function(){return.5*G.value})),W=la((function(){return"".concat(.3*G.value,"px")})),K=la((function(){return"".concat(V.size,"px")})),Q=la((function(){return"".concat(G.value,"px")})),Y=la((function(){return"".concat(.8*V.size,"px")})),$=la((function(){return"".concat(.6*V.size,"px")})),X=la((function(){return"".concat(.08*G.value,"px solid black")})),J=la((function(){return"".concat(.01*G.value,"px")})),Z=la((function(){return"".concat(.02*G.value,"px")})),ee=la((function(){return"".concat(H.value,"px repeat(8, ").concat(G.value,"px) ").concat(H.value,"px / ").concat(H.value,"px repeat(8, ").concat(G.value,"px) ").concat(H.value,"px")})),te=la((function(){return.08*G.value})),ne=Ht(),re=la((function(){return V.reversed?[7,6,5,4,3,2,1,0]:[0,1,2,3,4,5,6,7]})),ie=la((function(){return V.reversed?[0,1,2,3,4,5,6,7]:[7,6,5,4,3,2,1,0]})),ae=la((function(){return z.value.x+"px"})),oe=la((function(){return z.value.y+"px"}));function ue(){s.value&&(c.value=!l.value,c.value&&i("waitingManualMove"))}function se(){a.isCheckmate()?(ce(),s.value=!1,i("checkmate","w"!==a.turn())):a.isStalemate()?(ce(),s.value=!1,i("stalemate")):a.isThreefoldRepetition()?(ce(),s.value=!1,i("perpetualDraw")):a.isDraw()&&(a.isInsufficientMaterial()?(ce(),s.value=!1,i("missingMaterialDraw")):(ce(),s.value=!1,i("fiftyMovesDraw")))}function le(e,t,n,r,i){z.value={x:e,y:t},B.value={piece:i,originCell:{file:n,rank:r},targetCell:{file:n,rank:r}},f.value=!0}function ce(){f.value=!1,B.value={piece:"",originCell:{file:-100,rank:-100},targetCell:{file:-100,rank:-100}},z.value={x:-100,y:-100}}function fe(){if(s.value){var e="w"===a.turn();l.value=e&&V.whitePlayerHuman||!e&&V.blackPlayerHuman}else l.value=!1}function he(e,t,n,r,a,o,u){h.value={start:{file:e,rank:t},end:{file:n,rank:r}},Ce();var s=parseInt(a.fen().split(" ")[5]),l=o.history(),c="w"===a.turn(),f=l[l.length-1],d=function(e,t){return(e=(e=(e=(e=e.replace(/K/g,t?"":"").normalize("NFKC")).replace(/Q/g,t?"":"").normalize("NFKC")).replace(/R/g,t?"":"").normalize("NFKC")).replace(/B/g,t?"":"").normalize("NFKC")).replace(/N/g,t?"":"").normalize("NFKC")}(f,c);i("moveDone",s,c,f,d,o.fen(),{start:{file:e,rank:t},end:{file:n,rank:r}},u)}function de(e,t,n,r){z.value={x:e,y:t},B.value.targetCell.file=n,B.value.targetCell.rank=r}function pe(e,t,n,r){q.value=!0,d.value={start:{file:e,rank:t},end:{file:n,rank:r}}}function me(e){var t={from:ld(d.value.start.file,d.value.start.rank),to:ld(d.value.end.file,d.value.end.rank),promotion:e},n=new Eh(a.fen());a.move(t),j(),ce();var r=d.value,i=r.start,o=i.file,u=i.rank,s=r.end,l=s.file,c=s.rank;d.value={start:{file:-100,rank:-100},end:{file:-100,rank:-100}},q.value=!1,se(),he(o,u,l,c,n,a,e),fe(),ue()}function ge(){q.value=!1,d.value={start:{file:-100,rank:-100},end:{file:-100,rank:-100}},ce()}function ye(e){e.preventDefault(),function(e,t,n,r,i,a,o,u,s){if(r&&o&&!u&&s){var l=b(xd(e,r),2),c=l[0],f=l[1],h=b(Cd(c,f,t,n),2),d=h[0],v=h[1],p=cd(i,d,v);void 0!==p&&"w"===i.split(" ")[1]==="PNRBQK".includes(p)&&a(c,f,d,v,p)}}(e,G.value,V.reversed,ne.value,o.value,le,s.value,c.value,l.value)}function _e(e){e.preventDefault(),function(e,t,n,r,i,a,o,u,s,l,c){if(r&&s&&!l&&t&&!u&&c){var f=b(xd(e,r),2),h=f[0],d=f[1],v=b(Cd(h,d,a,o),2),p=v[0],m=v[1],g=r.getBoundingClientRect();h>=0&&h<=g.width&&d>=0&&d<=g.height?n(h,d,p,m):i()}}(e,f.value,de,ne.value,ce,G.value,V.reversed,q.value,s.value,c.value,l.value)}function be(e){e.preventDefault(),function(e,t,n,r,i,a,o,u,s,l,c,f,h,d,v,p,m,g){if(r&&h&&!p&&a&&!c&&m){var y=b(xd(e,r),2),k=b(Cd(y[0],y[1],t,n),2),_=k[0],w=k[1],E=o.originCell;if(E.file>=0&&E.file<=7&&E.rank>=0&&E.rank<=7&&_>=0&&_<=7&&w>=0&&w<=7){var C,x=cd(i.fen(),o.originCell.file,o.originCell.rank),S=["P","p"].includes(x),I=0===w||7===w,T=new Eh(i.fen()),A=Sd(E.file,E.rank,_,w,"q");try{T.move(A),C=!0}catch(D){C=!1}if(C&&S&&I)f(E.file,E.rank,_,w);else{var L=Sd(E.file,E.rank,_,w),N=new Eh(i.fen());try{i.move(L)}catch(P){return void u()}s(),u(),d(),l(E.file,E.rank,_,w,N,i),g(),v()}}else u()}}(e,G.value,V.reversed,ne.value,a,f.value,B.value,ce,j,he,q.value,pe,s.value,se,ue,c.value,l.value,fe)}function we(e){e.preventDefault(),function(e,t,n,r,i,a){r&&(i||n||a&&t())}(0,ce,q.value,s.value,c.value,l.value)}function Ee(){h.value={start:{file:-100,rank:-100},end:{file:-100,rank:-100}},v.value="0px",p.value="0px",m.value="0px",g.value="0px",y.value="",k.value="0px 0px",_.value="0px",w.value="0px",E.value="0px",C.value="0px",x.value="",S.value="0px 0px",I.value="0px",T.value="0px",A.value="0px",L.value="0px",N.value=")",D.value="0px 0px",P.value="0px",R.value="0px",M.value="0px",O.value="0px",F.value="",U.value="center"}function Ce(){var e=V.reversed?7-h.value.start.file:h.value.start.file,t=V.reversed?h.value.start.rank:7-h.value.start.rank,n=V.reversed?7-h.value.end.file:h.value.end.file,r=V.reversed?h.value.end.rank:7-h.value.end.rank,i=G.value*(e+1),a=G.value*(t+1),o=G.value*(n+1),u=G.value*(r+1),s=i-te.value,l=a,c=o-te.value,f=u,d=c-s,b=f-l,j=Math.atan2(b,d)-Math.PI/2,B=Math.sqrt(d*d+b*b);v.value="".concat(s,"px"),p.value="".concat(l,"px"),m.value="".concat(2*te.value,"px"),g.value="".concat(B,"px"),y.value="rotate(".concat(j,"rad)"),k.value="".concat(te.value,"px 0px");var z=Math.atan2(b,d)-Math.PI/2-3*Math.PI/4,q=.4*Math.sqrt(d*d+b*b);_.value="".concat(c,"px"),w.value="".concat(f,"px"),E.value="".concat(2*te.value,"px"),C.value="".concat(q,"px"),x.value="rotate(".concat(z,"rad)"),S.value="".concat(te.value,"px 0px");var H=Math.atan2(b,d)-Math.PI/2+3*Math.PI/4,W=.4*Math.sqrt(d*d+b*b);I.value="".concat(c,"px"),T.value="".concat(f,"px"),A.value="".concat(2*te.value,"px"),L.value="".concat(W,"px"),N.value="rotate(".concat(H,"rad)"),D.value="".concat(te.value,"px 0px");var K=Math.atan2(b,d)+Math.PI/4,Q=2*te.value;P.value="".concat(c,"px"),R.value="".concat(f,"px"),M.value="".concat(2*te.value,"px"),O.value="".concat(Q,"px"),F.value="rotate(".concat(K,"rad)"),U.value="center"}return _r((function(){Ce(),fe(),ue()})),n({newGame:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";a=new Eh(e),j(),Ee(),u.value=e,q.value=!1,ce(),s.value=!0,se(),fe(),ue()},stop:function(){ce(),c.value=!1,q.value=!1,s.value=!1},isWhiteTurn:function(){return"w"===a.turn()},playManualMove:function(e){if(!s.value||!c.value)return!1;var t,n,r,i,o,u=new Eh(a.fen());"string"==typeof e?(t=e.charCodeAt(0)-97,n=e.charCodeAt(1)-49,r=e.charCodeAt(2)-97,i=e.charCodeAt(3)-49,o=e.length>=5?e.charAt(4):void 0):(t=e.from.charCodeAt(0)-97,n=e.from.charCodeAt(1)-49,r=e.to.charCodeAt(0)-97,i=e.to.charCodeAt(1)-49,o=e.promotion);var l=Sd(t,n,r,i,o);try{a.move(l)}catch(f){return!1}return j(),he(t,n,r,i,u,a,o),se(),fe(),ue(),!0},gameIsInProgress:function(){return s.value},setStartPosition:function(){return!s.value&&(a=new Eh(u.value),Ee(),j(),!0)},setPositionAndLastMove:function(e,t){return!s.value&&(a=new Eh(e),h.value=t,Ce(),j(),!0)},getCurrentPosition:function(){return a.fen()},setLastMoveArrow:function(e){h.value=e,Ce(),j()}}),function(e,t){return Ei(),Ii("div",{class:"root",ref_key:"rootElement",ref:ne},[Ri("div",{class:"inner-layer",onMousedown:ye,onMousemove:_e,onMouseup:be,onMouseleave:we},[Ri("div",qd,[Gd,(Ei(!0),Ii(gi,null,Ir(re.value,(function(e){return Ei(),Ii(gi,null,[V.coordinatesVisible?(Ei(),Ii("p",Hd,ke(String.fromCharCode(65+e)),1)):(Ei(),Ii("div",Wd))],64)})),256)),Kd,(Ei(!0),Ii(gi,null,Ir(ie.value,(function(e){return Ei(),Ii(gi,null,[V.coordinatesVisible?(Ei(),Ii("p",Qd,ke(String.fromCharCode(49+e)),1)):(Ei(),Ii("div",Yd)),(Ei(!0),Ii(gi,null,Ir(re.value,(function(t){return Ei(),Ii("div",{class:ve(["cell",(e+t)%2!=0?"white":"black"])},[Yt(Id)(t,e,B.value)?(Ei(),Ii("div",$d)):Yt(hd)(o.value,t,e)?(Ei(),Ti(Gh,{key:1,class:ve(Yt(Td)(t,e,B.value)?"dnd-target":Yt(Ad)(t,e,B.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):Yt(dd)(o.value,t,e)?(Ei(),Ti(Kh,{key:2,class:ve(Yt(Td)(t,e,B.value)?"dnd-target":Yt(Ad)(t,e,B.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):Yt(vd)(o.value,t,e)?(Ei(),Ti($h,{key:3,class:ve(Yt(Td)(t,e,B.value)?"dnd-target":Yt(Ad)(t,e,B.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):Yt(pd)(o.value,t,e)?(Ei(),Ti(Zh,{key:4,class:ve(Yt(Td)(t,e,B.value)?"dnd-target":Yt(Ad)(t,e,B.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):Yt(md)(o.value,t,e)?(Ei(),Ti(nd,{key:5,class:ve(Yt(Td)(t,e,B.value)?"dnd-target":Yt(Ad)(t,e,B.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):Yt(gd)(o.value,t,e)?(Ei(),Ti(ad,{key:6,class:ve(Yt(Td)(t,e,B.value)?"dnd-target":Yt(Ad)(t,e,B.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):Yt(yd)(o.value,t,e)?(Ei(),Ti(Sh,{key:7,class:ve(Yt(Td)(t,e,B.value)?"dnd-target":Yt(Ad)(t,e,B.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):Yt(kd)(o.value,t,e)?(Ei(),Ti(Ah,{key:8,class:ve(Yt(Td)(t,e,B.value)?"dnd-target":Yt(Ad)(t,e,B.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):Yt(_d)(o.value,t,e)?(Ei(),Ti(Dh,{key:9,class:ve(Yt(Td)(t,e,B.value)?"dnd-target":Yt(Ad)(t,e,B.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):Yt(bd)(o.value,t,e)?(Ei(),Ti(Mh,{key:10,class:ve(Yt(Td)(t,e,B.value)?"dnd-target":Yt(Ad)(t,e,B.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):Yt(wd)(o.value,t,e)?(Ei(),Ti(Uh,{key:11,class:ve(Yt(Td)(t,e,B.value)?"dnd-target":Yt(Ad)(t,e,B.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):Yt(Ed)(o.value,t,e)?(Ei(),Ti(Bh,{key:12,class:ve(Yt(Td)(t,e,B.value)?"dnd-target":Yt(Ad)(t,e,B.value)?"dnd-cross-cell":"no-highlight-cell")},null,8,["class"])):Yt(Id)(t,e,B.value)?(Ei(),Ii("div",{key:13,class:ve(Yt(Td)(t,e,B.value)?"dnd-origin":"dnd-target")},null,2)):(Ei(),Ii("div",{key:14,class:ve(Yt(Td)(t,e,B.value)?"dnd-target":Yt(Ad)(t,e,B.value)?"dnd-cross-cell":"no-highlight-cell")},null,2))],2)})),256)),V.coordinatesVisible?(Ei(),Ii("p",Xd,ke(String.fromCharCode(49+e)),1)):(Ei(),Ii("div",Jd))],64)})),256)),Zd,(Ei(!0),Ii(gi,null,Ir(re.value,(function(e){return Ei(),Ii(gi,null,[V.coordinatesVisible?(Ei(),Ii("p",ev,ke(String.fromCharCode(65+e)),1)):(Ei(),Ii("div",tv))],64)})),256)),Ri("div",nv,[Ri("div",{class:ve(["player-turn","w"===Yt(a).turn()?"white-turn":"black-turn"])},null,2)])]),e.lastMoveVisible?(Ei(),Ii("div",rv,iv)):ji("",!0),Ri("div",av,[Yt(Ld)(B.value)&&!q.value?(Ei(),Ti(Gh,{key:0,class:"dndPiece"})):Yt(Nd)(B.value)?(Ei(),Ti(Kh,{key:1,class:"dndPiece"})):Yt(Dd)(B.value)?(Ei(),Ti($h,{key:2,class:"dndPiece"})):Yt(Pd)(B.value)?(Ei(),Ti(Zh,{key:3,class:"dndPiece"})):Yt(Rd)(B.value)?(Ei(),Ti(nd,{key:4,class:"dndPiece"})):Yt(Md)(B.value)?(Ei(),Ti(ad,{key:5,class:"dndPiece"})):Yt(Od)(B.value)&&!q.value?(Ei(),Ti(Sh,{key:6,class:"dndPiece"})):Yt(Fd)(B.value)?(Ei(),Ti(Ah,{key:7,class:"dndPiece"})):Yt(Ud)(B.value)?(Ei(),Ti(Dh,{key:8,class:"dndPiece"})):Yt(Vd)(B.value)?(Ei(),Ti(Mh,{key:9,class:"dndPiece"})):Yt(jd)(B.value)?(Ei(),Ti(Uh,{key:10,class:"dndPiece"})):Yt(Bd)(B.value)?(Ei(),Ti(Bh,{key:11,class:"dndPiece"})):(Ei(),Ii("div",ov))])],32),q.value?(Ei(),Ii("div",uv,[Ri("div",sv,[Ri("div",lv,["w"===Yt(a).turn()?(Ei(),Ii(gi,{key:0},[Mi(nd,{size:G.value,class:"single-promotion-button",onClick:t[0]||(t[0]=function(){return me("q")})},null,8,["size"]),Mi(Zh,{size:G.value,class:"single-promotion-button",onClick:t[1]||(t[1]=function(){return me("r")})},null,8,["size"]),Mi($h,{size:G.value,class:"single-promotion-button",onClick:t[2]||(t[2]=function(){return me("b")})},null,8,["size"]),Mi(Kh,{size:G.value,class:"single-promotion-button",onClick:t[3]||(t[3]=function(){return me("n")})},null,8,["size"]),Mi(sd,{size:G.value,class:"single-promotion-button",onClick:t[4]||(t[4]=function(){return ge()})},null,8,["size"])],64)):(Ei(),Ii(gi,{key:1},[Mi(Uh,{size:G.value,class:"single-promotion-button",onClick:t[5]||(t[5]=function(){return me("q")})},null,8,["size"]),Mi(Mh,{size:G.value,class:"single-promotion-button",onClick:t[6]||(t[6]=function(){return me("r")})},null,8,["size"]),Mi(Dh,{size:G.value,class:"single-promotion-button",onClick:t[7]||(t[7]=function(){return me("b")})},null,8,["size"]),Mi(Ah,{size:G.value,class:"single-promotion-button",onClick:t[8]||(t[8]=function(){return me("n")})},null,8,["size"]),Mi(sd,{size:G.value,class:"single-promotion-button",onClick:t[9]||(t[9]=function(){return ge()})},null,8,["size"])],64))])])])):ji("",!0)],512)}}}),hv=function(e,t){var n,r=e.__vccOpts||e,i=C(t);try{for(i.s();!(n=i.n()).done;){var a=b(n.value,2),o=a[0],u=a[1];r[o]=u}}catch(s){i.e(s)}finally{i.f()}return r},dv=hv(fv,[["__scopeId","data-v-c00eddd7"]]),vv={install:function(e){e.component("ChessboardVue",dv)}},pv=Wt();function mv(e){void 0===e&&(e=pv.value.comp.returnValue()),pv.value.resolve(e),pv.value=null}function gv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";return new Promise((function(r){pv.value={dialog:e,props:t,wrapper:n,resolve:r}}))}var yv=function(e,t){var n,r=e.__vccOpts||e,i=C(t);try{for(i.s();!(n=i.n()).done;){var a=b(n.value,2),o=a[0],u=a[1];r[o]=u}}catch(s){i.e(s)}finally{i.f()}return r};var kv=yv(sr({name:"DialogWrapper",components:{},props:{name:{type:String,default:"default"},transitionAttrs:Object},setup:function(){var e=Ht();return Gn(e,(function(){pv.value&&(pv.value.comp=e.value)})),{dialogRef:pv,dialogInstance:e}}}),[["render",function(e,t,n,r,i,a){return Ei(),Ti(ya,function(e){if(!e)return null;var t=e.class,n=e.style;return t&&!j(t)&&(e.class=ve(t)),n&&(e.style=le(n)),e}(Oi(e.transitionAttrs)),{default:Nn((function(){return[e.dialogRef&&e.dialogRef.wrapper===e.name?(Ei(),Ti((t=e.dialogRef.dialog,j(t)?Vn(On,t,!1)||t:t||Un),Gi({key:0},e.dialogRef.props,{ref:"dialogInstance"}),null,16)):ji("",!0)];var t})),_:1},16)}]]),_v={__name:"App",setup:function(e){return function(e,t){var n=Fn("RouterView"),r=Fn("notifications");return Ei(),Ii(gi,null,[Mi(n),Mi(r),Mi(Yt(kv))],64)}}},bv={en:{pages:{home:{title:"home",createRoom:"Create a room",joinRoom:"Join a room",yourRoom:"Your room",roomIdCopied:"Room id copied in the clipboard."},createRoom:{title:"Create a room",labels:{nickname:"Your nickname"},placeholders:{nickname:"nickname"},errors:{emptyNickname:"Nickname must not be empty !",tooShortNickname:"Nickname must contains at least 4 characters !",failedCreatingRoom:"Failed to create room !"},submit:"Create",cancel:"Cancel"},joinRoom:{title:"Join a room",labels:{nickname:"Your nickname",roomId:"Room id"},placeholders:{nickname:"nickname",roomId:"id"},errors:{emptyNickname:"Nickname must not be empty !",tooShortNickname:"Nickname must contains at least 4 characters !",emptyRoomId:"Room id must not be empty !",noMatchingRoom:"There's no matching room !",alreadyFilledRoom:"This room is already busy !",failedJoiningRoom:"Failed to join room !"},submit:"Join",cancel:"Cancel"},newGame:{title:"New game",submit:"Confirm",cancel:"Cancel",hasWhite:"Do you have white ?",hasWhiteYes:"Yes",hasWhiteNo:"No"},giveUp:{title:"Give up ?",submit:"Confirm",cancel:"Cancel"},game:{outcomes:{gaveUp:"Game gave up by your opponent.",checkmate:"Checkmate !",stalemate:"Stalemate !",perpetualDraw:"Draw by three-fold repetition !",missingMaterial:"Draw by missing material !",fiftyMovesDraw:"Draw by the 50 moves rule !"}},pgn:{confirmationMessage:"Download the generated PGN file ?"},generic:{errors:{failedUpdatingRoom:"Failed to update room in database !",failedReadingRoom:"Failed to read room from database !"}}}},es:{pages:{home:{title:"Bienvenida",createRoom:"Crear una sala de estar",joinRoom:"Entrar a una sala",yourRoom:"Su sala",roomIdCopied:"ID de la sala copiada en el portapapeles."},createRoom:{title:"Crear una sala de estar",labels:{nickname:"Tu apodo"},placeholders:{nickname:"apodo"},errors:{emptyNickname:"El apodo no debe estar vaco!",tooShortNickname:"El apodo debe contener al menos 4 caracteres!",failedCreatingRoom:"No se pudo crear sala!"},submit:"Crear",cancel:"Anular"},joinRoom:{title:"Entrar a una sala",labels:{nickname:"Tu apodo",roomId:"Identificacin de la sala"},placeholders:{nickname:"apodo",roomId:"identificacin"},errors:{emptyNickname:"El apodo no debe estar vaco!",tooShortNickname:"El apodo debe contener al menos 4 caracteres!",emptyRoomId:"La identificacin de la sala no debe estar vaca!",noMatchingRoom:"No hay ninguna sala que coincida!",alreadyFilledRoom:"Esta sala ya est ocupada!",failedJoiningRoom:"No se pudo entrar a la sala!"},submit:"Entrar",cancel:"Anular"},newGame:{title:"Nueva partida",submit:"Confirmar",cancel:"Anular",hasWhite:"Tiene los blancos?",hasWhiteYes:"S",hasWhiteNo:"No"},giveUp:{title:"Abandonar?",submit:"Confirmar",cancel:"Anular"},game:{outcomes:{gaveUp:"Partida abandonada por su oponente.",checkmate:"Jaque mate!",stalemate:"Empate!",perpetualDraw:"Igualdad por repeticin triple!",missingMaterial:"Igualdad con el material que falta!",fiftyMovesDraw:"Igualdad segn la regla de los 50 movimientos!"}},pgn:{confirmationMessage:"Descargar el archivo PGN generado?"},generic:{errors:{failedUpdatingRoom:"No se pudo actualizar la sala en la base de datos!",failedReadingRoom:"No se pudo leer la sala de la base de datos!"}}}},fr:{pages:{home:{title:"Accueil",createRoom:"Crr un salon",joinRoom:"Rejoindre un salon",yourRoom:"Votre salon",roomIdCopied:"ID du salon copi dans le presse-papiers."},createRoom:{title:"Crr un salon",labels:{nickname:"Votre pseudo"},placeholders:{nickname:"pseudo"},errors:{emptyNickname:"Le pseudo ne doit pas tre vide !",tooShortNickname:"Le pseudo doit contenir au moins 4 caractres !",failedCreatingRoom:"chec de cration du salon !"},submit:"Crer",cancel:"Annuler"},joinRoom:{title:"Rejoindre un salon",labels:{nickname:"Votre pseudo",roomId:"Id du salon"},placeholders:{nickname:"pseudo",roomId:"id"},errors:{emptyNickname:"Le pseudo ne doit pas tre vide !",tooShortNickname:"Le pseudo doit contenir au moins 4 caractres !",emptyRoomId:"L'id du salon ne doit pas tre vide !",noMatchingRoom:"Aucun salon ne correspond !",alreadyFilledRoom:"Ce salon est dj occup !",failedJoiningRoom:"Erreur en tentant de rejoindre le salon !"},submit:"Joindre",cancel:"Annuler"},newGame:{title:"Nouvelle partie",submit:"Confirmer",cancel:"Annuler",hasWhite:"Avez-vous les Blancs ?",hasWhiteYes:"Oui",hasWhiteNo:"Non"},giveUp:{title:"Abandonner ?",submit:"Confirmer",cancel:"Annuler"},game:{outcomes:{gaveUp:"Partie abandonne par votre adversaire.",checkmate:"chec et mat !",stalemate:"Pat !",perpetualDraw:"Nulle par triple rptition !",missingMaterial:"Nulle par manque de matriel !",fiftyMovesDraw:"Nulle par la rgle des 50 coups !"}},pgn:{confirmationMessage:"Tlcharger le fichier PGN gnr ?"},generic:{errors:{failedUpdatingRoom:"chec de mise  jour du salon dans la base de donnes !",failedReadingRoom:"chec de lecture du salon depuis la base de donnes !"}}}}},wv="7895ChessAppWeb5614",Ev={},Cv=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},xv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,l=s?e[i+2]:0,c=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|l>>6,d=63&l;s||(d=64,o||(h=64)),r.push(n[c],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Cv(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new Sv;var l=a<<2|o>>4;if(r.push(l),64!==u){var c=o<<4&240|u>>2;if(r.push(c),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Sv=function(e){function t(){var e;return m(this,t),(e=f(this,t,arguments)).name="DecodeBase64StringError",e}return v(t,e),y(t)}(i(Error)),Iv=function(e){return function(e){var t=Cv(e);return xv.encodeByteArray(t,!0)}(e).replace(/\./g,"")};
/**
             * @license
             * Copyright 2022 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
var Tv=function(){
/**
             * @license
             * Copyright 2022 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},Av=function(){if("undefined"!=typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&function(e){try{return xv.decodeString(e,!0)}catch(n){console.error("base64Decode failed: ",n)}return null}(e[1]);return t&&JSON.parse(t)}},Lv=function(){try{return Tv()||function(){if("undefined"!=typeof process&&void 0!==Ev){var e=Ev.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||Av()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Nv=function(){return y((function e(){var t=this;m(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}),[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}])}();
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function Dv(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Pv(){return!function(){var e,t=null===(e=Lv())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(n){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Rv(){try{return"object"===("undefined"==typeof indexedDB?"undefined":E(indexedDB))}catch(e){return!1}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
var Mv=function(e){function t(e,n,r){var i;return m(this,t),(i=f(this,t,[n])).code=e,i.customData=r,i.name="FirebaseError",Object.setPrototypeOf(i,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,Ov.prototype.create),i}return v(t,e),y(t)}(i(Error)),Ov=function(){return y((function e(t,n,r){m(this,e),this.service=t,this.serviceName=n,this.errors=r}),[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Fv,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Mv(n,a,t)}}])}();var Fv=/\{\$([^}]+)}/g;function Uv(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Vv(u)&&Vv(s)){if(!Uv(u,s))return!1}else if(u!==s)return!1}for(var l=0,c=r;l<c.length;l++){var f=c[l];if(!n.includes(f))return!1}return!0}function Vv(e){return null!==e&&"object"===E(e)}
/**
             * @license
             * Copyright 2021 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function jv(e){return e&&e._delegate?e._delegate:e}var Bv=function(){return y((function e(t,n,r){m(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}),[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}])}(),zv="[DEFAULT]",qv=function(){return y((function e(t,n){m(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}),[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Nv;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(e))try{this.getOrInitializeService({instanceIdentifier:zv})}catch(s){}var t,n=C(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=b(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zv;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:(e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(w(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),w(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zv;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zv;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=C(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=b(i.value,2),s=u[0],l=u[1];r===this.normalizeInstanceIdentifier(s)&&l.resolve(a)}}catch(c){o.e(c)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===zv?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zv;return this.component?this.component.multipleInstances?e:zv:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]);var e}();
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var Gv,Hv=function(){return y((function e(t){m(this,e),this.name=t,this.providers=new Map}),[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new qv(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}])}();
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Gv||(Gv={}));var Wv,Kv,Qv={debug:Gv.DEBUG,verbose:Gv.VERBOSE,info:Gv.INFO,warn:Gv.WARN,error:Gv.ERROR,silent:Gv.SILENT},Yv=Gv.INFO,$v=k(k(k(k(k({},Gv.DEBUG,"log"),Gv.VERBOSE,"log"),Gv.INFO,"info"),Gv.WARN,"warn"),Gv.ERROR,"error"),Xv=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=$v[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Jv=function(){return y((function e(t){m(this,e),this.name=t,this._logLevel=Yv,this._logHandler=Xv,this._userLogHandler=null}),[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Gv))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"==typeof e?Qv[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Gv.DEBUG].concat(t)),this._logHandler.apply(this,[this,Gv.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Gv.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Gv.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Gv.INFO].concat(t)),this._logHandler.apply(this,[this,Gv.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Gv.WARN].concat(t)),this._logHandler.apply(this,[this,Gv.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Gv.ERROR].concat(t)),this._logHandler.apply(this,[this,Gv.ERROR].concat(t))}}])}(),Zv=function(e,t){return t.some((function(t){return e instanceof t}))};var ep=new WeakMap,tp=new WeakMap,np=new WeakMap,rp=new WeakMap,ip=new WeakMap;var ap={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return tp.get(e);if("objectStoreNames"===t)return e.objectStoreNames||np.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return sp(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function op(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Kv||(Kv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(lp(this),n),sp(ep.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return sp(e.apply(lp(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[lp(this),t].concat(r));return np.set(a,t.sort?t.sort():[t]),sp(a)}}function up(e){return"function"==typeof e?op(e):(e instanceof IDBTransaction&&function(e){if(!tp.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));tp.set(e,t)}}(e),Zv(e,Wv||(Wv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,ap):e)}function sp(e){if(e instanceof IDBRequest)return t=e,n=new Promise((function(e,n){var r=function(){t.removeEventListener("success",i),t.removeEventListener("error",a)},i=function(){e(sp(t.result)),r()},a=function(){n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",a)})),n.then((function(e){e instanceof IDBCursor&&ep.set(e,t)})).catch((function(){})),ip.set(n,t),n;var t,n;if(rp.has(e))return rp.get(e);var r=up(e);return r!==e&&(rp.set(e,r),ip.set(r,e)),r}var lp=function(e){return ip.get(e)};var cp,fp=["get","getKey","getAll","getAllKeys","count"],hp=["put","add","delete","clear"],dp=new Map;function vp(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t){if(dp.get(t))return dp.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=hp.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||fp.includes(n))){var a=function(){var e=s(o().mark((function e(t){var a,u,s,l,c,f,h=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u=this.transaction(t,i?"readwrite":"readonly"),s=u.store,l=h.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=h[f];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,c),i&&u.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return dp.set(t,a),a}}}cp=function(e){return c(c({},e),{},{get:function(t,n,r){return vp(t,n)||e.get(t,n,r)},has:function(t,n){return!!vp(t,n)||e.has(t,n)}})},ap=cp(ap);
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
var pp=function(){return y((function e(t){m(this,e),this.container=t}),[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}])}();var mp="@firebase/app",gp="0.10.1",yp=new Jv("@firebase/app"),kp=(k(k(k(k(k(k(k(k(k(k(h={},mp,"fire-core"),"@firebase/app-compat","fire-core-compat"),"@firebase/analytics","fire-analytics"),"@firebase/analytics-compat","fire-analytics-compat"),"@firebase/app-check","fire-app-check"),"@firebase/app-check-compat","fire-app-check-compat"),"@firebase/auth","fire-auth"),"@firebase/auth-compat","fire-auth-compat"),"@firebase/database","fire-rtdb"),"@firebase/database-compat","fire-rtdb-compat"),k(k(k(k(k(k(k(k(k(k(h,"@firebase/functions","fire-fn"),"@firebase/functions-compat","fire-fn-compat"),"@firebase/installations","fire-iid"),"@firebase/installations-compat","fire-iid-compat"),"@firebase/messaging","fire-fcm"),"@firebase/messaging-compat","fire-fcm-compat"),"@firebase/performance","fire-perf"),"@firebase/performance-compat","fire-perf-compat"),"@firebase/remote-config","fire-rc"),"@firebase/remote-config-compat","fire-rc-compat"),k(k(k(k(k(k(h,"@firebase/storage","fire-gcs"),"@firebase/storage-compat","fire-gcs-compat"),"@firebase/firestore","fire-fst"),"@firebase/firestore-compat","fire-fst-compat"),"fire-js","fire-js"),"firebase","fire-js-all")),_p=new Map,bp=new Map,wp=new Map;function Ep(e,t){try{e.container.addComponent(t)}catch(n){yp.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Cp(e){var t=e.name;if(wp.has(t))return yp.debug("There were multiple attempts to register component ".concat(t,".")),!1;wp.set(t,e);var n,r=C(_p.values());try{for(r.s();!(n=r.n()).done;){Ep(n.value,e)}}catch(o){r.e(o)}finally{r.f()}var i,a=C(bp.values());try{for(a.s();!(i=a.n()).done;){Ep(i.value,e)}}catch(o){a.e(o)}finally{a.f()}return!0}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
var xp=(k(k(k(k(k(k(k(k(k(k(p={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),"bad-app-name","Illegal App name: '{$appName}'"),"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),"app-deleted","Firebase App named '{$appName}' already deleted"),"server-app-deleted","Firebase Server App has been deleted"),"no-options","Need to provide options, when not being deployed to hosting via source."),"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),"invalid-log-argument","First argument to `onLog` must be null or a function."),"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),k(k(k(k(p,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),"finalization-registry-not-supported","FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry."),"invalid-server-app-environment","FirebaseServerApp is not for use in browser environments.")),Sp=new Ov("app","Firebase",xp),Ip=function(){return y((function e(t,n,r){var i=this;m(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Bv("app",(function(){return i}),"PUBLIC"))}),[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Sp.create("app-deleted",{appName:this._name})}}])}();function Tp(e,t,n){var r,i=null!==(r=kp[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void yp.warn(u.join(" "))}Cp(new Bv("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}
/**
             * @license
             * Copyright 2021 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var Ap="firebase-heartbeat-database",Lp=1,Np="firebase-heartbeat-store",Dp=null;function Pp(){return Dp||(Dp=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=sp(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(sp(u.result),e.oldVersion,e.newVersion,sp(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}(Ap,Lp,{upgrade:function(e,t){if(0===t)try{e.createObjectStore(Np)}catch(n){console.warn(n)}}}).catch((function(e){throw Sp.create("idb-open",{originalErrorMessage:e.message})}))),Dp}function Rp(e){return Mp.apply(this,arguments)}function Mp(){return Mp=s(o().mark((function e(t){var n,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pp();case 3:return n=e.sent,r=n.transaction(Np),e.next=7,r.objectStore(Np).get(Up(t));case 7:return i=e.sent,e.next=10,r.done;case 10:return e.abrupt("return",i);case 13:e.prev=13,e.t0=e.catch(0),e.t0 instanceof Mv?yp.warn(e.t0.message):(a=Sp.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),yp.warn(a.message));case 16:case"end":return e.stop()}}),e,null,[[0,13]])}))),Mp.apply(this,arguments)}function Op(e,t){return Fp.apply(this,arguments)}function Fp(){return Fp=s(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pp();case 3:return r=e.sent,i=r.transaction(Np,"readwrite"),a=i.objectStore(Np),e.next=8,a.put(n,Up(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof Mv?yp.warn(e.t0.message):(u=Sp.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),yp.warn(u.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),Fp.apply(this,arguments)}function Up(e){return"".concat(e.name,"!").concat(e.options.appId)}
/**
             * @license
             * Copyright 2021 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var Vp=function(){return y((function e(t){var n=this;m(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new qp(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}),[{key:"triggerHeartbeat",value:(t=s(o().mark((function e(){var t,n,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.container.getProvider("platform-logger").getImmediate(),i=r.getPlatformInfoString(),a=jp(),null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)){e.next=9;break}return e.next=6,this._heartbeatsCachePromise;case 6:if(this._heartbeatsCache=e.sent,null!=(null===(n=this._heartbeatsCache)||void 0===n?void 0:n.heartbeats)){e.next=9;break}return e.abrupt("return");case 9:if(this._heartbeatsCache.lastSentHeartbeatDate!==a&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===a}))){e.next=13;break}return e.abrupt("return");case 13:this._heartbeatsCache.heartbeats.push({date:a,agent:i});case 14:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 16:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getHeartbeatsHeader",value:(e=s(o().mark((function e(){var t,n,r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(n=jp(),r=Bp(this._heartbeatsCache.heartbeats),i=r.heartbeatsToSend,a=r.unsentEntries,u=Iv(JSON.stringify({version:2,heartbeats:i})),this._heartbeatsCache.lastSentHeartbeatDate=n,!(a.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=a,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",u);case 18:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})}]);var e,t}();function jp(){return(new Date).toISOString().substring(0,10)}function Bp(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=C(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Gp(r)>n)return a.dates.pop(),0}else if(r.push({agent:e.agent,dates:[e.date]}),Gp(r)>n)return r.pop(),0;i=i.slice(1)};for(a.s();!(t=a.n()).done&&0!==o(););}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var zp,qp=function(){return y((function e(t){m(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}),[{key:"runIndexedDBEnvironmentCheck",value:(r=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Rv()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{key:"read",value:(n=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Rp(this.app);case 9:if(!(null==(t=e.sent)?void 0:t.heartbeats)){e.next=14;break}return e.abrupt("return",t);case 14:return e.abrupt("return",{heartbeats:[]});case 15:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"overwrite",value:(t=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Op(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"add",value:(e=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Op(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(w(r.heartbeats),w(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})}]);var e,t,n,r}();function Gp(e){return Iv(JSON.stringify({version:2,heartbeats:e})).length}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */zp="",Cp(new Bv("platform-logger",(function(e){return new pp(e)}),"PRIVATE")),Cp(new Bv("heartbeat",(function(e){return new Vp(e)}),"PRIVATE")),Tp(mp,gp,zp),Tp(mp,gp,"esm2017"),Tp("fire-js","");var Hp,Wp="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Kp=Kp||{},Qp=Wp||self;function Yp(e){var t=E(e);return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function $p(e){var t=E(e);return"object"==t&&null!=e||"function"==t}var Xp="closure_uid_"+(1e9*Math.random()>>>0),Jp=0;function Zp(e,t,n){return e.call.apply(e.bind,arguments)}function em(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function tm(e,t,n){return(tm=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Zp:em).apply(null,arguments)}function nm(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function rm(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function im(){this.s=this.s,this.o=this.o}im.prototype.s=!1,im.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Xp)&&e[Xp]||(e[Xp]=++Jp))},im.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var am=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function om(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function um(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Yp(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function sm(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}sm.prototype.h=function(){this.defaultPrevented=!0};var lm=function(){if(!Qp.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{var n=function(){};Qp.addEventListener("test",n,t),Qp.removeEventListener("test",n,t)}catch(n){}return e}();function cm(e){return/^[\s\xa0]*$/.test(e)}function fm(){var e=Qp.navigator;return e&&(e=e.userAgent)?e:""}function hm(e){return-1!=fm().indexOf(e)}function dm(e){return dm[" "](e),e}dm[" "]=function(){};var vm,pm,mm,gm=hm("Opera"),ym=hm("Trident")||hm("MSIE"),km=hm("Edge"),_m=km||ym,bm=hm("Gecko")&&!(-1!=fm().toLowerCase().indexOf("webkit")&&!hm("Edge"))&&!(hm("Trident")||hm("MSIE"))&&!hm("Edge"),wm=-1!=fm().toLowerCase().indexOf("webkit")&&!hm("Edge");function Em(){var e=Qp.document;return e?e.documentMode:void 0}e:{var Cm="",xm=(pm=fm(),bm?/rv:([^\);]+)(\)|;)/.exec(pm):km?/Edge\/([\d\.]+)/.exec(pm):ym?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(pm):wm?/WebKit\/(\S+)/.exec(pm):gm?/(?:Version)[ \/]?(\S+)/.exec(pm):void 0);if(xm&&(Cm=xm?xm[1]:""),ym){var Sm=Em();if(null!=Sm&&Sm>parseFloat(Cm)){vm=String(Sm);break e}}vm=Cm}if(Qp.document&&ym){var Im=Em();mm=Im||(parseInt(vm,10)||void 0)}else mm=void 0;var Tm=mm;function Am(e,t){if(sm.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(bm){e:{try{dm(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:Lm[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Am.$.h.call(this)}}rm(Am,sm);var Lm={2:"touch",3:"pen",4:"mouse"};Am.prototype.h=function(){Am.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Nm="closure_listenable_"+(1e6*Math.random()|0),Dm=0;function Pm(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Dm,this.fa=this.ia=!1}function Rm(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Mm(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Om(e){var t={};for(var n in e)t[n]=e[n];return t}var Fm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Um(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Fm.length;a++)n=Fm[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Vm(e){this.src=e,this.g={},this.h=0}function jm(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=am(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Rm(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Bm(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}Vm.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Bm(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Pm(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var zm="closure_lm_"+(1e6*Math.random()|0),qm={};function Gm(e,t,n,r,i){if(r&&r.once)return Wm(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Gm(e,t[a],n,r,i);return null}return n=Zm(n),e&&e[Nm]?e.O(t,n,$p(r)?!!r.capture:!!r,i):Hm(e,t,n,!1,r,i)}function Hm(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=$p(i)?!!i.capture:!!i,u=Xm(e);if(u||(e[zm]=u=new Vm(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=$m;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)lm||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ym(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Wm(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Wm(e,t[a],n,r,i);return null}return n=Zm(n),e&&e[Nm]?e.P(t,n,$p(r)?!!r.capture:!!r,i):Hm(e,t,n,!0,r,i)}function Km(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Km(e,t[a],n,r,i);else r=$p(r)?!!r.capture:!!r,n=Zm(n),e&&e[Nm]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Bm(a=e.g[t],n,r,i))&&(Rm(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Xm(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Bm(t,n,r,i)),(n=-1<e?t[e]:null)&&Qm(n))}function Qm(e){if("number"!=typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Nm])jm(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ym(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Xm(t))?(jm(n,e),0==n.h&&(n.src=null,t[zm]=null)):Rm(e)}}}function Ym(e){return e in qm?qm[e]:qm[e]="on"+e}function $m(e,t){if(e.fa)e=!0;else{t=new Am(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Qm(e),e=n.call(r,t)}return e}function Xm(e){return(e=e[zm])instanceof Vm?e:null}var Jm="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zm(e){return"function"==typeof e?e:(e[Jm]||(e[Jm]=function(t){return e.handleEvent(t)}),e[Jm])}function eg(){im.call(this),this.i=new Vm(this),this.S=this,this.J=null}function tg(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"==typeof t)t=new sm(t,e);else if(t instanceof sm)t.target=t.target||e;else{var i=t;Um(t=new sm(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=ng(o,r,!0,t)&&i}if(i=ng(o=t.g=e,r,!0,t)&&i,i=ng(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=ng(o=t.g=n[a],r,!1,t)&&i}function ng(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&jm(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}rm(eg,im),eg.prototype[Nm]=!0,eg.prototype.removeEventListener=function(e,t,n,r){Km(this,e,t,n,r)},eg.prototype.N=function(){if(eg.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Rm(n[r]);delete t.g[e],t.h--}}this.J=null},eg.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},eg.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var rg=Qp.JSON.stringify,ig=function(){return y((function e(t,n){m(this,e),this.i=t,this.j=n,this.h=0,this.g=null}),[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}])}();function ag(){var e=dg,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var og=function(){return y((function e(){m(this,e),this.h=this.g=null}),[{key:"add",value:function(e,t){var n=ug.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}])}(),ug=new ig((function(){return new sg}),(function(e){return e.reset()})),sg=function(){return y((function e(){m(this,e),this.next=this.g=this.h=null}),[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}])}();function lg(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function cg(e){Qp.setTimeout((function(){throw e}),0)}var fg,hg=!1,dg=new og,vg=function(){var e=Qp.Promise.resolve(void 0);fg=function(){e.then(pg)}},pg=function(){for(var e;e=ag();){try{e.h.call(e.g)}catch(n){cg(n)}var t=ug;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}hg=!1};function mg(e,t){eg.call(this),this.h=e||1,this.g=t||Qp,this.j=tm(this.qb,this),this.l=Date.now()}function gg(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function yg(e,t,n){if("function"==typeof e)n&&(e=tm(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=tm(e.handleEvent,e)}return 2147483647<Number(t)?-1:Qp.setTimeout(e,t||0)}function kg(e){e.g=yg((function(){e.g=null,e.i&&(e.i=!1,kg(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}rm(mg,eg),(Hp=mg.prototype).ga=!1,Hp.T=null,Hp.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),tg(this,"tick"),this.ga&&(gg(this),this.start()))}},Hp.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Hp.N=function(){mg.$.N.call(this),gg(this),delete this.g};var _g=function(e){function t(e,n){var r;return m(this,t),(r=f(this,t)).m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return v(t,e),y(t,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:kg(this)}},{key:"N",value:function(){r(d(t.prototype),"N",this).call(this),this.g&&(Qp.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}])}(im);function bg(e){im.call(this),this.h=e,this.g={}}rm(bg,im);var wg=[];function Eg(e,t,n,r){Array.isArray(n)||(n&&(wg[0]=n.toString()),n=wg);for(var i=0;i<n.length;i++){var a=Gm(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Cg(e){Mm(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Qm(e)}),e),e.g={}}function xg(){this.g=!0}function Sg(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return rg(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}bg.prototype.N=function(){bg.$.N.call(this),Cg(this)},bg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},xg.prototype.Ea=function(){this.g=!1},xg.prototype.info=function(){};var Ig={},Tg=null;function Ag(){return Tg=Tg||new eg}function Lg(e){sm.call(this,Ig.Ta,e)}function Ng(e){var t=Ag();tg(t,new Lg(t))}function Dg(e,t){sm.call(this,Ig.STAT_EVENT,e),this.stat=t}function Pg(e){var t=Ag();tg(t,new Dg(t,e))}function Rg(e,t){sm.call(this,Ig.Ua,e),this.size=t}function Mg(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return Qp.setTimeout((function(){e()}),t)}Ig.Ta="serverreachability",rm(Lg,sm),Ig.STAT_EVENT="statevent",rm(Dg,sm),Ig.Ua="timingevent",rm(Rg,sm);var Og={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Fg={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ug(){}function Vg(e){return e.h||(e.h=e.i())}function jg(){}Ug.prototype.h=null;var Bg,zg={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function qg(){sm.call(this,"d")}function Gg(){sm.call(this,"c")}function Hg(){}function Wg(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new bg(this),this.P=Qg,e=_m?125:void 0,this.V=new mg(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Kg}function Kg(){this.i=null,this.g="",this.h=!1}rm(qg,sm),rm(Gg,sm),rm(Hg,Ug),Hg.prototype.g=function(){return new XMLHttpRequest},Hg.prototype.i=function(){return{}},Bg=new Hg;var Qg=45e3,Yg={},$g={};function Xg(e,t,n){e.L=1,e.A=my(fy(t)),e.u=n,e.S=!0,Jg(e,null)}function Jg(e,t){e.G=Date.now(),ny(e),e.B=fy(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),Ay(n.i,"t",r),e.o=0,n=e.l.J,e.h=new Kg,e.g=Ak(e.l,n?t:null,!e.u),0<e.O&&(e.M=new _g(tm(e.Pa,e,e.g),e.O)),Eg(e.U,e.g,"readystatechange",e.nb),t=e.I?Om(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Ng(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var l=u[s].split("=");if(1<l.length){var c=l[0];l=l[1];var f=c.split("_");o=2<=f.length&&"type"==f[1]?o+(c+"=")+l+"&":o+(c+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function Zg(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function ey(e,t,n){for(var r,i=!0;!e.J&&e.o<n.length;){if((r=ty(e,n))==$g){4==t&&(e.s=4,Pg(14),i=!1),Sg(e.j,e.m,null,"[Incomplete Response]");break}if(r==Yg){e.s=4,Pg(15),Sg(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Sg(e.j,e.m,r,null),uy(e,r)}Zg(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Pg(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),bk(t),t.M=!0,Pg(11))):(Sg(e.j,e.m,n,"[Invalid Chunked Response]"),oy(e),ay(e))}function ty(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?$g:(n=Number(t.substring(n,r)),isNaN(n)?Yg:(r+=1)+n>t.length?$g:(t=t.slice(r,r+n),e.o=r+n,t))}function ny(e){e.Y=Date.now()+e.P,ry(e,e.P)}function ry(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Mg(tm(e.lb,e),t)}function iy(e){e.C&&(Qp.clearTimeout(e.C),e.C=null)}function ay(e){0==e.l.H||e.J||Ck(e.l,e)}function oy(e){iy(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,gg(e.V),Cg(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function uy(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Oy(n.i,e)))if(!e.K&&Oy(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Ek(n),dk(n)}_k(n),Pg(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Mg(tm(n.ib,n),6e3));if(1>=My(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else Sk(n,11)}else if((e.K||n.g==e)&&Ek(n),!cm(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var u=a[4];null!=u&&(n.Ga=u,n.l.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"==typeof s&&0<s&&(r=1.5*s,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var l=e.g;if(l){var c=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var f=r.i;f.g||-1==c.indexOf("spdy")&&-1==c.indexOf("quic")&&-1==c.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Fy(f,f.h),f.h=null))}if(r.F){var h=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,py(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=Tk(r,r.J?r.pa:null,r.Y),d.K){Uy(r.i,d);var v=d,p=r.L;p&&v.setTimeout(p),v.C&&(iy(v),ny(v)),r.g=d}else kk(r);0<n.j.length&&pk(n)}else"stop"!=a[0]&&"close"!=a[0]||Sk(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Sk(n,7):hk(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}Ng()}catch(a){}}function sy(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Yp(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(Yp(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(Yp(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Hp=Wg.prototype).setTimeout=function(e){this.P=e},Hp.nb=function(e){e=e.target;var t=this.M;t&&3==ok(e)?t.l():this.Pa(e)},Hp.Pa=function(e){try{if(e==this.g)e:{var t=ok(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||_m||this.g&&(this.h.h||this.g.ja()||uk(this.g)))){this.J||4!=t||7==n||Ng(),iy(this);var r=this.g.da();this.ca=r;t:if(Zg(this)){var i=uk(this.g);e="";var a=i.length,o=4==ok(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){oy(this),ay(this);var u="";break t}this.h.i=new Qp.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.length=0,this.h.g+=e,this.o=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.v,this.B,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var s,l=this.g;if((s=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!cm(s)){var c=s;break t}}c=null}if(!(r=c)){this.i=!1,this.s=3,Pg(12),oy(this),ay(this);break e}Sg(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,uy(this,r)}this.S?(ey(this,t,u),_m&&this.i&&3==t&&(Eg(this.U,this.V,"tick",this.mb),this.V.start())):(Sg(this.j,this.m,u,null),uy(this,u)),4==t&&oy(this),this.i&&!this.J&&(4==t?Ck(this.l,this):(this.i=!1,ny(this)))}else(function(e){var t={};e=(e.g&&2<=ok(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!cm(e[n])){var r=lg(e[n]),i=r[0];if("string"==typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<u.indexOf("Unknown SID")?(this.s=3,Pg(12)):(this.s=0,Pg(13)),oy(this),ay(this)}}}catch(t){}},Hp.mb=function(){if(this.g){var e=ok(this.g),t=this.g.ja();this.o<t.length&&(iy(this),ey(this,e,t),this.i&&4!=e&&ny(this))}},Hp.cancel=function(){this.J=!0,oy(this)},Hp.lb=function(){this.C=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Ng(),Pg(17)),oy(this),this.s=2,ay(this)):ry(this,this.Y-e)};var ly=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cy(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof cy){this.h=e.h,hy(this,e.j),this.s=e.s,this.g=e.g,dy(this,e.m),this.l=e.l;var t=e.i,n=new xy;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),vy(this,n),this.o=e.o}else e&&(t=String(e).match(ly))?(this.h=!1,hy(this,t[1]||"",!0),this.s=gy(t[2]||""),this.g=gy(t[3]||"",!0),dy(this,t[4]),this.l=gy(t[5]||"",!0),vy(this,t[6]||"",!0),this.o=gy(t[7]||"")):(this.h=!1,this.i=new xy(null,this.h))}function fy(e){return new cy(e)}function hy(e,t,n){e.j=n?gy(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function dy(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function vy(e,t,n){t instanceof xy?(e.i=t,function(e,t){t&&!e.j&&(Sy(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Iy(this,t),Ay(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=yy(t,Ey)),e.i=new xy(t,e.h))}function py(e,t,n){e.i.set(t,n)}function my(e){return py(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function gy(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function yy(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ky),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ky(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}cy.prototype.toString=function(){var e=[],t=this.j;t&&e.push(yy(t,_y,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(yy(t,_y,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(yy(n,"/"==n.charAt(0)?wy:by,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",yy(n,Cy)),e.join("")};var _y=/[#\/\?@]/g,by=/[#\?:]/g,wy=/[#\?]/g,Ey=/[#\?@]/g,Cy=/#/g;function xy(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Sy(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Iy(e,t){Sy(e),t=Ly(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ty(e,t){return Sy(e),t=Ly(e,t),e.g.has(t)}function Ay(e,t,n){Iy(e,t),0<n.length&&(e.i=null,e.g.set(Ly(e,t),om(n)),e.h+=n.length)}function Ly(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Hp=xy.prototype).add=function(e,t){Sy(this),this.i=null,e=Ly(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Hp.forEach=function(e,t){Sy(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Hp.ta=function(){Sy(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Hp.Z=function(e){Sy(this);var t=[];if("string"==typeof e)Ty(this,e)&&(t=t.concat(this.g.get(Ly(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Hp.set=function(e,t){return Sy(this),this.i=null,Ty(this,e=Ly(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Hp.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Hp.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Ny=y((function e(t,n){m(this,e),this.g=t,this.map=n}));function Dy(e){this.l=e||Py,Qp.PerformanceNavigationTiming?e=0<(e=Qp.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Qp.g&&Qp.g.Ka&&Qp.g.Ka()&&Qp.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Py=10;function Ry(e){return!!e.h||!!e.g&&e.g.size>=e.j}function My(e){return e.h?1:e.g?e.g.size:0}function Oy(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Fy(e,t){e.g?e.g.add(t):e.h=t}function Uy(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Vy(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=C(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return om(e.i)}Dy.prototype.cancel=function(){if(this.i=Vy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=C(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var jy=function(){return y((function e(){m(this,e)}),[{key:"stringify",value:function(e){return Qp.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return Qp.JSON.parse(e,void 0)}}])}();function By(){this.g=new jy}function zy(e,t,n){var r=n||"";try{sy(e,(function(e,n){var i=e;$p(e)&&(i=rg(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function qy(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Gy(e){this.l=e.ec||null,this.j=e.ob||!1}function Hy(e,t){eg.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Wy,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}rm(Gy,Ug),Gy.prototype.g=function(){return new Hy(this.l,this.j)},Gy.prototype.i=function(e){return function(){return e}}({}),rm(Hy,eg);var Wy=0;function Ky(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Qy(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Yy(e)}function Yy(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Hp=Hy.prototype).open=function(e,t){if(this.readyState!=Wy)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Yy(this)},Hp.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Qp).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Hp.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Qy(this)),this.readyState=Wy},Hp.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Yy(this)),this.g&&(this.readyState=3,Yy(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==Qp.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ky(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Hp.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Qy(this):Yy(this),3==this.readyState&&Ky(this)}},Hp.Za=function(e){this.g&&(this.response=this.responseText=e,Qy(this))},Hp.Ya=function(e){this.g&&(this.response=e,Qy(this))},Hp.ka=function(){this.g&&Qy(this)},Hp.setRequestHeader=function(e,t){this.v.append(e,t)},Hp.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Hp.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Hy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var $y=Qp.JSON.parse;function Xy(e){eg.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Jy,this.L=this.M=!1}rm(Xy,eg);var Jy="",Zy=/^https?$/i,ek=["POST","PUT"];function tk(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,nk(e),ik(e)}function nk(e){e.F||(e.F=!0,tg(e,"complete"),tg(e,"error"))}function rk(e){if(e.h&&void 0!==Kp&&(!e.C[1]||4!=ok(e)||2!=e.da()))if(e.v&&4==ok(e))yg(e.La,0,e);else if(tg(e,"readystatechange"),4==ok(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(ly)[1]||null;!a&&Qp.self&&Qp.self.location&&(a=Qp.self.location.protocol.slice(0,-1)),i=!Zy.test(a?a.toLowerCase():"")}t=i}if(t)tg(e,"complete"),tg(e,"success");else{e.m=6;try{var o=2<ok(e)?e.g.statusText:""}catch(u){o=""}e.j=o+" ["+e.da()+"]",nk(e)}}finally{ik(e)}}}function ik(e,t){if(e.g){ak(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||tg(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function ak(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Qp.clearTimeout(e.A),e.A=null)}function ok(e){return e.g?e.g.readyState:0}function uk(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Jy:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(d_){return null}}function sk(e){var t="";return Mm(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function lk(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=sk(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):py(e,t,n))}function ck(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function fk(e){this.Ga=0,this.j=[],this.l=new xg,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ck("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ck("baseRetryDelayMs",5e3,e),this.hb=ck("retryDelaySeedMs",1e4,e),this.eb=ck("forwardChannelMaxRetries",2,e),this.xa=ck("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Dy(e&&e.concurrentRequestLimit),this.Ja=new By,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function hk(e){if(vk(e),3==e.H){var t=e.W++,n=fy(e.I);if(py(n,"SID",e.K),py(n,"RID",t),py(n,"TYPE","terminate"),gk(e,n),(t=new Wg(e,e.l,t)).L=2,t.A=my(fy(n)),n=!1,Qp.navigator&&Qp.navigator.sendBeacon)try{n=Qp.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&Qp.Image&&((new Image).src=t.A,n=!0),n||(t.g=Ak(t.l,null),t.g.ha(t.A)),t.G=Date.now(),ny(t)}Ik(e)}function dk(e){e.g&&(bk(e),e.g.cancel(),e.g=null)}function vk(e){dk(e),e.u&&(Qp.clearTimeout(e.u),e.u=null),Ek(e),e.i.cancel(),e.m&&("number"==typeof e.m&&Qp.clearTimeout(e.m),e.m=null)}function pk(e){if(!Ry(e.i)&&!e.m){e.m=!0;var t=e.Na;fg||vg(),hg||(fg(),hg=!0),dg.add(t,e),e.C=0}}function mk(e,t){var n;n=t?t.m:e.W++;var r=fy(e.I);py(r,"SID",e.K),py(r,"RID",n),py(r,"AID",e.V),gk(e,r),e.o&&e.s&&lk(r,e.o,e.s),n=new Wg(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=yk(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Fy(e.i,n),Xg(n,r,t)}function gk(e,t){e.na&&Mm(e.na,(function(e,n){py(t,n,e)})),e.h&&sy({},(function(e,n){py(t,n,e)}))}function yk(e,t,n){n=Math.min(e.j.length,n);var r=e.h?tm(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var l=i[s].g,c=i[s].map;if(0>(l-=a))a=Math.max(0,i[s].g-100),u=!1;else try{zy(c,o,"req"+l+"_")}catch(f){r&&r(c)}}if(u){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function kk(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;fg||vg(),hg||(fg(),hg=!0),dg.add(t,e),e.A=0}}function _k(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Mg(tm(e.Ma,e),xk(e,e.A)),e.A++,!0)}function bk(e){null!=e.B&&(Qp.clearTimeout(e.B),e.B=null)}function wk(e){e.g=new Wg(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=fy(e.wa);py(t,"RID","rpc"),py(t,"SID",e.K),py(t,"AID",e.V),py(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&py(t,"TO",e.qa),py(t,"TYPE","xmlhttp"),gk(e,t),e.o&&e.s&&lk(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=my(fy(t)),n.u=null,n.S=!0,Jg(n,e)}function Ek(e){null!=e.v&&(Qp.clearTimeout(e.v),e.v=null)}function Ck(e,t){var n=null;if(e.g==t){Ek(e),bk(e),e.g=null;var r=2}else{if(!Oy(e.i,t))return;n=t.F,Uy(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;tg(r=Ag(),new Rg(r,n)),pk(e)}else kk(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(My(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.j=t.F.concat(e.j),0):1==e.H||2==e.H||e.C>=(e.cb?0:e.eb)||(e.m=Mg(tm(e.Na,e,t),xk(e,e.C)),e.C++,0)))}(e,t)||2==r&&_k(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Sk(e,5);break;case 4:Sk(e,10);break;case 3:Sk(e,6);break;default:Sk(e,2)}}function xk(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Sk(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=tm(e.pb,e);n||(n=new cy("//www.google.com/images/cleardot.gif"),Qp.location&&"http"==Qp.location.protocol||hy(n,"https"),my(n)),function(e,t){var n=new xg;if(Qp.Image){var r=new Image;r.onload=nm(qy,n,r,"TestLoadImage: loaded",!0,t),r.onerror=nm(qy,n,r,"TestLoadImage: error",!1,t),r.onabort=nm(qy,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=nm(qy,n,r,"TestLoadImage: timeout",!1,t),Qp.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Pg(2);e.H=0,e.h&&e.h.za(t),Ik(e),vk(e)}function Ik(e){if(e.H=0,e.ma=[],e.h){var t=Vy(e.i);0==t.length&&0==e.j.length||(um(e.ma,t),um(e.ma,e.j),e.i.i.length=0,om(e.j),e.j.length=0),e.h.ya()}}function Tk(e,t,n){var r=n instanceof cy?fy(n):new cy(n);if(""!=r.g)t&&(r.g=t+"."+r.g),dy(r,r.m);else{var i=Qp.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new cy(null);r&&hy(a,r),t&&(a.g=t),i&&dy(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&py(r,n,t),py(r,"VER",e.ra),gk(e,r),r}function Ak(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new Xy(new Gy({ob:n})):new Xy(e.va)).Oa(e.J),t}function Lk(){}function Nk(){if(ym&&!(10<=Number(Tm)))throw Error("Environmental error: no available transport.")}function Dk(e,t){eg.call(this),this.g=new fk(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!cm(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!cm(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Mk(this)}function Pk(e){qg.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Rk(){Gg.call(this),this.status=1}function Mk(e){this.g=e}function Ok(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Fk(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function Uk(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(Hp=Xy.prototype).Oa=function(e){this.M=e},Hp.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Bg.g(),this.C=this.u?Vg(this.u):Vg(Bg),this.g.onreadystatechange=tm(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(u){return void tk(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=C(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(d){o.e(d)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Qp.FormData&&e instanceof Qp.FormData,!(0<=am(ek,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,l=C(n);try{for(l.s();!(s=l.n()).done;){var c=b(s.value,2),f=c[0],h=c[1];this.g.setRequestHeader(f,h)}}catch(d){l.e(d)}finally{l.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ak(this),0<this.B&&((this.L=function(e){return ym&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=tm(this.ua,this)):this.A=yg(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){tk(this,u)}},Hp.ua=function(){void 0!==Kp&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,tg(this,"timeout"),this.abort(8))},Hp.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,tg(this,"complete"),tg(this,"abort"),ik(this))},Hp.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ik(this,!0)),Xy.$.N.call(this)},Hp.La=function(){this.s||(this.G||this.v||this.l?rk(this):this.kb())},Hp.kb=function(){rk(this)},Hp.isActive=function(){return!!this.g},Hp.da=function(){try{return 2<ok(this)?this.g.status:-1}catch(pm){return-1}},Hp.ja=function(){try{return this.g?this.g.responseText:""}catch(pm){return""}},Hp.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),$y(t)}},Hp.Ia=function(){return this.m},Hp.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Hp=fk.prototype).ra=8,Hp.H=1,Hp.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new Wg(this,this.l,e),n=this.s;if(this.U&&(n?Um(n=Om(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"==typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=yk(this,t,r),py(i=fy(this.I),"RID",e),py(i,"CVER",22),this.F&&py(i,"X-HTTP-Session-Id",this.F),gk(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(sk(n)))+"&"+r:this.o&&lk(i,this.o,n)),Fy(this.i,t),this.bb&&py(i,"TYPE","init"),this.P?(py(i,"$req",r),py(i,"SID","null"),t.aa=!0,Xg(t,i,null)):Xg(t,i,r),this.H=2}}else 3==this.H&&(e?mk(this,e):0==this.j.length||Ry(this.i)||mk(this))},Hp.Ma=function(){if(this.u=null,wk(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Mg(tm(this.jb,this),e)}},Hp.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Pg(10),dk(this),wk(this))},Hp.ib=function(){null!=this.v&&(this.v=null,dk(this),_k(this),Pg(19))},Hp.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Pg(2)):(this.l.info("Failed to ping google.com"),Pg(1))},Hp.isActive=function(){return!!this.h&&this.h.isActive(this)},(Hp=Lk.prototype).Ba=function(){},Hp.Aa=function(){},Hp.za=function(){},Hp.ya=function(){},Hp.isActive=function(){return!0},Hp.Va=function(){},Nk.prototype.g=function(e,t){return new Dk(e,t)},rm(Dk,eg),Dk.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Pg(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Tk(e,null,e.Y),pk(e)},Dk.prototype.close=function(){hk(this.g)},Dk.prototype.u=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=rg(e),e=n);t.j.push(new Ny(t.fb++,e)),3==t.H&&pk(t)},Dk.prototype.N=function(){this.g.h=null,delete this.j,hk(this.g),delete this.g,Dk.$.N.call(this)},rm(Pk,qg),rm(Rk,Gg),rm(Mk,Lk),Mk.prototype.Ba=function(){tg(this.g,"a")},Mk.prototype.Aa=function(e){tg(this.g,new Pk(e))},Mk.prototype.za=function(e){tg(this.g,new Rk)},Mk.prototype.ya=function(){tg(this.g,"b")},rm(Ok,(function(){this.blockSize=-1})),Ok.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ok.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)Fk(this,e,a),a+=this.blockSize;if("string"==typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){Fk(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){Fk(this,r),i=0;break}}this.h=i,this.i+=t},Ok.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Vk={};function jk(e){return-128<=e&&128>e?function(e,t){var n=Vk;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Uk([0|e],0>e?-1:0)})):new Uk([0|e],0>e?-1:0)}function Bk(e){if(isNaN(e)||!isFinite(e))return qk;if(0>e)return Qk(Bk(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=zk;return new Uk(t,0)}var zk=4294967296,qk=jk(0),Gk=jk(1),Hk=jk(16777216);function Wk(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Kk(e){return-1==e.h}function Qk(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Uk(n,~e.h).add(Gk)}function Yk(e,t){return e.add(Qk(t))}function $k(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Xk(e,t){this.g=e,this.h=t}function Jk(e,t){if(Wk(t))throw Error("division by zero");if(Wk(e))return new Xk(qk,qk);if(Kk(e))return t=Jk(Qk(e),t),new Xk(Qk(t.g),Qk(t.h));if(Kk(t))return t=Jk(e,Qk(t)),new Xk(Qk(t.g),t.h);if(30<e.g.length){if(Kk(e)||Kk(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Gk,r=t;0>=r.X(e);)n=Zk(n),r=Zk(r);var i=e_(n,1),a=e_(r,1);for(r=e_(r,2),n=e_(n,2);!Wk(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=e_(r,1),n=e_(n,1)}return t=Yk(e,i.R(t)),new Xk(i,t)}for(i=qk;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=Bk(n)).R(t);Kk(o)||0<o.X(e);)o=(a=Bk(n-=r)).R(t);Wk(a)&&(a=Gk),i=i.add(a),e=Yk(e,o)}return new Xk(i,e)}function Zk(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Uk(n,e.h)}function e_(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new Uk(i,e.h)}(Hp=Uk.prototype).ea=function(){if(Kk(this))return-Qk(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:zk+r)*t,t*=zk}return e},Hp.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Wk(this))return"0";if(Kk(this))return"-"+Qk(this).toString(e);for(var t=Bk(Math.pow(e,6)),n=this,r="";;){var i=Jk(n,t).g,a=((0<(n=Yk(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Wk(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Hp.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Hp.X=function(e){return Kk(e=Yk(this,e))?-1:Wk(e)?0:1},Hp.abs=function(){return Kk(this)?Qk(this):this},Hp.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new Uk(n,-2147483648&n[n.length-1]?-1:0)},Hp.R=function(e){if(Wk(this)||Wk(e))return qk;if(Kk(this))return Kk(e)?Qk(this).R(Qk(e)):Qk(Qk(this).R(e));if(Kk(e))return Qk(this.R(Qk(e)));if(0>this.X(Hk)&&0>e.X(Hk))return Bk(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,$k(n,2*r+2*i),n[2*r+2*i+1]+=a*s,$k(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,$k(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,$k(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Uk(n,0)},Hp.gb=function(e){return Jk(this,e).h},Hp.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Uk(n,this.h&e.h)},Hp.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Uk(n,this.h|e.h)},Hp.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Uk(n,this.h^e.h)},Nk.prototype.createWebChannel=Nk.prototype.g,Dk.prototype.send=Dk.prototype.u,Dk.prototype.open=Dk.prototype.m,Dk.prototype.close=Dk.prototype.close,Og.NO_ERROR=0,Og.TIMEOUT=8,Og.HTTP_ERROR=6,Fg.COMPLETE="complete",jg.EventType=zg,zg.OPEN="a",zg.CLOSE="b",zg.ERROR="c",zg.MESSAGE="d",eg.prototype.listen=eg.prototype.O,Xy.prototype.listenOnce=Xy.prototype.P,Xy.prototype.getLastError=Xy.prototype.Sa,Xy.prototype.getLastErrorCode=Xy.prototype.Ia,Xy.prototype.getStatus=Xy.prototype.da,Xy.prototype.getResponseJson=Xy.prototype.Wa,Xy.prototype.getResponseText=Xy.prototype.ja,Xy.prototype.send=Xy.prototype.ha,Xy.prototype.setWithCredentials=Xy.prototype.Oa,Ok.prototype.digest=Ok.prototype.l,Ok.prototype.reset=Ok.prototype.reset,Ok.prototype.update=Ok.prototype.j,Uk.prototype.add=Uk.prototype.add,Uk.prototype.multiply=Uk.prototype.R,Uk.prototype.modulo=Uk.prototype.gb,Uk.prototype.compare=Uk.prototype.X,Uk.prototype.toNumber=Uk.prototype.ea,Uk.prototype.toString=Uk.prototype.toString,Uk.prototype.getBits=Uk.prototype.D,Uk.fromNumber=Bk,Uk.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Qk(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Bk(Math.pow(n,8)),i=qk,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=Bk(Math.pow(n,o)),i=i.R(o).add(Bk(u))):i=(i=i.R(r)).add(Bk(u))}return i};var t_=Og,n_=Fg,r_=Ig,i_=10,a_=11,o_=jg,u_=Xy,s_=Ok,l_=Uk,c_="@firebase/firestore",f_=function(){return y((function e(t){m(this,e),this.uid=t}),[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}])}();f_.UNAUTHENTICATED=new f_(null),f_.GOOGLE_CREDENTIALS=new f_("google-credentials-uid"),f_.FIRST_PARTY=new f_("first-party-uid"),f_.MOCK_USER=new f_("mock-user");
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
var h_="10.11.0",d_=new Jv("@firebase/firestore");
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function v_(){return d_.logLevel}function p_(e){if(d_.logLevel<=Gv.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(y_);d_.debug.apply(d_,["Firestore (".concat(h_,"): ").concat(e)].concat(w(i)))}}function m_(e){if(d_.logLevel<=Gv.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(y_);d_.error.apply(d_,["Firestore (".concat(h_,"): ").concat(e)].concat(w(i)))}}function g_(e){if(d_.logLevel<=Gv.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(y_);d_.warn.apply(d_,["Firestore (".concat(h_,"): ").concat(e)].concat(w(i)))}}function y_(e){if("string"==typeof e)return e;try{
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */return function(e){return JSON.stringify(e)}(e)}catch(xf){return e}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function k_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(h_,") INTERNAL ASSERTION FAILED: ")+e;throw m_(t),new Error(t)}function __(e,t){e||k_()}function b_(e,t){return e}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var w_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},E_=function(e){function t(e,n){var r;return m(this,t),(r=f(this,t,[e,n])).code=e,r.message=n,r.toString=function(){return"".concat(r.name,": [code=").concat(r.code,"]: ").concat(r.message)},r}return v(t,e),y(t)}(Mv),C_=y((function e(){var t=this;m(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),x_=y((function e(t,n){m(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),S_=function(){return y((function e(){m(this,e)}),[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(f_.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}])}(),I_=function(){return y((function e(t){m(this,e),this.t=t,this.currentUser=f_.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}),[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new C_;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new C_,e.enqueueRetryable((function(){return i(n.currentUser)}))};var u=function(){var t=a;e.enqueueRetryable(s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},l=function(e){p_("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),u()};this.t.onInit((function(e){return l(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?l(e):(p_("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new C_)}}),0),u()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(p_("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(__("string"==typeof n.accessToken),new x_(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return __(null===e||"string"==typeof e),new f_(e)}}])}(),T_=function(){return y((function e(t,n,r){m(this,e),this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=f_.FIRST_PARTY,this.I=new Map}),[{key:"T",value:function(){return this.P?this.P():null}},{key:"headers",get:function(){this.I.set("X-Goog-AuthUser",this.l);var e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}])}(),A_=function(){return y((function e(t,n,r){m(this,e),this.l=t,this.h=n,this.P=r}),[{key:"getToken",value:function(){return Promise.resolve(new T_(this.l,this.h,this.P))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(f_.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}])}(),L_=y((function e(t){m(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),N_=function(){return y((function e(t){m(this,e),this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}),[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&p_("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.R;return n.R=e.token,p_("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){p_("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.A.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.A.getImmediate({optional:!0});e?i(e):p_("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(__("string"==typeof t.token),e.R=t.token,new L_(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}])}();
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function D_(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var P_=function(){return y((function e(){m(this,e)}),null,[{key:"newId",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=D_(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}])}();function R_(e,t){return e<t?-1:e>t?1:0}function M_(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var O_=function(){function e(t,n){if(m(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new E_(w_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new E_(w_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new E_(w_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new E_(w_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return y(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?R_(this.nanoseconds,e.nanoseconds):R_(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}])}(),F_=function(){function e(t){m(this,e),this.timestamp=t}return y(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new O_(0,0))}},{key:"max",value:function(){return new e(new O_(253402300799,999999999))}}])}(),U_=function(){function e(t,n,r){m(this,e),void 0===n?n=0:n>t.length&&k_(),void 0===r?r=t.length-n:r>t.length-n&&k_(),this.segments=t,this.offset=n,this.len=r}return y(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}])}(),V_=function(e){function t(){return m(this,t),f(this,t,arguments)}return v(t,e),y(t,[{key:"construct",value:function(e,n,r){return new t(e,n,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"toUriEncodedString",value:function(){return this.toArray().map(encodeURIComponent).join("/")}}],[{key:"fromString",value:function(){for(var e=[],n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new E_(w_.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,w(u.split("/").filter((function(e){return e.length>0}))))}return new t(e)}},{key:"emptyPath",value:function(){return new t([])}}])}(U_),j_=/^[_a-zA-Z][_a-zA-Z0-9]*$/,B_=function(e){function t(){return m(this,t),f(this,t,arguments)}return v(t,e),y(t,[{key:"construct",value:function(e,n,r){return new t(e,n,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return j_.test(e)}},{key:"keyField",value:function(){return new t(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var n=[],r="",i=0,a=function(){if(0===r.length)throw new E_(w_.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));n.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new E_(w_.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new E_(w_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new E_(w_.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}},{key:"emptyPath",value:function(){return new t([])}}])}(U_),z_=function(){function e(t){m(this,e),this.path=t}return y(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===V_.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(V_.fromString(t))}},{key:"fromName",value:function(t){return new e(V_.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(V_.emptyPath())}},{key:"comparator",value:function(e,t){return V_.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new V_(t.slice()))}}])}();
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function q_(e){return new G_(e.readTime,e.key,-1)}var G_=function(){function e(t,n,r){m(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return y(e,null,[{key:"min",value:function(){return new e(F_.min(),z_.empty(),-1)}},{key:"max",value:function(){return new e(F_.max(),z_.empty(),-1)}}])}();function H_(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=z_.comparator(e.documentKey,t.documentKey))?n:R_(e.largestBatchId,t.largestBatchId)
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */}var W_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",K_=function(){return y((function e(){m(this,e),this.onCommittedListeners=[]}),[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}])}();
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function Q_(e){return Y_.apply(this,arguments)}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function Y_(){return(Y_=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===w_.FAILED_PRECONDITION&&t.message===W_){e.next=2;break}throw t;case 2:p_("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $_=function(){function e(t){var n=this;m(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return y(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&k_(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=C(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}])}(),X_=function(){function e(t,n){var r=this;m(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.V=new C_,this.transaction.oncomplete=function(){r.V.resolve()},this.transaction.onabort=function(){n.error?r.V.reject(new eb(t,n.error)):r.V.resolve()},this.transaction.onerror=function(e){var n=ab(e.target.error);r.V.reject(new eb(t,n))}}return y(e,[{key:"m",get:function(){return this.V.promise}},{key:"abort",value:function(e){e&&this.V.reject(e),this.aborted||(p_("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"g",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new nb(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new eb(n,t)}}}])}(),J_=function(){function e(t,n,r){m(this,e),this.name=t,this.version=n,this.p=r,12.2===e.S(Dv())&&m_("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return y(e,[{key:"O",value:(n=s(o().mark((function e(t){var n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return p_("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new eb(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new E_(w_.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new E_(w_.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new eb(t,n))},i.onupgradeneeded=function(e){p_("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.p.N(t,i.transaction,e.oldVersion,n.version).next((function(){p_("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.L&&(this.db.onversionchange=function(e){return n.L(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"B",value:function(e){this.L=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:(t=s(o().mark((function e(t,n,r,i){var a,u,s,l,c=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,u=0,s=o().mark((function e(){var n,s,l,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++u,e.prev=1,e.next=4,c.O(t);case 4:return c.db=e.sent,n=X_.open(c.db,t,a?"readonly":"readwrite",r),s=i(n).next((function(e){return n.g(),e})).catch((function(e){return n.abort(e),$_.reject(e)})).toPromise(),s.catch((function(){})),e.next=9,n.m;case 9:return e.t0=s,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),l=e.t1,f="FirebaseError"!==l.name&&u<3,p_("SimpleDb","Transaction failed with error:",l.message,"Retrying:",f),c.close(),f){e.next=18;break}return e.abrupt("return",{v:Promise.reject(l)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(s(),"t0",4);case 4:if(!(l=e.t0)){e.next=7;break}return e.abrupt("return",l.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)}))),function(e,n,r,i){return t.apply(this,arguments)})},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return p_("SimpleDb","Removing database:",e),rb(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!Rv())return!1;if(e.C())return!0;var t=Dv(),n=e.S(t),r=0<n&&n<10,i=e.v(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"v",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]);var t,n}(),Z_=function(){return y((function e(t){m(this,e),this.k=t,this.q=!1,this.K=null}),[{key:"isDone",get:function(){return this.q}},{key:"$",get:function(){return this.K}},{key:"cursor",set:function(e){this.k=e}},{key:"done",value:function(){this.q=!0}},{key:"U",value:function(e){this.K=e}},{key:"delete",value:function(){return rb(this.k.delete())}}])}(),eb=function(e){function t(e,n){var r;return m(this,t),(r=f(this,t,[w_.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(n)])).name="IndexedDbTransactionError",r}return v(t,e),y(t)}(E_);
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function tb(e){return"IndexedDbTransactionError"===e.name}var nb=function(){return y((function e(t){m(this,e),this.store=t}),[{key:"put",value:function(e,t){var n;return void 0!==t?(p_("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(p_("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),rb(n)}},{key:"add",value:function(e){return p_("SimpleDb","ADD",this.store.name,e,e),rb(this.store.add(e))}},{key:"get",value:function(e){var t=this;return rb(this.store.get(e)).next((function(n){return void 0===n&&(n=null),p_("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return p_("SimpleDb","DELETE",this.store.name,e),rb(this.store.delete(e))}},{key:"count",value:function(){return p_("SimpleDb","COUNT",this.store.name),rb(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){var i=r.getAll(n.range);return new $_((function(e,t){i.onerror=function(e){t(e.target.error)},i.onsuccess=function(t){e(t.target.result)}}))}var a=this.cursor(n),o=[];return this.G(a,(function(e,t){o.push(t)})).next((function(){return o}))}},{key:"j",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new $_((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){p_("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.J=!1;var r=this.cursor(n);return this.G(r,(function(e,t,n){return n.delete()}))}},{key:"Y",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.G(r,t)}},{key:"Z",value:function(e){var t=this.cursor({});return new $_((function(n,r){t.onerror=function(e){var t=ab(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"G",value:function(e,t){var n=[];return new $_((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Z_(i),o=t(i.primaryKey,i.value,a);if(o instanceof $_){var u=o.catch((function(e){return a.done(),$_.reject(e)}));n.push(u)}a.isDone?r():null===a.$?i.continue():i.continue(a.$)}else r()}})).next((function(){return $_.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}])}();function rb(e){return new $_((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=ab(e.target.error);n(t)}}))}var ib=!1;function ab(e){var t=J_.S(Dv());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new E_("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return ib||(ib=!0,setTimeout((function(){throw r}),0)),r}}return e}
/**
             * @license
             * Copyright 2018 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var ob=function(){return y((function e(t,n){var r=this;m(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.se(e)},this.oe=function(e){return n.writeSequenceNumber(e)})}),[{key:"se",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.oe&&this.oe(e),e}}])}();function ub(e){return null==e}function sb(e){return 0===e&&1/e==-1/0}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function lb(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function cb(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function fb(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */ob._e=-1;var hb=function(){function e(t,n){m(this,e),this.comparator=t,this.root=n||vb.EMPTY}return y(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,vb.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,vb.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new db(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new db(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new db(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new db(this.root,e,this.comparator,!0)}}])}(),db=function(){return y((function e(t,n,r,i){m(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}),[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}])}(),vb=function(){function e(t,n,r,i,a){m(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return y(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw k_();if(this.right.isRed())throw k_();var e=this.left.check();if(e!==this.right.check())throw k_();return e+(this.isRed()?0:1)}}])}();vb.EMPTY=null,vb.RED=!0,vb.BLACK=!1,vb.EMPTY=new(function(){return y((function e(){m(this,e),this.size=0}),[{key:"key",get:function(){throw k_()}},{key:"value",get:function(){throw k_()}},{key:"color",get:function(){throw k_()}},{key:"left",get:function(){throw k_()}},{key:"right",get:function(){throw k_()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new vb(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}])}());
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
var pb=function(){function e(t){m(this,e),this.comparator=t,this.data=new hb(this.comparator)}return y(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new mb(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new mb(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}])}(),mb=function(){return y((function e(t){m(this,e),this.iter=t}),[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}])}(),gb=function(){function e(t){m(this,e),this.fields=t,t.sort(B_.comparator)}return y(e,[{key:"unionWith",value:function(t){var n,r=new pb(B_.comparator),i=C(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(l){i.e(l)}finally{i.f()}var o,u=C(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(l){u.e(l)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=C(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return M_(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}])}(),yb=function(e){function t(){var e;return m(this,t),(e=f(this,t,arguments)).name="Base64DecodeError",e}return v(t,e),y(t)}(i(Error)),kb=function(){function e(t){m(this,e),this.binaryString=t}return y(e,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return R_(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(t){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new yb("Invalid base64 string: "+e):e}}(t);return new e(n)}},{key:"fromUint8Array",value:function(t){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t);return new e(n)}}])}();kb.EMPTY_BYTE_STRING=new kb("");var _b=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bb(e){if(__(!!e),"string"==typeof e){var t=0,n=_b.exec(e);if(__(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:wb(e.seconds),nanos:wb(e.nanos)}}function wb(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Eb(e){return"string"==typeof e?kb.fromBase64String(e):kb.fromUint8Array(e)}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function Cb(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function xb(e){var t=e.mapValue.fields.__previous_value__;return Cb(t)?xb(t):t}function Sb(e){var t=bb(e.mapValue.fields.__local_write_time__.timestampValue);return new O_(t.seconds,t.nanos)}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var Ib=y((function e(t,n,r,i,a,o,u,s,l){m(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=s,this.useFetchStreams=l})),Tb=function(){function e(t,n){m(this,e),this.projectId=t,this.database=n||"(default)"}return y(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}])}(),Ab={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Lb(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Cb(e)?4:function(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(e)?9007199254740991:10:k_()}function Nb(e,t){if(e===t)return!0;var n=Lb(e);if(n!==Lb(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Sb(e).isEqual(Sb(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=bb(e.timestampValue),r=bb(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Eb(e.bytesValue).isEqual(Eb(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return wb(e.geoPointValue.latitude)===wb(t.geoPointValue.latitude)&&wb(e.geoPointValue.longitude)===wb(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return wb(e.integerValue)===wb(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=wb(e.doubleValue),r=wb(t.doubleValue);return n===r?sb(n)===sb(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return M_(e.arrayValue.values||[],t.arrayValue.values||[],Nb);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(lb(n)!==lb(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Nb(n[i],r[i])))return!1;return!0}(e,t);default:return k_()}}function Db(e,t){return void 0!==(e.values||[]).find((function(e){return Nb(e,t)}))}function Pb(e,t){if(e===t)return 0;var n=Lb(e),r=Lb(t);if(n!==r)return R_(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return R_(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=wb(e.integerValue||e.doubleValue),r=wb(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Rb(e.timestampValue,t.timestampValue);case 4:return Rb(Sb(e),Sb(t));case 5:return R_(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Eb(e),r=Eb(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=R_(n[i],r[i]);if(0!==a)return a}return R_(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=R_(wb(e.latitude),wb(t.latitude));return 0!==n?n:R_(wb(e.longitude),wb(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Pb(n[i],r[i]);if(a)return a}return R_(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Ab.mapValue&&t===Ab.mapValue)return 0;if(e===Ab.mapValue)return 1;if(t===Ab.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=R_(r[o],a[o]);if(0!==u)return u;var s=Pb(n[r[o]],i[a[o]]);if(0!==s)return s}return R_(r.length,a.length)}(e.mapValue,t.mapValue);default:throw k_()}}function Rb(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return R_(e,t);var n=bb(e),r=bb(t),i=R_(n.seconds,r.seconds);return 0!==i?i:R_(n.nanos,r.nanos)}function Mb(e){return Ob(e)}function Ob(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=bb(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Eb(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return z_.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){var t,n="[",r=!0,i=C(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Ob(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=C(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Ob(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):k_()}function Fb(e){return!!e&&"integerValue"in e}function Ub(e){return!!e&&"arrayValue"in e}function Vb(e){return!!e&&"nullValue"in e}function jb(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Bb(e){return!!e&&"mapValue"in e}function zb(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==E(e.timestampValue))return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return cb(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=zb(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=zb(e.arrayValue.values[r]);return n}return Object.assign({},e)}var qb=function(){function e(t){m(this,e),this.value=t}return y(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Bb(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zb(t)}},{key:"setAll",value:function(e){var t=this,n=B_.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=zb(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Bb(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Nb(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Bb(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){cb(t,(function(t,n){return e[t]=n}));var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(zb(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}])}();function Gb(e){var t=[];return cb(e.fields,(function(e,n){var r=new B_([e]);if(Bb(n)){var i=Gb(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=C(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new gb(t)
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */}var Hb=function(){function e(t,n,r,i,a,o,u){m(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return y(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(F_.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=qb.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=qb.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=F_.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,F_.min(),F_.min(),F_.min(),qb.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,F_.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,F_.min(),F_.min(),qb.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,F_.min(),F_.min(),qb.empty(),2)}}])}(),Wb=y((function e(t,n){m(this,e),this.position=t,this.inclusive=n}));
/**
             * @license
             * Copyright 2022 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function Kb(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?z_.comparator(z_.fromName(o.referenceValue),n.key):Pb(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Qb(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Nb(e.position[n],t.position[n]))return!1;return!0}
/**
             * @license
             * Copyright 2022 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var Yb=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";m(this,e),this.field=t,this.dir=n}));function $b(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
             * @license
             * Copyright 2022 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var Xb=y((function e(){m(this,e)})),Jb=function(e){function t(e,n,r){var i;return m(this,t),(i=f(this,t)).field=e,i.op=n,i.value=r,i}return v(t,e),y(t,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Pb(t,this.value)):null!==t&&Lb(this.value)===Lb(t)&&this.matchesComparison(Pb(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return k_()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}}],[{key:"create",value:function(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new aw(e,n,r):"array-contains"===n?new lw(e,r):"in"===n?new cw(e,r):"not-in"===n?new fw(e,r):"array-contains-any"===n?new hw(e,r):new t(e,n,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new ow(e,n):new uw(e,n)}}])}(Xb),Zb=function(e){function t(e,n){var r;return m(this,t),(r=f(this,t)).filters=e,r.op=n,r.ue=null,r}return v(t,e),y(t,[{key:"matches",value:function(e){return ew(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ue||(this.ue=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ue}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}}],[{key:"create",value:function(e,n){return new t(e,n)}}])}(Xb);function ew(e){return"and"===e.op}function tw(e){return function(e){var t,n=C(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Zb)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}(e)&&ew(e)}function nw(e){if(e instanceof Jb)return e.field.canonicalString()+e.op.toString()+Mb(e.value);if(tw(e))return e.filters.map((function(e){return nw(e)})).join(",");var t=e.filters.map((function(e){return nw(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function rw(e,t){return e instanceof Jb?function(e,t){return t instanceof Jb&&e.op===t.op&&e.field.isEqual(t.field)&&Nb(e.value,t.value)}(e,t):e instanceof Zb?function(e,t){return t instanceof Zb&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&rw(n,t.filters[r])}),!0)}(e,t):void k_()}function iw(e){return e instanceof Jb?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Mb(e.value))}(e):e instanceof Zb?function(e){return e.op.toString()+" {"+e.getFilters().map(iw).join(" ,")+"}"}(e):"Filter"}var aw=function(e){function t(e,n,r){var i;return m(this,t),(i=f(this,t,[e,n,r])).key=z_.fromName(r.referenceValue),i}return v(t,e),y(t,[{key:"matches",value:function(e){var t=z_.comparator(e.key,this.key);return this.matchesComparison(t)}}])}(Jb),ow=function(e){function t(e,n){var r;return m(this,t),(r=f(this,t,[e,"in",n])).keys=sw("in",n),r}return v(t,e),y(t,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}])}(Jb),uw=function(e){function t(e,n){var r;return m(this,t),(r=f(this,t,[e,"not-in",n])).keys=sw("not-in",n),r}return v(t,e),y(t,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}])}(Jb);function sw(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return z_.fromName(e.referenceValue)}))}var lw=function(e){function t(e,n){return m(this,t),f(this,t,[e,"array-contains",n])}return v(t,e),y(t,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Ub(t)&&Db(t.arrayValue,this.value)}}])}(Jb),cw=function(e){function t(e,n){return m(this,t),f(this,t,[e,"in",n])}return v(t,e),y(t,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Db(this.value.arrayValue,t)}}])}(Jb),fw=function(e){function t(e,n){return m(this,t),f(this,t,[e,"not-in",n])}return v(t,e),y(t,[{key:"matches",value:function(e){if(Db(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Db(this.value.arrayValue,t)}}])}(Jb),hw=function(e){function t(e,n){return m(this,t),f(this,t,[e,"array-contains-any",n])}return v(t,e),y(t,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Ub(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Db(t.value.arrayValue,e)}))}}])}(Jb),dw=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;m(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ce=null}));function vw(e){return new dw(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function pw(e){var t=b_(e);if(null===t.ce){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return nw(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),ub(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Mb(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Mb(e)})).join(",")),t.ce=n}return t.ce}function mw(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!$b(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!rw(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Qb(e.startAt,t.startAt)&&Qb(e.endAt,t.endAt)}function gw(e){return z_.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var yw=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;m(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}));function kw(e){return new yw(e)}function _w(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function bw(e){var t=b_(e);if(null===t.le){t.le=[];var n,r=new Set,i=C(t.explicitOrderBy);try{for(i.s();!(n=i.n()).done;){var a=n.value;t.le.push(a),r.add(a.field.canonicalString())}}catch(s){i.e(s)}finally{i.f()}var o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",u=function(e){var t=new pb(B_.comparator);return e.filters.forEach((function(e){e.getFlattenedFilters().forEach((function(e){e.isInequality()&&(t=t.add(e.field))}))})),t}(t);u.forEach((function(e){r.has(e.canonicalString())||e.isKeyField()||t.le.push(new Yb(e,o))})),r.has(B_.keyField().canonicalString())||t.le.push(new Yb(B_.keyField(),o))}return t.le}function ww(e){var t=b_(e);return t.he||(t.he=function(e,t){if("F"===e.limitType)return vw(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);t=t.map((function(e){var t="desc"===e.dir?"asc":"desc";return new Yb(e.field,t)}));var n=e.endAt?new Wb(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Wb(e.startAt.position,e.startAt.inclusive):null;return vw(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}(t,bw(e))),t.he}function Ew(e,t,n){return new yw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Cw(e,t){return mw(ww(e),ww(t))&&e.limitType===t.limitType}function xw(e){return"".concat(pw(ww(e)),"|lt:").concat(e.limitType)}function Sw(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return iw(e)})).join(", "),"]")),ub(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Mb(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Mb(e)})).join(",")),"Target(".concat(t,")")}(ww(e)),"; limitType=").concat(e.limitType,")")}function Iw(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):z_.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=C(bw(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=C(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Kb(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,bw(e),t))&&!(e.endAt&&!function(e,t,n){var r=Kb(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,bw(e),t))}(e,t)}function Tw(e){return function(t,n){var r,i=!1,a=C(bw(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Aw(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Aw(e,t,n){var r=e.field.isKeyField()?z_.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Pb(r,i):k_()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return k_()}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var Lw=function(){return y((function e(t,n){m(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}),[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=b(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){cb(this.inner,(function(t,n){var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=b(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return fb(this.inner)}},{key:"size",value:function(){return this.innerSize}}])}(),Nw=new hb(z_.comparator);
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function Dw(){return Nw}var Pw=new hb(z_.comparator);function Rw(){for(var e=Pw,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Mw(e){var t=Pw;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Ow(){return Uw()}function Fw(){return Uw()}function Uw(){return new Lw((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Vw=new hb(z_.comparator),jw=new pb(z_.comparator);function Bw(){for(var e=jw,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var zw=new pb(R_);
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function qw(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sb(t)?"-0":t}}function Gw(e){return{integerValue:""+e}}function Hw(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!sb(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?Gw(t):qw(e,t)}
/**
             * @license
             * Copyright 2018 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var Ww=y((function e(){m(this,e),this._=void 0}));function Kw(e,t,n){return e instanceof $w?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Cb(t)&&(t=xb(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Xw?Jw(e,t):e instanceof Zw?eE(e,t):function(e,t){var n=Yw(e,t),r=nE(n)+nE(e.Ie);return Fb(n)&&Fb(e.Ie)?Gw(r):qw(e.serializer,r)}(e,t)}function Qw(e,t,n){return e instanceof Xw?Jw(e,t):e instanceof Zw?eE(e,t):n}function Yw(e,t){return e instanceof tE?function(e){return Fb(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}var $w=function(e){function t(){return m(this,t),f(this,t,arguments)}return v(t,e),y(t)}(Ww),Xw=function(e){function t(e){var n;return m(this,t),(n=f(this,t)).elements=e,n}return v(t,e),y(t)}(Ww);function Jw(e,t){var n,r=rE(t),i=C(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Nb(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Zw=function(e){function t(e){var n;return m(this,t),(n=f(this,t)).elements=e,n}return v(t,e),y(t)}(Ww);function eE(e,t){var n,r=rE(t),i=C(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Nb(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var tE=function(e){function t(e,n){var r;return m(this,t),(r=f(this,t)).serializer=e,r.Ie=n,r}return v(t,e),y(t)}(Ww);function nE(e){return wb(e.integerValue||e.doubleValue)}function rE(e){return Ub(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var iE=y((function e(t,n){m(this,e),this.version=t,this.transformResults=n})),aE=function(){function e(t,n){m(this,e),this.updateTime=t,this.exists=n}return y(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}])}();function oE(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var uE=y((function e(){m(this,e)}));function sE(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new _E(e.key,aE.none()):new dE(e.key,e.data,aE.none());var n,r=e.data,i=qb.empty(),a=new pb(B_.comparator),o=C(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(l){o.e(l)}finally{o.f()}return new vE(e.key,i,new gb(a.toArray()),aE.none())}function lE(e,t,n){e instanceof dE?function(e,t,n){var r=e.value.clone(),i=mE(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof vE?function(e,t,n){if(oE(e.precondition,t)){var r=mE(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(pE(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function cE(e,t,n,r){return e instanceof dE?function(e,t,n,r){if(!oE(e.precondition,t))return n;var i=e.value.clone(),a=gE(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof vE?function(e,t,n,r){if(!oE(e.precondition,t))return n;var i=gE(e.fieldTransforms,r,t),a=t.data;return a.setAll(pE(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return oE(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function fE(e,t){var n,r=null,i=C(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Yw(a.transform,o||null);null!=u&&(null===r&&(r=qb.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function hE(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&M_(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Xw&&t instanceof Xw||e instanceof Zw&&t instanceof Zw?M_(e.elements,t.elements,Nb):e instanceof tE&&t instanceof tE?Nb(e.Ie,t.Ie):e instanceof $w&&t instanceof $w}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var dE=function(e){function t(e,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return m(this,t),(i=f(this,t)).key=e,i.value=n,i.precondition=r,i.fieldTransforms=a,i.type=0,i}return v(t,e),y(t,[{key:"getFieldMask",value:function(){return null}}])}(uE),vE=function(e){function t(e,n,r,i){var a,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return m(this,t),(a=f(this,t)).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return v(t,e),y(t,[{key:"getFieldMask",value:function(){return this.fieldMask}}])}(uE);function pE(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function mE(e,t,n){var r=new Map;__(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Qw(o,u,n[i]))}return r}function gE(e,t,n){var r,i=new Map,a=C(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Kw(u,s,t))}}catch(l){a.e(l)}finally{a.f()}return i}var yE,kE,_E=function(e){function t(e,n){var r;return m(this,t),(r=f(this,t)).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return v(t,e),y(t,[{key:"getFieldMask",value:function(){return null}}])}(uE),bE=function(e){function t(e,n){var r;return m(this,t),(r=f(this,t)).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return v(t,e),y(t,[{key:"getFieldMask",value:function(){return null}}])}(uE),wE=function(){return y((function e(t,n,r,i){m(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}),[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&lE(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=C(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=cE(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=C(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=cE(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Fw();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=sE(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(F_.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Bw())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&M_(this.mutations,e.mutations,(function(e,t){return hE(e,t)}))&&M_(this.baseMutations,e.baseMutations,(function(e,t){return hE(e,t)}))}}])}(),EE=function(){function e(t,n,r,i){m(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return y(e,null,[{key:"from",value:function(t,n,r){__(t.mutations.length===r.length);for(var i=Vw,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}])}(),CE=function(){return y((function e(t,n){m(this,e),this.largestBatchId=t,this.mutation=n}),[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}])}(),xE=y((function e(t,n){m(this,e),this.count=t,this.unchangedNames=n}));function SE(e){switch(e){default:return k_();case w_.CANCELLED:case w_.UNKNOWN:case w_.DEADLINE_EXCEEDED:case w_.RESOURCE_EXHAUSTED:case w_.INTERNAL:case w_.UNAVAILABLE:case w_.UNAUTHENTICATED:return!1;case w_.INVALID_ARGUMENT:case w_.NOT_FOUND:case w_.ALREADY_EXISTS:case w_.PERMISSION_DENIED:case w_.FAILED_PRECONDITION:case w_.ABORTED:case w_.OUT_OF_RANGE:case w_.UNIMPLEMENTED:case w_.DATA_LOSS:return!0}}function IE(e){if(void 0===e)return m_("GRPC error has no .code"),w_.UNKNOWN;switch(e){case yE.OK:return w_.OK;case yE.CANCELLED:return w_.CANCELLED;case yE.UNKNOWN:return w_.UNKNOWN;case yE.DEADLINE_EXCEEDED:return w_.DEADLINE_EXCEEDED;case yE.RESOURCE_EXHAUSTED:return w_.RESOURCE_EXHAUSTED;case yE.INTERNAL:return w_.INTERNAL;case yE.UNAVAILABLE:return w_.UNAVAILABLE;case yE.UNAUTHENTICATED:return w_.UNAUTHENTICATED;case yE.INVALID_ARGUMENT:return w_.INVALID_ARGUMENT;case yE.NOT_FOUND:return w_.NOT_FOUND;case yE.ALREADY_EXISTS:return w_.ALREADY_EXISTS;case yE.PERMISSION_DENIED:return w_.PERMISSION_DENIED;case yE.FAILED_PRECONDITION:return w_.FAILED_PRECONDITION;case yE.ABORTED:return w_.ABORTED;case yE.OUT_OF_RANGE:return w_.OUT_OF_RANGE;case yE.UNIMPLEMENTED:return w_.UNIMPLEMENTED;case yE.DATA_LOSS:return w_.DATA_LOSS;default:return k_()}}(kE=yE||(yE={}))[kE.OK=0]="OK",kE[kE.CANCELLED=1]="CANCELLED",kE[kE.UNKNOWN=2]="UNKNOWN",kE[kE.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kE[kE.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kE[kE.NOT_FOUND=5]="NOT_FOUND",kE[kE.ALREADY_EXISTS=6]="ALREADY_EXISTS",kE[kE.PERMISSION_DENIED=7]="PERMISSION_DENIED",kE[kE.UNAUTHENTICATED=16]="UNAUTHENTICATED",kE[kE.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kE[kE.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kE[kE.ABORTED=10]="ABORTED",kE[kE.OUT_OF_RANGE=11]="OUT_OF_RANGE",kE[kE.UNIMPLEMENTED=12]="UNIMPLEMENTED",kE[kE.INTERNAL=13]="INTERNAL",kE[kE.UNAVAILABLE=14]="UNAVAILABLE",kE[kE.DATA_LOSS=15]="DATA_LOSS";
/**
             * @license
             * Copyright 2022 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
var TE=new l_([4294967295,4294967295],0);function AE(e){var t=(new TextEncoder).encode(e),n=new s_;return n.update(t),new Uint8Array(n.digest())}function LE(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new l_([n,r],0),new l_([i,a],0)]}var NE=function(){function e(t,n,r){if(m(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new DE("Invalid padding: ".concat(n));if(r<0)throw new DE("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new DE("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new DE("Invalid padding when bitmap length is 0: ".concat(n));this.Te=8*t.length-n,this.Ee=l_.fromNumber(this.Te)}return y(e,[{key:"de",value:function(e,t,n){var r=e.add(t.multiply(l_.fromNumber(n)));return 1===r.compare(TE)&&(r=new l_([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}},{key:"Ae",value:function(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"mightContain",value:function(e){if(0===this.Te)return!1;for(var t=b(LE(AE(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.de(n,r,i);if(!this.Ae(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.Te)for(var t=b(LE(AE(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.de(n,r,i);this.Re(a)}}},{key:"Re",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}])}(),DE=function(e){function t(){var e;return m(this,t),(e=f(this,t,arguments)).name="BloomFilterError",e}return v(t,e),y(t)}(i(Error)),PE=function(){function e(t,n,r,i,a){m(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return y(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,RE.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(F_.min(),i,new hb(R_),Dw(),Bw())}}])}(),RE=function(){function e(t,n,r,i,a){m(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return y(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Bw(),Bw(),Bw())}}])}(),ME=y((function e(t,n,r,i){m(this,e),this.Ve=t,this.removedTargetIds=n,this.key=r,this.me=i})),OE=y((function e(t,n){m(this,e),this.targetId=t,this.fe=n})),FE=y((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:kb.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;m(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),UE=function(){return y((function e(){m(this,e),this.ge=0,this.pe=BE(),this.ye=kb.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}),[{key:"current",get:function(){return this.we}},{key:"resumeToken",get:function(){return this.ye}},{key:"be",get:function(){return 0!==this.ge}},{key:"De",get:function(){return this.Se}},{key:"Ce",value:function(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}},{key:"ve",value:function(){var e=Bw(),t=Bw(),n=Bw();return this.pe.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:k_()}})),new RE(this.ye,this.we,e,t,n)}},{key:"Fe",value:function(){this.Se=!1,this.pe=BE()}},{key:"Me",value:function(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}},{key:"xe",value:function(e){this.Se=!0,this.pe=this.pe.remove(e)}},{key:"Oe",value:function(){this.ge+=1}},{key:"Ne",value:function(){this.ge-=1,__(this.ge>=0)}},{key:"Le",value:function(){this.Se=!0,this.we=!0}}])}(),VE=function(){return y((function e(t){m(this,e),this.Be=t,this.ke=new Map,this.qe=Dw(),this.Qe=jE(),this.Ke=new hb(R_)}),[{key:"$e",value:function(e){var t,n=C(e.Ve);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.me&&e.me.isFoundDocument()?this.Ue(r,e.me):this.We(r,e.key,e.me)}}catch(u){n.e(u)}finally{n.f()}var i,a=C(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.We(o,e.key,e.me)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Ge",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ze(n);switch(e.state){case 0:t.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||t.removeTarget(n);break;case 3:t.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:t.je(n)&&(t.He(n),r.Ce(e.resumeToken));break;default:k_()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((function(e,r){n.je(r)&&t(r)}))}},{key:"Je",value:function(e){var t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){var i=r.target;if(gw(i))if(0===n){var a=new z_(i.path);this.We(t,a,Hb.newNoDocument(a,F_.min()))}else __(1===n);else{var o=this.Ze(t);if(o!==n){var u=this.Xe(e),s=u?this.et(u,e,o):1;if(0!==s){this.He(t);var l=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,l)}}}}}},{key:"Xe",value:function(e){var t=e.fe.unchangedNames;if(!t||!t.bits)return null;var n,r,i=t.bits,a=i.bitmap,o=void 0===a?"":a,u=i.padding,s=void 0===u?0:u,l=t.hashCount,c=void 0===l?0:l;try{n=Eb(o).toUint8Array()}catch(e){if(e instanceof yb)return g_("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{r=new NE(n,s,c)}catch(e){return g_(e instanceof DE?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===r.Te?null:r}},{key:"et",value:function(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}},{key:"rt",value:function(e,t){var n=this,r=this.Be.getRemoteKeysForTarget(t),i=0;return r.forEach((function(r){var a=n.Be.nt(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());e.mightContain(o)||(n.We(t,r,null),i++)})),i}},{key:"it",value:function(e){var t=this,n=new Map;this.ke.forEach((function(r,i){var a=t.Ye(i);if(a){if(r.current&&gw(a.target)){var o=new z_(a.target.path);null!==t.qe.get(o)||t.st(i,o)||t.We(i,o,Hb.newNoDocument(o,e))}r.De&&(n.set(i,r.ve()),r.Fe())}}));var r=Bw();this.Qe.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Ye(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.qe.forEach((function(t,n){return n.setReadTime(e)}));var i=new PE(e,n,this.Ke,this.qe,r);return this.qe=Dw(),this.Qe=jE(),this.Ke=new hb(R_),i}},{key:"Ue",value:function(e,t){if(this.je(e)){var n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}}},{key:"We",value:function(e,t,n){if(this.je(e)){var r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}}},{key:"removeTarget",value:function(e){this.ke.delete(e)}},{key:"Ze",value:function(e){var t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Oe",value:function(e){this.ze(e).Oe()}},{key:"ze",value:function(e){var t=this.ke.get(e);return t||(t=new UE,this.ke.set(e,t)),t}},{key:"ot",value:function(e){var t=this.Qe.get(e);return t||(t=new pb(R_),this.Qe=this.Qe.insert(e,t)),t}},{key:"je",value:function(e){var t=null!==this.Ye(e);return t||p_("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ye",value:function(e){var t=this.ke.get(e);return t&&t.be?null:this.Be._t(e)}},{key:"He",value:function(e){var t=this;this.ke.set(e,new UE),this.Be.getRemoteKeysForTarget(e).forEach((function(n){t.We(e,n,null)}))}},{key:"st",value:function(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}])}();function jE(){return new hb(z_.comparator)}function BE(){return new hb(z_.comparator)}var zE={asc:"ASCENDING",desc:"DESCENDING"},qE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GE={and:"AND",or:"OR"},HE=y((function e(t,n){m(this,e),this.databaseId=t,this.useProto3Json=n}));function WE(e,t){return e.useProto3Json||ub(t)?t:{value:t}}function KE(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function QE(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function YE(e,t){return KE(e,t.toTimestamp())}function $E(e){return __(!!e),F_.fromTimestamp(function(e){var t=bb(e);return new O_(t.seconds,t.nanos)}(e))}function XE(e,t){return JE(e,t).canonicalString()}function JE(e,t){var n=function(e){return new V_(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function ZE(e){var t=V_.fromString(e);return __(gC(t)),t}function eC(e,t){return XE(e.databaseId,t.path)}function tC(e,t){var n=ZE(t);if(n.get(1)!==e.databaseId.projectId)throw new E_(w_.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new E_(w_.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new z_(iC(n))}function nC(e,t){return XE(e.databaseId,t)}function rC(e){return new V_(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function iC(e){return __(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function aC(e,t,n){return{name:eC(e,t),fields:n.value.mapValue.fields}}function oC(e,t){return{documents:[nC(e,t.path)]}}function uC(e,t){var n,r={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(n=i,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n=i.popLast(),r.structuredQuery.from=[{collectionId:i.lastSegment()}]),r.parent=nC(e,n);var a=function(e){if(0!==e.length)return pC(Zb.create(e,"and"))}(t.filters);a&&(r.structuredQuery.where=a);var o=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:dC(e.field),direction:cC(e.dir)}}(e)}))}(t.orderBy);o&&(r.structuredQuery.orderBy=o);var u=WE(e,t.limit);return null!==u&&(r.structuredQuery.limit=u),t.startAt&&(r.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:r,parent:n}}function sC(e){var t=function(e){var t=ZE(e);return 4===t.length?V_.emptyPath():iC(t)}(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){__(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=lC(e);return t instanceof Zb&&tw(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=function(e){return e.map((function(e){return function(e){return new Yb(vC(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}))}(n.orderBy));var s=null;n.limit&&(s=function(e){var t;return ub(t="object"==E(e)?e.value:e)?null:t}(n.limit));var l=null;n.startAt&&(l=function(e){var t=!!e.before,n=e.values||[];return new Wb(n,t)}(n.startAt));var c=null;return n.endAt&&(c=function(e){var t=!e.before,n=e.values||[];return new Wb(n,t)}(n.endAt)),function(e,t,n,r,i,a,o,u){return new yw(e,t,n,r,i,a,o,u)}(t,i,u,o,s,"F",l,c)}function lC(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=vC(e.unaryFilter.field);return Jb.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=vC(e.unaryFilter.field);return Jb.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=vC(e.unaryFilter.field);return Jb.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=vC(e.unaryFilter.field);return Jb.create(i,"!=",{nullValue:"NULL_VALUE"});default:return k_()}}(e):void 0!==e.fieldFilter?function(e){return Jb.create(vC(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return k_()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Zb.create(e.compositeFilter.filters.map((function(e){return lC(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return k_()}}(e.compositeFilter.op))}(e):k_()}function cC(e){return zE[e]}function fC(e){return qE[e]}function hC(e){return GE[e]}function dC(e){return{fieldPath:e.canonicalString()}}function vC(e){return B_.fromServerFormat(e.fieldPath)}function pC(e){return e instanceof Jb?function(e){if("=="===e.op){if(jb(e.value))return{unaryFilter:{field:dC(e.field),op:"IS_NAN"}};if(Vb(e.value))return{unaryFilter:{field:dC(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(jb(e.value))return{unaryFilter:{field:dC(e.field),op:"IS_NOT_NAN"}};if(Vb(e.value))return{unaryFilter:{field:dC(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dC(e.field),op:fC(e.op),value:e.value}}}(e):e instanceof Zb?function(e){var t=e.getFilters().map((function(e){return pC(e)}));return 1===t.length?t[0]:{compositeFilter:{op:hC(e.op),filters:t}}}(e):k_()}function mC(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function gC(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var yC=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:F_.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:F_.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:kb.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;m(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return y(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}])}(),kC=y((function e(t){m(this,e),this.ct=t}));
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function _C(e){var t=sC({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ew(t,t.limit,"L"):t}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var bC=function(){return y((function e(){m(this,e),this._n=new wC}),[{key:"addToCollectionParentIndex",value:function(e,t){return this._n.add(t),$_.resolve()}},{key:"getCollectionParents",value:function(e,t){return $_.resolve(this._n.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return $_.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return $_.resolve()}},{key:"deleteAllFieldIndexes",value:function(e){return $_.resolve()}},{key:"createTargetIndexes",value:function(e,t){return $_.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return $_.resolve(null)}},{key:"getIndexType",value:function(e,t){return $_.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return $_.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return $_.resolve(null)}},{key:"getMinOffset",value:function(e,t){return $_.resolve(G_.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return $_.resolve(G_.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return $_.resolve()}},{key:"updateIndexEntries",value:function(e,t){return $_.resolve()}}])}(),wC=function(){return y((function e(){m(this,e),this.index={}}),[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new pb(V_.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new pb(V_.comparator)).toArray()}}])}(),EC=function(){function e(t){m(this,e),this.On=t}return y(e,[{key:"next",value:function(){return this.On+=2,this.On}}],[{key:"Nn",value:function(){return new e(0)}},{key:"Ln",value:function(){return new e(-1)}}])}(),CC=function(){return y((function e(){m(this,e),this.changes=new Lw((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}),[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Hb.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?$_.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}])}(),xC=y((function e(t,n){m(this,e),this.overlayedDocument=t,this.mutatedFields=n})),SC=function(){return y((function e(t,n,r,i){m(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}),[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&cE(r.mutation,e,gb.empty(),O_.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Bw()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bw(),i=Ow();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Rw();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Ow();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Bw())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Dw(),a=Uw(),o=Uw();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof vE)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),cE(o.mutation,t,o.mutation.getFieldMask(),O_.now())):a.set(t.key,gb.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new xC(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Uw(),i=new hb((function(e,t){return e-t})),a=Bw();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=C(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||gb.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Bw()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,l=i.value,c=Fw();l.forEach((function(e){if(!a.has(e)){var n=sE(t.get(e),r.get(e));null!==n&&c.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,c))};u.hasNext();)s();return $_.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){return function(e){return z_.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):function(e){return null!==e.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):$_.resolve(Ow()),u=-1,s=a;return o.next((function(t){return $_.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?$_.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Bw())})).next((function(e){return{batchId:u,changes:Mw(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new z_(t)).next((function(e){var t=Rw();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n,r){var i=this,a=t.collectionGroup,o=Rw();return this.indexManager.getCollectionParents(e,a).next((function(u){return $_.forEach(u,(function(u){var s=function(e,t){return new yw(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,u.child(a));return i.getDocumentsMatchingCollectionQuery(e,s,n,r).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n,r){var i,a=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(o){return i=o,a.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)})).next((function(e){i.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Hb.newInvalidDocument(r)))}));var n=Rw();return e.forEach((function(e,r){var a=i.get(e);void 0!==a&&cE(a.mutation,r,gb.empty(),O_.now()),Iw(t,r)&&(n=n.insert(e,r))})),n}))}}])}(),IC=function(){return y((function e(t){m(this,e),this.serializer=t,this.cr=new Map,this.lr=new Map}),[{key:"getBundleMetadata",value:function(e,t){return $_.resolve(this.cr.get(t))}},{key:"saveBundleMetadata",value:function(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:$E(e.createTime)}}(t)),$_.resolve()}},{key:"getNamedQuery",value:function(e,t){return $_.resolve(this.lr.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:_C(e.bundledQuery),readTime:$E(e.readTime)}}(t)),$_.resolve()}}])}(),TC=function(){return y((function e(){m(this,e),this.overlays=new hb(z_.comparator),this.hr=new Map}),[{key:"getOverlay",value:function(e,t){return $_.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Ow();return $_.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ht(e,t,i)})),$_.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.hr.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.hr.delete(n)),$_.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Ow(),i=t.length+1,a=new z_(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return $_.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new hb((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Ow(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Ow(),l=i.getIterator();l.hasNext()&&(l.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return $_.resolve(s)}},{key:"ht",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new CE(t,n));var a=this.hr.get(t);void 0===a&&(a=Bw(),this.hr.set(t,a)),this.hr.set(t,a.add(n.key))}}])}(),AC=function(){return y((function e(){m(this,e),this.Pr=new pb(LC.Ir),this.Tr=new pb(LC.Er)}),[{key:"isEmpty",value:function(){return this.Pr.isEmpty()}},{key:"addReference",value:function(e,t){var n=new LC(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}},{key:"dr",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Ar(new LC(e,t))}},{key:"Rr",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Vr",value:function(e){var t=this,n=new z_(new V_([])),r=new LC(n,e),i=new LC(n,e+1),a=[];return this.Tr.forEachInRange([r,i],(function(e){t.Ar(e),a.push(e.key)})),a}},{key:"mr",value:function(){var e=this;this.Pr.forEach((function(t){return e.Ar(t)}))}},{key:"Ar",value:function(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}},{key:"gr",value:function(e){var t=new z_(new V_([])),n=new LC(t,e),r=new LC(t,e+1),i=Bw();return this.Tr.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new LC(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}])}(),LC=function(){return y((function e(t,n){m(this,e),this.key=t,this.pr=n}),null,[{key:"Ir",value:function(e,t){return z_.comparator(e.key,t.key)||R_(e.pr,t.pr)}},{key:"Er",value:function(e,t){return R_(e.pr,t.pr)||z_.comparator(e.key,t.key)}}])}(),NC=function(){return y((function e(t,n){m(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new pb(LC.Ir)}),[{key:"checkEmpty",value:function(e){return $_.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new wE(i,t,n,r);this.mutationQueue.push(a);var o,u=C(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.wr=this.wr.add(new LC(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(l){u.e(l)}finally{u.f()}return $_.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return $_.resolve(this.Sr(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.br(n),i=r<0?0:r;return $_.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return $_.resolve(0===this.mutationQueue.length?-1:this.yr-1)}},{key:"getAllMutationBatches",value:function(e){return $_.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new LC(t,0),i=new LC(t,Number.POSITIVE_INFINITY),a=[];return this.wr.forEachInRange([r,i],(function(e){var t=n.Sr(e.pr);a.push(t)})),$_.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new pb(R_);return t.forEach((function(e){var t=new LC(e,0),i=new LC(e,Number.POSITIVE_INFINITY);n.wr.forEachInRange([t,i],(function(e){r=r.add(e.pr)}))})),$_.resolve(this.Dr(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;z_.isDocumentKey(i)||(i=i.child(""));var a=new LC(new z_(i),0),o=new pb(R_);return this.wr.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),a),$_.resolve(this.Dr(o))}},{key:"Dr",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Sr(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;__(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();var r=this.wr;return $_.forEach(t.mutations,(function(i){var a=new LC(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.wr=r}))}},{key:"Mn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new LC(t,0),r=this.wr.firstAfterOrEqual(n);return $_.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,$_.resolve()}},{key:"Cr",value:function(e,t){return this.br(e)}},{key:"br",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Sr",value:function(e){var t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}])}(),DC=function(){return y((function e(t){m(this,e),this.vr=t,this.docs=new hb(z_.comparator),this.size=0}),[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return $_.resolve(n?n.document.mutableCopy():Hb.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Dw();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Hb.newInvalidDocument(e))})),$_.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=Dw(),a=t.path,o=new z_(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),l=s.key,c=s.value.document;if(!a.isPrefixOf(l.path))break;l.path.length>a.length+1||H_(q_(c),n)<=0||(r.has(c.key)||Iw(t,c))&&(i=i.insert(c.key,c.mutableCopy()))}return $_.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){k_()}},{key:"Fr",value:function(e,t){return $_.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new PC(this)}},{key:"getSize",value:function(e){return $_.resolve(this.size)}}])}(),PC=function(e){function t(e){var n;return m(this,t),(n=f(this,t)).ar=e,n}return v(t,e),y(t,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.ar.addEntry(e,i)):t.ar.removeEntry(r)})),$_.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.ar.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.ar.getEntries(e,t)}}])}(CC),RC=function(){return y((function e(t){m(this,e),this.persistence=t,this.Mr=new Lw((function(e){return pw(e)}),mw),this.lastRemoteSnapshotVersion=F_.min(),this.highestTargetId=0,this.Or=0,this.Nr=new AC,this.targetCount=0,this.Lr=EC.Nn()}),[{key:"forEachTarget",value:function(e,t){return this.Mr.forEach((function(e,n){return t(n)})),$_.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return $_.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return $_.resolve(this.Or)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Lr.next(),$_.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),$_.resolve()}},{key:"qn",value:function(e){this.Mr.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Lr=new EC(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.qn(t),this.targetCount+=1,$_.resolve()}},{key:"updateTargetData",value:function(e,t){return this.qn(t),$_.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,$_.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Mr.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Mr.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),$_.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return $_.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Mr.get(t)||null;return $_.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Nr.dr(t,n),$_.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Nr.Rr(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),$_.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Nr.Vr(t),$_.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Nr.gr(t);return $_.resolve(n)}},{key:"containsKey",value:function(e,t){return $_.resolve(this.Nr.containsKey(t))}}])}(),MC=function(){return y((function e(t,n){var r=this;m(this,e),this.Br={},this.overlays={},this.kr=new ob(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new RC(this),this.indexManager=new bC,this.remoteDocumentCache=function(e){return new DC(e)}((function(e){return r.referenceDelegate.Kr(e)})),this.serializer=new kC(n),this.$r=new IC(this.serializer)}),[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.qr=!1,Promise.resolve()}},{key:"started",get:function(){return this.qr}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new TC,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Br[e.toKey()];return n||(n=new NC(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Qr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.$r}},{key:"runTransaction",value:function(e,t,n){var r=this;p_("MemoryPersistence","Starting transaction:",e);var i=new OC(this.kr.next());return this.referenceDelegate.Ur(),n(i).next((function(e){return r.referenceDelegate.Wr(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Gr",value:function(e,t){return $_.or(Object.values(this.Br).map((function(n){return function(){return n.containsKey(e,t)}})))}}])}(),OC=function(e){function t(e){var n;return m(this,t),(n=f(this,t)).currentSequenceNumber=e,n}return v(t,e),y(t)}(K_),FC=function(){function e(t){m(this,e),this.persistence=t,this.zr=new AC,this.jr=null}return y(e,[{key:"Jr",get:function(){if(this.jr)return this.jr;throw k_()}},{key:"addReference",value:function(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),$_.resolve()}},{key:"removeReference",value:function(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),$_.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Jr.add(t.toString()),$_.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.zr.Vr(t.targetId).forEach((function(e){return n.Jr.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Jr.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ur",value:function(){this.jr=new Set}},{key:"Wr",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $_.forEach(this.Jr,(function(r){var i=z_.fromPath(r);return t.Yr(e,i).next((function(e){e||n.removeEntry(i,F_.min())}))})).next((function(){return t.jr=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Yr(e,t).next((function(e){e?n.Jr.delete(t.toString()):n.Jr.add(t.toString())}))}},{key:"Kr",value:function(e){return 0}},{key:"Yr",value:function(e,t){var n=this;return $_.or([function(){return $_.resolve(n.zr.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gr(e,t)}])}}],[{key:"Hr",value:function(t){return new e(t)}}])}(),UC=function(){function e(t,n,r,i){m(this,e),this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}return y(e,null,[{key:"Ki",value:function(t,n){var r,i=Bw(),a=Bw(),o=C(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}])}(),VC=function(){return y((function e(){m(this,e),this._documentReadCount=0}),[{key:"documentReadCount",get:function(){return this._documentReadCount}},{key:"incrementDocumentReadCount",value:function(e){this._documentReadCount+=e}}])}(),jC=function(){return y((function e(){m(this,e),this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=Pv()?8:J_.v(Dv())>0?6:4}),[{key:"initialize",value:function(e,t){this.zi=e,this.indexManager=t,this.$i=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a={result:null};return this.ji(e,t).next((function(e){a.result=e})).next((function(){if(!a.result)return i.Hi(e,t,r,n).next((function(e){a.result=e}))})).next((function(){if(!a.result){var n=new VC;return i.Ji(e,t,n).next((function(r){if(a.result=r,i.Ui)return i.Yi(e,t,n,r.size)}))}})).next((function(){return a.result}))}},{key:"Yi",value:function(e,t,n,r){return n.documentReadCount<this.Wi?(v_()<=Gv.DEBUG&&p_("QueryEngine","SDK will not create cache indexes for query:",Sw(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),$_.resolve()):(v_()<=Gv.DEBUG&&p_("QueryEngine","Query:",Sw(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(v_()<=Gv.DEBUG&&p_("QueryEngine","The SDK decides to create cache indexes for query:",Sw(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ww(t))):$_.resolve())}},{key:"ji",value:function(e,t){var n=this;if(_w(t))return $_.resolve(null);var r=ww(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Ew(t,null,"F"),r=ww(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Bw.apply(void 0,w(i));return n.zi.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Zi(t,i);return n.Xi(t,o,a,r.readTime)?n.ji(e,Ew(t,null,"F")):n.es(e,o,t,r)}))}))})))}))}},{key:"Hi",value:function(e,t,n,r){var i=this;return _w(t)||r.isEqual(F_.min())?$_.resolve(null):this.zi.getDocuments(e,n).next((function(a){var o=i.Zi(t,a);return i.Xi(t,o,n,r)?$_.resolve(null):(v_()<=Gv.DEBUG&&p_("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Sw(t)),i.es(e,o,t,function(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=F_.fromTimestamp(1e9===r?new O_(n+1,0):new O_(n,r));return new G_(i,z_.empty(),t)}(r,-1)).next((function(e){return e})))}))}},{key:"Zi",value:function(e,t){var n=new pb(Tw(e));return t.forEach((function(t,r){Iw(e,r)&&(n=n.add(r))})),n}},{key:"Xi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ji",value:function(e,t,n){return v_()<=Gv.DEBUG&&p_("QueryEngine","Using full collection scan to execute query:",Sw(t)),this.zi.getDocumentsMatchingQuery(e,t,G_.min(),n)}},{key:"es",value:function(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}])}(),BC=function(){return y((function e(t,n,r,i){m(this,e),this.persistence=t,this.ts=n,this.serializer=i,this.ns=new hb(R_),this.rs=new Lw((function(e){return pw(e)}),mw),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}),[{key:"_s",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SC(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ns)}))}}])}();function zC(e,t){return qC.apply(this,arguments)}function qC(){return qC=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b_(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r._s(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Bw(),s=C(t);try{for(s.s();!(i=s.n()).done;){var l=i.value;a.push(l.batchId);var c,f=C(l.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,v=C(n);try{for(v.s();!(d=v.n()).done;){var p=d.value;o.push(p.batchId);var m,g=C(p.mutations);try{for(g.s();!(m=g.n()).done;){var y=m.value;u=u.add(y.key)}}catch(k){g.e(k)}finally{g.f()}}}catch(k){v.e(k)}finally{v.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{us:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),qC.apply(this,arguments)}function GC(e,t){var n=b_(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=$_.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);__(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Bw(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function HC(e){var t=b_(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Qr.getLastRemoteSnapshotVersion(e)}))}function WC(e,t){var n=b_(e),r=t.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Qr.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Qr.addMatchingKeys(e,a.addedDocuments,u)})));var l=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?l=l.withResumeToken(kb.EMPTY_BYTE_STRING,F_.min()).withLastLimboFreeSnapshotVersion(F_.min()):a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)),i=i.insert(u,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,l,a)&&o.push(n.Qr.updateTargetData(e,l))}}));var u=Dw(),s=Bw();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(function(e,t,n){var r=Bw(),i=Bw();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Dw();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(F_.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):p_("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{cs:r,ls:i}}))}(e,a,t.documentUpdates).next((function(e){u=e.cs,s=e.ls}))),!r.isEqual(F_.min())){var l=n.Qr.getLastRemoteSnapshotVersion(e).next((function(t){return n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(l)}return $_.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.ns=i,e}))}function KC(e,t){var n=b_(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function QC(e,t){var n=b_(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Qr.getTargetData(e,t).next((function(i){return i?(r=i,$_.resolve(r)):n.Qr.allocateTargetId(e).next((function(i){return r=new yC(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}function YC(e,t,n){return $C.apply(this,arguments)}function $C(){return $C=s(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=b_(t),a=i.ns.get(n),u=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",u,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),tb(e.t1)){e.next=12;break}throw e.t1;case 12:p_("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ns=i.ns.remove(n),i.rs.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),$C.apply(this,arguments)}function XC(e,t,n){var r=b_(e),i=F_.min(),a=Bw();return r.persistence.runTransaction("Execute query","readwrite",(function(e){return function(e,t,n){var r=b_(e),i=r.rs.get(n);return void 0!==i?$_.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,ww(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.ts.getDocumentsMatchingQuery(e,t,n?i:F_.min(),n?a:Bw())})).next((function(e){return function(e,t,n){var r=e.ss.get(t)||F_.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}(r,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,hs:a}}))}))}var JC=function(){return y((function e(){m(this,e),this.activeTargetIds=zw}),[{key:"As",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Rs",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"ds",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}])}(),ZC=function(){return y((function e(){m(this,e),this.no=new JC,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}),[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.no.As(e),this.ro[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.ro[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.no.Rs(e)}},{key:"isLocalQueryTarget",value:function(e){return this.no.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.ro[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.no.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.no.activeTargetIds.has(e)}},{key:"start",value:function(){return this.no=new JC,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}])}(),ex=function(){return y((function e(){m(this,e)}),[{key:"io",value:function(e){}},{key:"shutdown",value:function(){}}])}(),tx=function(){return y((function e(){var t=this;m(this,e),this.so=function(){return t.oo()},this._o=function(){return t.ao()},this.uo=[],this.co()}),[{key:"io",value:function(e){this.uo.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}},{key:"co",value:function(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}},{key:"oo",value:function(){p_("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=C(this.uo);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"ao",value:function(){p_("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=C(this.uo);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}])}(),nx=null;function rx(){return null===nx?nx=268435456+Math.round(2147483648*Math.random()):nx++,"0x"+nx.toString(16)
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */}var ix={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},ax=function(){return y((function e(t){m(this,e),this.lo=t.lo,this.ho=t.ho}),[{key:"Po",value:function(e){this.Io=e}},{key:"To",value:function(e){this.Eo=e}},{key:"onMessage",value:function(e){this.Ao=e}},{key:"close",value:function(){this.ho()}},{key:"send",value:function(e){this.lo(e)}},{key:"Ro",value:function(){this.Io()}},{key:"Vo",value:function(e){this.Eo(e)}},{key:"mo",value:function(e){this.Ao(e)}}])}(),ox="WebChannelConnection",ux=function(e){function t(e){var n;return m(this,t),(n=f(this,t,[e])).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n.longPollingOptions=e.longPollingOptions,n}return v(t,e),y(t,[{key:"Co",value:function(e,t,n,r){var i=rx();return new Promise((function(a,o){var u=new u_;u.setWithCredentials(!0),u.listenOnce(n_.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case t_.NO_ERROR:var t=u.getResponseJson();p_(ox,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case t_.TIMEOUT:p_(ox,"RPC '".concat(e,"' ").concat(i," timed out")),o(new E_(w_.DEADLINE_EXCEEDED,"Request time out"));break;case t_.HTTP_ERROR:var n=u.getStatus();if(p_(ox,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var l=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(w_).indexOf(t)>=0?t:w_.UNKNOWN}(s.status);o(new E_(l,s.message))}else o(new E_(w_.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new E_(w_.UNAVAILABLE,"Connection failed."));break;default:k_()}}finally{p_(ox,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);p_(ox,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"Fo",value:function(e,t,n){var r=rx(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=new Nk,o=Ag(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;void 0!==s&&(u.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var l=i.join("");p_(ox,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),u);var c=a.createWebChannel(l,u),f=!1,h=!1,d=new ax({lo:function(t){h?p_(ox,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(p_(ox,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),f=!0),p_(ox,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},ho:function(){return c.close()}}),v=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return v(c,o_.EventType.OPEN,(function(){h||p_(ox,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),v(c,o_.EventType.CLOSE,(function(){h||(h=!0,p_(ox,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.Vo())})),v(c,o_.EventType.ERROR,(function(t){h||(h=!0,g_(ox,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.Vo(new E_(w_.UNAVAILABLE,"The operation could not be completed")))})),v(c,o_.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];__(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){p_(ox,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=yE[e];if(void 0!==t)return IE(t)}(u),l=o.message;void 0===s&&(s=w_.INTERNAL,l="Unknown error status: "+u+" with message "+o.message),h=!0,d.Vo(new E_(s,l)),c.close()}else p_(ox,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d.mo(i)}})),v(o,r_.STAT_EVENT,(function(t){t.stat===i_?p_(ox,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===a_&&p_(ox,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.Ro()}),0),d}}])}(function(){return y((function e(t){m(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=n+"://"+t.host,this.po="projects/".concat(r,"/databases/").concat(i),this.yo="(default)"===this.databaseId.database?"project_id=".concat(r):"project_id=".concat(r,"&database_id=").concat(i)}),[{key:"wo",get:function(){return!1}},{key:"So",value:function(e,t,n,r,i){var a=rx(),o=this.bo(e,t.toUriEncodedString());p_("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(u,r,i),this.Co(e,o,u,n).then((function(t){return p_("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw g_("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"vo",value:function(e,t,n,r,i,a){return this.So(e,t,n,r,i)}},{key:"Do",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+h_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"bo",value:function(e,t){var n=ix[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}},{key:"terminate",value:function(){}}])}());
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function sx(){return"undefined"!=typeof document?document:null}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function lx(e){return new HE(e,!0)}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var cx=function(){return y((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;m(this,e),this.oi=t,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=a,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}),[{key:"reset",value:function(){this.No=0}},{key:"ko",value:function(){this.No=this.Oo}},{key:"qo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&p_("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,(function(){return t.Bo=Date.now(),e()})),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}},{key:"Ko",value:function(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}},{key:"cancel",value:function(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}},{key:"Qo",value:function(){return(Math.random()-.5)*this.No}}])}(),fx=function(){return y((function e(t,n,r,i,a,o,u,s){m(this,e),this.oi=t,this.$o=r,this.Uo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new cx(t,n)}),[{key:"Ho",value:function(){return 1===this.state||5===this.state||this.Jo()}},{key:"Jo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Yo()}},{key:"stop",value:(n=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Ho(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"Zo",value:function(){this.state=0,this.jo.reset()}},{key:"Xo",value:function(){var e=this;this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(function(){return e.e_()})))}},{key:"t_",value:function(e){this.n_(),this.stream.send(e)}},{key:"e_",value:(t=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Jo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"n_",value:function(){this.Go&&(this.Go.cancel(),this.Go=null)}},{key:"r_",value:function(){this.zo&&(this.zo.cancel(),this.zo=null)}},{key:"close",value:(e=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==t?this.jo.reset():n&&n.code===w_.RESOURCE_EXHAUSTED?(m_(n.toString()),m_("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===w_.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.To(n);case 9:case"end":return e.stop()}}),e,this)}))),function(t,n){return e.apply(this,arguments)})},{key:"i_",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=b(t,2),i=r[0],a=r[1];e.Wo===n&&e.o_(i,a)}),(function(n){t((function(){var t=new E_(w_.UNKNOWN,"Fetching auth token failed: "+n.message);return e.__(t)}))}))}},{key:"o_",value:function(e,t){var n=this,r=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((function(){r((function(){return n.state=2,n.zo=n.oi.enqueueAfterDelay(n.Uo,1e4,(function(){return n.Jo()&&(n.state=3),Promise.resolve()})),n.listener.Po()}))})),this.stream.To((function(e){r((function(){return n.__(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Yo",value:function(){var e=this;this.state=5,this.jo.qo(s(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"__",value:function(e){return p_("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"s_",value:function(e){var t=this;return function(n){t.oi.enqueueAndForget((function(){return t.Wo===e?n():(p_("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]);var e,t,n}(),hx=function(e){function t(e,n,r,i,a,o){var u;return m(this,t),(u=f(this,t,[e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o])).serializer=a,u}return v(t,e),y(t,[{key:"a_",value:function(e,t){return this.connection.Fo("Listen",e,t)}},{key:"onMessage",value:function(e){this.jo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:k_()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(__(void 0===t||"string"==typeof t),kb.fromBase64String(t||"")):(__(void 0===t||t instanceof Buffer||t instanceof Uint8Array),kb.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?w_.UNKNOWN:IE(e.code);return new E_(t,e.message||"")}(o);n=new FE(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var l=tC(e,s.document.name),c=$E(s.document.updateTime),f=s.document.createTime?$E(s.document.createTime):F_.min(),h=new qb({mapValue:{fields:s.document.fields}}),d=Hb.newFoundDocument(l,c,f,h),v=s.targetIds||[],p=s.removedTargetIds||[];n=new ME(v,p,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var g=tC(e,m.document),y=m.readTime?$E(m.readTime):F_.min(),k=Hb.newNoDocument(g,y),_=m.removedTargetIds||[];n=new ME([],_,k.key,k)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=tC(e,b.document),E=b.removedTargetIds||[];n=new ME([],E,w,null)}else{if(!("filter"in t))return k_();t.filter;var C=t.filter;C.targetId;var x=C.count,S=void 0===x?0:x,I=C.unchangedNames,T=new xE(S,I),A=C.targetId;n=new OE(A,T)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return F_.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?F_.min():t.readTime?$E(t.readTime):F_.min()}(e);return this.listener.u_(t,n)}},{key:"c_",value:function(e){var t={};t.database=rC(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=gw(r)?{documents:oC(e,r)}:{query:uC(e,r).ut}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=QE(e,t.resumeToken);var i=WE(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(F_.min())>0){n.readTime=KE(e,t.snapshotVersion.toTimestamp());var a=WE(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return k_()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}},{key:"l_",value:function(e){var t={};t.database=rC(this.serializer),t.removeTarget=e,this.t_(t)}}])}(fx),dx=function(e){function t(e,n,r,i,a,o){var u;return m(this,t),(u=f(this,t,[e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o])).serializer=a,u.h_=!1,u}return v(t,e),y(t,[{key:"P_",get:function(){return this.h_}},{key:"start",value:function(){this.h_=!1,this.lastStreamToken=void 0,r(d(t.prototype),"start",this).call(this)}},{key:"i_",value:function(){this.h_&&this.I_([])}},{key:"a_",value:function(e,t){return this.connection.Fo("Write",e,t)}},{key:"onMessage",value:function(e){if(__(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();var t=function(e,t){return e&&e.length>0?(__(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?$E(e.updateTime):$E(t);return n.isEqual(F_.min())&&(n=$E(t)),new iE(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=$E(e.commitTime);return this.listener.T_(n,t)}return __(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}},{key:"d_",value:function(){var e={};e.database=rC(this.serializer),this.t_(e)}},{key:"I_",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return function(e,t){var n;if(t instanceof dE)n={update:aC(e,t.key,t.value)};else if(t instanceof _E)n={delete:eC(e,t.key)};else if(t instanceof vE)n={update:aC(e,t.key,t.data),updateMask:mC(t.fieldMask)};else{if(!(t instanceof bE))return k_();n={verify:eC(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof $w)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Xw)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Zw)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof tE)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw k_()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:YE(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:k_()}(e,t.precondition)),n}(t.serializer,e)}))};this.t_(n)}}])}(fx),vx=function(e){function t(e,n,r,i){var a;return m(this,t),(a=f(this,t)).authCredentials=e,a.appCheckCredentials=n,a.connection=r,a.serializer=i,a.A_=!1,a}return v(t,e),y(t,[{key:"R_",value:function(){if(this.A_)throw new E_(w_.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"So",value:function(e,t,n,r){var i=this;return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=b(a,2),u=o[0],s=o[1];return i.connection.So(e,JE(t,n),r,u,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===w_.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new E_(w_.UNKNOWN,e.toString())}))}},{key:"vo",value:function(e,t,n,r,i){var a=this;return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(o){var u=b(o,2),s=u[0],l=u[1];return a.connection.vo(e,JE(t,n),r,s,l,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===w_.UNAUTHENTICATED&&(a.authCredentials.invalidateToken(),a.appCheckCredentials.invalidateToken()),e):new E_(w_.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.A_=!0,this.connection.terminate()}}])}(y((function e(){m(this,e)}))),px=function(){return y((function e(t,n){m(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}),[{key:"p_",value:function(){var e=this;0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.f_=null,e.w_("Backend didn't respond within 10 seconds."),e.y_("Offline"),Promise.resolve()})))}},{key:"S_",value:function(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}},{key:"set",value:function(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}},{key:"y_",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"w_",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(m_(t),this.g_=!1):p_("OnlineStateTracker",t)}},{key:"b_",value:function(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}])}(),mx=y((function e(t,n,r,i,a){var u=this;m(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=a,this.M_.io((function(e){r.enqueueAndForget(s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Ix(u),!e.t0){e.next=5;break}return p_("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=b_(t)).v_.add(4),e.next=4,kx(n);case 4:return n.x_.set("Unknown"),n.v_.delete(4),e.next=8,gx(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(u);case 5:case"end":return e.stop()}}),e)}))))})),this.x_=new px(r,i)}));
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function gx(e){return yx.apply(this,arguments)}function yx(){return yx=s(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ix(t)){e.next=18;break}n=C(t.F_),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),yx.apply(this,arguments)}function kx(e){return _x.apply(this,arguments)}function _x(){return _x=s(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=C(t.F_),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),_x.apply(this,arguments)}function bx(e,t){var n=b_(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),Sx(n)?xx(n):nS(n).Jo()&&Ex(n,t))}function wx(e,t){var n=b_(e),r=nS(n);n.C_.delete(t),r.Jo()&&Cx(n,t),0===n.C_.size&&(r.Jo()?r.Xo():Ix(n)&&n.x_.set("Unknown"))}function Ex(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(F_.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}nS(e).c_(t)}function Cx(e,t){e.O_.Oe(t),nS(e).l_(t)}function xx(e){e.O_=new VE({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},_t:function(t){return e.C_.get(t)||null},nt:function(){return e.datastore.serializer.databaseId}}),nS(e).start(),e.x_.p_()}function Sx(e){return Ix(e)&&!nS(e).Ho()&&e.C_.size>0}function Ix(e){return 0===b_(e).v_.size}function Tx(e){e.O_=void 0}function Ax(e){return Lx.apply(this,arguments)}function Lx(){return Lx=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.C_.forEach((function(e,n){Ex(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Lx.apply(this,arguments)}function Nx(e,t){return Dx.apply(this,arguments)}function Dx(){return Dx=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Tx(t),Sx(t)?(t.x_.S_(n),xx(t)):t.x_.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Dx.apply(this,arguments)}function Px(e,t,n){return Rx.apply(this,arguments)}function Rx(){return Rx=s(o().mark((function e(t,n,r){var i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.x_.set("Online"),!(n instanceof FE&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=s(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=C(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(u=a.value,e.t0=t.C_.has(u),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(u,r);case 10:t.C_.delete(u),t.O_.removeTarget(u);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),p_("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Mx(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof ME?t.O_.$e(n):n instanceof OE?t.O_.Je(n):t.O_.Ge(n),r.isEqual(F_.min())){e.next=29;break}return e.prev=14,e.next=17,HC(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.O_.it(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.C_.get(t);if(r){e.C_.set(t,r.withResumeToken(kb.EMPTY_BYTE_STRING,r.snapshotVersion)),Cx(e,t);var i=new yC(r.target,t,n,r.sequenceNumber);Ex(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),p_("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Mx(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Rx.apply(this,arguments)}function Mx(e,t,n){return Ox.apply(this,arguments)}function Ox(){return Ox=s(o().mark((function e(t,n,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(tb(n)){e.next=2;break}throw n;case 2:return t.v_.add(1),e.next=5,kx(t);case 5:t.x_.set("Offline"),r||(r=function(){return HC(t.localStore)}),t.asyncQueue.enqueueRetryable(s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p_("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.v_.delete(1),e.next=6,gx(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Ox.apply(this,arguments)}function Fx(e,t){return t().catch((function(n){return Mx(e,n,t)}))}function Ux(e){return Vx.apply(this,arguments)}function Vx(){return Vx=s(o().mark((function e(t){var n,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=b_(t),r=rS(n),i=n.D_.length>0?n.D_[n.D_.length-1].batchId:-1;case 2:if(!jx(n)){e.next=19;break}return e.prev=3,e.next=6,KC(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.D_.length&&r.Xo(),e.abrupt("break",19);case 10:i=a.batchId,Bx(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Mx(n,e.t0);case 17:e.next=2;break;case 19:zx(n)&&qx(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Vx.apply(this,arguments)}function jx(e){return Ix(e)&&e.D_.length<10}function Bx(e,t){e.D_.push(t);var n=rS(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function zx(e){return Ix(e)&&!rS(e).Ho()&&e.D_.length>0}function qx(e){rS(e).start()}function Gx(e){return Hx.apply(this,arguments)}function Hx(){return(Hx=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:rS(t).d_();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wx(e){return Kx.apply(this,arguments)}function Kx(){return Kx=s(o().mark((function e(t){var n,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=rS(t),r=C(t.D_);try{for(r.s();!(i=r.n()).done;)a=i.value,n.I_(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Kx.apply(this,arguments)}function Qx(e,t,n){return Yx.apply(this,arguments)}function Yx(){return Yx=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.D_.shift(),a=EE.from(i,n,r),e.next=3,Fx(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Ux(t);case 5:case"end":return e.stop()}}),e)}))),Yx.apply(this,arguments)}function $x(e,t){return Xx.apply(this,arguments)}function Xx(){return Xx=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&rS(t).P_,!e.t0){e.next=4;break}return e.next=4,function(){var e=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!function(e){return SE(e)&&e!==w_.ABORTED}(n.code)){e.next=7;break}return r=t.D_.shift(),rS(t).Zo(),e.next=5,Fx(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Ux(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:zx(t)&&qx(t);case 5:case"end":return e.stop()}}),e)}))),Xx.apply(this,arguments)}function Jx(e,t){return Zx.apply(this,arguments)}function Zx(){return Zx=s(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=b_(t)).asyncQueue.verifyOperationInProgress(),p_("RemoteStore","RemoteStore received new credentials"),i=Ix(r),r.v_.add(3),e.next=6,kx(r);case 6:return i&&r.x_.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.v_.delete(3),e.next=12,gx(r);case 12:case"end":return e.stop()}}),e)}))),Zx.apply(this,arguments)}function eS(e,t){return tS.apply(this,arguments)}function tS(){return tS=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=b_(t),!n){e.next=7;break}return r.v_.delete(2),e.next=5,gx(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.v_.add(2),e.next=12,kx(r);case 12:r.x_.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),tS.apply(this,arguments)}function nS(e){return e.N_||(e.N_=function(e,t,n){var r=b_(e);return r.R_(),new hx(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)
/**
             * @license
             * Copyright 2018 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */}(e.datastore,e.asyncQueue,{Po:Ax.bind(null,e),To:Nx.bind(null,e),u_:Px.bind(null,e)}),e.F_.push(function(){var t=s(o().mark((function t(n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.N_.Zo(),Sx(e)?xx(e):e.x_.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.N_.stop();case 6:Tx(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.N_}function rS(e){return e.L_||(e.L_=function(e,t,n){var r=b_(e);return r.R_(),new dx(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Gx.bind(null,e),To:$x.bind(null,e),E_:Wx.bind(null,e),T_:Qx.bind(null,e)}),e.F_.push(function(){var t=s(o().mark((function t(n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.L_.Zo(),t.next=4,Ux(e);case 4:t.next=9;break;case 6:return t.next=8,e.L_.stop();case 8:e.D_.length>0&&(p_("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.L_
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */}var iS=function(){function e(t,n,r,i,a){m(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new C_,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return y(e,[{key:"promise",get:function(){return this.deferred.promise}},{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new E_(w_.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}])}();function aS(e,t){if(m_("AsyncQueue","".concat(t,": ").concat(e)),tb(e))return new E_(w_.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var oS,uS,sS=function(){function e(t){m(this,e),this.comparator=t?function(e,n){return t(e,n)||z_.comparator(e.key,n.key)}:function(e,t){return z_.comparator(e.key,t.key)},this.keyedMap=Rw(),this.sortedSet=new hb(this.comparator)}return y(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}])}(),lS=function(){return y((function e(){m(this,e),this.B_=new hb(z_.comparator)}),[{key:"track",value:function(e){var t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):k_():this.B_=this.B_.insert(t,e)}},{key:"k_",value:function(){var e=[];return this.B_.inorderTraversal((function(t,n){e.push(n)})),e}}])}(),cS=function(){function e(t,n,r,i,a,o,u,s,l){m(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=l}return y(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,sS.emptySet(n),o,r,i,!0,!1,a)}}])}(),fS=function(){return y((function e(){m(this,e),this.q_=void 0,this.Q_=[]}),[{key:"K_",value:function(){return this.Q_.some((function(e){return e.U_()}))}}])}(),hS=y((function e(){m(this,e),this.queries=new Lw((function(e){return xw(e)}),Cw),this.onlineState="Unknown",this.W_=new Set}));
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function dS(e,t){return vS.apply(this,arguments)}function vS(){return vS=s(o().mark((function e(t,n){var r,i,a,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=b_(t),i=3,a=n.query,(u=r.queries.get(a))?!u.K_()&&n.U_()&&(i=2):(u=new fS,i=n.U_()?0:1),e.prev=5,e.t0=i,e.next=0===e.t0?9:1===e.t0?13:2===e.t0?17:19;break;case 9:return e.next=11,r.onListen(a,!0);case 11:return u.q_=e.sent,e.abrupt("break",19);case 13:return e.next=15,r.onListen(a,!1);case 15:return u.q_=e.sent,e.abrupt("break",19);case 17:return e.next=19,r.onFirstRemoteStoreListen(a);case 19:e.next=25;break;case 21:return e.prev=21,e.t1=e.catch(5),s=aS(e.t1,"Initialization of query '".concat(Sw(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 25:r.queries.set(a,u),u.Q_.push(n),n.G_(r.onlineState),u.q_&&n.z_(u.q_)&&kS(r);case 26:case"end":return e.stop()}}),e,null,[[5,21]])}))),vS.apply(this,arguments)}function pS(e,t){return mS.apply(this,arguments)}function mS(){return mS=s(o().mark((function e(t,n){var r,i,a,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=b_(t),i=n.query,a=3,(u=r.queries.get(i))&&(s=u.Q_.indexOf(n))>=0&&(u.Q_.splice(s,1),0===u.Q_.length?a=n.U_()?0:1:!u.K_()&&n.U_()&&(a=2)),e.t0=a,e.next=0===e.t0?7:1===e.t0?8:2===e.t0?9:10;break;case 7:return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i,!0)));case 8:return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i,!1)));case 9:return e.abrupt("return",r.onLastRemoteStoreUnlisten(i));case 10:return e.abrupt("return");case 11:case"end":return e.stop()}}),e)}))),mS.apply(this,arguments)}function gS(e,t){var n,r=b_(e),i=!1,a=C(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var l,c=C(s.Q_);try{for(c.s();!(l=c.n()).done;){l.value.z_(o)&&(i=!0)}}catch(f){c.e(f)}finally{c.f()}s.q_=o}}}catch(f){a.e(f)}finally{a.f()}i&&kS(r)}function yS(e,t,n){var r=b_(e),i=r.queries.get(t);if(i){var a,o=C(i.Q_);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function kS(e){e.W_.forEach((function(e){e.next()}))}(uS=oS||(oS={})).j_="default",uS.Cache="cache";var _S=function(){return y((function e(t,n,r){m(this,e),this.query=t,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}),[{key:"z_",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=C(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new cS(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),a=!0):this.X_(e,this.onlineState)&&(this.ea(e),a=!0),this.Y_=e,a}},{key:"onError",value:function(e){this.H_.error(e)}},{key:"G_",value:function(e){this.onlineState=e;var t=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),t=!0),t}},{key:"X_",value:function(e,t){if(!e.fromCache)return!0;if(!this.U_())return!0;var n="Offline"!==t;return(!this.options.ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Z_",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"ea",value:function(e){e=cS.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}},{key:"U_",value:function(){return this.options.source!==oS.Cache}}])}(),bS=y((function e(t){m(this,e),this.key=t})),wS=y((function e(t){m(this,e),this.key=t})),ES=function(){return y((function e(t,n){m(this,e),this.query=t,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=Bw(),this.mutatedKeys=Bw(),this.ha=Tw(t),this.Pa=new sS(this.ha)}),[{key:"Ia",get:function(){return this.ua}},{key:"Ta",value:function(e,t){var n=this,r=t?t.Ea:new lS,i=t?t.Pa:this.Pa,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var c=i.get(e),f=Iw(n.query,t)?t:null,h=!!c&&n.mutatedKeys.has(c.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),v=!1;c&&f?c.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),v=!0):n.da(c,f)||(r.track({type:2,doc:f}),v=!0,(s&&n.ha(f,s)>0||l&&n.ha(f,l)<0)&&(u=!0)):!c&&f?(r.track({type:0,doc:f}),v=!0):c&&!f&&(r.track({type:1,doc:c}),v=!0,(s||l)&&(u=!0)),v&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var c="F"===this.query.limitType?o.last():o.first();o=o.delete(c.key),a=a.delete(c.key),r.track({type:1,doc:c})}return{Pa:o,Ea:r,Xi:u,mutatedKeys:a}}},{key:"da",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n,r){var i=this,a=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;var o=e.Ea.k_();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return k_()}};return n(e)-n(t)}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(e.type,t.type)||i.ha(e.doc,t.doc)})),this.Aa(n),r=null!=r&&r;var u=t&&!r?this.Ra():[],s=0===this.la.size&&this.current&&!r?1:0,l=s!==this.ca;return this.ca=s,0!==o.length||l?{snapshot:new cS(this.query,e.Pa,a,o,e.mutatedKeys,0===s,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Va:u}:{Va:u}}},{key:"G_",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new lS,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}},{key:"ma",value:function(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}},{key:"Aa",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.ua=t.ua.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.ua=t.ua.delete(e)})),this.current=e.current)}},{key:"Ra",value:function(){var e=this;if(!this.current)return[];var t=this.la;this.la=Bw(),this.Pa.forEach((function(t){e.ma(t.key)&&(e.la=e.la.add(t.key))}));var n=[];return t.forEach((function(t){e.la.has(t)||n.push(new wS(t))})),this.la.forEach((function(e){t.has(e)||n.push(new bS(e))})),n}},{key:"fa",value:function(e){this.ua=e.hs,this.la=Bw();var t=this.Ta(e.documents);return this.applyChanges(t,!0)}},{key:"ga",value:function(){return cS.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,0===this.ca,this.hasCachedResults)}}])}(),CS=y((function e(t,n,r){m(this,e),this.query=t,this.targetId=n,this.view=r})),xS=y((function e(t){m(this,e),this.key=t,this.pa=!1})),SS=function(){return y((function e(t,n,r,i,a,o){m(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new Lw((function(e){return xw(e)}),Cw),this.Sa=new Map,this.ba=new Set,this.Da=new hb(z_.comparator),this.Ca=new Map,this.va=new AC,this.Fa={},this.Ma=new Map,this.xa=EC.Ln(),this.onlineState="Unknown",this.Oa=void 0}),[{key:"isPrimaryClient",get:function(){return!0===this.Oa}}])}();
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function IS(e,t){return TS.apply(this,arguments)}function TS(){return TS=s(o().mark((function e(t,n){var r,i,a,u,s=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!(s.length>2&&void 0!==s[2])||s[2],i=sI(t),!(u=i.wa.get(n))){e.next=7;break}i.sharedClientState.addLocalQueryTarget(u.targetId),a=u.view.ga(),e.next=10;break;case 7:return e.next=9,NS(i,n,r,!0);case 9:a=e.sent;case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)}))),TS.apply(this,arguments)}function AS(e,t){return LS.apply(this,arguments)}function LS(){return LS=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=sI(t),e.next=3,NS(r,n,!0,!1);case 3:case"end":return e.stop()}}),e)}))),LS.apply(this,arguments)}function NS(e,t,n,r){return DS.apply(this,arguments)}function DS(){return DS=s(o().mark((function e(t,n,r,i){var a,u,s,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,QC(t.localStore,ww(n));case 2:if(a=e.sent,u=a.targetId,s=r?t.sharedClientState.addLocalQueryTarget(u):"not-current",e.t0=i,!e.t0){e.next=10;break}return e.next=9,PS(t,n,u,"current"===s,a.resumeToken);case 9:l=e.sent;case 10:return t.isPrimaryClient&&r&&bx(t.remoteStore,a),e.abrupt("return",l);case 12:case"end":return e.stop()}}),e)}))),DS.apply(this,arguments)}function PS(e,t,n,r,i){return RS.apply(this,arguments)}function RS(){return RS=s(o().mark((function e(t,n,r,i,a){var u,l,c,f,h,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Na=function(e,n,r){return(i=s(o().mark((function e(t,n,r,i){var a,u,s,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Ta(r),e.t0=a.Xi,!e.t0){e.next=6;break}return e.next=5,XC(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ta(t,a)}));case 5:a=e.sent;case 6:return u=i&&i.targetChanges.get(n.targetId),s=i&&null!=i.targetMismatches.get(n.targetId),l=n.view.applyChanges(a,t.isPrimaryClient,u,s),e.abrupt("return",(eI(t,n.targetId,l.Va),l.snapshot));case 8:case"end":return e.stop()}}),e)}))),function(e,t,n,r){return i.apply(this,arguments)})(t,e,n,r);var i},e.next=3,XC(t.localStore,n,!0);case 3:return u=e.sent,l=new ES(n,u.hs),c=l.Ta(u.documents),f=RE.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),h=l.applyChanges(c,t.isPrimaryClient,f),eI(t,r,h.Va),d=new CS(n,r,l),e.abrupt("return",(t.wa.set(n,d),t.Sa.has(r)?t.Sa.get(r).push(n):t.Sa.set(r,[n]),h.snapshot));case 11:case"end":return e.stop()}}),e)}))),RS.apply(this,arguments)}function MS(e,t,n){return OS.apply(this,arguments)}function OS(){return OS=s(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=b_(t),a=i.wa.get(n),!((u=i.Sa.get(a.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(i.Sa.set(a.targetId,u.filter((function(e){return!Cw(e,n)}))),void i.wa.delete(n)));case 3:if(!i.isPrimaryClient){e.next=11;break}if(i.sharedClientState.removeLocalQueryTarget(a.targetId),e.t0=i.sharedClientState.isActiveQueryTarget(a.targetId),e.t0){e.next=9;break}return e.next=9,YC(i.localStore,a.targetId,!1).then((function(){i.sharedClientState.clearQueryState(a.targetId),r&&wx(i.remoteStore,a.targetId),JS(i,a.targetId)})).catch(Q_);case 9:e.next=14;break;case 11:return JS(i,a.targetId),e.next=14,YC(i.localStore,a.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),OS.apply(this,arguments)}function FS(e,t){return US.apply(this,arguments)}function US(){return US=s(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=b_(t),i=r.wa.get(n),a=r.Sa.get(i.targetId),r.isPrimaryClient&&1===a.length&&(r.sharedClientState.removeLocalQueryTarget(i.targetId),wx(r.remoteStore,i.targetId));case 2:case"end":return e.stop()}}),e)}))),US.apply(this,arguments)}function VS(e,t,n){return jS.apply(this,arguments)}function jS(){return jS=s(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=lI(t),e.prev=1,e.next=4,function(e,t){var n,r,i=b_(e),a=O_.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Bw());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Dw(),s=Bw();return i.os.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=C(t);try{for(s.s();!(o=s.n()).done;){var l=o.value,c=fE(l,n.get(l.key).overlayedDocument);null!=c&&u.push(new vE(l.key,c,Gb(c.value.mapValue),aE.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Mw(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Fa[e.currentUser.toKey()];r||(r=new hb(R_)),r=r.insert(t,n),e.Fa[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,rI(i,a.changes);case 9:return e.next=11,Ux(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),u=aS(e.t0,"Failed to persist write"),r.reject(u);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),jS.apply(this,arguments)}function BS(e,t){return zS.apply(this,arguments)}function zS(){return zS=s(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b_(t),e.prev=1,e.next=4,WC(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Ca.get(t);n&&(__(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.pa=!0:e.modifiedDocuments.size>0?__(n.pa):e.removedDocuments.size>0&&(__(n.pa),n.pa=!1))})),e.next=8,rI(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Q_(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),zS.apply(this,arguments)}function qS(e,t,n){var r=b_(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.wa.forEach((function(e,n){var r=n.view.G_(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=b_(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=C(n.Q_);try{for(a.s();!(i=a.n()).done;){i.value.G_(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&kS(n)}(r.eventManager,t),i.length&&r.ya.u_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function GS(e,t,n){return HS.apply(this,arguments)}function HS(){return HS=s(o().mark((function e(t,n,r){var i,a,u,s,l,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=b_(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Ca.get(n),!(u=a&&a.key)){e.next=14;break}return s=(s=new hb(z_.comparator)).insert(u,Hb.newNoDocument(u,F_.min())),l=Bw().add(u),c=new PE(F_.min(),new Map,new hb(R_),s,l),e.next=9,BS(i,c);case 9:i.Da=i.Da.remove(u),i.Ca.delete(n),nI(i),e.next=16;break;case 14:return e.next=16,YC(i.localStore,n,!1).then((function(){return JS(i,n,r)})).catch(Q_);case 16:case"end":return e.stop()}}),e)}))),HS.apply(this,arguments)}function WS(e,t){return KS.apply(this,arguments)}function KS(){return KS=s(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b_(t),i=n.batch.batchId,e.prev=1,e.next=4,GC(r.localStore,n);case 4:return a=e.sent,XS(r,i,null),$S(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,rI(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Q_(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),KS.apply(this,arguments)}function QS(e,t,n){return YS.apply(this,arguments)}function YS(){return YS=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=b_(t),e.prev=1,e.next=4,function(e,t){var n=b_(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return __(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,XS(i,n,r),$S(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,rI(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Q_(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),YS.apply(this,arguments)}function $S(e,t){(e.Ma.get(t)||[]).forEach((function(e){e.resolve()})),e.Ma.delete(t)}function XS(e,t,n){var r=b_(e),i=r.Fa[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Fa[r.currentUser.toKey()]=i}}function JS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=C(e.Sa.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.wa.delete(a),n&&e.ya.La(a,n)}}catch(o){i.e(o)}finally{i.f()}e.Sa.delete(t),e.isPrimaryClient&&e.va.Vr(t).forEach((function(t){e.va.containsKey(t)||ZS(e,t)}))}function ZS(e,t){e.ba.delete(t.path.canonicalString());var n=e.Da.get(t);null!==n&&(wx(e.remoteStore,n),e.Da=e.Da.remove(t),e.Ca.delete(n),nI(e))}function eI(e,t,n){var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof bS?(e.va.addReference(a.key,t),tI(e,a)):a instanceof wS?(p_("SyncEngine","Document no longer in limbo: "+a.key),e.va.removeReference(a.key,t),e.va.containsKey(a.key)||ZS(e,a.key)):k_()}}catch(o){i.e(o)}finally{i.f()}}function tI(e,t){var n=t.key,r=n.path.canonicalString();e.Da.get(n)||e.ba.has(r)||(p_("SyncEngine","New document in limbo: "+n),e.ba.add(r),nI(e))}function nI(e){for(;e.ba.size>0&&e.Da.size<e.maxConcurrentLimboResolutions;){var t=e.ba.values().next().value;e.ba.delete(t);var n=new z_(V_.fromString(t)),r=e.xa.next();e.Ca.set(r,new xS(n)),e.Da=e.Da.insert(n,r),bx(e.remoteStore,new yC(ww(kw(n.path)),r,"TargetPurposeLimboResolution",ob._e))}}function rI(e,t,n){return iI.apply(this,arguments)}function iI(){return iI=s(o().mark((function e(t,n,r){var i,a,u,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=b_(t),a=[],u=[],l=[],e.t0=i.wa.isEmpty(),e.t0){e.next=9;break}return i.wa.forEach((function(e,t){l.push(i.Na(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=UC.Ki(t.targetId,e);u.push(n)}})))})),e.next=6,Promise.all(l);case 6:return i.ya.u_(a),e.next=9,function(){var e=s(o().mark((function e(t,n){var r,i,a,u,s,l,c,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b_(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return $_.forEach(n,(function(t){return $_.forEach(t.qi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return $_.forEach(t.Qi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),tb(e.t0)){e.next=10;break}throw e.t0;case 10:p_("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=C(n);try{for(i.s();!(a=i.n()).done;)u=a.value,s=u.targetId,u.fromCache||(l=r.ns.get(s),c=l.snapshotVersion,f=l.withLastLimboFreeSnapshotVersion(c),r.ns=r.ns.insert(s,f))}catch(o){i.e(o)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,u);case 9:case"end":return e.stop()}}),e)}))),iI.apply(this,arguments)}function aI(e,t){return oI.apply(this,arguments)}function oI(){return oI=s(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=b_(t)).currentUser.isEqual(n)){e.next=11;break}return p_("SyncEngine","User change. New user:",n.toKey()),e.next=5,zC(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Ma.forEach((function(e){e.forEach((function(e){e.reject(new E_(w_.CANCELLED,t))}))})),e.Ma.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,rI(r,i.us);case 11:case"end":return e.stop()}}),e)}))),oI.apply(this,arguments)}function uI(e,t){var n=b_(e),r=n.Ca.get(t);if(r&&r.pa)return Bw().add(r.key);var i=Bw(),a=n.Sa.get(t);if(!a)return i;var o,u=C(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,l=n.wa.get(s);i=i.unionWith(l.view.Ia)}}catch(c){u.e(c)}finally{u.f()}return i}function sI(e){var t=b_(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=BS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=uI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=GS.bind(null,t),t.ya.u_=gS.bind(null,t.eventManager),t.ya.La=yS.bind(null,t.eventManager),t}function lI(e){var t=b_(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=WS.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=QS.bind(null,t),t}var cI=function(){return y((function e(){m(this,e),this.synchronizeTabs=!1}),[{key:"initialize",value:(t=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=lx(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return function(e,t,n,r){return new BC(e,t,n,r)}(this.persistence,new jC,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new MC(FC.Hr,this.serializer)}},{key:"createSharedClientState",value:function(e){return new ZC}},{key:"terminate",value:(e=s(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(n=this.indexBackfillerScheduler)||void 0===n||n.stop(),this.sharedClientState.shutdown(),e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})}]);var e,t}(),fI=function(){return y((function e(){m(this,e)}),[{key:"initialize",value:(t=s(o().mark((function e(t,n){var r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return qS(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=aI.bind(null,this.syncEngine),e.next=12,eS(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"createEventManager",value:function(e){return new hS}},{key:"createDatastore",value:function(e){var t=lx(e.databaseInfo.databaseId),n=function(e){return new ux(e)}(e.databaseInfo);return function(e,t,n,r){return new vx(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}},{key:"createRemoteStore",value:function(e){var t=this;return function(e,t,n,r,i){return new mx(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(function(e){return qS(t.syncEngine,e,0)}),tx.D()?new tx:new ex)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new SS(e,t,n,r,i,a);return o&&(u.Oa=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:(e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b_(t),p_("RemoteStore","RemoteStore shutting down."),n.v_.add(5),e.next=5,kx(n);case 5:n.M_.shutdown(),n.x_.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore);case 2:null===(t=this.datastore)||void 0===t||t.terminate();case 3:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})}]);var e,t}(),hI=function(){return y((function e(t){m(this,e),this.observer=t,this.muted=!1}),[{key:"next",value:function(e){this.observer.next&&this.qa(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.qa(this.observer.error,e):m_("Uncaught Error in snapshot listener:",e.toString())}},{key:"Qa",value:function(){this.muted=!0}},{key:"qa",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}])}(),dI=function(){return y((function e(t,n,r,i){var a=this;m(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=f_.UNAUTHENTICATED,this.clientId=P_.newId(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p_("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return p_("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}),[{key:"configuration",get:function(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new E_(w_.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new C_;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(s(o().mark((function n(){var r;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=aS(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}])}();function vI(e,t){return pI.apply(this,arguments)}function pI(){return pI=s(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),p_("FirestoreClient","Initializing OfflineComponentProvider"),r=t.configuration,e.next=4,n.initialize(r);case 4:i=r.initialUser,t.setCredentialChangeListener(function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,zC(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 6:case"end":return e.stop()}}),e)}))),pI.apply(this,arguments)}function mI(e,t){return gI.apply(this,arguments)}function gI(){return gI=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,kI(t);case 3:return r=e.sent,p_("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,n.initialize(r,t.configuration);case 7:t.setCredentialChangeListener((function(e){return Jx(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Jx(n.remoteStore,t)})),t._onlineComponents=n;case 10:case"end":return e.stop()}}),e)}))),gI.apply(this,arguments)}function yI(e){return"FirebaseError"===e.name?e.code===w_.FAILED_PRECONDITION||e.code===w_.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function kI(e){return _I.apply(this,arguments)}function _I(){return(_I=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return p_("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,vI(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),yI(n=e.t0)){e.next=13;break}throw n;case 13:return g_("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,vI(t,new cI);case 16:e.next=21;break;case 18:return p_("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,vI(t,new cI);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function bI(e){return wI.apply(this,arguments)}function wI(){return(wI=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return p_("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,mI(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return p_("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,mI(t,new fI);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function EI(e){return bI(e).then((function(e){return e.syncEngine}))}function CI(e){return xI.apply(this,arguments)}function xI(){return xI=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bI(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=IS.bind(null,n.syncEngine),r.onUnlisten=MS.bind(null,n.syncEngine),r.onFirstRemoteStoreListen=AS.bind(null,n.syncEngine),r.onLastRemoteStoreUnlisten=FS.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),xI.apply(this,arguments)}
/**
             * @license
             * Copyright 2023 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function SI(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */}var II=new Map;
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function TI(e,t,n){if(!n)throw new E_(w_.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function AI(e){if(!z_.isDocumentKey(e))throw new E_(w_.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function LI(e){if(z_.isDocumentKey(e))throw new E_(w_.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function NI(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==E(e)){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":k_()}function DI(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new E_(w_.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=NI(e);throw new E_(w_.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var PI=function(){return y((function e(t){var n,r;if(m(this,e),void 0===t.host){if(void 0!==t.ssl)throw new E_(w_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new E_(w_.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new E_(w_.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=SI(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new E_(w_.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new E_(w_.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new E_(w_.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}),[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}])}(),RI=function(){return y((function e(t,n,r,i){m(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new PI({}),this._settingsFrozen=!1}),[{key:"app",get:function(){if(!this._app)throw new E_(w_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new E_(w_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new PI(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new S_;switch(e.type){case"firstParty":return new A_(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new E_(w_.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=II.get(e);t&&(p_("ComponentProvider","Removing Datastore"),II.delete(e),t.terminate())}(this),Promise.resolve()}}])}(),MI=function(){function e(t,n,r){m(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return y(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}])}(),OI=function(){function e(t,n,r){m(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return y(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new FI(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}])}(),FI=function(e){function t(e,n,r){var i;return m(this,t),(i=f(this,t,[e,n,kw(r)]))._path=r,i.type="collection",i}return v(t,e),y(t,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new OI(this.firestore,null,new z_(e))}},{key:"withConverter",value:function(e){return new t(this.firestore,e,this._path)}}])}(MI);function UI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=jv(e),TI("collection","path",t),e instanceof RI){var a=V_.fromString.apply(V_,[t].concat(r));return LI(a),new FI(e,null,a)}if(!(e instanceof OI||e instanceof FI))throw new E_(w_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(V_.fromString.apply(V_,[t].concat(r)));return LI(o),new FI(e.firestore,null,o)}function VI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=jv(e),1===arguments.length&&(t=P_.newId()),TI("doc","path",t),e instanceof RI){var a=V_.fromString.apply(V_,[t].concat(r));return AI(a),new OI(e,null,new z_(a))}if(!(e instanceof OI||e instanceof FI))throw new E_(w_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(V_.fromString.apply(V_,[t].concat(r)));return AI(o),new OI(e.firestore,e instanceof FI?e.converter:null,new z_(o))}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var jI=function(){return y((function e(){var t=this;m(this,e),this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new cx(this,"async_queue_retry"),this.cu=function(){var e=sx();e&&p_("AsyncQueue","Visibility state changed to "+e.visibilityState),t.jo.Ko()};var n=sx();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.cu)}),[{key:"isShuttingDown",get:function(){return this.iu}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.lu(),this.hu(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.iu){this.iu=!0,this.au=e||!1;var t=sx();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.cu)}}},{key:"enqueue",value:function(e){var t=this;if(this.lu(),this.iu)return new Promise((function(){}));var n=new C_;return this.hu((function(){return t.iu&&t.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.ru.push(e),t.Pu()}))}},{key:"Pu",value:(t=s(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.ru.length){e.next=14;break}return e.prev=1,e.next=4,this.ru[0]();case 4:this.ru.shift(),this.jo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),tb(e.t0)){e.next=12;break}throw e.t0;case 12:p_("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.ru.length>0&&this.jo.qo((function(){return t.Pu()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(){return t.apply(this,arguments)})},{key:"hu",value:function(e){var t=this,n=this.nu.then((function(){return t._u=!0,e().catch((function(e){t.ou=e,t._u=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(e);throw m_("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t._u=!1,e}))}));return this.nu=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.lu(),this.uu.indexOf(e)>-1&&(t=0);var i=iS.createAndSchedule(this,e,t,n,(function(e){return r.Iu(e)}));return this.su.push(i),i}},{key:"lu",value:function(){this.ou&&k_()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Tu",value:(e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.nu,e.next=3,t;case 3:if(t!==this.nu){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})},{key:"Eu",value:function(e){var t,n=C(this.su);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"du",value:function(e){var t=this;return this.Tu().then((function(){t.su.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=C(t.su);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Tu()}))}},{key:"Au",value:function(e){this.uu.push(e)}},{key:"Iu",value:function(e){var t=this.su.indexOf(e);this.su.splice(t,1)}}]);var e,t}();function BI(e){return function(e,t){if("object"!=E(e)||null===e)return!1;var n,r=e,i=C(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(e,["next","error","complete"])}var zI=function(e){function t(e,n,r,i){var a;return m(this,t),(a=f(this,t,[e,n,r,i])).type="firestore",a._queue=new jI,a._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]",a}return v(t,e),y(t,[{key:"_terminate",value:function(){return this._firestoreClient||GI(this),this._firestoreClient.terminate()}}])}(RI);function qI(e){return e._firestoreClient||GI(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function GI(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new Ib(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,SI(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new dI(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var HI=function(){function e(t){m(this,e),this._byteString=t}return y(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(kb.fromBase64String(t))}catch(t){throw new E_(w_.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(kb.fromUint8Array(t))}}])}(),WI=function(){return y((function e(){m(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new E_(w_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new B_(n)}),[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}])}(),KI=y((function e(t){m(this,e),this._methodName=t})),QI=function(){return y((function e(t,n){if(m(this,e),!isFinite(t)||t<-90||t>90)throw new E_(w_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new E_(w_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}),[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return R_(this._lat,e._lat)||R_(this._long,e._long)}}])}(),YI=/^__.*__$/,$I=function(){return y((function e(t,n,r){m(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}),[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new vE(e,this.data,this.fieldMask,t,this.fieldTransforms):new dE(e,this.data,t,this.fieldTransforms)}}])}(),XI=function(){return y((function e(t,n,r){m(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}),[{key:"toMutation",value:function(e,t){return new vE(e,this.data,this.fieldMask,t,this.fieldTransforms)}}])}();
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function JI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw k_()}}var ZI=function(){function e(t,n,r,i,a,o){m(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ru(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return y(e,[{key:"path",get:function(){return this.settings.path}},{key:"Vu",get:function(){return this.settings.Vu}},{key:"mu",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"fu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.mu({path:n,gu:!1});return r.pu(e),r}},{key:"yu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.mu({path:n,gu:!1});return r.Ru(),r}},{key:"wu",value:function(e){return this.mu({path:void 0,gu:!0})}},{key:"Su",value:function(e){return fT(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Ru",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.pu(this.path.get(e))}},{key:"pu",value:function(e){if(0===e.length)throw this.Su("Document fields must not be empty");if(JI(this.Vu)&&YI.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}])}(),eT=function(){return y((function e(t,n,r){m(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||lx(t)}),[{key:"Cu",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new ZI({Vu:e,methodName:t,Du:n,path:B_.emptyPath(),gu:!1,bu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}])}();function tT(e){var t=e._freezeSettings(),n=lx(e._databaseId);return new eT(e._databaseId,!!t.ignoreUndefinedProperties,n)}function nT(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.Cu(a.merge||a.mergeFields?2:0,t,n,i);uT("Data must be an object, but it was:",o,r);var u,s,l=aT(r,o);if(a.merge)u=new gb(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var c,f=[],h=C(a.mergeFields);try{for(h.s();!(c=h.n()).done;){var d=sT(t,c.value,n);if(!o.contains(d))throw new E_(w_.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));hT(f,d)||f.push(d)}}catch(v){h.e(v)}finally{h.f()}u=new gb(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new $I(new qb(l),u,s)}var rT=function(e){function t(){return m(this,t),f(this,t,arguments)}return v(t,e),y(t,[{key:"_toFieldTransform",value:function(e){if(2!==e.Vu)throw 1===e.Vu?e.Su("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Su("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof t}}])}(KI);function iT(e,t){if(oT(e=jv(e)))return uT("Unsupported field value:",t,e),aT(e,t);if(e instanceof KI)return function(e,t){if(!JI(t.Vu))throw t.Su("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Su("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.gu&&4!==t.Vu)throw t.Su("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=C(e);try{for(a.s();!(n=a.n()).done;){var o=iT(n.value,t.wu(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=jv(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Hw(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=O_.fromDate(e);return{timestampValue:KE(t.serializer,n)}}if(e instanceof O_){var r=new O_(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:KE(t.serializer,r)}}if(e instanceof QI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof HI)return{bytesValue:QE(t.serializer,e._byteString)};if(e instanceof OI){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.Su("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:XE(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Su("Unsupported field value: ".concat(NI(e)))}(e,t)}function aT(e,t){var n={};return fb(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):cb(e,(function(e,r){var i=iT(r,t.fu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function oT(e){return!("object"!=E(e)||null===e||e instanceof Array||e instanceof Date||e instanceof O_||e instanceof QI||e instanceof HI||e instanceof OI||e instanceof KI)}function uT(e,t,n){if(!oT(n)||!function(e){return"object"==E(e)&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=NI(n);throw"an object"===r?t.Su(e+" a custom object"):t.Su(e+" "+r)}}function sT(e,t,n){if((t=jv(t))instanceof WI)return t._internalPath;if("string"==typeof t)return cT(e,t);throw fT("Field path arguments must be of type string or ",e,!1,void 0,n)}var lT=new RegExp("[~\\*/\\[\\]]");function cT(e,t,n){if(t.search(lT)>=0)throw fT("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return a(WI,w(t.split(".")))._internalPath}catch(rm){throw fT("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function fT(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new E_(w_.INVALID_ARGUMENT,u+e+s)}function hT(e,t){return e.some((function(e){return e.isEqual(t)}))}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var dT=function(){return y((function e(t,n,r,i,a){m(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}),[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new OI(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new vT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(pT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}])}(),vT=function(e){function t(){return m(this,t),f(this,t,arguments)}return v(t,e),y(t,[{key:"data",value:function(){return r(d(t.prototype),"data",this).call(this)}}])}(dT);function pT(e,t){return"string"==typeof t?cT(e,t):t instanceof WI?t._internalPath:t._delegate._internalPath}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var mT=function(){return y((function e(){m(this,e)}),[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Lb(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wb(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Eb(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw k_()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return cb(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new QI(wb(e.latitude),wb(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=xb(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Sb(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=bb(e);return new O_(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=V_.fromString(e);__(gC(n));var r=new Tb(n.get(1),n.get(3)),i=new z_(n.popFirst(5));return r.isEqual(t)||m_("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}])}();
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
var gT=function(){return y((function e(t,n){m(this,e),this.hasPendingWrites=t,this.fromCache=n}),[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}])}(),yT=function(e){function t(e,n,r,i,a,o){var u;return m(this,t),(u=f(this,t,[e,n,r,i,o]))._firestore=e,u._firestoreImpl=e,u.metadata=a,u}return v(t,e),y(t,[{key:"exists",value:function(){return r(d(t.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new kT(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(pT("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}])}(dT),kT=function(e){function t(){return m(this,t),f(this,t,arguments)}return v(t,e),y(t,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(d(t.prototype),"data",this).call(this,e)}}])}(yT),_T=function(){return y((function e(t,n,r,i){m(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new gT(i.hasPendingWrites,i.fromCache),this.query=r}),[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new kT(n._firestore,n._userDataWriter,r.key,r,new gT(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new E_(w_.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new kT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new gT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new kT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new gT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:bT(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}])}();function bT(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return k_()}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function wT(e){e=DI(e,OI);var t=DI(e.firestore,zI);return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new C_;return e.asyncQueue.enqueueAndForget(s(o().mark((function i(){return o().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new hI({next:function(a){t.enqueueAndForget((function(){return pS(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new E_(w_.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new E_(w_.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new _S(kw(n.path),a,{includeMetadataChanges:!0,ta:!0});return dS(e,o)},i.next=3,CI(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}(qI(t),e._key).then((function(n){return TT(t,e,n)}))}var ET=function(e){function t(e){var n;return m(this,t),(n=f(this,t)).firestore=e,n}return v(t,e),y(t,[{key:"convertBytes",value:function(e){return new HI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new OI(this.firestore,null,t)}}])}(mT);function CT(e,t,n){e=DI(e,OI);for(var r,i=DI(e.firestore,zI),a=tT(i),o=arguments.length,u=new Array(o>3?o-3:0),s=3;s<o;s++)u[s-3]=arguments[s];return r="string"==typeof(t=jv(t))||t instanceof WI?function(e,t,n,r,i,a){var o=e.Cu(1,t,n),u=[sT(t,r,n)],s=[i];if(a.length%2!=0)throw new E_(w_.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var l=0;l<a.length;l+=2)u.push(sT(t,a[l])),s.push(a[l+1]);for(var c=[],f=qb.empty(),h=u.length-1;h>=0;--h)if(!hT(c,u[h])){var d=u[h],v=s[h];v=jv(v);var p=o.yu(d);if(v instanceof rT)c.push(d);else{var m=iT(v,p);null!=m&&(c.push(d),f.set(d,m))}}var g=new gb(c);return new XI(f,g,o.fieldTransforms)}(a,"updateDoc",e._key,t,n,u):function(e,t,n,r){var i=e.Cu(1,t,n);uT("Data must be an object, but it was:",i,r);var a=[],o=qb.empty();cb(r,(function(e,r){var u=cT(t,e,n);r=jv(r);var s=i.yu(u);if(r instanceof rT)a.push(u);else{var l=iT(r,s);null!=l&&(a.push(u),o.set(u,l))}}));var u=new gb(a);return new XI(o,u,i.fieldTransforms)}(a,"updateDoc",e._key,t),IT(i,[r.toMutation(e._key,aE.exists(!0))])}function xT(e,t){var n=DI(e.firestore,zI),r=VI(e),i=function(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}(e.converter,t);return IT(n,[nT(tT(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,aE.exists(!1))]).then((function(){return r}))}function ST(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,u;e=jv(e);var l={includeMetadataChanges:!1,source:"default"},c=0;"object"!=E(n[c])||BI(n[c])||(l=n[c],c++);var f,h,d,v={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(BI(n[c])){var p=n[c];n[c]=null===(i=p.next)||void 0===i?void 0:i.bind(p),n[c+1]=null===(a=p.error)||void 0===a?void 0:a.bind(p),n[c+2]=null===(u=p.complete)||void 0===u?void 0:u.bind(p)}if(e instanceof OI)h=DI(e.firestore,zI),d=kw(e._key.path),f={next:function(t){n[c]&&n[c](TT(h,e,t))},error:n[c+1],complete:n[c+2]};else{var m=DI(e,MI);h=DI(m.firestore,zI),d=m._query;var g=new ET(h);f={next:function(e){n[c]&&n[c](new _T(h,g,m,e))},error:n[c+1],complete:n[c+2]},function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new E_(w_.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query)}return function(e,t,n,r){var i=new hI(r),a=new _S(t,i,n);return e.asyncQueue.enqueueAndForget(s(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=dS,t.next=3,CI(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Qa(),e.asyncQueue.enqueueAndForget(s(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=pS,t.next=3,CI(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(qI(h),d,v,f)}function IT(e,t){return function(e,t){var n=new C_;return e.asyncQueue.enqueueAndForget(s(o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=VS,r.next=3,EI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(qI(e),t)}function TT(e,t,n){var r=n.docs.get(t._key),i=new ET(e);return new yT(e,i,t._key,r,new gT(n.hasPendingWrites,n.fromCache),t.converter)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){h_=e}("10.11.0"),Cp(new Bv("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new zI(new I_(e.getProvider("auth-internal")),new N_(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new E_(w_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tb(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Tp(c_,"4.6.0",e),Tp(c_,"4.6.0","esm2017")}();
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
Tp("firebase","10.11.0","app");var AT=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==E(t)&&(t={name:t});var r,i=Object.assign({name:"[DEFAULT]",automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!=typeof a||!a)throw Sp.create("bad-app-name",{appName:String(a)});if(n||(n=null===(r=Lv())||void 0===r?void 0:r.config),!n)throw Sp.create("no-options");var o=_p.get(a);if(o){if(Uv(n,o.options)&&Uv(i,o.config))return o;throw Sp.create("duplicate-app",{appName:a})}var u,s=new Hv(a),l=C(wp.values());try{for(l.s();!(u=l.n()).done;){var c=u.value;s.addComponent(c)}}catch(h){l.e(h)}finally{l.f()}var f=new Ip(n,i,s);return _p.set(a,f),f}({apiKey:"AIzaSyDJsIcF_jVDnNf7VGwGtLX2Fs5UiK3u8G8",authDomain:"peer-chess-20535.firebaseapp.com",projectId:"peer-chess-20535",storageBucket:"peer-chess-20535.appspot.com",messagingSenderId:"249834096947",appId:"1:249834096947:web:9116716c18a90b0493d646"}),LT=function(e,t,n){n||(n="(default)");var r=function(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}(e,"firestore");if(r.isInitialized(n)){var i=r.getImmediate({identifier:n});if(Uv(r.getOptions(n),t))return i;throw new E_(w_.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==t.cacheSizeBytes&&void 0!==t.localCache)throw new E_(w_.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(void 0!==t.cacheSizeBytes&&-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new E_(w_.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}(AT,{ignoreUndefinedProperties:!0});function NT(e){return"function"==typeof e?e():Yt(e)}var DT="undefined"!=typeof window&&"undefined"!=typeof document;"undefined"!=typeof WorkerGlobalScope&&(globalThis,WorkerGlobalScope);var PT=Object.prototype.toString,RT=function(e){return"[object Object]"===PT.call(e)},MT=function(){};var OT=function(e){return e()};function FT(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.eventFilter,o=void 0===a?OT:a,u=n(i,e);return Gn(t,function(e,t){return function(){for(var n=this,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return new Promise((function(r,a){Promise.resolve(e((function(){return t.apply(n,i)}),{fn:t,thisArg:n,args:i})).then(r).catch(a)}))}}(o,r),u)}function UT(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.eventFilter,o=n(i,t),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:OT,t=Ht(!0);return{isActive:Nt(t),pause:function(){t.value=!1},resume:function(){t.value=!0},eventFilter:function(){t.value&&e.apply(void 0,arguments)}}}(a),s=u.eventFilter,l=u.pause,f=u.resume,h=u.isActive;return{stop:FT(e,r,c(c({},o),{},{eventFilter:s})),pause:l,resume:f,isActive:h}}function VT(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=function(e){return e||Xi()}();r?yr(e,n):t?e():pn(e)}var jT=DT?window:void 0;function BT(){for(var e,t,n,r,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];if("string"==typeof a[0]||Array.isArray(a[0])?(t=a[0],n=a[1],r=a[2],e=jT):(e=a[0],t=a[1],n=a[2],r=a[3]),!e)return MT;Array.isArray(t)||(t=[t]),Array.isArray(n)||(n=[n]);var u=[],s=function(){u.forEach((function(e){return e()})),u.length=0},l=Gn((function(){return[(t=e,i=NT(t),null!=(n=null==i?void 0:i.$el)?n:i),NT(r)];var t,n,i}),(function(e){var r=b(e,2),i=r[0],a=r[1];if(s(),i){var o=RT(a)?c({},a):a;u.push.apply(u,w(t.flatMap((function(e){return n.map((function(t){return function(e,t,n,r){return e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n,r)}}(i,e,t,o)}))}))))}}),{immediate:!0,flush:"post"}),f=function(){l(),s()};return function(e){!!Ce()&&xe(e)}(f),f}var zT="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},qT="__vueuse_ssr_handlers__",GT=HT();function HT(){return qT in zT||(zT[qT]=zT[qT]||{}),zT[qT]}var WT={boolean:{read:function(e){return"true"===e},write:function(e){return String(e)}},object:{read:function(e){return JSON.parse(e)},write:function(e){return JSON.stringify(e)}},number:{read:function(e){return Number.parseFloat(e)},write:function(e){return String(e)}},any:{read:function(e){return e},write:function(e){return String(e)}},string:{read:function(e){return e},write:function(e){return String(e)}},map:{read:function(e){return new Map(JSON.parse(e))},write:function(e){return JSON.stringify(Array.from(e.entries()))}},set:{read:function(e){return new Set(JSON.parse(e))},write:function(e){return JSON.stringify(Array.from(e))}},date:{read:function(e){return new Date(e)},write:function(e){return e.toISOString()}}},KT="vueuse-storage";function QT(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=i.flush,o=void 0===a?"pre":a,u=i.deep,s=void 0===u||u,l=i.listenToStorageChanges,f=void 0===l||l,h=i.writeDefaults,d=void 0===h||h,v=i.mergeDefaults,p=void 0!==v&&v,m=i.shallow,g=i.window,y=void 0===g?jT:g,k=i.eventFilter,_=i.onError,b=void 0===_?function(e){console.error(e)}:_,w=i.initOnMounted,C=(m?Wt:Ht)("function"==typeof t?t():t);if(!n)try{n=function(e,t){return GT[e]||t}("getDefaultStorage",(function(){var e;return null==(e=jT)?void 0:e.localStorage}))()}catch(R){b(R)}if(!n)return C;var x=NT(t),S=function(e){return null==e?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":"boolean"==typeof e?"boolean":"string"==typeof e?"string":"object"===E(e)?"object":Number.isNaN(e)?"any":"number"}(x),I=null!=(r=i.serializer)?r:WT[S],T=UT(C,(function(){return function(t){try{var r=n.getItem(e);if(null==t)N(r,null),n.removeItem(e);else{var i=I.write(t);r!==i&&(n.setItem(e,i),N(r,i))}}catch(R){b(R)}}(C.value)}),{flush:o,deep:s,eventFilter:k}),A=T.pause,L=T.resume;function N(t,r){y&&y.dispatchEvent(new CustomEvent(KT,{detail:{key:e,oldValue:t,newValue:r,storageArea:n}}))}function D(t){if(!t||t.storageArea===n)if(t&&null==t.key)C.value=x;else if(!t||t.key===e){A();try{(null==t?void 0:t.newValue)!==I.write(C.value)&&(C.value=function(t){var r=t?t.newValue:n.getItem(e);if(null==r)return d&&null!=x&&n.setItem(e,I.write(x)),x;if(!t&&p){var i=I.read(r);return"function"==typeof p?p(i,x):"object"!==S||Array.isArray(i)?i:c(c({},x),i)}return"string"!=typeof r?r:I.read(r)}(t))}catch(R){b(R)}finally{t?pn(L):L()}}}function P(e){D(e.detail)}return y&&f&&VT((function(){BT(y,"storage",D),BT(y,KT,P),w&&D()})),w||D(),C}function YT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.window,i=void 0===r?jT:r;return QT(e,t,null==i?void 0:i.sessionStorage,n)}var $T=wf("RoomStore",{state:function(){return{roomId:YT("RoomStore$roomId",""),roomOwner:YT("RoomStore$roomOwner",!1),gameStarted:YT("RoomStore$gameStarted",!1),atLeastAGameStarted:YT("RoomStore$atLeastAGameStarted",!1)}},actions:{setRoomId:function(e){this.roomId||(this.roomId=e)},setRoomOwner:function(e){this.roomOwner||(this.roomOwner=e)},setGameStartedStatus:function(e){this.gameStarted=e},setAtLeastAGameStartedStatus:function(e){this.atLeastAGameStarted=e}},persist:sessionStorage});function XT(e){return ST(UI(LT,"rooms"),(function(t){t.forEach(e)}))}function JT(e,t){return ST(VI(LT,"rooms",e),(function(e){t(e)}))}function ZT(e){return eA.apply(this,arguments)}function eA(){return(eA=s(o().mark((function e(t){var n,r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.nickname,r=0===n.length,i=n.length<4,!r){e.next=5;break}return e.abrupt("return",{error:"pages.createRoom.errors.emptyNickname"});case 5:if(!i){e.next=7;break}return e.abrupt("return",{error:"pages.createRoom.errors.tooShortNickname"});case 7:return e.prev=7,a=UI(LT,"rooms"),e.next=11,xT(a,{origin:wv,hostUser:n});case 11:return u=e.sent,e.abrupt("return",{result:u});case 15:return e.prev=15,e.t0=e.catch(7),console.error(e.t0),e.abrupt("return",{error:"pages.createRoom.errors.failedCreatingRoom",isFatalError:!0});case 19:case"end":return e.stop()}}),e,null,[[7,15]])})))).apply(this,arguments)}function tA(e){return nA.apply(this,arguments)}function nA(){return(nA=s(o().mark((function e(t){var n,r,i,a,u,s,l,c,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.nickname,r=t.roomId,i=0===n.length,a=n.length<4,u=0===r.length,!i){e.next=6;break}return e.abrupt("return",{error:"pages.joinRoom.errors.emptyNickname"});case 6:if(!a){e.next=8;break}return e.abrupt("return",{error:"pages.joinRoom.errors.tooShortNickname"});case 8:if(!u){e.next=10;break}return e.abrupt("return",{error:"pages.joinRoom.errors.emptyRoomId"});case 10:return e.prev=10,s=VI(LT,"rooms",r),e.next=14,wT(s);case 14:if(l=e.sent,!!l.exists()){e.next=18;break}return e.abrupt("return",{error:"pages.joinRoom.errors.noMatchingRoom"});case 18:if(c=l.data(),!c.guestUser){e.next=22;break}return e.abrupt("return",{error:"pages.joinRoom.errors.alreadyFilledRoom"});case 22:return f={guestUser:n},e.next=25,CT(s,f);case 25:return $T().setRoomId(r),e.abrupt("return",{isOk:!0});case 30:return e.prev=30,e.t0=e.catch(10),console.error(e.t0),e.abrupt("return",{error:"pages.joinRoom.errors.failedJoiningRoom",isFatalError:!0});case 34:case"end":return e.stop()}}),e,null,[[10,30]])})))).apply(this,arguments)}function rA(e){return iA.apply(this,arguments)}function iA(){return(iA=s(o().mark((function e(t){var n,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.newValues,r=t.roomId,e.prev=1,i=VI(LT,"rooms",r),e.next=5,wT(i);case 5:if(a=e.sent,!!a.exists()){e.next=10;break}return console.error("No matching room when trying to update!"),e.abrupt("return",{error:"page.generic.errors.failedUpdatingRoom",isFatalError:!0});case 10:return e.next=12,CT(i,n);case 12:return e.abrupt("return",{isOk:!0});case 15:return e.prev=15,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",{error:"pages.generic.errors.failedUpdatingRoom",isFatalError:!0});case 19:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}function aA(e){return oA.apply(this,arguments)}function oA(){return(oA=s(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.roomId,e.prev=1,r=VI(LT,"rooms",n),e.next=5,wT(r);case 5:if(i=e.sent,!!i.exists()){e.next=10;break}return console.error("No matching room when trying to update!"),e.abrupt("return",{error:"page.generic.errors.failedUpdatingRoom",isFatalError:!0});case 10:return e.abrupt("return",{isOk:!0,matchingDocument:i.data()});case 13:return e.prev=13,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",{error:"pages.generic.errors.failedReadingRoom",isFatalError:!0});case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}var uA=function(e,t){var n,r=e.__vccOpts||e,i=C(t);try{for(i.s();!(n=i.n()).done;){var a=b(n.value,2),o=a[0],u=a[1];r[o]=u}}catch(s){i.e(s)}finally{i.f()}return r},sA={id:"root"},lA={key:0},cA=["src"],fA={__name:"HomePage",setup:function(e){var t=ef().t,n=qu(),r=$T();function i(){n.push({path:"/create-room",replace:!0})}function a(){n.push({path:"/join-room",replace:!0})}function u(){return l.apply(this,arguments)}function l(){return(l=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(r.roomId);case 2:zf({text:t("pages.home.roomIdCopied")});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var c=Ht();function f(e){var t=e.data(),i=r.roomId===e.id,a=![null,void 0].includes(t.guestUser),o=r.roomOwner;i&&a&&o&&n.push({path:"/game",replace:!0})}function h(){return(h=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.value=XT(f);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return yr((function(){return h.apply(this,arguments)})),br((function(){c.value&&c.value()})),function(e,n){return Ei(),Ii("div",sA,[Ri("h2",null,ke(Yt(t)("pages.home.title")),1),Yt(r).roomId&&Yt(r).roomOwner?(Ei(),Ii("div",lA,[Ui(ke(Yt(t)("pages.home.yourRoom"))+" : #"+ke(Yt(r).roomId)+" ",1),Ri("button",{onClick:u,class:"copyButton"},[Ri("img",{src:Yt("data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M15.24%202H11.3458C9.58159%201.99999%208.18418%201.99997%207.09054%202.1476C5.96501%202.29953%205.05402%202.61964%204.33559%203.34096C3.61717%204.06227%203.29833%204.97692%203.14701%206.10697C2.99997%207.205%202.99999%208.60802%203%2010.3793V16.2169C3%2017.725%203.91995%2019.0174%205.22717%2019.5592C5.15989%2018.6498%205.15994%2017.3737%205.16%2016.312L5.16%2011.3976L5.16%2011.3024C5.15993%2010.0207%205.15986%208.91644%205.27828%208.03211C5.40519%207.08438%205.69139%206.17592%206.4253%205.43906C7.15921%204.70219%208.06404%204.41485%209.00798%204.28743C9.88877%204.16854%2010.9887%204.1686%2012.2652%204.16867L12.36%204.16868H15.24L15.3348%204.16867C16.6113%204.1686%2017.7088%204.16854%2018.5896%204.28743C18.0627%202.94779%2016.7616%202%2015.24%202Z'%20fill='%231C274C'/%3e%3cpath%20d='M6.6001%2011.3974C6.6001%208.67119%206.6001%207.3081%207.44363%206.46118C8.28716%205.61426%209.64481%205.61426%2012.3601%205.61426H15.2401C17.9554%205.61426%2019.313%205.61426%2020.1566%206.46118C21.0001%207.3081%2021.0001%208.6712%2021.0001%2011.3974V16.2167C21.0001%2018.9429%2021.0001%2020.306%2020.1566%2021.1529C19.313%2021.9998%2017.9554%2021.9998%2015.2401%2021.9998H12.3601C9.64481%2021.9998%208.28716%2021.9998%207.44363%2021.1529C6.6001%2020.306%206.6001%2018.9429%206.6001%2016.2167V11.3974Z'%20fill='%231C274C'/%3e%3c/svg%3e"),width:"20",height:"20"},null,8,cA)])])):ji("",!0),Yt(r).roomId?ji("",!0):(Ei(),Ii("button",{key:1,onClick:i},ke(Yt(t)("pages.home.createRoom")),1)),Yt(r).roomId?ji("",!0):(Ei(),Ii("button",{key:2,onClick:a},ke(Yt(t)("pages.home.joinRoom")),1))])}}},hA=uA(fA,[["__scopeId","data-v-a6ae8f26"]]),dA={id:"root"},vA=["placeholder"],pA={key:0,id:"button"},mA={__name:"CreateRoomPage",setup:function(e){var t=ef().t,n=qu(),r=$T(),i=Ht(!0),a=Ht(),u=Ht(t("pages.createRoom.placeholders.nickname")),l=function(){var e=s(o().mark((function e(){var u,s,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=a.value.value,e.next=3,ZT({nickname:u});case 3:s=e.sent,s.hasOwnProperty("error")?(alert(t(s.error)),s.isFatalError&&n.push({path:"/",replace:!0})):(i.value=!1,l=s.result.id,r.setRoomId(l),r.setRoomOwner(!0),n.push({path:"/",replace:!0}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function c(){n.push({path:"/",replace:!0})}return function(e,n){return Ei(),Ii("div",dA,[Ri("header",null,[Ri("h2",null,ke(Yt(t)("pages.createRoom.title")),1)]),Ri("section",null,[Ri("table",null,[Ri("tr",null,[Ri("td",null,ke(Yt(t)("pages.createRoom.labels.nickname")),1),Ri("td",null,[Ri("input",{type:"text",placeholder:u.value,ref_key:"nicknameField",ref:a},null,8,vA)])])]),i.value?(Ei(),Ii("div",pA,[Ri("button",{class:"ok",onClick:l},ke(Yt(t)("pages.createRoom.submit")),1),Ri("button",{class:"cancel",onClick:c},ke(Yt(t)("pages.createRoom.cancel")),1)])):ji("",!0)])])}}},gA=uA(mA,[["__scopeId","data-v-a9e5fa03"]]),yA={id:"root"},kA=["placeholder"],_A=["placeholder"],bA=["src"],wA={key:0,id:"button"},EA={__name:"JoinRoomPage",setup:function(e){var t=ef().t,n=qu(),r=$T(),i=Ht(!0),a=Ht(),u=Ht(),l=Ht(t("pages.joinRoom.placeholders.nickname")),c=Ht(t("pages.joinRoom.placeholders.roomId"));function f(){return h.apply(this,arguments)}function h(){return(h=s(o().mark((function e(){var s,l,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.value.value,l=u.value.value,e.next=4,tA({nickname:s,roomId:l});case 4:c=e.sent,c.hasOwnProperty("error")?(alert(t(c.error)),c.isFatalError&&n.push({path:"/",replace:!0})):(i.value=!1,r.setRoomId(l),r.setRoomOwner(!1),n.push({path:"/game",replace:!0}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return v.apply(this,arguments)}function v(){return(v=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.readText();case 2:t=e.sent;try{u.value.value=t}catch(n){console.error(n)}case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){n.push({path:"/",replace:!0})}return function(e,n){return Ei(),Ii("div",yA,[Ri("header",null,[Ri("h2",null,ke(Yt(t)("pages.joinRoom.title")),1)]),Ri("section",null,[Ri("table",null,[Ri("tr",null,[Ri("td",null,ke(Yt(t)("pages.joinRoom.labels.nickname")),1),Ri("td",null,[Ri("input",{type:"text",placeholder:l.value,ref_key:"nicknameField",ref:a},null,8,kA)])]),Ri("tr",null,[Ri("td",null,ke(Yt(t)("pages.joinRoom.labels.roomId")),1),Ri("td",null,[Ri("input",{type:"text",placeholder:c.value,ref_key:"roomIdField",ref:u},null,8,_A),Ri("button",{onClick:d},[Ri("img",{src:Yt("data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9.5%202C8.67157%202%208%202.67157%208%203.5V4.5C8%205.32843%208.67157%206%209.5%206H14.5C15.3284%206%2016%205.32843%2016%204.5V3.5C16%202.67157%2015.3284%202%2014.5%202H9.5Z'%20fill='%231C274C'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M6.5%204.03662C5.24209%204.10719%204.44798%204.30764%203.87868%204.87694C3%205.75562%203%207.16983%203%209.99826V15.9983C3%2018.8267%203%2020.2409%203.87868%2021.1196C4.75736%2021.9983%206.17157%2021.9983%209%2021.9983H15C17.8284%2021.9983%2019.2426%2021.9983%2020.1213%2021.1196C21%2020.2409%2021%2018.8267%2021%2015.9983V9.99826C21%207.16983%2021%205.75562%2020.1213%204.87694C19.552%204.30764%2018.7579%204.10719%2017.5%204.03662V4.5C17.5%206.15685%2016.1569%207.5%2014.5%207.5H9.5C7.84315%207.5%206.5%206.15685%206.5%204.5V4.03662ZM7%2013.75C6.58579%2013.75%206.25%2014.0858%206.25%2014.5C6.25%2014.9142%206.58579%2015.25%207%2015.25H15C15.4142%2015.25%2015.75%2014.9142%2015.75%2014.5C15.75%2014.0858%2015.4142%2013.75%2015%2013.75H7ZM7%2017.25C6.58579%2017.25%206.25%2017.5858%206.25%2018C6.25%2018.4142%206.58579%2018.75%207%2018.75H12.5C12.9142%2018.75%2013.25%2018.4142%2013.25%2018C13.25%2017.5858%2012.9142%2017.25%2012.5%2017.25H7Z'%20fill='%231C274C'/%3e%3c/svg%3e"),width:"20",height:"20"},null,8,bA)])])])]),i.value?(Ei(),Ii("div",wA,[Ri("button",{class:"ok",onClick:f},ke(Yt(t)("pages.joinRoom.submit")),1),Ri("button",{class:"cancel",onClick:p},ke(Yt(t)("pages.joinRoom.cancel")),1)])):ji("",!0)])])}}},CA=uA(EA,[["__scopeId","data-v-ad4314f9"]]);function xA(e){return new Promise((function(t){return setTimeout(t,e)}))}
/**
             * @license
             * Copyright (c) 2023, Jeff Hlywa (jhlywa@gmail.com)
             * All rights reserved.
             *
             * Redistribution and use in source and binary forms, with or without
             * modification, are permitted provided that the following conditions are met:
             *
             * 1. Redistributions of source code must retain the above copyright notice,
             *    this list of conditions and the following disclaimer.
             * 2. Redistributions in binary form must reproduce the above copyright notice,
             *    this list of conditions and the following disclaimer in the documentation
             *    and/or other materials provided with the distribution.
             *
             * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
             * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
             * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
             * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
             * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
             * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
             * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
             * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
             * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
             * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
             * POSSIBILITY OF SUCH DAMAGE.
             */var SA="w",IA="b",TA="p",AA="b",LA="r",NA="q",DA="k",PA="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",RA=-1,MA={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},OA={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},FA={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},UA={b:[16,32,17,15],w:[-16,-32,-17,-15]},VA={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},jA=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],BA=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],zA={p:1,n:2,b:4,r:8,q:16,k:32},qA=["n",AA,LA,NA],GA=k(k({},DA,OA.KSIDE_CASTLE),NA,OA.QSIDE_CASTLE),HA={w:[{square:FA.a1,flag:OA.QSIDE_CASTLE},{square:FA.h1,flag:OA.KSIDE_CASTLE}],b:[{square:FA.a8,flag:OA.QSIDE_CASTLE},{square:FA.h8,flag:OA.KSIDE_CASTLE}]},WA={b:1,w:6},KA=["1-0","0-1","1/2-1/2","*"];function QA(e){return e>>4}function YA(e){return 15&e}function $A(e){return-1!=="0123456789".indexOf(e)}function XA(e){var t=YA(e),n=QA(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(n,n+1)}function JA(e){return e===SA?IA:SA}function ZA(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:OA.NORMAL,u=QA(r);if(i!==TA||7!==u&&0!==u)e.push({color:t,from:n,to:r,piece:i,captured:a,flags:o});else for(var s=0;s<qA.length;s++){var l=qA[s];e.push({color:t,from:n,to:r,piece:i,captured:a,promotion:l,flags:o|OA.PROMOTION})}}function eL(e){var t=e.charAt(0);if(t>="a"&&t<="h"){if(e.match(/[a-h]\d.*[a-h]\d/))return;return TA}return"o"===(t=t.toLowerCase())?DA:t}function tL(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function nL(e){return e.split(" ").slice(0,4).join(" ")}var rL=function(){return y((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:PA;m(this,e),k(this,"_board",new Array(128)),k(this,"_turn",SA),k(this,"_header",{}),k(this,"_kings",{w:RA,b:RA}),k(this,"_epSquare",-1),k(this,"_halfMoves",0),k(this,"_moveNumber",0),k(this,"_history",[]),k(this,"_comments",{}),k(this,"_castling",{w:0,b:0}),k(this,"_positionCount",{}),this.load(t)}),[{key:"clear",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).preserveHeaders,t=void 0!==e&&e;this._board=new Array(128),this._kings={w:RA,b:RA},this._turn=SA,this._castling={w:0,b:0},this._epSquare=RA,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=t?this._header:{},this._positionCount={},delete this._header.SetUp,delete this._header.FEN}},{key:"removeHeader",value:function(e){e in this._header&&delete this._header[e]}},{key:"load",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.skipValidation,r=void 0!==n&&n,i=t.preserveHeaders,a=void 0!==i&&i,o=e.split(/\s+/);if(o.length>=2&&o.length<6){e=o.concat(["-","-","0","1"].slice(-(6-o.length))).join(" ")}if(o=e.split(/\s+/),!r){var u=function(e){var t=e.split(/\s+/);if(6!==t.length)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};var n=parseInt(t[5],10);if(isNaN(n)||n<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};var r=parseInt(t[4],10);if(isNaN(r)||r<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(t[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(t[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(t[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};var i=t[0].split("/");if(8!==i.length)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(var a=0;a<i.length;a++){for(var o=0,u=!1,s=0;s<i[a].length;s++)if($A(i[a][s])){if(u)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};o+=parseInt(i[a][s],10),u=!0}else{if(!/^[prnbqkPRNBQK]$/.test(i[a][s]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};o+=1,u=!1}if(8!==o)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if("3"==t[3][1]&&"w"==t[1]||"6"==t[3][1]&&"b"==t[1])return{ok:!1,error:"Invalid FEN: illegal en-passant square"};for(var l=0,c=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];l<c.length;l++){var f=c[l],h=f.color,d=f.regex;if(!d.test(t[0]))return{ok:!1,error:"Invalid FEN: missing ".concat(h," king")};if((t[0].match(d)||[]).length>1)return{ok:!1,error:"Invalid FEN: too many ".concat(h," kings")}}return Array.from(i[0]+i[7]).some((function(e){return"P"===e.toUpperCase()}))?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}(e),s=u.ok,l=u.error;if(!s)throw new Error(l)}var c=o[0],f=0;this.clear({preserveHeaders:a});for(var h=0;h<c.length;h++){var d=c.charAt(h);if("/"===d)f+=8;else if($A(d))f+=parseInt(d,10);else{var v=d<"a"?SA:IA;this._put({type:d.toLowerCase(),color:v},XA(f)),f++}}this._turn=o[1],o[2].indexOf("K")>-1&&(this._castling.w|=OA.KSIDE_CASTLE),o[2].indexOf("Q")>-1&&(this._castling.w|=OA.QSIDE_CASTLE),o[2].indexOf("k")>-1&&(this._castling.b|=OA.KSIDE_CASTLE),o[2].indexOf("q")>-1&&(this._castling.b|=OA.QSIDE_CASTLE),this._epSquare="-"===o[3]?RA:FA[o[3]],this._halfMoves=parseInt(o[4],10),this._moveNumber=parseInt(o[5],10),this._updateSetup(e),this._incPositionCount(e)}},{key:"fen",value:function(){for(var e=0,t="",n=FA.a8;n<=FA.h1;n++){if(this._board[n]){e>0&&(t+=e,e=0);var r=this._board[n],i=r.color,a=r.type;t+=i===SA?a.toUpperCase():a.toLowerCase()}else e++;n+1&136&&(e>0&&(t+=e),n!==FA.h1&&(t+="/"),e=0,n+=8)}var o="";this._castling[SA]&OA.KSIDE_CASTLE&&(o+="K"),this._castling[SA]&OA.QSIDE_CASTLE&&(o+="Q"),this._castling[IA]&OA.KSIDE_CASTLE&&(o+="k"),this._castling[IA]&OA.QSIDE_CASTLE&&(o+="q"),o=o||"-";var u="-";if(this._epSquare!==RA)for(var s=this._epSquare+(this._turn===SA?16:-16),l=0,c=[s+1,s-1];l<c.length;l++){var f,h,d=c[l];if(!(136&d)){var v=this._turn;if((null===(f=this._board[d])||void 0===f?void 0:f.color)===v&&(null===(h=this._board[d])||void 0===h?void 0:h.type)===TA){this._makeMove({color:v,from:d,to:this._epSquare,piece:TA,captured:TA,flags:OA.EP_CAPTURE});var p=!this._isKingAttacked(v);if(this._undoMove(),p){u=XA(this._epSquare);break}}}}return[t,this._turn,o,u,this._halfMoves,this._moveNumber].join(" ")}},{key:"_updateSetup",value:function(e){this._history.length>0||(e!==PA?(this._header.SetUp="1",this._header.FEN=e):(delete this._header.SetUp,delete this._header.FEN))}},{key:"reset",value:function(){this.load(PA)}},{key:"get",value:function(e){return this._board[FA[e]]||!1}},{key:"put",value:function(e,t){var n=e.type,r=e.color;return!!this._put({type:n,color:r},t)&&(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0)}},{key:"_put",value:function(e,t){var n=e.type,r=e.color;if(-1==="pnbrqkPNBRQK".indexOf(n.toLowerCase()))return!1;if(!(t in FA))return!1;var i=FA[t];if(n==DA&&this._kings[r]!=RA&&this._kings[r]!=i)return!1;var a=this._board[i];return a&&a.type===DA&&(this._kings[a.color]=RA),this._board[i]={type:n,color:r},n===DA&&(this._kings[r]=i),!0}},{key:"remove",value:function(e){var t=this.get(e);return delete this._board[FA[e]],t&&t.type===DA&&(this._kings[t.color]=RA),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),t}},{key:"_updateCastlingRights",value:function(){var e,t,n,r,i,a,o,u,s,l,c,f,h=(null===(e=this._board[FA.e1])||void 0===e?void 0:e.type)===DA&&(null===(t=this._board[FA.e1])||void 0===t?void 0:t.color)===SA,d=(null===(n=this._board[FA.e8])||void 0===n?void 0:n.type)===DA&&(null===(r=this._board[FA.e8])||void 0===r?void 0:r.color)===IA;h&&(null===(i=this._board[FA.a1])||void 0===i?void 0:i.type)===LA&&(null===(a=this._board[FA.a1])||void 0===a?void 0:a.color)===SA||(this._castling.w&=~OA.QSIDE_CASTLE),h&&(null===(o=this._board[FA.h1])||void 0===o?void 0:o.type)===LA&&(null===(u=this._board[FA.h1])||void 0===u?void 0:u.color)===SA||(this._castling.w&=~OA.KSIDE_CASTLE),d&&(null===(s=this._board[FA.a8])||void 0===s?void 0:s.type)===LA&&(null===(l=this._board[FA.a8])||void 0===l?void 0:l.color)===IA||(this._castling.b&=~OA.QSIDE_CASTLE),d&&(null===(c=this._board[FA.h8])||void 0===c?void 0:c.type)===LA&&(null===(f=this._board[FA.h8])||void 0===f?void 0:f.color)===IA||(this._castling.b&=~OA.KSIDE_CASTLE)}},{key:"_updateEnPassantSquare",value:function(){var e,t,n=this;if(this._epSquare!==RA){var r=this._epSquare+(this._turn===SA?-16:16),i=this._epSquare+(this._turn===SA?16:-16),a=[i+1,i-1];if(null===this._board[r]&&null===this._board[this._epSquare]&&(null===(e=this._board[i])||void 0===e?void 0:e.color)===JA(this._turn)&&(null===(t=this._board[i])||void 0===t?void 0:t.type)===TA){a.some((function(e){var t,r;return!(136&e)&&(null===(t=n._board[e])||void 0===t?void 0:t.color)===n._turn&&(null===(r=n._board[e])||void 0===r?void 0:r.type)===TA}))||(this._epSquare=RA)}else this._epSquare=RA}}},{key:"_attacked",value:function(e,t){for(var n=FA.a8;n<=FA.h1;n++)if(136&n)n+=7;else if(void 0!==this._board[n]&&this._board[n].color===e){var r=this._board[n],i=n-t;if(0!==i){var a=i+119;if(jA[a]&zA[r.type]){if(r.type===TA){if(i>0){if(r.color===SA)return!0}else if(r.color===IA)return!0;continue}if("n"===r.type||"k"===r.type)return!0;for(var o=BA[a],u=n+o,s=!1;u!==t;){if(null!=this._board[u]){s=!0;break}u+=o}if(!s)return!0}}}return!1}},{key:"_isKingAttacked",value:function(e){var t=this._kings[e];return-1!==t&&this._attacked(JA(e),t)}},{key:"isAttacked",value:function(e,t){return this._attacked(t,FA[e])}},{key:"isCheck",value:function(){return this._isKingAttacked(this._turn)}},{key:"inCheck",value:function(){return this.isCheck()}},{key:"isCheckmate",value:function(){return this.isCheck()&&0===this._moves().length}},{key:"isStalemate",value:function(){return!this.isCheck()&&0===this._moves().length}},{key:"isInsufficientMaterial",value:function(){for(var e={b:0,n:0,r:0,q:0,k:0,p:0},t=[],n=0,r=0,i=FA.a8;i<=FA.h1;i++)if(r=(r+1)%2,136&i)i+=7;else{var a=this._board[i];a&&(e[a.type]=a.type in e?e[a.type]+1:1,a.type===AA&&t.push(r),n++)}if(2===n)return!0;if(3===n&&(1===e[AA]||1===e.n))return!0;if(n===e[AA]+2){for(var o=0,u=t.length,s=0;s<u;s++)o+=t[s];if(0===o||o===u)return!0}return!1}},{key:"isThreefoldRepetition",value:function(){return this._getPositionCount(this.fen())>=3}},{key:"isDraw",value:function(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}},{key:"isGameOver",value:function(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}},{key:"moves",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.verbose,r=void 0!==n&&n,i=t.square,a=void 0===i?void 0:i,o=t.piece,u=void 0===o?void 0:o,s=this._moves({square:a,piece:u});return r?s.map((function(t){return e._makePretty(t)})):s.map((function(t){return e._moveToSan(t,s)}))}},{key:"_moves",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.legal,n=void 0===t||t,r=e.piece,i=void 0===r?void 0:r,a=e.square,o=void 0===a?void 0:a,u=o?o.toLowerCase():void 0,s=null==i?void 0:i.toLowerCase(),l=[],c=this._turn,f=JA(c),h=FA.a8,d=FA.h1,v=!1;if(u){if(!(u in FA))return[];h=d=FA[u],v=!0}for(var p=h;p<=d;p++)if(136&p)p+=7;else if(this._board[p]&&this._board[p].color!==f){var m=this._board[p].type,g=void 0;if(m===TA){if(s&&s!==m)continue;g=p+UA[c][0],this._board[g]||(ZA(l,c,p,g,TA),g=p+UA[c][1],WA[c]!==QA(p)||this._board[g]||ZA(l,c,p,g,TA,void 0,OA.BIG_PAWN));for(var y=2;y<4;y++){var k;136&(g=p+UA[c][y])||((null===(k=this._board[g])||void 0===k?void 0:k.color)===f?ZA(l,c,p,g,TA,this._board[g].type,OA.CAPTURE):g===this._epSquare&&ZA(l,c,p,g,TA,TA,OA.EP_CAPTURE))}}else{if(s&&s!==m)continue;for(var _=0,b=VA[m].length;_<b;_++){var w=VA[m][_];for(g=p;!(136&(g+=w));){if(this._board[g]){if(this._board[g].color===c)break;ZA(l,c,p,g,m,this._board[g].type,OA.CAPTURE);break}if(ZA(l,c,p,g,m),"n"===m||m===DA)break}}}}if(!(void 0!==s&&s!==DA||v&&d!==this._kings[c])){if(this._castling[c]&OA.KSIDE_CASTLE){var E=this._kings[c],C=E+2;this._board[E+1]||this._board[C]||this._attacked(f,this._kings[c])||this._attacked(f,E+1)||this._attacked(f,C)||ZA(l,c,this._kings[c],C,DA,void 0,OA.KSIDE_CASTLE)}if(this._castling[c]&OA.QSIDE_CASTLE){var x=this._kings[c],S=x-2;this._board[x-1]||this._board[x-2]||this._board[x-3]||this._attacked(f,this._kings[c])||this._attacked(f,x-1)||this._attacked(f,S)||ZA(l,c,this._kings[c],S,DA,void 0,OA.QSIDE_CASTLE)}}if(!n||-1===this._kings[c])return l;for(var I=[],T=0,A=l.length;T<A;T++)this._makeMove(l[T]),this._isKingAttacked(c)||I.push(l[T]),this._undoMove();return I}},{key:"move",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).strict,n=void 0!==t&&t,r=null;if("string"==typeof e)r=this._moveFromSan(e,n);else if("object"===E(e))for(var i=this._moves(),a=0,o=i.length;a<o;a++)if(e.from===XA(i[a].from)&&e.to===XA(i[a].to)&&(!("promotion"in i[a])||e.promotion===i[a].promotion)){r=i[a];break}if(!r)throw"string"==typeof e?new Error("Invalid move: ".concat(e)):new Error("Invalid move: ".concat(JSON.stringify(e)));var u=this._makePretty(r);return this._makeMove(r),this._incPositionCount(u.after),u}},{key:"_push",value:function(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}},{key:"_makeMove",value:function(e){var t=this._turn,n=JA(t);if(this._push(e),this._board[e.to]=this._board[e.from],delete this._board[e.from],e.flags&OA.EP_CAPTURE&&(this._turn===IA?delete this._board[e.to-16]:delete this._board[e.to+16]),e.promotion&&(this._board[e.to]={type:e.promotion,color:t}),this._board[e.to].type===DA){if(this._kings[t]=e.to,e.flags&OA.KSIDE_CASTLE){var r=e.to-1,i=e.to+1;this._board[r]=this._board[i],delete this._board[i]}else if(e.flags&OA.QSIDE_CASTLE){var a=e.to+1,o=e.to-2;this._board[a]=this._board[o],delete this._board[o]}this._castling[t]=0}if(this._castling[t])for(var u=0,s=HA[t].length;u<s;u++)if(e.from===HA[t][u].square&&this._castling[t]&HA[t][u].flag){this._castling[t]^=HA[t][u].flag;break}if(this._castling[n])for(var l=0,c=HA[n].length;l<c;l++)if(e.to===HA[n][l].square&&this._castling[n]&HA[n][l].flag){this._castling[n]^=HA[n][l].flag;break}e.flags&OA.BIG_PAWN?this._epSquare=t===IA?e.to-16:e.to+16:this._epSquare=RA,e.piece===TA||e.flags&(OA.CAPTURE|OA.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,t===IA&&this._moveNumber++,this._turn=n}},{key:"undo",value:function(){var e=this._undoMove();if(e){var t=this._makePretty(e);return this._decPositionCount(t.after),t}return null}},{key:"_undoMove",value:function(){var e=this._history.pop();if(void 0===e)return null;var t=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber;var n,r,i,a=this._turn,o=JA(a);(this._board[t.from]=this._board[t.to],this._board[t.from].type=t.piece,delete this._board[t.to],t.captured)&&(t.flags&OA.EP_CAPTURE?(n=a===IA?t.to-16:t.to+16,this._board[n]={type:TA,color:o}):this._board[t.to]={type:t.captured,color:o});t.flags&(OA.KSIDE_CASTLE|OA.QSIDE_CASTLE)&&(t.flags&OA.KSIDE_CASTLE?(r=t.to+1,i=t.to-1):(r=t.to-2,i=t.to+1),this._board[r]=this._board[i],delete this._board[i]);return t}},{key:"pgn",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.newline,r=void 0===n?"\n":n,i=t.maxWidth,a=void 0===i?0:i,o=[],u=!1;for(var s in this._header)o.push("["+s+' "'+this._header[s]+'"]'+r),u=!0;u&&this._history.length&&o.push(r);for(var l=function(t){var n=e._comments[e.fen()];if(void 0!==n){var r=t.length>0?" ":"";t="".concat(t).concat(r,"{").concat(n,"}")}return t},c=[];this._history.length>0;)c.push(this._undoMove());var f=[],h="";for(0===c.length&&f.push(l(""));c.length>0;){h=l(h);var d=c.pop();if(!d)break;if(this._history.length||"b"!==d.color)"w"===d.color&&(h.length&&f.push(h),h=this._moveNumber+".");else{var v="".concat(this._moveNumber,". ...");h=h?"".concat(h," ").concat(v):v}h=h+" "+this._moveToSan(d,this._moves({legal:!0})),this._makeMove(d)}if(h.length&&f.push(l(h)),void 0!==this._header.Result&&f.push(this._header.Result),0===a)return o.join("")+f.join(" ");for(var p=function(){return o.length>0&&" "===o[o.length-1]&&(o.pop(),!0)},m=function(e,t){var n,i=C(t.split(" "));try{for(i.s();!(n=i.n()).done;){var u=n.value;if(u){if(e+u.length>a){for(;p();)e--;o.push(r),e=0}o.push(u),e+=u.length,o.push(" "),e++}}}catch(s){i.e(s)}finally{i.f()}return p()&&e--,e},g=0,y=0;y<f.length;y++)g+f[y].length>a&&f[y].includes("{")?g=m(g,f[y]):(g+f[y].length>a&&0!==y?(" "===o[o.length-1]&&o.pop(),o.push(r),g=0):0!==y&&(o.push(" "),g++),o.push(f[y]),g+=f[y].length);return o.join("")}},{key:"header",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r+=2)"string"==typeof t[r]&&"string"==typeof t[r+1]&&(this._header[t[r]]=t[r+1]);return this._header}},{key:"loadPgn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.strict,r=void 0!==n&&n,i=t.newlineChar,a=void 0===i?"\r?\n":i;function o(e){return e.replace(/\\/g,"\\")}e=e.trim();var u=new RegExp("^(\\[((?:"+o(a)+")|.)*\\])((?:\\s*"+o(a)+"){2}|(?:\\s*"+o(a)+")*$)").exec(e),s=u&&u.length>=2?u[1]:"";this.reset();var l=function(e){for(var t={},n=e.split(new RegExp(o(a))),r="",i="",u=0;u<n.length;u++){var s=/^\s*\[\s*([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;r=n[u].replace(s,"$1"),i=n[u].replace(s,"$2"),r.trim().length>0&&(t[r]=i)}return t}(s),c="";for(var f in l)"fen"===f.toLowerCase()&&(c=l[f]),this.header(f,l[f]);if(r){if("1"===l.SetUp){if(!("FEN"in l))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(l.FEN,{preserveHeaders:!0})}}else c&&this.load(c,{preserveHeaders:!0});for(var h=function(e){return e=e.replace(new RegExp(o(a),"g")," "),"{".concat(function(e){return Array.from(e).map((function(e){return e.charCodeAt(0)<128?e.charCodeAt(0).toString(16):encodeURIComponent(e).replace(/%/g,"").toLowerCase()})).join("")}(e.slice(1,e.length-1)),"}")},d=function(e){if(e.startsWith("{")&&e.endsWith("}"))return function(e){return 0==e.length?"":decodeURIComponent("%"+(e.match(/.{1,2}/g)||[]).join("%"))}(e.slice(1,e.length-1))},v=e.replace(s,"").replace(new RegExp("({[^}]*})+?|;([^".concat(o(a),"]*)"),"g"),(function(e,t,n){return void 0!==t?h(t):" "+h("{".concat(n.slice(1),"}"))})).replace(new RegExp(o(a),"g")," "),p=/(\([^()]+\))+?/g;p.test(v);)v=v.replace(p,"");var m=(v=(v=(v=v.replace(/\d+\.(\.\.)?/g,"")).replace(/\.\.\./g,"")).replace(/\$\d+/g,"")).trim().split(new RegExp(/\s+/));m=m.filter((function(e){return""!==e}));for(var g="",y=0;y<m.length;y++){var k=d(m[y]);if(void 0===k){var _=this._moveFromSan(m[y],r);if(null==_){if(!(KA.indexOf(m[y])>-1))throw new Error("Invalid move in PGN: ".concat(m[y]));g=m[y]}else g="",this._makeMove(_),this._incPositionCount(this.fen())}else this._comments[this.fen()]=k}g&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",g)}},{key:"_moveToSan",value:function(e,t){var n="";if(e.flags&OA.KSIDE_CASTLE)n="O-O";else if(e.flags&OA.QSIDE_CASTLE)n="O-O-O";else{if(e.piece!==TA){var r=function(e,t){for(var n=e.from,r=e.to,i=e.piece,a=0,o=0,u=0,s=0,l=t.length;s<l;s++){var c=t[s].from,f=t[s].to;i===t[s].piece&&n!==c&&r===f&&(a++,QA(n)===QA(c)&&o++,YA(n)===YA(c)&&u++)}return a>0?o>0&&u>0?XA(n):u>0?XA(n).charAt(1):XA(n).charAt(0):""}(e,t);n+=e.piece.toUpperCase()+r}e.flags&(OA.CAPTURE|OA.EP_CAPTURE)&&(e.piece===TA&&(n+=XA(e.from)[0]),n+="x"),n+=XA(e.to),e.promotion&&(n+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?n+="#":n+="+"),this._undoMove(),n}},{key:"_moveFromSan",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=tL(e),r=eL(n),i=this._moves({legal:!0,piece:r}),a=0,o=i.length;a<o;a++)if(n===tL(this._moveToSan(i[a],i)))return i[a];if(t)return null;var u=void 0,s=void 0,l=void 0,c=void 0,f=void 0,h=!1;if(((s=n.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/))||(s=n.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/)))&&(u=s[1],l=s[2],c=s[3],f=s[4],1==l.length&&(h=!0)),r=eL(n),i=this._moves({legal:!0,piece:u||r}),!c)return null;for(var d=0,v=i.length;d<v;d++)if(l){if(!(u&&u.toLowerCase()!=i[d].piece||FA[l]!=i[d].from||FA[c]!=i[d].to||f&&f.toLowerCase()!=i[d].promotion))return i[d];if(h){var p=XA(i[d].from);if(!(u&&u.toLowerCase()!=i[d].piece||FA[c]!=i[d].to||l!=p[0]&&l!=p[1]||f&&f.toLowerCase()!=i[d].promotion))return i[d]}}else if(n===tL(this._moveToSan(i[d],i)).replace("x",""))return i[d];return null}},{key:"ascii",value:function(){for(var e="   +------------------------+\n",t=FA.a8;t<=FA.h1;t++){if(0===YA(t)&&(e+=" "+"87654321"[QA(t)]+" |"),this._board[t]){var n=this._board[t].type;e+=" "+(this._board[t].color===SA?n.toUpperCase():n.toLowerCase())+" "}else e+=" . ";t+1&136&&(e+="|\n",t+=8)}return e+="   +------------------------+\n",e+="     a  b  c  d  e  f  g  h"}},{key:"perft",value:function(e){for(var t=this._moves({legal:!1}),n=0,r=this._turn,i=0,a=t.length;i<a;i++)this._makeMove(t[i]),this._isKingAttacked(r)||(e-1>0?n+=this.perft(e-1):n++),this._undoMove();return n}},{key:"_makePretty",value:function(e){var t=e.color,n=e.piece,r=e.from,i=e.to,a=e.flags,o=e.captured,u=e.promotion,s="";for(var l in OA)OA[l]&a&&(s+=MA[l]);var c=XA(r),f=XA(i),h={color:t,piece:n,from:c,to:f,san:this._moveToSan(e,this._moves({legal:!0})),flags:s,lan:c+f,before:this.fen(),after:""};return this._makeMove(e),h.after=this.fen(),this._undoMove(),o&&(h.captured=o),u&&(h.promotion=u,h.lan+=u),h}},{key:"turn",value:function(){return this._turn}},{key:"board",value:function(){for(var e=[],t=[],n=FA.a8;n<=FA.h1;n++)null==this._board[n]?t.push(null):t.push({square:XA(n),type:this._board[n].type,color:this._board[n].color}),n+1&136&&(e.push(t),t=[],n+=8);return e}},{key:"squareColor",value:function(e){if(e in FA){var t=FA[e];return(QA(t)+YA(t))%2==0?"light":"dark"}return null}},{key:"history",value:function(){for(var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).verbose,t=void 0!==e&&e,n=[],r=[];this._history.length>0;)n.push(this._undoMove());for(;;){var i=n.pop();if(!i)break;t?r.push(this._makePretty(i)):r.push(this._moveToSan(i,this._moves())),this._makeMove(i)}return r}},{key:"_getPositionCount",value:function(e){var t=nL(e);return this._positionCount[t]||0}},{key:"_incPositionCount",value:function(e){var t=nL(e);void 0===this._positionCount[t]&&(this._positionCount[t]=0),this._positionCount[t]+=1}},{key:"_decPositionCount",value:function(e){var t=nL(e);1===this._positionCount[t]?delete this._positionCount[t]:this._positionCount[t]-=1}},{key:"_pruneComments",value:function(){for(var e=this,t=[],n={},r=function(t){t in e._comments&&(n[t]=e._comments[t])};this._history.length>0;)t.push(this._undoMove());for(r(this.fen());;){var i=t.pop();if(!i)break;this._makeMove(i),r(this.fen())}this._comments=n}},{key:"getComment",value:function(){return this._comments[this.fen()]}},{key:"setComment",value:function(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}},{key:"deleteComment",value:function(){var e=this._comments[this.fen()];return delete this._comments[this.fen()],e}},{key:"getComments",value:function(){var e=this;return this._pruneComments(),Object.keys(this._comments).map((function(t){return{fen:t,comment:e._comments[t]}}))}},{key:"deleteComments",value:function(){var e=this;return this._pruneComments(),Object.keys(this._comments).map((function(t){var n=e._comments[t];return delete e._comments[t],{fen:t,comment:n}}))}},{key:"setCastlingRights",value:function(e,t){for(var n=0,r=[DA,NA];n<r.length;n++){var i=r[n];void 0!==t[i]&&(t[i]?this._castling[e]|=GA[i]:this._castling[e]&=~GA[i])}this._updateCastlingRights();var a=this.getCastlingRights(e);return!(void 0!==t[DA]&&t[DA]!==a[DA]||void 0!==t[NA]&&t[NA]!==a[NA])}},{key:"getCastlingRights",value:function(e){return k(k({},DA,!!(this._castling[e]&GA[DA])),NA,!!(this._castling[e]&GA[NA]))}},{key:"moveNumber",value:function(){return this._moveNumber}}])}();function iL(e){var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===E(e)&&"[object Date]"===t?new e.constructor(+e):"number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function aL(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}var oL=6048e5,uL=864e5,sL={};function lL(){return sL}function cL(e,t){var n,r,i,a,o,u,s=lL(),l=null!==(n=null!==(r=null!==(i=null!==(a=null==t?void 0:t.weekStartsOn)&&void 0!==a?a:null==t||null===(o=t.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.weekStartsOn)&&void 0!==i?i:s.weekStartsOn)&&void 0!==r?r:null===(u=s.locale)||void 0===u||null===(u=u.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==n?n:0,c=iL(e),f=c.getDay(),h=(f<l?7:0)+f-l;return c.setDate(c.getDate()-h),c.setHours(0,0,0,0),c}function fL(e){return cL(e,{weekStartsOn:1})}function hL(e){var t=iL(e),n=t.getFullYear(),r=aL(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);var i=fL(r),a=aL(e,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);var o=fL(a);return t.getTime()>=i.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function dL(e){var t=iL(e);return t.setHours(0,0,0,0),t}function vL(e){var t=iL(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function pL(e){if(!(t=e,t instanceof Date||"object"===E(t)&&"[object Date]"===Object.prototype.toString.call(t)||"number"==typeof e))return!1;var t,n=iL(e);return!isNaN(Number(n))}var mL={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function gL(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}var yL={date:gL({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:gL({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:gL({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},kL={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function _L(e){return function(t,n){var r;if("formatting"===(null!=n&&n.context?String(n.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,a=null!=n&&n.width?String(n.width):i;r=e.formattingValues[a]||e.formattingValues[i]}else{var o=e.defaultWidth,u=null!=n&&n.width?String(n.width):e.defaultWidth;r=e.values[u]||e.values[o]}return r[e.argumentCallback?e.argumentCallback(t):t]}}var bL={ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:_L({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:_L({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:_L({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:_L({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:_L({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function wL(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(i);if(!a)return null;var o,u=a[0],s=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(s)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return}(s,(function(e){return e.test(u)})):function(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(s,(function(e){return e.test(u)}));return o=e.valueCallback?e.valueCallback(l):l,{value:o=n.valueCallback?n.valueCallback(o):o,rest:t.slice(u.length)}}}var EL,CL={ordinalNumber:(EL={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(EL.matchPattern);if(!n)return null;var r=n[0],i=e.match(EL.parsePattern);if(!i)return null;var a=EL.valueCallback?EL.valueCallback(i[0]):i[0];return{value:a=t.valueCallback?t.valueCallback(a):a,rest:e.slice(r.length)}}),era:wL({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:wL({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:wL({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:wL({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:wL({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},xL={code:"en-US",formatDistance:function(e,t,n){var r,i=mL[e];return r="string"==typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:yL,formatRelative:function(e,t,n,r){return kL[e]},localize:bL,match:CL,options:{weekStartsOn:0,firstWeekContainsDate:1}};function SL(e){var t,n,r,i,a,o,u=iL(e),s=(t=u,n=function(e){var t=iL(e),n=aL(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}(u),r=dL(t),i=dL(n),a=+r-vL(r),o=+i-vL(i),Math.round((a-o)/uL));return s+1}function IL(e){var t=iL(e),n=+fL(t)-+function(e){var t=hL(e),n=aL(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),fL(n)}(t);return Math.round(n/oL)+1}function TL(e,t){var n,r,i,a,o,u,s=iL(e),l=s.getFullYear(),c=lL(),f=null!==(n=null!==(r=null!==(i=null!==(a=null==t?void 0:t.firstWeekContainsDate)&&void 0!==a?a:null==t||null===(o=t.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==i?i:c.firstWeekContainsDate)&&void 0!==r?r:null===(u=c.locale)||void 0===u||null===(u=u.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==n?n:1,h=aL(e,0);h.setFullYear(l+1,0,f),h.setHours(0,0,0,0);var d=cL(h,t),v=aL(e,0);v.setFullYear(l,0,f),v.setHours(0,0,0,0);var p=cL(v,t);return s.getTime()>=d.getTime()?l+1:s.getTime()>=p.getTime()?l:l-1}function AL(e,t){var n=iL(e),r=+cL(n,t)-+function(e,t){var n,r,i,a,o,u,s=lL(),l=null!==(n=null!==(r=null!==(i=null!==(a=null==t?void 0:t.firstWeekContainsDate)&&void 0!==a?a:null==t||null===(o=t.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==i?i:s.firstWeekContainsDate)&&void 0!==r?r:null===(u=s.locale)||void 0===u||null===(u=u.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==n?n:1,c=TL(e,t),f=aL(e,0);return f.setFullYear(c,0,l),f.setHours(0,0,0,0),cL(f,t)}(n,t);return Math.round(r/oL)+1}function LL(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}var NL=function(e,t){var n=e.getFullYear(),r=n>0?n:1-n;return LL("yy"===t?r%100:r,t.length)},DL=function(e,t){var n=e.getMonth();return"M"===t?String(n+1):LL(n+1,2)},PL=function(e,t){return LL(e.getDate(),t.length)},RL=function(e,t){return LL(e.getHours()%12||12,t.length)},ML=function(e,t){return LL(e.getHours(),t.length)},OL=function(e,t){return LL(e.getMinutes(),t.length)},FL=function(e,t){return LL(e.getSeconds(),t.length)},UL=function(e,t){var n=t.length,r=e.getMilliseconds();return LL(Math.trunc(r*Math.pow(10,n-3)),t.length)},VL="midnight",jL="noon",BL="morning",zL="afternoon",qL="evening",GL="night",HL={G:function(e,t,n){var r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return NL(e,t)},Y:function(e,t,n,r){var i=TL(e,r),a=i>0?i:1-i;return"YY"===t?LL(a%100,2):"Yo"===t?n.ordinalNumber(a,{unit:"year"}):LL(a,t.length)},R:function(e,t){return LL(hL(e),t.length)},u:function(e,t){return LL(e.getFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return LL(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return LL(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getMonth();switch(t){case"M":case"MM":return DL(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return LL(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var i=AL(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):LL(i,t.length)},I:function(e,t,n){var r=IL(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):LL(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):PL(e,t)},D:function(e,t,n){var r=SL(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):LL(r,t.length)},E:function(e,t,n){var r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var i=e.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return LL(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var i=e.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return LL(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return LL(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,i=e.getHours();switch(r=12===i?jL:0===i?VL:i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,i=e.getHours();switch(r=i>=17?qL:i>=12?zL:i>=4?BL:GL,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return RL(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):ML(e,t)},K:function(e,t,n){var r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):LL(r,t.length)},k:function(e,t,n){var r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):LL(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):OL(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):FL(e,t)},S:function(e,t){return UL(e,t)},X:function(e,t,n){var r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return KL(r);case"XXXX":case"XX":return QL(r);default:return QL(r,":")}},x:function(e,t,n){var r=e.getTimezoneOffset();switch(t){case"x":return KL(r);case"xxxx":case"xx":return QL(r);default:return QL(r,":")}},O:function(e,t,n){var r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+WL(r,":");default:return"GMT"+QL(r,":")}},z:function(e,t,n){var r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+WL(r,":");default:return"GMT"+QL(r,":")}},t:function(e,t,n){return LL(Math.trunc(e.getTime()/1e3),t.length)},T:function(e,t,n){return LL(e.getTime(),t.length)}};function WL(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),a=r%60;return 0===a?n+String(i):n+String(i)+t+LL(a,2)}function KL(e,t){return e%60==0?(e>0?"-":"+")+LL(Math.abs(e)/60,2):QL(e,t)}function QL(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e>0?"-":"+",r=Math.abs(e);return n+LL(Math.trunc(r/60),2)+t+LL(r%60,2)}var YL=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},$L=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},XL={p:$L,P:function(e,t){var n,r=e.match(/(P+)(p+)?/)||[],i=r[1],a=r[2];if(!a)return YL(e,t);switch(i){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",YL(i,t)).replace("{{time}}",$L(a,t))}},JL=/^D+$/,ZL=/^Y+$/,eN=["D","DD","YY","YYYY"];var tN=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,nN=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,rN=/^'([^]*?)'?$/,iN=/''/g,aN=/[a-zA-Z]/;function oN(e,t,n){var r,i,a,o,u,s,l,c,f,h,d,v,p,m,g=lL(),y=null!==(r=null!==(i=null==n?void 0:n.locale)&&void 0!==i?i:g.locale)&&void 0!==r?r:xL,k=null!==(a=null!==(o=null!==(u=null!==(s=null==n?void 0:n.firstWeekContainsDate)&&void 0!==s?s:null==n||null===(l=n.locale)||void 0===l||null===(l=l.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==u?u:g.firstWeekContainsDate)&&void 0!==o?o:null===(c=g.locale)||void 0===c||null===(c=c.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==a?a:1,_=null!==(f=null!==(h=null!==(d=null!==(v=null==n?void 0:n.weekStartsOn)&&void 0!==v?v:null==n||null===(p=n.locale)||void 0===p||null===(p=p.options)||void 0===p?void 0:p.weekStartsOn)&&void 0!==d?d:g.weekStartsOn)&&void 0!==h?h:null===(m=g.locale)||void 0===m||null===(m=m.options)||void 0===m?void 0:m.weekStartsOn)&&void 0!==f?f:0,b=iL(e);if(!pL(b))throw new RangeError("Invalid time value");var w=t.match(nN).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,XL[t])(e,y.formatLong):e})).join("").match(tN).map((function(e){if("''"===e)return{isToken:!1,value:"'"};var t=e[0];if("'"===t)return{isToken:!1,value:uN(e)};if(HL[t])return{isToken:!0,value:e};if(t.match(aN))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));y.localize.preprocessor&&(w=y.localize.preprocessor(b,w));var E={firstWeekContainsDate:k,weekStartsOn:_,locale:y};return w.map((function(r){if(!r.isToken)return r.value;var i=r.value;return(null!=n&&n.useAdditionalWeekYearTokens||!function(e){return ZL.test(e)}(i))&&(null!=n&&n.useAdditionalDayOfYearTokens||!function(e){return JL.test(e)}(i))||function(e,t,n){var r=function(e,t,n){var r="Y"===e[0]?"years":"days of the month";return"Use `".concat(e.toLowerCase(),"` instead of `").concat(e,"` (in `").concat(t,"`) for formatting ").concat(r," to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}(e,t,n);if(console.warn(r),eN.includes(e))throw new RangeError(r)}(i,t,String(e)),(0,HL[i[0]])(b,i,y.localize,E)})).join("")}function uN(e){var t=e.match(rN);return t?t[1].replace(iN,"'"):e}var sN,lN="4k3/8/8/8/8/8/8/4K3 w - - 0 1",cN={class:"root"},fN={key:0,class:"toolbar"},hN=["src"],dN=["src"],vN=["src"],pN=["src"],mN={key:0},gN=["onClick"],yN={__name:"ChessHistory",emits:["requestNodeSelected","requestStartPosition"],setup:function(e,t){var n=t.expose,r=t.emit,i=Ht([]),a=Ht(),u=Ht(-1),l=Ht(!1);function f(){return(f=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t<0&&(t=-1),u.value=t,!(t>0)){e.next=9;break}return e.next=5,xA(50);case 5:(n=document.querySelector(".main-content > .selected"))&&n.scrollIntoView(),e.next=10;break;case 9:document.querySelector(".main-content").scrollTo(0,0);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){l.value&&l.value&&r("requestStartPosition")}function d(){if(l.value){for(u.value-=1;u.value>=0;u.value--){if(i.value[u.value].fen)break}if(u.value>=0){var e=i.value[u.value],t=e.fen,n=e.fromFileIndex,a=e.fromRankIndex,o=e.toFileIndex,s=e.toRankIndex;r("requestNodeSelected",{nodeIndex:u.value,fen:t,fromFileIndex:n,fromRankIndex:a,toFileIndex:o,toRankIndex:s})}else h()}}function v(){if(l.value){for(u.value+=1;u.value<i.value.length;u.value++);var e=i.value[u.value];if(null!=e&&e.fen){var t=i.value[u.value],n=t.fen,a=t.fromFileIndex,o=t.fromRankIndex,s=t.toFileIndex,c=t.toRankIndex;r("requestNodeSelected",{nodeIndex:u.value,fen:n,fromFileIndex:a,fromRankIndex:o,toFileIndex:s,toRankIndex:c})}else d()}}function p(){if(l.value){for(u.value+=1;u.value<i.value.length;u.value++){if(i.value[u.value].fen)break}var e=i.value[u.value];null!=e&&e.fen||d();var t=e.fen,n=e.fromFileIndex,a=e.fromRankIndex,o=e.toFileIndex,s=e.toRankIndex;r("requestNodeSelected",{nodeIndex:u.value,fen:t,fromFileIndex:n,fromRankIndex:a,toFileIndex:o,toRankIndex:s})}}return n({reset:function(e,t){var n="".concat(e,".").concat(t?"":"..");l.value=!1,u.value=-1,i.value=[{number:n}]},addNodeOrCompleteFirst:function(e){var t=e.number,n=e.fan,r=e.san,a=e.fen,o=e.fromFileIndex,u=e.fromRankIndex,s=e.toFileIndex,l=e.toRankIndex,f=e.whiteTurn;if(1!==i.value.length||i.value[0].fan){var h="".concat(t,".").concat(!0===f?"":"..");i.value=[].concat(w(i.value),[{number:h,fan:n,san:r,fen:a,fromFileIndex:o,fromRankIndex:u,toFileIndex:s,toRankIndex:l,whiteTurn:f}])}else{var d=c(c({},i.value[0]),{},{fan:n,san:r,fen:a,fromFileIndex:o,fromRankIndex:u,toFileIndex:s,toRankIndex:l,whiteTurn:f});i.value[0]=d}},getNodes:function(){return i.value.map((function(e){return e}))},setNodes:function(e){i.value=e},setSelectedNode:function(e){return f.apply(this,arguments)},scrollToLastElement:function(){document.querySelector(".main-content *:last-child").scrollIntoView()},activateNavigationMode:function(){l.value=!0,v()},getLastNode:function(){return i.value[i.value.findLastIndex((function(e){return!0}))]},getNodesCount:function(){return i.value.length}}),function(e,t){return Ei(),Ii("div",cN,[l.value?(Ei(),Ii("div",fN,[Ri("button",{onClick:h,class:"toolbar__button"},[Ri("img",{src:Yt("data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23000000'%20width='800px'%20height='800px'%20viewBox='0%200%2056%2056'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M%209.2500%2047.0898%20L%2014.5703%2047.0898%20C%2016.6328%2047.0898%2017.6875%2046.0117%2017.6875%2043.9492%20L%2017.6875%2028.8789%20C%2017.6172%2028.5976%2017.5703%2028.2930%2017.5703%2027.9883%20C%2017.5703%2027.6602%2017.6172%2027.3555%2017.6875%2027.0742%20L%2017.6875%2012.0273%20C%2017.6875%209.8945%2016.6328%208.9102%2014.5703%208.9102%20L%209.2500%208.9102%20C%207.1875%208.9102%206.1094%209.9883%206.1094%2012.0273%20L%206.1094%2043.9492%20C%206.1094%2046.0117%207.1875%2047.0898%209.2500%2047.0898%20Z%20M%2046.5157%2046.3867%20C%2048.3671%2046.3867%2049.8906%2045.0039%2049.8906%2042.3789%20L%2049.8906%2013.5976%20C%2049.8906%2010.9727%2048.3671%209.5664%2046.5157%209.5664%20C%2045.5781%209.5664%2044.7813%209.8711%2043.8203%2010.4336%20L%2019.9375%2024.4961%20C%2018.6719%2025.2461%2017.9688%2026.1133%2017.6875%2027.0742%20L%2017.6875%2028.8789%20C%2017.9688%2029.8633%2018.6719%2030.7071%2019.9375%2031.4805%20L%2043.8203%2045.5195%20C%2044.7813%2046.0820%2045.5781%2046.3867%2046.5157%2046.3867%20Z'/%3e%3c/svg%3e"),width:"20",height:"20"},null,8,hN)]),Ri("button",{onClick:d,class:"toolbar__button"},[Ri("img",{src:Yt("data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23000000'%20width='800px'%20height='800px'%20viewBox='0%200%2056%2056'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M%2025.1218%2044.5009%20C%2026.7084%2044.5009%2028.0509%2043.2804%2028.0509%2041.0225%20L%2028.0509%2029.3058%20C%2028.2747%2030.1601%2028.9053%2030.8924%2030.0037%2031.5434%20L%2050.7318%2043.7483%20C%2051.5454%2044.2365%2052.2369%2044.5009%2053.0709%2044.5009%20C%2054.6577%2044.5009%2056%2043.2804%2056%2041.0225%20L%2056%2016.0228%20C%2056%2013.7649%2054.6577%2012.5444%2053.0709%2012.5444%20C%2052.2369%2012.5444%2051.5658%2012.8088%2050.7318%2013.2970%20L%2030.0037%2025.5020%20C%2028.8849%2026.1529%2028.2747%2026.8852%2028.0509%2027.7395%20L%2028.0509%2016.0228%20C%2028.0509%2013.7649%2026.7084%2012.5444%2025.1218%2012.5444%20C%2024.2877%2012.5444%2023.6165%2012.8088%2022.7825%2013.2970%20L%202.0545%2025.5020%20C%20.6102%2026.3563%200%2027.3530%200%2028.5125%20C%200%2029.6923%20.6102%2030.6890%202.0545%2031.5434%20L%2022.7825%2043.7483%20C%2023.5962%2044.2365%2024.2877%2044.5009%2025.1218%2044.5009%20Z'/%3e%3c/svg%3e"),width:"20",height:"20"},null,8,dN)]),Ri("button",{onClick:p,class:"toolbar__button"},[Ri("img",{src:Yt("data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23000000'%20width='800px'%20height='800px'%20viewBox='0%200%2056%2056'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M%202.9281%2044.4947%20C%203.7618%2044.4947%204.4531%2044.2304%205.2665%2043.7424%20L%2025.9869%2031.5420%20C%2027.1053%2030.8913%2027.7153%2030.1592%2027.9389%2029.3052%20L%2027.9389%2041.0176%20C%2027.9389%2043.2747%2029.2810%2044.4947%2030.8671%2044.4947%20C%2031.7007%2044.4947%2032.3921%2044.2304%2033.2055%2043.7424%20L%2053.9461%2031.5420%20C%2055.3695%2030.6879%2056%2029.6916%2056%2028.5122%20C%2056%2027.3531%2055.3695%2026.3568%2053.9461%2025.5028%20L%2033.2055%2013.3023%20C%2032.3921%2012.8143%2031.7007%2012.5500%2030.8671%2012.5500%20C%2029.2810%2012.5500%2027.9389%2013.7700%2027.9389%2016.0271%20L%2027.9389%2027.7395%20C%2027.7153%2026.8855%2027.1053%2026.1535%2025.9869%2025.5028%20L%205.2665%2013.3023%20C%204.4328%2012.8143%203.7618%2012.5500%202.9281%2012.5500%20C%201.3420%2012.5500%200%2013.7700%200%2016.0271%20L%200%2041.0176%20C%200%2043.2747%201.3420%2044.4947%202.9281%2044.4947%20Z'/%3e%3c/svg%3e"),width:"20",height:"20"},null,8,vN)]),Ri("button",{onClick:v,class:"toolbar__button"},[Ri("img",{src:Yt("data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23000000'%20width='800px'%20height='800px'%20viewBox='0%200%2056%2056'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M%209.4844%2046.3867%20C%2010.4453%2046.3867%2011.2422%2046.0820%2012.1797%2045.5195%20L%2036.0625%2031.4805%20C%2037.3516%2030.7071%2038.0547%2029.8633%2038.3125%2028.8789%20L%2038.3125%2043.9492%20C%2038.3125%2046.0117%2039.3906%2047.0898%2041.4532%2047.0898%20L%2046.7735%2047.0898%20C%2048.8360%2047.0898%2049.8906%2046.0117%2049.8906%2043.9492%20L%2049.8906%2012.0273%20C%2049.8906%209.8945%2048.8360%208.9102%2046.7735%208.9102%20L%2041.4532%208.9102%20C%2039.3906%208.9102%2038.3125%209.9883%2038.3125%2012.0273%20L%2038.3125%2027.0742%20C%2038.0547%2026.1133%2037.3516%2025.2461%2036.0625%2024.4961%20L%2012.1797%2010.4336%20C%2011.2188%209.8711%2010.4453%209.5664%209.4844%209.5664%20C%207.6563%209.5664%206.1094%2010.9727%206.1094%2013.5976%20L%206.1094%2042.3789%20C%206.1094%2045.0039%207.6563%2046.3867%209.4844%2046.3867%20Z'/%3e%3c/svg%3e"),width:"20",height:"20"},null,8,pN)])])):ji("",!0),Ri("div",{class:"main-content",ref_key:"mainContent",ref:a},[(Ei(!0),Ii(gi,null,Ir(i.value,(function(e,t){var n,a,o;return Ei(),Ii(gi,{key:t},[e.whiteTurn||0===t?(Ei(),Ii("span",mN,ke("".concat(null!==(n=e.number)&&void 0!==n?n:"","")),1)):ji("",!0),Ri("button",{onClick:function(e){return n=t,a=i.value[n],o=a.fen,u=a.fromFileIndex,s=a.fromRankIndex,c=a.toFileIndex,f=a.toRankIndex,void(l.value&&o&&r("requestNodeSelected",{nodeIndex:n,fen:o,fromFileIndex:u,fromRankIndex:s,toFileIndex:c,toRankIndex:f}));var n,a,o,u,s,c,f},class:ve({selected:(o=t,o===u.value)})},ke("".concat(null!==(a=e.fan)&&void 0!==a?a:"","")),11,gN)],64)})),128))],512)])}}},kN=uA(yN,[["__scopeId","data-v-22dd577c"]]),_N="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='-1%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='user-6'%20transform='translate(-3%20-2)'%3e%3cpath%20id='secondary'%20fill='%232ca9bc'%20d='M11,13h2a7,7,0,0,1,7,7h0a1,1,0,0,1-1,1H5a1,1,0,0,1-1-1H4a7,7,0,0,1,7-7Z'/%3e%3cpath%20id='primary'%20d='M20,20h0a1,1,0,0,1-1,1H5a1,1,0,0,1-1-1H4a7,7,0,0,1,7-7h2A7,7,0,0,1,20,20ZM12,3a5,5,0,1,0,5,5A5,5,0,0,0,12,3Z'%20fill='none'%20stroke='%23000000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='2'/%3e%3c/g%3e%3c/svg%3e",bN={class:"dialog"},wN={class:"center"},EN={class:"field"},CN={for:"yes"},xN={for:"yes"},SN={id:"button"},IN={__name:"NewGameDialog",setup:function(e,t){var n=t.expose,r=ef().t,i=Ht(PA),a=Ht(),o=Ht("100"),u=Ht(!0);function s(){mv({startPosition:i.value,withWhiteSide:u.value})}function l(){mv()}function c(e){var t=e.target.value;u.value="yes"===t}return yr((function(){var e=window.innerWidth<window.innerHeight?window.innerWidth:window.innerHeight;o.value="".concat(.75*e),a.value.newGame(i.value)})),n({returnValue:function(){}}),function(e,t){var n=Fn("ChessboardVue");return Ei(),Ii("div",bN,[Ri("div",wN,[Ri("header",null,[Ri("h2",null,ke(Yt(r)("pages.newGame.title")),1)]),Ri("section",null,[Mi(n,{id:"previewBoard",ref_key:"previewBoard",ref:a,size:o.value,whitePlayerHuman:!1,blackPlayerHuman:!1},null,8,["size"]),Ri("div",EN,[Ui(ke(Yt(r)("pages.newGame.hasWhite"))+" ",1),Ri("input",{type:"radio",name:"hasWhite",value:"yes",checked:"",onChange:c},null,32),Ri("label",CN,ke(Yt(r)("pages.newGame.hasWhiteYes")),1),Ri("input",{type:"radio",name:"hasWhite",value:"no",onChange:c},null,32),Ri("label",xN,ke(Yt(r)("pages.newGame.hasWhiteNo")),1)]),Ri("div",SN,[Ri("button",{class:"ok",onClick:s},ke(Yt(r)("pages.newGame.submit")),1),Ri("button",{class:"cancel",onClick:l},ke(Yt(r)("pages.newGame.cancel")),1)])])])])}}},TN=uA(IN,[["__scopeId","data-v-0637cfd3"]]),AN={class:"dialog"},LN={class:"center"},NN={id:"button"},DN={__name:"GiveUpGameDialog",setup:function(e,t){var n=t.expose,r=ef().t;function i(){return a.apply(this,arguments)}function a(){return(a=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mv(!0);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){mv(!1)}return n({returnValue:function(){}}),function(e,t){return Ei(),Ii("div",AN,[Ri("div",LN,[Ri("header",null,[Ri("h2",null,ke(Yt(r)("pages.giveUp.title")),1)]),Ri("section",null,[Ri("div",NN,[Ri("button",{class:"ok",onClick:i},ke(Yt(r)("pages.giveUp.submit")),1),Ri("button",{class:"cancel",onClick:u},ke(Yt(r)("pages.giveUp.cancel")),1)])])])])}}},PN=uA(DN,[["__scopeId","data-v-f77ae50c"]]),RN=wf("GameStore",{state:function(){return{startPosition:YT("GameStore$startPosition",lN),currentPosition:YT("GameStore$currentPosition",lN),whitePlayerIsHuman:YT("GameStore$whitePlayerIsHuman",!1),blackPlayerIsHuman:YT("GameStore$blackPlayerIsHuman",!1),weHaveWhite:YT("GameStore$weHaveWhite",void 0),whiteNickname:YT("GameStore$whiteNickname",""),blackNickname:YT("GameStore$blackNickname",""),boardReversed:YT("GameStore$boardReversed",!1),historyNodes:YT("GameStore$historyNodes",[]),lastMoveArrow:YT("GameStore$lastMoveArrow",{start:{file:-1/0,rank:-1/0},end:{file:-1/0,rank:-1/0}})}},actions:{setCurrentPosition:function(e){this.currentPosition=e},setWhitePlayerIsHuman:function(e){this.whitePlayerIsHuman=e},setBlackPlayerIsHuman:function(e){this.blackPlayerIsHuman=e},setWeHaveWhiteStatus:function(e){this.weHaveWhite=e},setWhiteNickname:function(e){this.whiteNickname=e},setBlackNickname:function(e){this.blackNickname=e},setBoardReversedStatus:function(e){this.boardReversed=e},setHistoryNodes:function(e){this.historyNodes=e.map((function(e){return e}))},addHistoryNode:function(e){this.historyNodes.push(e)},setLastMoveArrow:function(e){this.lastMoveArrow=e},setStartPosition:function(e){this.startPosition=e}},persist:sessionStorage}),MN=function(e){return An("data-v-813c6d66"),e=e(),Ln(),e},ON={id:"pageRoot"},FN={id:"gameZone"},UN={id:"miscZone"},VN={id:"buttons"},jN=["src"],BN=["src"],zN=["src"],qN=["src"],GN={key:0,id:"nicknames"},HN=MN((function(){return Ri("td",null,[Ri("div",{class:"color white"})],-1)})),WN=["src"],KN=MN((function(){return Ri("td",null,[Ri("div",{class:"color black"})],-1)})),QN=["src"],YN={__name:"GamePage",setup:function(e){Fa((function(e){return{"7d273762":d.value}}));var t=ef().t,n=$T(),r=RN(),i=new rL,a=Ht(),u=Ht("100"),l=Ht(),c=Ht(),f=Ht(!1),h=Ht(!1),d=la((function(){return u.value+"px"})),v=la((function(){return!0===n.roomOwner})),p=la((function(){return!0===n.gameStarted})),m=function(e){e=Ft(e);var t={};for(var n in e){var r=e[n];(Gt(r)||Pt(r))&&(t[n]=en(e,n))}return t}(r),g=m.startPosition,y=m.currentPosition,k=m.whitePlayerIsHuman,_=m.blackPlayerIsHuman,b=m.whiteNickname,w=m.blackNickname,E=m.weHaveWhite,x=la((function(){return"w"===y.value.split(" ")[1]})),S=Ht();function I(){i=new rL(g.value);var e,t=c.value.getNodes(),n=oN(new Date,"yyyy.MM.dd"),r=C(t);try{for(r.s();!(e=r.n()).done;){var a=e.value;try{i.move(a.san)}catch(o){console.log("Failed to play ".concat(a.san," in pgn history"))}}}catch(u){r.e(u)}finally{r.f()}i.header("White",b.value,"Black",w.value,"Date",n)}function T(){var e=window.innerWidth<window.innerHeight?window.innerWidth:window.innerHeight;u.value="".concat(.8*e)}function A(){return L.apply(this,arguments)}function L(){return L=s(o().mark((function e(){var i,a,u,s,f,d,p,m,g,y,k,_;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.roomId,e.next=3,aA({roomId:i});case 3:if(a=e.sent,!a.hasOwnProperty("error")){e.next=8;break}return alert(t(a.error)),e.abrupt("return");case 8:u=a.matchingDocument,s=u.startPosition,f=u.hostHasWhite,d=u.hostUser,p=u.guestUser,m=s.split(" "),g=parseInt(m[5]),y="w"===m[1],c.value.reset(g,y),r.setHistoryNodes(c.value.getNodes()),r.setStartPosition(s),l.value.newGame(s),r.setCurrentPosition(s),k=[!0,"true"].includes(f),_=k&&v.value||!k&&!v.value,r.setWeHaveWhiteStatus(_),r.setWhitePlayerIsHuman(_),r.setBlackPlayerIsHuman(!_),r.setWhiteNickname(f?d:p),r.setBlackNickname(f?p:d),h.value=!0,n.setAtLeastAGameStartedStatus(!0),r.setLastMoveArrow({start:{file:-1/0,rank:-1/0},end:{file:-1/0,rank:-1/0}});case 27:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}function N(){return D.apply(this,arguments)}function D(){return D=s(o().mark((function e(){var i,a,u,s,l,c,h,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gv(TN,{});case 2:if(i=e.sent,a=i.startPosition,u=i.withWhiteSide,!i){e.next=21;break}return s={gameStarted:!0,giveUpSide:0,startPosition:a,hostHasWhite:u},l=n.roomId,e.next=9,rA({roomId:l,newValues:s});case 9:if(c=e.sent,!c.hasOwnProperty("error")){e.next=14;break}return alert(t(c.error)),e.abrupt("return");case 14:n.setGameStartedStatus(!0),r.setStartPosition(a),h=n.roomOwner,d=u&&!h||!u&&h,r.setBoardReversedStatus(d),f.value=d,A();case 21:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function P(){return R.apply(this,arguments)}function R(){return R=s(o().mark((function e(){var i,a,u,s,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gv(PN,{});case 2:if(i=e.sent,a=[!0,"true"].includes(n.roomOwner),!i){e.next=20;break}return u={gameStarted:!1,giveUpSide:a?-1:1},s=n.roomId,e.next=9,rA({roomId:s,newValues:u});case 9:if(f=e.sent,!f.hasOwnProperty("error")){e.next=14;break}return alert(t(f.error)),e.abrupt("return");case 14:n.setGameStartedStatus(!1),l.value.stop(),r.setWhitePlayerIsHuman(!1),r.setBlackPlayerIsHuman(!1),I(),c.value.activateNavigationMode();case 20:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}function M(e){var i,a,o,u,s,h=e.data(),d=e.id,p=["true",!0].includes(h.gameStarted),m=n.roomId==d,g=!v.value;if(m)if(p){var k=n.gameStarted;if(g&&!k){var _=h.hostHasWhite&&!h.roomOwner||!h.hostHasWhite&&h.roomOwner;n.setGameStartedStatus(!0),r.setBoardReversedStatus(_),f.value=_,A()}if(!l.value.playManualMove((i={startFile:h.lastMoveStartFile,startRank:h.lastMoveStartRank,endFile:h.lastMoveEndFile,endRank:h.lastMoveEndRank,promotion:h.lastMovePromotion},a=String.fromCharCode("a".charCodeAt(0)+i.startFile),o=String.fromCharCode("1".charCodeAt(0)+i.startRank),u=String.fromCharCode("a".charCodeAt(0)+i.endFile),s=String.fromCharCode("1".charCodeAt(0)+i.endRank),"".concat(a).concat(o).concat(u).concat(s))))return;r.setLastMoveArrow({start:{file:h.lastMoveStartFile,rank:h.lastMoveStartRank},end:{file:h.lastMoveEndFile,rank:h.lastMoveEndRank}});var b=l.value.getCurrentPosition();y.value=b}else{var w=h.giveUpSide;(v.value?w>=1:w<=-1)&&(n.setGameStartedStatus(!1),r.setWhitePlayerIsHuman(!1),r.setBlackPlayerIsHuman(!1),I(),c.value.activateNavigationMode(),zf({text:t("pages.game.outcomes.gaveUp")}))}}function O(){f.value=!f.value}function F(e,t,n,r,i,a,o){return U.apply(this,arguments)}function U(){return U=s(o().mark((function e(i,a,u,s,l,f,h){var d,v,p,m,g;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.value.addNodeOrCompleteFirst({number:i,whiteTurn:a,san:u,fan:s,fen:l,fromFileIndex:f.start.file,fromRankIndex:f.start.rank,toFileIndex:f.end.file,toRankIndex:f.end.rank}),e.next=3,xA(10);case 3:return c.value.scrollToLastElement(),d=c.value.getNodesCount(),v=c.value.getLastNode,d>1&&v.fan?r.addHistoryNode(c.value.getLastNode()):r.setHistoryNodes(c.value.getNodes()),r.setLastMoveArrow(f),y.value=l,p={lastMoveSan:u,lastMoveFan:s,lastMoveStartFile:f.start.file,lastMoveStartRank:f.start.rank,lastMoveEndFile:f.end.file,lastMoveEndRank:f.end.rank,lastMovePromotion:h},m=n.roomId,e.next=13,rA({roomId:m,newValues:p});case 13:if(g=e.sent,!g.hasOwnProperty("error")){e.next=18;break}return alert(t(g.error)),e.abrupt("return");case 18:case"end":return e.stop()}}),e)}))),U.apply(this,arguments)}function V(e){return j.apply(this,arguments)}function j(){return j=s(o().mark((function e(r){var i,a,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p.value){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,xA(50);case 4:return i={gameStarted:!1},a=n.roomId,e.next=8,rA({roomId:a,newValues:i});case 8:u=e.sent,u.hasOwnProperty("error")&&console.error(u.error),I(),c.value.activateNavigationMode(),n.setGameStartedStatus(!1),s=t("pages.game.outcomes.checkmate"),zf({text:s});case 16:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}function B(){return z.apply(this,arguments)}function z(){return z=s(o().mark((function e(){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p.value){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,xA(50);case 4:return r={gameStarted:!1},i=n.roomId,e.next=8,rA({roomId:i,newValues:r});case 8:a=e.sent,a.hasOwnProperty("error")&&console.error(a.error),I(),c.value.activateNavigationMode(),n.setGameStartedStatus(!1),u=t("pages.game.outcomes.stalemate"),zf({text:u});case 16:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}function q(){return G.apply(this,arguments)}function G(){return G=s(o().mark((function e(){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p.value){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,xA(50);case 4:return r={gameStarted:!1},i=n.roomId,e.next=8,rA({roomId:i,newValues:r});case 8:a=e.sent,a.hasOwnProperty("error")&&console.error(a.error),I(),c.value.activateNavigationMode(),n.setGameStartedStatus(!1),u=t("pages.game.outcomes.perpetualDraw"),zf({text:u});case 16:case"end":return e.stop()}}),e)}))),G.apply(this,arguments)}function H(){return W.apply(this,arguments)}function W(){return W=s(o().mark((function e(){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p.value){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,xA(50);case 4:return r={gameStarted:!1},i=n.roomId,e.next=8,rA({roomId:i,newValues:r});case 8:a=e.sent,a.hasOwnProperty("error")&&console.error(a.error),I(),c.value.activateNavigationMode(),n.setGameStartedStatus(!1),u=t("pages.game.outcomes.missingMaterial"),zf({text:u});case 16:case"end":return e.stop()}}),e)}))),W.apply(this,arguments)}function K(){return Q.apply(this,arguments)}function Q(){return Q=s(o().mark((function e(){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p.value){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,xA(50);case 4:return r={gameStarted:!1},i=n.roomId,e.next=8,rA({roomId:i,newValues:r});case 8:a=e.sent,a.hasOwnProperty("error")&&console.error(a.error),I(),c.value.activateNavigationMode(),n.setGameStartedStatus(!1),u=t("pages.game.outcomes.fiftyMovesDraw"),zf({text:u});case 16:case"end":return e.stop()}}),e)}))),Q.apply(this,arguments)}function Y(){return $.apply(this,arguments)}function $(){return($=s(o().mark((function e(){var n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:confirm(t("pages.pgn.confirmationMessage"))&&(n=i.pgn({newline:"\n",maxWidth:80}),r=document.createElement("a"),a=new Blob([n],{type:"text/plain"}),r.href=URL.createObjectURL(a),r.download="game.pgn",r.click(),URL.revokeObjectURL(r.href));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){p.value||l.value.setPositionAndLastMove(g.value,{start:{file:-100,rank:-100},end:{file:-100,rank:-100}})&&c.value.setSelectedNode(-1)}function J(e){var t=e.nodeIndex,n=e.fen,r=e.fromFileIndex,i=e.fromRankIndex,a=e.toFileIndex,o=e.toRankIndex;p.value||l.value.setPositionAndLastMove(n,{start:{file:r,rank:i},end:{file:a,rank:o}})&&c.value.setSelectedNode(t)}function Z(e){M(e)}return yr(s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=n.roomId)){e.next=5;break}return e.next=4,JT(t,Z);case 4:a.value=e.sent;case 5:case"end":return e.stop()}}),e)})))),br((function(){a.value&&a.value()})),br((function(){S.value&&S.value()})),yr((function(){window.addEventListener("resize",T),T()})),br((function(){window.removeEventListener("resize",T)})),yr((function(){l.value.newGame(y.value),p.value||l.value.stop(),h.value=n.atLeastAGameStarted,f.value=r.boardReversed,c.value.setNodes(r.historyNodes),l.value.setLastMoveArrow(r.lastMoveArrow),p.value||(I(),c.value.activateNavigationMode())})),function(e,t){var n=Fn("ChessboardVue");return Ei(),Ii("div",ON,[Ri("div",FN,[Mi(kN,{ref_key:"history",ref:c,onRequestStartPosition:X,onRequestNodeSelected:J},null,512),Mi(n,{id:"board",ref_key:"board",ref:l,size:u.value,whitePlayerHuman:Yt(k),blackPlayerHuman:Yt(_),reversed:f.value,onMoveDone:F,onCheckmate:V,onStalemate:B,onPerpetualDraw:q,onMissingMaterialDraw:H,onFiftyMovesDraw:K},null,8,["size","whitePlayerHuman","blackPlayerHuman","reversed"])]),Ri("div",UN,[Ri("div",VN,[Ri("button",{onClick:O},[Ri("img",{src:Yt("data:image/svg+xml,%3c?xml%20version='1.0'%20?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%3e%3cdefs%3e%3cstyle%3e.c{stroke:%231237a5;}.c,.d{fill:none;stroke-linecap:round;stroke-linejoin:round;}.d{stroke:%234eb8ff;}%3c/style%3e%3c/defs%3e%3cg%20id='a'/%3e%3cg%20id='b'%3e%3cline%20class='c'%20x1='7.5'%20x2='7.5'%20y1='20.5'%20y2='3.5'/%3e%3cline%20class='c'%20x1='7.48'%20x2='3.5'%20y1='3.54'%20y2='7.99'/%3e%3cline%20class='c'%20x1='7.52'%20x2='11.5'%20y1='3.54'%20y2='7.99'/%3e%3cline%20class='d'%20x1='16.5'%20x2='16.5'%20y1='3.5'%20y2='20.5'/%3e%3cline%20class='d'%20x1='16.48'%20x2='12.5'%20y1='20.46'%20y2='16.01'/%3e%3cline%20class='d'%20x1='16.52'%20x2='20.5'%20y1='20.46'%20y2='16.01'/%3e%3c/g%3e%3c/svg%3e")},null,8,jN)]),v.value&&!p.value?(Ei(),Ii("button",{key:0,onClick:N},[Ri("img",{src:Yt("data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20512%20512'%20xml:space='preserve'%3e%3cg%3e%3cg%3e%3cg%3e%3cpath%20style='fill:%23FFCE8B;'%20d='M52.251,26.527v458.946c0,5.687-4.615,10.302-10.302,10.302H29.35%20c-5.697,0-10.302-4.615-10.302-10.302V26.527c0-5.687,4.605-10.302,10.302-10.302h12.599%20C47.636,16.225,52.251,20.841,52.251,26.527z'/%3e%3crect%20x='19.048'%20y='64.644'%20style='fill:%23FFB54E;'%20width='33.203'%20height='133.336'/%3e%3c/g%3e%3cg%3e%3cpath%20style='fill:%23FFCE8B;'%20d='M492.952,26.527v458.946c0,5.687-4.605,10.302-10.302,10.302h-12.599%20c-5.687,0-10.302-4.615-10.302-10.302V26.527c0-5.687,4.615-10.302,10.302-10.302h12.599%20C488.347,16.225,492.952,20.841,492.952,26.527z'/%3e%3cg%3e%3cg%3e%3crect%20x='459.749'%20y='64.644'%20style='fill:%23FFB54E;'%20width='33.203'%20height='133.336'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3cg%3e%3cg%3e%3crect%20x='150.846'%20y='79.064'%20style='fill:%23FFB54E;'%20width='210.308'%20height='104.491'/%3e%3crect%20x='335.163'%20y='79.064'%20style='fill:%23FF9A1B;'%20width='25.991'%20height='104.491'/%3e%3crect%20x='150.846'%20y='79.064'%20style='fill:%23FF9A1B;'%20width='25.991'%20height='104.491'/%3e%3cg%3e%3cg%3e%3cpath%20style='fill:%23FFF5F5;'%20d='M58.427,183.556H10.302C4.612,183.556,0,178.943,0,173.254v-48.125h58.427V183.556z'/%3e%3crect%20x='46.065'%20y='79.064'%20style='fill:%23FFF5F5;'%20width='64.608'%20height='58.427'/%3e%3cpath%20style='fill:%23756F6F;'%20d='M52.246,131.31H0V89.366c0-5.69,4.612-10.302,10.302-10.302h41.944V131.31z'/%3e%3crect%20x='98.31'%20y='125.129'%20style='fill:%23FFF5F5;'%20width='58.427'%20height='58.427'/%3e%3crect%20x='104.491'%20y='79.064'%20style='fill:%23756F6F;'%20width='52.246'%20height='52.246'/%3e%3crect%20x='52.246'%20y='131.31'%20style='fill:%23756F6F;'%20width='52.246'%20height='52.246'/%3e%3c/g%3e%3cg%3e%3crect%20x='401.327'%20y='79.064'%20style='fill:%23FFF5F5;'%20width='64.608'%20height='58.427'/%3e%3crect%20x='355.263'%20y='125.129'%20style='fill:%23FFF5F5;'%20width='58.427'%20height='58.427'/%3e%3crect%20x='355.263'%20y='79.064'%20style='fill:%23756F6F;'%20width='52.246'%20height='52.246'/%3e%3cpath%20style='fill:%23FFF5F5;'%20d='M501.698,183.556h-48.125v-58.427H512v48.125C512,178.943,507.388,183.556,501.698,183.556z'/%3e%3cpath%20style='fill:%23756F6F;'%20d='M512,131.31h-52.246V79.064h41.944c5.69,0,10.302,4.612,10.302,10.302V131.31z'/%3e%3crect%20x='407.509'%20y='131.31'%20style='fill:%23756F6F;'%20width='52.246'%20height='52.246'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3cpath%20style='fill:%23FFF5F5;'%20d='M267.261,144.371h-2.679v-33.849c0-2.678-1.387-5.164-3.665-6.572%20c-2.277-1.407-5.121-1.536-7.517-0.338l-12.115,6.057c-3.817,1.908-5.364,6.549-3.455,10.366%20c1.908,3.816,6.548,5.365,10.366,3.455l0.933-0.466v21.348h-2.679c-4.267,0-7.726,3.459-7.726,7.726%20c0,4.267,3.459,7.726,7.726,7.726h20.811c4.268,0,7.726-3.459,7.726-7.726C274.987,147.83,271.528,144.371,267.261,144.371z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e")},null,8,BN)])):ji("",!0),p.value?(Ei(),Ii("button",{key:1,onClick:P},[Ri("img",{src:Yt("data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20version='1.1'%20id='Uploaded%20to%20svgrepo.com'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='800px'%20height='800px'%20viewBox='0%200%2032%2032'%20xml:space='preserve'%3e%3cstyle%20type='text/css'%3e%20.avocado_zeventien{fill:%23CC4121;}%20.avocado_een{fill:%23231F20;}%20.avocado_zes{fill:%23FFFAEE;}%20.st0{fill:%23A3AEB5;}%20.st1{fill:%23AF9480;}%20.st2{fill:%23DBD2C1;}%20.st3{fill:%23788287;}%20.st4{fill:%23EAD13F;}%20.st5{fill:%23C3CC6A;}%20.st6{fill:%23D1712A;}%20.st7{fill:%23E0A838;}%20.st8{fill:%23716558;}%20.st9{fill:%236F9B45;}%20.st10{fill:%230E608E;}%20.st11{fill:%23E598A3;}%20.st12{fill:%23FFFAEE;}%20.st13{fill:%233D3935;}%20.st14{fill:%23248EBC;}%20.st15{fill:%23BF63C1;}%20%3c/style%3e%3cg%3e%3cpolygon%20class='avocado_zeventien'%20points='10.408,29.5%202.5,21.592%202.5,10.408%2010.408,2.5%2021.592,2.5%2029.5,10.408%2029.5,21.592%2021.592,29.5%20'/%3e%3cpath%20class='avocado_zes'%20d='M21.414,12.707L18.121,16l3.293,3.293l-2.121,2.121L16,18.121l-3.293,3.293l-2.121-2.121%20L13.879,16l-3.293-3.293l2.121-2.121L16,13.879l3.293-3.293L21.414,12.707z%20M21.592,2.5H10.408L2.5,10.408v11.184l7.908,7.908%20h11.184l7.908-7.908V10.408L21.592,2.5z%20M28,20.97L20.97,28H11.03L4,20.97v-9.941L11.03,4h9.941L28,11.029V20.97z'/%3e%3cpath%20class='avocado_een'%20d='M19.293,9.879L16,13.172l-3.293-3.293l-2.828,2.828L13.172,16l-3.293,3.293l2.828,2.828%20L16,18.828l3.293,3.293l2.828-2.828L18.828,16l3.293-3.293L19.293,9.879z%20M17.414,16l3.293,3.293l-1.414,1.414L16,17.414%20l-3.293,3.293l-1.414-1.414L14.586,16l-3.293-3.293l1.414-1.414L16,14.586l3.293-3.293l1.414,1.414L17.414,16z%20M21.799,2H10.201%20L2,10.201v11.598L10.201,30h11.598L30,21.799V10.201L21.799,2z%20M29,21.385L21.385,29h-10.77L3,21.385v-10.77L10.615,3h10.77%20L29,10.615V21.385z'/%3e%3c/g%3e%3c/svg%3e")},null,8,zN)])):ji("",!0),h.value&&!p.value?(Ei(),Ii("button",{key:2,onClick:Y},[Ri("img",{src:Yt("data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='-0.01%20-0.008%20100.016%20100.016'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill='%2323475F'%20d='M88.555-.008H83v.016a2%202%200%200%201-2%202H19a2%202%200%200%201-2-2v-.016H4a4%204%200%200%200-4%204v92.016a4%204%200%200%200%204%204h92a4%204%200%200%200%204-4V11.517c.049-.089-11.436-11.454-11.445-11.525z'/%3e%3cpath%20fill='%231C3C50'%20d='M81.04%2053.008H18.96a2%202%200%200%200-2%202v45h66.08v-45c0-1.106-.895-2-2-2zm-61.957-10h61.834a2%202%200%200%200%202-2V.547A1.993%201.993%200%200%201%2081%202.007H19c-.916%200-1.681-.62-1.917-1.46v40.46a2%202%200%200%200%202%202.001z'/%3e%3cpath%20fill='%23EBF0F1'%20d='M22%2055.977h56a2%202%200%200%201%202%202v37.031a2%202%200%200%201-2%202H22c-1.104%200-2-.396-2-1.5V57.977a2%202%200%200%201%202-2z'/%3e%3cpath%20fill='%23BCC4C8'%20d='M25%2077.008h50v1H25v-1zm0%2010h50v1H25v-1z'/%3e%3cpath%20fill='%231C3C50'%20d='M7%2084.008h3a2%202%200%200%201%202%202v3a2%202%200%200%201-2%202H7a2%202%200%200%201-2-2v-3a2%202%200%200%201%202-2zm83%200h3a2%202%200%200%201%202%202v3a2%202%200%200%201-2%202h-3a2%202%200%200%201-2-2v-3a2%202%200%200%201%202-2z'/%3e%3cpath%20fill='%23BCC4C8'%20d='M37%201.981v36.026a2%202%200%200%200%202%202h39a2%202%200%200%200%202-2V1.981c0%20.007-42.982.007-43%200zm37%2029.027a2%202%200%200%201-2%202h-6a2%202%200%200%201-2-2V10.981a2%202%200%200%201%202-2h6a2%202%200%200%201%202%202v20.027z'/%3e%3cpath%20fill='%23FF9D00'%20d='M78%2055.977H22a2%202%200%200%200-2%202v10.031h60V57.977a2%202%200%200%200-2-2z'/%3e%3c/svg%3e")},null,8,qN)])):ji("",!0)]),h.value?(Ei(),Ii("table",GN,[Ri("tr",{class:ve(["nickname",[x.value?"highlight":""]])},[HN,Ri("td",null,[Ri("p",null,ke(Yt(b)),1)]),Ri("td",null,[!0===Yt(E)?(Ei(),Ii("img",{key:0,src:Yt(_N)},null,8,WN)):ji("",!0)])],2),Ri("tr",{class:ve(["nickname",[x.value?"":"highlight"]])},[KN,Ri("td",null,[Ri("p",null,ke(Yt(w)),1)]),Ri("td",null,[!1===Yt(E)?(Ei(),Ii("img",{key:0,src:Yt(_N)},null,8,QN)):ji("",!0)])],2)])):ji("",!0)])])}}},$N=[{path:"/",component:hA},{path:"/create-room",component:gA},{path:"/join-room",component:CA},{path:"/game",component:uA(YN,[["__scopeId","data-v-813c6d66"]])}],XN=function(e){var t=yu(e.routes,e),n=e.parseQuery||xu,r=e.stringifyQuery||Su,i=e.history,a=Pu(),o=Pu(),u=Pu(),s=Wt(au),l=au;co&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");var c,f=ho.bind(null,(function(e){return""+e})),h=ho.bind(null,Do),d=ho.bind(null,Po);function v(e,a){if(a=fo({},a||s.value),"string"==typeof e){var o=jo(n,e,a.path),u=t.resolve({path:o.path},a),l=i.createHref(o.fullPath);return fo(o,u,{params:d(u.params),hash:Po(o.hash),redirectedFrom:void 0,href:l})}var c;if(null!=e.path)c=fo({},e,{path:jo(n,e.path,a.path).path});else{var v=fo({},e.params);for(var p in v)null==v[p]&&delete v[p];c=fo({},e,{params:h(v)}),a.params=h(a.params)}var m=t.resolve(c,a),g=e.hash||"";m.params=f(d(m.params));var y,k,_,b,w=(y=r,k=fo({},e,{hash:(b=g,Lo(b).replace(So,"{").replace(To,"}").replace(Co,"^")),path:m.path}),_=k.query?y(k.query):"",k.path+(_&&"?")+_+(k.hash||"")),E=i.createHref(w);return fo({fullPath:w,hash:g,query:r===Su?Iu(e.query):e.query||{}},m,{redirectedFrom:void 0,href:E})}function p(e){return"string"==typeof e?jo(n,e,s.value.path):fo({},e)}function m(e,t){if(l!==e)return uu(8,{from:t,to:e})}function g(e){return k(e)}function y(e){var t=e.matched[e.matched.length-1];if(t&&t.redirect){var n=t.redirect,r="function"==typeof n?n(e):n;return"string"==typeof r&&((r=r.includes("?")||r.includes("#")?r=p(r):{path:r}).params={}),fo({query:e.query,hash:e.hash,params:null!=r.path?{}:e.params},r)}}function k(e,t){var n=l=v(e),i=s.value,a=e.state,o=e.force,u=!0===e.replace,c=y(n);if(c)return k(fo(p(c),{state:"object"===E(c)?fo({},a,c.state):a,force:o,replace:u}),t||n);var f,h=n;return h.redirectedFrom=t,!o&&function(e,t,n){var r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&zo(t.matched[r],n.matched[i])&&qo(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}(r,i,n)&&(f=uu(16,{to:h,from:i}),R(i,i,!0,!1)),(f?Promise.resolve(f):x(h,i)).catch((function(e){return su(e)?su(e,2)?e:P(e):D(e,h,i)})).then((function(e){if(e){if(su(e,2))return k(fo({replace:u},p(e.to),{state:"object"===E(e.to)?fo({},a,e.to.state):a,force:o}),t||h)}else e=I(h,i,!0,u,a);return S(h,i,e),e}))}function _(e,t){var n=m(e,t);return n?Promise.reject(n):Promise.resolve()}function w(e){var t=F.values().next().value;return t&&"function"==typeof t.runWithContext?t.runWithContext(e):e()}function x(e,t){var n,r=function(e,t){for(var n=[],r=[],i=[],a=Math.max(t.matched.length,e.matched.length),o=function(){var a=t.matched[u];a&&(e.matched.find((function(e){return zo(e,a)}))?r.push(a):n.push(a));var o=e.matched[u];o&&(t.matched.find((function(e){return zo(e,o)}))||i.push(o))},u=0;u<a;u++)o();return[n,r,i]}(e,t),i=b(r,3),u=i[0],s=i[1],l=i[2];n=Mu(u.reverse(),"beforeRouteLeave",e,t);var c,f=C(u);try{for(f.s();!(c=f.n()).done;){c.value.leaveGuards.forEach((function(r){n.push(Ru(r,e,t))}))}}catch(d){f.e(d)}finally{f.f()}var h=_.bind(null,e,t);return n.push(h),V(n).then((function(){n=[];var r,i=C(a.list());try{for(i.s();!(r=i.n()).done;){var o=r.value;n.push(Ru(o,e,t))}}catch(d){i.e(d)}finally{i.f()}return n.push(h),V(n)})).then((function(){n=Mu(s,"beforeRouteUpdate",e,t);var r,i=C(s);try{for(i.s();!(r=i.n()).done;){r.value.updateGuards.forEach((function(r){n.push(Ru(r,e,t))}))}}catch(d){i.e(d)}finally{i.f()}return n.push(h),V(n)})).then((function(){n=[];var r,i=C(l);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.beforeEnter)if(po(a.beforeEnter)){var o,u=C(a.beforeEnter);try{for(u.s();!(o=u.n()).done;){var s=o.value;n.push(Ru(s,e,t))}}catch(d){u.e(d)}finally{u.f()}}else n.push(Ru(a.beforeEnter,e,t))}}catch(d){i.e(d)}finally{i.f()}return n.push(h),V(n)})).then((function(){return e.matched.forEach((function(e){return e.enterCallbacks={}})),(n=Mu(l,"beforeRouteEnter",e,t,w)).push(h),V(n)})).then((function(){n=[];var r,i=C(o.list());try{for(i.s();!(r=i.n()).done;){var a=r.value;n.push(Ru(a,e,t))}}catch(d){i.e(d)}finally{i.f()}return n.push(h),V(n)})).catch((function(e){return su(e,8)?e:Promise.reject(e)}))}function S(e,t,n){u.list().forEach((function(r){return w((function(){return r(e,t,n)}))}))}function I(e,t,n,r,a){var o=m(e,t);if(o)return o;var u=t===au,l=co?history.state:{};n&&(r||u?i.replace(e.fullPath,fo({scroll:u&&l&&l.scroll},a)):i.push(e.fullPath,a)),s.value=e,R(e,t,n,u),P()}function T(){c||(c=i.listen((function(e,t,n){if(U.listening){var r=v(e),a=y(r);if(a)k(fo(a,{replace:!0}),r).catch(vo);else{l=r;var o,u,c=s.value;co&&(o=$o(c.fullPath,n.delta),u=Qo(),Xo.set(o,u)),x(r,c).catch((function(e){return su(e,12)?e:su(e,2)?(k(e.to,r).then((function(e){su(e,20)&&!n.delta&&n.type===Ro.pop&&i.go(-1,!1)})).catch(vo),Promise.reject()):(n.delta&&i.go(-n.delta,!1),D(e,r,c))})).then((function(e){(e=e||I(r,c,!1))&&(n.delta&&!su(e,8)?i.go(-n.delta,!1):n.type===Ro.pop&&su(e,20)&&i.go(-1,!1)),S(r,c,e)})).catch(vo)}}})))}var A,L=Pu(),N=Pu();function D(e,t,n){P(e);var r=N.list();return r.length?r.forEach((function(r){return r(e,t,n)})):console.error(e),Promise.reject(e)}function P(e){return A||(A=!e,T(),L.list().forEach((function(t){var n=b(t,2),r=n[0],i=n[1];return e?i(e):r()})),L.reset()),e}function R(t,n,r,i){var a=e.scrollBehavior;if(!co||!a)return Promise.resolve();var o,u,s=!r&&(o=$o(t.fullPath,0),u=Xo.get(o),Xo.delete(o),u)||(i||!r)&&history.state&&history.state.scroll||null;return pn().then((function(){return a(t,n,s)})).then((function(e){return e&&Yo(e)})).catch((function(e){return D(e,t,n)}))}var M,O=function(e){return i.go(e)},F=new Set,U={currentRoute:s,listening:!0,addRoute:function(e,n){var r,i;return nu(e)?(r=t.getRecordMatcher(e),i=n):i=e,t.addRoute(i,r)},removeRoute:function(e){var n=t.getRecordMatcher(e);n&&t.removeRoute(n)},hasRoute:function(e){return!!t.getRecordMatcher(e)},getRoutes:function(){return t.getRoutes().map((function(e){return e.record}))},resolve:v,options:e,push:g,replace:function(e){return g(fo(p(e),{replace:!0}))},go:O,back:function(){return O(-1)},forward:function(){return O(1)},beforeEach:a.add,beforeResolve:o.add,afterEach:u.add,onError:N.add,isReady:function(){return A&&s.value!==au?Promise.resolve():new Promise((function(e,t){L.add([e,t])}))},install:function(e){e.component("RouterLink",Fu),e.component("RouterView",zu),e.config.globalProperties.$router=this,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:function(){return Yt(s)}}),co&&!M&&s.value===au&&(M=!0,g(i.location).catch((function(e){})));var t={},n=function(e){Object.defineProperty(t,e,{get:function(){return s.value[e]},enumerable:!0})};for(var r in au)n(r);e.provide(Lu,this),e.provide(Nu,Lt(t)),e.provide(Du,s);var a=e.unmount;F.add(e),e.unmount=function(){F.delete(e),F.size<1&&(l=au,c&&c(),c=null,s.value=au,M=!1,A=!1),a()}}};function V(e){return e.reduce((function(e,t){return e.then((function(){return w(t)}))}),Promise.resolve())}return U}({history:((sN=location.host?sN||location.pathname+location.search:"").includes("#")||(sN+="#"),tu(sN)),routes:$N}),JN=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=__VUE_I18N_LEGACY_API__&&us(e.legacy)?e.legacy:__VUE_I18N_LEGACY_API__,n=!us(e.globalInjection)||e.globalInjection,r=!__VUE_I18N_LEGACY_API__||!t||!!e.allowComposition,i=new Map,a=b(function(e,t,n){var r=Ee(),i=__VUE_I18N_LEGACY_API__&&t?r.run((function(){return Uc(e)})):r.run((function(){return Fc(e)}));if(null==i)throw kc(yc.UNEXPECTED_ERROR);return[r,i]}(e,t),2),u=a[0],l=a[1],c=Wu(""),f={get mode(){return __VUE_I18N_LEGACY_API__&&t?"legacy":"composition"},get allowComposition(){return r},install:function(e){var r=arguments;return s(o().mark((function i(){var a,u,s,h,d,v;return o().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:for(e.__VUE_I18N_SYMBOL__=c,e.provide(e.__VUE_I18N_SYMBOL__,f),a=r.length,u=new Array(a>1?a-1:0),s=1;s<a;s++)u[s-1]=r[s];hs(u[0])&&(h=u[0],f.__composerExtend=h.__composerExtend,f.__vueI18nExtend=h.__vueI18nExtend),d=null,!t&&n&&(d=af(e,f.global)),__VUE_I18N_FULL_INSTALL__&&$c.apply(void 0,[e,f].concat(u)),__VUE_I18N_LEGACY_API__&&t&&e.mixin(Xc(l,l.__composer,f)),v=e.unmount,e.unmount=function(){d&&d(),f.dispose(),v()};case 10:case"end":return i.stop()}}),i)})))()},get global(){return l},dispose:function(){u.stop()},__instances:i,__getInstance:function(e){return i.get(e)||null},__setInstance:function(e,t){i.set(e,t)},__deleteInstance:function(e){i.delete(e)}};return f}({fallbackLocale:"en",legacy:!1,locale:(navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.userLanguage||navigator.language||navigator.browserLanguage||"en").substring(0,2),messages:bv}),ZN=function(){var e=Ee(!0),t=e.run((function(){return Ht({})})),n=[],r=[],i=Ut({install:function(e){cf(i),i._a=e,e.provide(ff,i),e.config.globalProperties.$pinia=i,r.forEach((function(e){return n.push(e)})),r=[]},use:function(e){return this._a?n.push(e):r.push(e),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}();(function(){var e,t=(e=so||(so=hi(lo))).createApp.apply(e,arguments),n=t.mount;return t.mount=function(e){var r=function(e){if(j(e)){return document.querySelector(e)}return e}(e);if(r){var i=t._component;V(i)||i.render||i.template||(i.template=r.innerHTML),r.innerHTML="";var a=n(r,!1,function(e){if(e instanceof SVGElement)return"svg";if("function"==typeof MathMLElement&&e instanceof MathMLElement)return"mathml"}(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),a}},t})(_v).use(vv).use(ZN).use(XN).use(JN).use(qf).mount("#app")}}}))}();
